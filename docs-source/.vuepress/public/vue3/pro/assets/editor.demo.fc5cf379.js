
/**
 * 由 Fantastic-admin 提供技术支持
 * https://hooray.gitee.io/fantastic-admin/
 * Powered by Fantastic-admin
 * https://hooray.github.io/fantastic-admin/
 */
    
import{a7 as kB,w as AB,aj as NU,ak as IU,a0 as CI,o as d$,a2 as $U,al as zU,am as LU,af as m$,k as HU,l as g$,I as h$,s as SI,q as p$,n as VU,J as UU}from"./vendor.1c754356.js";import{_ as b$}from"./plugin-vue_export-helper.5a098b48.js";import{_ as WU}from"./index.8e3c05d1.js";var y$={exports:{}};(function(Nt){(function(){var on=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var n=typeof e;return n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},vn=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},or=function(e,n){var a=Array.prototype.slice.call(e);return a.sort(n)},Ut=function(e,n){return Vn(function(a,i){return e.eq(n(a),n(i))})},Vn=function(e){return{eq:e}},Sn=Vn(function(e,n){return e===n}),An=Sn,jt=function(e){return Vn(function(n,a){if(n.length!==a.length)return!1;for(var i=n.length,s=0;s<i;s++)if(!e.eq(n[s],a[s]))return!1;return!0})},ia=function(e,n){return Ut(jt(e),function(a){return or(a,n)})},Fr=function(e){return Vn(function(n,a){var i=Object.keys(n),s=Object.keys(a);if(!ia(An).eq(i,s))return!1;for(var f=i.length,g=0;g<f;g++){var b=i[g];if(!e.eq(n[b],a[b]))return!1}return!0})},un=Vn(function(e,n){if(e===n)return!0;var a=on(e),i=on(n);return a!==i?!1:vn(a)?e===n:a==="array"?jt(un).eq(e,n):a==="object"?Fr(un).eq(e,n):!1}),br=function(e){var n=typeof e;return e===null?"null":n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},mr=function(e){return function(n){return br(n)===e}},it=function(e){return function(n){return typeof n===e}},He=function(e){return function(n){return e===n}},wn=mr("string"),wt=mr("object"),Un=mr("array"),re=He(null),Te=it("boolean"),qe=He(void 0),gt=function(e){return e==null},pt=function(e){return!gt(e)},bt=it("function"),rn=it("number"),ut=function(){},Rr=function(e,n){return function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];return e(n.apply(null,a))}},me=function(e,n){return function(a){return e(n(a))}},Y=function(e){return function(){return e}},Dn=function(e){return e},Aa=function(e,n){return e===n};function At(e){for(var n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];return function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var f=n.concat(i);return e.apply(null,f)}}var Oa=function(e){return function(n){return!e(n)}},Nn=function(e){return function(){throw new Error(e)}},D=function(e){return e()},na=function(e){e()},_t=Y(!1),Kt=Y(!0),Ro=function(){return Go},Go=function(){var e=function(i){return i()},n=Dn,a={fold:function(i,s){return i()},isSome:_t,isNone:Kt,getOr:n,getOrThunk:e,getOrDie:function(i){throw new Error(i||"error: getOrDie called on none.")},getOrNull:Y(null),getOrUndefined:Y(void 0),or:n,orThunk:e,map:Ro,each:ut,bind:Ro,exists:_t,forall:Kt,filter:function(){return Ro()},toArray:function(){return[]},toString:Y("none()")};return a}(),ir=function(e){var n=Y(e),a=function(){return s},i=function(f){return f(e)},s={fold:function(f,g){return g(e)},isSome:Kt,isNone:_t,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:a,orThunk:a,map:function(f){return ir(f(e))},each:function(f){f(e)},bind:i,exists:i,forall:i,filter:function(f){return f(e)?s:Go},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return s},la=function(e){return e==null?Go:ir(e)},te={some:ir,none:Ro,from:la},qa=Array.prototype.slice,yt=Array.prototype.indexOf,Jt=Array.prototype.push,It=function(e,n){return yt.call(e,n)},$t=function(e,n){var a=It(e,n);return a===-1?te.none():te.some(a)},rt=function(e,n){return It(e,n)>-1},an=function(e,n){for(var a=0,i=e.length;a<i;a++){var s=e[a];if(n(s,a))return!0}return!1},kn=function(e,n){for(var a=e.length,i=new Array(a),s=0;s<a;s++){var f=e[s];i[s]=n(f,s)}return i},Ze=function(e,n){for(var a=0,i=e.length;a<i;a++){var s=e[a];n(s,a)}},Wn=function(e,n){for(var a=e.length-1;a>=0;a--){var i=e[a];n(i,a)}},ma=function(e,n){for(var a=[],i=[],s=0,f=e.length;s<f;s++){var g=e[s],b=n(g,s)?a:i;b.push(g)}return{pass:a,fail:i}},dn=function(e,n){for(var a=[],i=0,s=e.length;i<s;i++){var f=e[i];n(f,i)&&a.push(f)}return a},qr=function(e,n,a){return Wn(e,function(i,s){a=n(a,i,s)}),a},Ur=function(e,n,a){return Ze(e,function(i,s){a=n(a,i,s)}),a},On=function(e,n,a){for(var i=0,s=e.length;i<s;i++){var f=e[i];if(n(f,i))return te.some(f);if(a(f,i))break}return te.none()},ra=function(e,n){return On(e,n,_t)},Po=function(e,n){for(var a=0,i=e.length;a<i;a++){var s=e[a];if(n(s,a))return te.some(a)}return te.none()},Ko=function(e){for(var n=[],a=0,i=e.length;a<i;++a){if(!Un(e[a]))throw new Error("Arr.flatten item "+a+" was not an array, input: "+e);Jt.apply(n,e[a])}return n},vi=function(e,n){return Ko(kn(e,n))},No=function(e,n){for(var a=0,i=e.length;a<i;++a){var s=e[a];if(n(s,a)!==!0)return!1}return!0},Ga=function(e){var n=qa.call(e,0);return n.reverse(),n},Ka=function(e,n){return dn(e,function(a){return!rt(n,a)})},Xo=function(e,n){for(var a={},i=0,s=e.length;i<s;i++){var f=e[i];a[String(f)]=n(f,i)}return a},Ba=function(e,n){var a=qa.call(e,0);return a.sort(n),a},vo=function(e,n){return n>=0&&n<e.length?te.some(e[n]):te.none()},Ca=function(e){return vo(e,0)},Yo=function(e){return vo(e,e.length-1)},mn=bt(Array.from)?Array.from:function(e){return qa.call(e)},Yr=function(e,n){for(var a=0;a<e.length;a++){var i=n(e[a],a);if(i.isSome())return i}return te.none()},mo=Object.keys,ti=Object.hasOwnProperty,ur=function(e,n){for(var a=mo(e),i=0,s=a.length;i<s;i++){var f=a[i],g=e[f];n(g,f)}},eo=function(e,n){return Jo(e,function(a,i){return{k:i,v:n(a,i)}})},Jo=function(e,n){var a={};return ur(e,function(i,s){var f=n(i,s);a[f.k]=f.v}),a},Qi=function(e){return function(n,a){e[a]=n}},Io=function(e,n,a,i){var s={};return ur(e,function(f,g){(n(f,g)?a:i)(f,g)}),s},Zo=function(e,n){var a={},i={};return Io(e,n,Qi(a),Qi(i)),{t:a,f:i}},di=function(e,n){var a={};return Io(e,n,Qi(a),ut),a},Fi=function(e,n){var a=[];return ur(e,function(i,s){a.push(n(i,s))}),a},Br=function(e){return Fi(e,Dn)},ua=function(e,n){return cr(e,n)?te.from(e[n]):te.none()},cr=function(e,n){return ti.call(e,n)},to=function(e,n){return cr(e,n)&&e[n]!==void 0&&e[n]!==null},$r=function(e,n,a){return a===void 0&&(a=un),Fr(a).eq(e,n)},go=Array.isArray,Sa=function(e){if(go(e))return e;for(var n=[],a=0,i=e.length;a<i;a++)n[a]=e[a];return n},Gr=function(e,n,a){var i,s;if(!e)return!1;if(a=a||e,e.length!==void 0){for(i=0,s=e.length;i<s;i++)if(n.call(a,e[i],i,e)===!1)return!1}else for(i in e)if(cr(e,i)&&n.call(a,e[i],i,e)===!1)return!1;return!0},$o=function(e,n){var a=[];return Gr(e,function(i,s){a.push(n(i,s,e))}),a},To=function(e,n){var a=[];return Gr(e,function(i,s){(!n||n(i,s,e))&&a.push(i)}),a},zo=function(e,n){if(e){for(var a=0,i=e.length;a<i;a++)if(e[a]===n)return a}return-1},mi=function(e,n,a,i){for(var s=qe(a)?e[0]:a,f=0;f<e.length;f++)s=n.call(i,s,e[f],f);return s},pa=function(e,n,a){var i,s;for(i=0,s=e.length;i<s;i++)if(n.call(a,e[i],i,e))return i;return-1},Ha=function(e){return e[e.length-1]},pn=function(){return pn=Object.assign||function(n){for(var a,i=1,s=arguments.length;i<s;i++){a=arguments[i];for(var f in a)Object.prototype.hasOwnProperty.call(a,f)&&(n[f]=a[f])}return n},pn.apply(this,arguments)};function Cn(e,n){var a={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&n.indexOf(i)<0&&(a[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)n.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(a[i[s]]=e[i[s]]);return a}function Xn(e,n,a){if(a||arguments.length===2)for(var i=0,s=n.length,f;i<s;i++)(f||!(i in n))&&(f||(f=Array.prototype.slice.call(n,0,i)),f[i]=n[i]);return e.concat(f||Array.prototype.slice.call(n))}var Na=function(e){var n=!1,a;return function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return n||(n=!0,a=e.apply(null,i)),a}},yu=function(e,n,a,i){var s=e.isiOS()&&/ipad/i.test(a)===!0,f=e.isiOS()&&!s,g=e.isiOS()||e.isAndroid(),b=g||i("(pointer:coarse)"),C=s||!f&&g&&i("(min-device-width:768px)"),k=f||g&&!C,_=n.isSafari()&&e.isiOS()&&/safari/i.test(a)===!1,M=!k&&!C&&!_;return{isiPad:Y(s),isiPhone:Y(f),isTablet:Y(C),isPhone:Y(k),isTouch:Y(b),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:Y(_),isDesktop:Y(M)}},gi=function(e,n){for(var a=0;a<e.length;a++){var i=e[a];if(i.test(n))return i}},Pi=function(e,n){var a=gi(e,n);if(!a)return{major:0,minor:0};var i=function(s){return Number(n.replace(a,"$"+s))};return Xa(i(1),i(2))},gr=function(e,n){var a=String(n).toLowerCase();return e.length===0?hi():Pi(e,a)},hi=function(){return Xa(0,0)},Xa=function(e,n){return{major:e,minor:n}},ee={nu:Xa,detect:gr,unknown:hi},we=function(e,n){return Yr(n.brands,function(a){var i=a.brand.toLowerCase();return ra(e,function(s){var f;return i===((f=s.brand)===null||f===void 0?void 0:f.toLowerCase())}).map(function(s){return{current:s.name,version:ee.nu(parseInt(a.version,10),0)}})})},Oe=function(e,n){var a=String(n).toLowerCase();return ra(e,function(i){return i.search(a)})},Fe=function(e,n){return Oe(e,n).map(function(a){var i=ee.detect(a.versionRegexes,n);return{current:a.name,version:i}})},Dt=function(e,n){return Oe(e,n).map(function(a){var i=ee.detect(a.versionRegexes,n);return{current:a.name,version:i}})},G=function(e,n){return e.substring(n)},le=function(e,n,a){return n===""||e.length>=n.length&&e.substr(a,a+n.length)===n},Be=function(e,n){return at(e,n)?G(e,n.length):e},Le=function(e,n){return e.indexOf(n)!==-1},at=function(e,n){return le(e,n,0)},Rt=function(e){return function(n){return n.replace(e,"")}},Zt=Rt(/^\s+|\s+$/g),Rn=Rt(/^\s+/g),Yn=Rt(/\s+$/g),sr=function(e){return e.length>0},Wr=function(e){return!sr(e)},Da=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,et=function(e){return function(n){return Le(n,e)}},Jr=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return Le(e,"edge/")&&Le(e,"chrome")&&Le(e,"safari")&&Le(e,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Da],search:function(e){return Le(e,"chrome")&&!Le(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return Le(e,"msie")||Le(e,"trident")}},{name:"Opera",versionRegexes:[Da,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:et("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:et("firefox")},{name:"Safari",versionRegexes:[Da,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(Le(e,"safari")||Le(e,"mobile/"))&&Le(e,"applewebkit")}}],Jn=[{name:"Windows",search:et("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return Le(e,"iphone")||Le(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:et("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:et("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:et("linux"),versionRegexes:[]},{name:"Solaris",search:et("sunos"),versionRegexes:[]},{name:"FreeBSD",search:et("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:et("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Ar={browsers:Y(Jr),oses:Y(Jn)},io="Edge",wr="Chrome",sc="IE",su="Opera",lu="Firefox",ni="Safari",ie=function(){return Se({current:void 0,version:ee.unknown()})},Se=function(e){var n=e.current,a=e.version,i=function(s){return function(){return n===s}};return{current:n,version:a,isEdge:i(io),isChrome:i(wr),isIE:i(sc),isOpera:i(su),isFirefox:i(lu),isSafari:i(ni)}},Ne={unknown:ie,nu:Se,edge:Y(io),chrome:Y(wr),ie:Y(sc),opera:Y(su),firefox:Y(lu),safari:Y(ni)},De="Windows",z="iOS",ce="Android",ke="Linux",Ue="OSX",Gt="Solaris",Mt="FreeBSD",Xt="ChromeOS",$=function(){return ue({current:void 0,version:ee.unknown()})},ue=function(e){var n=e.current,a=e.version,i=function(s){return function(){return n===s}};return{current:n,version:a,isWindows:i(De),isiOS:i(z),isAndroid:i(ce),isOSX:i(Ue),isLinux:i(ke),isSolaris:i(Gt),isFreeBSD:i(Mt),isChromeOS:i(Xt)}},Ce={unknown:$,nu:ue,windows:Y(De),ios:Y(z),android:Y(ce),linux:Y(ke),osx:Y(Ue),solaris:Y(Gt),freebsd:Y(Mt),chromeos:Y(Xt)},ze=function(e,n,a){var i=Ar.browsers(),s=Ar.oses(),f=n.bind(function(C){return we(i,C)}).orThunk(function(){return Fe(i,e)}).fold(Ne.unknown,Ne.nu),g=Dt(s,e).fold(Ce.unknown,Ce.nu),b=yu(g,f,e,a);return{browser:f,os:g,deviceType:b}},Re={detect:ze},xt=function(e){return window.matchMedia(e).matches},en=Na(function(){return Re.detect(navigator.userAgent,te.from(navigator.userAgentData),xt)}),fn=function(){return en()},tr=navigator.userAgent,ga=fn(),fa=ga.browser,Va=ga.os,Pr=ga.deviceType,ba=/WebKit/.test(tr)&&!fa.isEdge(),Ia="FormData"in window&&"FileReader"in window&&"URL"in window&&!!URL.createObjectURL,ju=tr.indexOf("Windows Phone")!==-1,Ln={opera:fa.isOpera(),webkit:ba,ie:fa.isIE()||fa.isEdge()?fa.version.major:!1,gecko:fa.isFirefox(),mac:Va.isOSX()||Va.isiOS(),iOS:Pr.isiPad()||Pr.isiPhone(),android:Va.isAndroid(),contentEditable:!0,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:!0,range:window.getSelection&&"Range"in window,documentMode:fa.isIE()?document.documentMode||7:10,fileApi:Ia,ceFalse:!0,cacheSuffix:null,container:null,experimentalShadowDom:!1,canHaveCSP:!fa.isIE(),desktop:Pr.isDesktop(),windowsPhone:ju,browser:{current:fa.current,version:fa.version,isChrome:fa.isChrome,isEdge:fa.isEdge,isFirefox:fa.isFirefox,isIE:fa.isIE,isOpera:fa.isOpera,isSafari:fa.isSafari},os:{current:Va.current,version:Va.version,isAndroid:Va.isAndroid,isChromeOS:Va.isChromeOS,isFreeBSD:Va.isFreeBSD,isiOS:Va.isiOS,isLinux:Va.isLinux,isOSX:Va.isOSX,isSolaris:Va.isSolaris,isWindows:Va.isWindows},deviceType:{isDesktop:Pr.isDesktop,isiPad:Pr.isiPad,isiPhone:Pr.isiPhone,isPhone:Pr.isPhone,isTablet:Pr.isTablet,isTouch:Pr.isTouch,isWebView:Pr.isWebView}},_f=/^\s*|\s*$/g,hr=function(e){return e==null?"":(""+e).replace(_f,"")},ho=function(e,n){return n?n==="array"&&go(e)?!0:typeof e===n:e!==void 0},ql=function(e,n,a){var i;for(e=e||[],n=n||",",typeof e=="string"&&(e=e.split(n)),a=a||{},i=e.length;i--;)a[e[i]]={};return a},nt=cr,po=function(e,n,a){var i=this,s,f,g,b=0;e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e);var C=e[3].match(/(^|\.)(\w+)$/i)[2],k=i.createNS(e[3].replace(/\.\w+$/,""),a);if(!k[C]){if(e[2]==="static"){k[C]=n,this.onCreate&&this.onCreate(e[2],e[3],k[C]);return}n[C]||(n[C]=function(){},b=1),k[C]=n[C],i.extend(k[C].prototype,n),e[5]&&(s=i.resolve(e[5]).prototype,f=e[5].match(/\.(\w+)$/i)[1],g=k[C],b?k[C]=function(){return s[f].apply(this,arguments)}:k[C]=function(){return this.parent=s[f],g.apply(this,arguments)},k[C].prototype[C]=k[C],i.each(s,function(_,M){k[C].prototype[M]=s[M]}),i.each(n,function(_,M){s[M]?k[C].prototype[M]=function(){return this.parent=s[M],_.apply(this,arguments)}:M!==C&&(k[C].prototype[M]=_)})),i.each(n.static,function(_,M){k[C][M]=_})}},rs=function(e){for(var n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];for(var i=0;i<n.length;i++){var s=n[i];for(var f in s)if(cr(s,f)){var g=s[f];g!==void 0&&(e[f]=g)}}return e},In=function(e,n,a,i){i=i||this,e&&(a&&(e=e[a]),Gr(e,function(s,f){if(n.call(i,s,f,a)===!1)return!1;In(s,n,a,i)}))},Mf=function(e,n){var a,i;for(n=n||window,e=e.split("."),a=0;a<e.length;a++)i=e[a],n[i]||(n[i]={}),n=n[i];return n},wu=function(e,n){var a,i;for(n=n||window,e=e.split("."),a=0,i=e.length;a<i&&(n=n[e[a]],!!n);a++);return n},Eo=function(e,n){return!e||ho(e,"array")?e:$o(e.split(n||","),hr)},Mv=function(e){var n=Ln.cacheSuffix;return n&&(e+=(e.indexOf("?")===-1?"?":"&")+n),e},Je={trim:hr,isArray:go,is:ho,toArray:Sa,makeMap:ql,each:Gr,map:$o,grep:To,inArray:zo,hasOwn:nt,extend:rs,create:po,walk:In,createNS:Mf,resolve:wu,explode:Eo,_addCacheSuffix:Mv},as=function(e,n){var a=n||document,i=a.createElement("div");if(i.innerHTML=e,!i.hasChildNodes()||i.childNodes.length>1)throw console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return se(i.childNodes[0])},B=function(e,n){var a=n||document,i=a.createElement(e);return se(i)},W=function(e,n){var a=n||document,i=a.createTextNode(e);return se(i)},se=function(e){if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},Ie=function(e,n,a){return te.from(e.dom.elementFromPoint(n,a)).map(se)},Z={fromHtml:as,fromTag:B,fromText:W,fromDom:se,fromPoint:Ie},Zn=function(e,n){var a=[],i=function(f){return a.push(f),n(f)},s=n(e);do s=s.bind(i);while(s.isSome());return a},ca=function(e,n,a){return(e.compareDocumentPosition(n)&a)!=0},$a=function(e,n){return ca(e,n,Node.DOCUMENT_POSITION_CONTAINED_BY)},Oc=8,xe=9,bo=11,Dc=1,el=3,Cu=function(e,n){var a=e.dom;if(a.nodeType!==Dc)return!1;var i=a;if(i.matches!==void 0)return i.matches(n);if(i.msMatchesSelector!==void 0)return i.msMatchesSelector(n);if(i.webkitMatchesSelector!==void 0)return i.webkitMatchesSelector(n);if(i.mozMatchesSelector!==void 0)return i.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")},uo=function(e){return e.nodeType!==Dc&&e.nodeType!==xe&&e.nodeType!==bo||e.childElementCount===0},aa=function(e,n){var a=n===void 0?document:n.dom;return uo(a)?[]:kn(a.querySelectorAll(e),Z.fromDom)},Rc=function(e,n){var a=n===void 0?document:n.dom;return uo(a)?te.none():te.from(a.querySelector(e)).map(Z.fromDom)},va=function(e,n){return e.dom===n.dom},Fv=function(e,n){var a=e.dom,i=n.dom;return a===i?!1:a.contains(i)},Bn=function(e,n){return $a(e.dom,n.dom)},os=function(e,n){return fn().browser.isIE()?Bn(e,n):Fv(e,n)};typeof window!="undefined"||Function("return this;")();var yo=function(e){var n=e.dom.nodeName;return n.toLowerCase()},Ff=function(e){return e.dom.nodeType},eu=function(e){return function(n){return Ff(n)===e}},Yh=function(e){return Ff(e)===Oc||yo(e)==="#comment"},Ft=eu(Dc),lc=eu(el),W0=eu(xe),j0=eu(bo),Gl=function(e){return function(n){return Ft(n)&&yo(n)===e}},Kl=function(e){return Z.fromDom(e.dom.ownerDocument)},fc=function(e){return W0(e)?e:Kl(e)},Bo=function(e){return Z.fromDom(fc(e).dom.documentElement)},Pf=function(e){return Z.fromDom(fc(e).dom.defaultView)},_a=function(e){return te.from(e.dom.parentNode).map(Z.fromDom)},Pv=function(e,n){for(var a=bt(n)?n:_t,i=e.dom,s=[];i.parentNode!==null&&i.parentNode!==void 0;){var f=i.parentNode,g=Z.fromDom(f);if(s.push(g),a(g)===!0)break;i=f}return s},tl=function(e){var n=function(a){return dn(a,function(i){return!va(e,i)})};return _a(e).map(Su).map(n).getOr([])},qu=function(e){return te.from(e.dom.previousSibling).map(Z.fromDom)},Ya=function(e){return te.from(e.dom.nextSibling).map(Z.fromDom)},Wd=function(e){return Ga(Zn(e,qu))},jd=function(e){return Zn(e,Ya)},Su=function(e){return kn(e.dom.childNodes,Z.fromDom)},Lo=function(e,n){var a=e.dom.childNodes;return te.from(a[n]).map(Z.fromDom)},qd=function(e){return Lo(e,0)},Es=function(e){return Lo(e,e.dom.childNodes.length-1)},Gd=function(e){return e.dom.childNodes.length},Bc=function(e){var n=e.dom.head;if(n==null)throw new Error("Head is not available yet");return Z.fromDom(n)},ks=function(e){return j0(e)&&pt(e.dom.host)},Nf=bt(Element.prototype.attachShadow)&&bt(Node.prototype.getRootNode),ko=Y(Nf),ri=Nf?function(e){return Z.fromDom(e.dom.getRootNode())}:fc,Gu=function(e){return ks(e)?e:Bc(fc(e))},Jh=function(e){var n=ri(e);return ks(n)?te.some(n):te.none()},vc=function(e){return Z.fromDom(e.dom.host)},As=function(e){if(ko()&&pt(e.target)){var n=Z.fromDom(e.target);if(Ft(n)&&Nv(n)&&e.composed&&e.composedPath){var a=e.composedPath();if(a)return Ca(a)}}return te.from(e.target)},Nv=function(e){return pt(e.dom.shadowRoot)},pi=function(e,n){var a=_a(e);a.each(function(i){i.dom.insertBefore(n.dom,e.dom)})},is=function(e,n){var a=Ya(e);a.fold(function(){var i=_a(e);i.each(function(s){bi(s,n)})},function(i){pi(i,n)})},vg=function(e,n){var a=qd(e);a.fold(function(){bi(e,n)},function(i){e.dom.insertBefore(n.dom,i.dom)})},bi=function(e,n){e.dom.appendChild(n.dom)},If=function(e,n){pi(e,n),bi(n,e)},$f=function(e,n){Ze(n,function(a){pi(e,a)})},Xl=function(e,n){Ze(n,function(a){bi(e,a)})},Yl=function(e){e.dom.textContent="",Ze(Su(e),function(n){_o(n)})},_o=function(e){var n=e.dom;n.parentNode!==null&&n.parentNode.removeChild(n)},Iv=function(e){var n=Su(e);n.length>0&&$f(e,n),_o(e)},nl=function(e){var n=lc(e)?e.dom.parentNode:e.dom;if(n==null||n.ownerDocument===null)return!1;var a=n.ownerDocument;return Jh(Z.fromDom(n)).fold(function(){return a.body.contains(n)},me(nl,vc))},Os=function(e,n){var a=function(i,s){return Os(e+i,n+s)};return{left:e,top:n,translate:a}},us=Os,co=function(e){var n=e.getBoundingClientRect();return us(n.left,n.top)},rl=function(e,n){return e!==void 0?e:n!==void 0?n:0},dg=function(e){var n=e.dom.ownerDocument,a=n.body,i=n.defaultView,s=n.documentElement;if(a===e.dom)return us(a.offsetLeft,a.offsetTop);var f=rl(i==null?void 0:i.pageYOffset,s.scrollTop),g=rl(i==null?void 0:i.pageXOffset,s.scrollLeft),b=rl(s.clientTop,a.clientTop),C=rl(s.clientLeft,a.clientLeft);return $v(e).translate(g-C,f-b)},$v=function(e){var n=e.dom,a=n.ownerDocument,i=a.body;return i===n?us(i.offsetLeft,i.offsetTop):nl(e)?co(n):us(0,0)},Kd=function(e){var n=e!==void 0?e.dom:document,a=n.body.scrollLeft||n.documentElement.scrollLeft,i=n.body.scrollTop||n.documentElement.scrollTop;return us(a,i)},Xd=function(e,n,a){var i=a!==void 0?a.dom:document,s=i.defaultView;s&&s.scrollTo(e,n)},mg=function(e,n){var a=fn().browser.isSafari();a&&bt(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(n)},gg=function(e){var n=e===void 0?window:e;return te.from(n.visualViewport)},hg=function(e,n,a,i){return{x:e,y:n,width:a,height:i,right:e+a,bottom:n+i}},Ni=function(e){var n=e===void 0?window:e,a=n.document,i=Kd(Z.fromDom(a));return gg(n).fold(function(){var s=n.document.documentElement,f=s.clientWidth,g=s.clientHeight;return hg(i.left,i.top,f,g)},function(s){return hg(Math.max(s.pageLeft,i.left),Math.max(s.pageTop,i.top),s.width,s.height)})},zf=function(e){return function(n){return!!n&&n.nodeType===e}},Yd=function(e){return!!e&&!Object.getPrototypeOf(e)},Mn=zf(1),so=function(e){var n=e.map(function(a){return a.toLowerCase()});return function(a){if(a&&a.nodeName){var i=a.nodeName.toLowerCase();return rt(n,i)}return!1}},Ii=function(e,n){var a=n.toLowerCase().split(" ");return function(i){if(Mn(i))for(var s=0;s<a.length;s++){var f=i.ownerDocument.defaultView.getComputedStyle(i,null),g=f?f.getPropertyValue(e):null;if(g===a[s])return!0}return!1}},ai=function(e){return function(n){return Mn(n)&&n.hasAttribute(e)}},Jd=function(e,n){return function(a){return Mn(a)&&a.getAttribute(e)===n}},_c=function(e){return Mn(e)&&e.hasAttribute("data-mce-bogus")},pg=function(e){return Mn(e)&&e.getAttribute("data-mce-bogus")==="all"},dc=function(e){return Mn(e)&&e.tagName==="TABLE"},Ja=function(e){return function(n){return!!(Mn(n)&&(n.contentEditable===e||n.getAttribute("data-mce-contenteditable")===e))}},bg=so(["textarea","input"]),gn=zf(3),Jl=zf(8),yg=zf(9),fu=zf(11),Ho=so(["br"]),q0=so(["img"]),cs=Ja("true"),Ua=Ja("false"),wg=so(["td","th"]),$n=so(["video","audio","object","embed"]),ss=function(e,n,a){return a===void 0&&(a=Aa),e.exists(function(i){return a(i,n)})},G0=function(e){for(var n=[],a=function(s){n.push(s)},i=0;i<e.length;i++)e[i].each(a);return n},xu=function(e,n,a){return e.isSome()&&n.isSome()?te.some(a(e.getOrDie(),n.getOrDie())):te.none()},K0=function(e,n,a,i){return e.isSome()&&n.isSome()&&a.isSome()?te.some(i(e.getOrDie(),n.getOrDie(),a.getOrDie())):te.none()},Cg=function(e,n){return e?te.some(n):te.none()},zv=function(e){return e.style!==void 0&&bt(e.style.getPropertyValue)},Zd=function(e,n,a){if(wn(a)||Te(a)||rn(a))e.setAttribute(n,a+"");else throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",a,":: Element ",e),new Error("Attribute value was not simple")},E=function(e,n,a){Zd(e.dom,n,a)},I=function(e,n){var a=e.dom;ur(n,function(i,s){Zd(a,s,i)})},H=function(e,n){var a=e.dom.getAttribute(n);return a===null?void 0:a},oe=function(e,n){return te.from(H(e,n))},Ae=function(e,n){var a=e.dom;return a&&a.hasAttribute?a.hasAttribute(n):!1},St=function(e,n){e.dom.removeAttribute(n)},xn=function(e){return Ur(e.dom.attributes,function(n,a){return n[a.name]=a.value,n},{})},_n=function(e,n,a){if(!wn(a))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",a,":: Element ",e),new Error("CSS value must be a string: "+a);zv(e)&&e.style.setProperty(n,a)},Tr=function(e,n){var a=e.dom;ur(n,function(i,s){_n(a,s,i)})},Cr=function(e,n){var a=e.dom,i=window.getComputedStyle(a),s=i.getPropertyValue(n);return s===""&&!nl(e)?fr(a,n):s},fr=function(e,n){return zv(e)?e.style.getPropertyValue(n):""},Tu=function(e,n){var a=e.dom,i=fr(a,n);return te.from(i).filter(function(s){return s.length>0})},Ku=function(e){var n={},a=e.dom;if(zv(a))for(var i=0;i<a.style.length;i++){var s=a.style.item(i);n[s]=a.style[s]}return n},Zh=function(e){return e.dom.offsetWidth},X0=fn().browser,ls=function(e){return ra(e,Ft)},al=function(e){return X0.isFirefox()&&yo(e)==="table"?ls(Su(e)).filter(function(n){return yo(n)==="caption"}).bind(function(n){return ls(jd(n)).map(function(a){var i=a.dom.offsetTop,s=n.dom.offsetTop,f=n.dom.offsetHeight;return i<=s?-f:0})}).getOr(0):0},Qo=function(e,n){return e.children&&rt(e.children,n)},xT=function(e,n,a){var i=0,s=0,f=e.ownerDocument;if(a=a||e,n){if(a===e&&n.getBoundingClientRect&&Cr(Z.fromDom(e),"position")==="static"){var g=n.getBoundingClientRect();return i=g.left+(f.documentElement.scrollLeft||e.scrollLeft)-f.documentElement.clientLeft,s=g.top+(f.documentElement.scrollTop||e.scrollTop)-f.documentElement.clientTop,{x:i,y:s}}for(var b=n;b&&b!==a&&b.nodeType&&!Qo(b,a);){var C=b;i+=C.offsetLeft||0,s+=C.offsetTop||0,b=C.offsetParent}for(b=n.parentNode;b&&b!==a&&b.nodeType&&!Qo(b,a);)i-=b.scrollLeft||0,s-=b.scrollTop||0,b=b.parentNode;s+=al(Z.fromDom(n))}return{x:i,y:s}},Sg={},Qh={exports:Sg};(function(e,n,a,i){(function(s){if(typeof n=="object"&&typeof a!="undefined")a.exports=s();else if(typeof e=="function"&&e.amd)e([],s);else{var f;typeof window!="undefined"?f=window:typeof kB!="undefined"?f=kB:typeof self!="undefined"?f=self:f=this,f.EphoxContactWrapper=s()}})(function(){return function(){function s(f,g,b){function C(M,F){if(!g[M]){if(!f[M]){var U=typeof i=="function"&&i;if(!F&&U)return U(M,!0);if(k)return k(M,!0);var K=new Error("Cannot find module '"+M+"'");throw K.code="MODULE_NOT_FOUND",K}var j=g[M]={exports:{}};f[M][0].call(j.exports,function(J){var fe=f[M][1][J];return C(fe||J)},j,j.exports,s,f,g,b)}return g[M].exports}for(var k=typeof i=="function"&&i,_=0;_<b.length;_++)C(b[_]);return C}return s}()({1:[function(s,f,g){var b=f.exports={},C,k;function _(){throw new Error("setTimeout has not been defined")}function M(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?C=setTimeout:C=_}catch(Me){C=_}try{typeof clearTimeout=="function"?k=clearTimeout:k=M}catch(Me){k=M}})();function F(Me){if(C===setTimeout)return setTimeout(Me,0);if((C===_||!C)&&setTimeout)return C=setTimeout,setTimeout(Me,0);try{return C(Me,0)}catch(Qe){try{return C.call(null,Me,0)}catch(Tt){return C.call(this,Me,0)}}}function U(Me){if(k===clearTimeout)return clearTimeout(Me);if((k===M||!k)&&clearTimeout)return k=clearTimeout,clearTimeout(Me);try{return k(Me)}catch(Qe){try{return k.call(null,Me)}catch(Tt){return k.call(this,Me)}}}var K=[],j=!1,J,fe=-1;function ve(){!j||!J||(j=!1,J.length?K=J.concat(K):fe=-1,K.length&&ae())}function ae(){if(!j){var Me=F(ve);j=!0;for(var Qe=K.length;Qe;){for(J=K,K=[];++fe<Qe;)J&&J[fe].run();fe=-1,Qe=K.length}J=null,j=!1,U(Me)}}b.nextTick=function(Me){var Qe=new Array(arguments.length-1);if(arguments.length>1)for(var Tt=1;Tt<arguments.length;Tt++)Qe[Tt-1]=arguments[Tt];K.push(new de(Me,Qe)),K.length===1&&!j&&F(ae)};function de(Me,Qe){this.fun=Me,this.array=Qe}de.prototype.run=function(){this.fun.apply(null,this.array)},b.title="browser",b.browser=!0,b.env={},b.argv=[],b.version="",b.versions={};function Ee(){}b.on=Ee,b.addListener=Ee,b.once=Ee,b.off=Ee,b.removeListener=Ee,b.removeAllListeners=Ee,b.emit=Ee,b.prependListener=Ee,b.prependOnceListener=Ee,b.listeners=function(Me){return[]},b.binding=function(Me){throw new Error("process.binding is not supported")},b.cwd=function(){return"/"},b.chdir=function(Me){throw new Error("process.chdir is not supported")},b.umask=function(){return 0}},{}],2:[function(s,f,g){(function(b){(function(C){var k=setTimeout;function _(){}function M(ae,de){return function(){ae.apply(de,arguments)}}function F(ae){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");if(typeof ae!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],ve(ae,this)}function U(ae,de){for(;ae._state===3;)ae=ae._value;if(ae._state===0){ae._deferreds.push(de);return}ae._handled=!0,F._immediateFn(function(){var Ee=ae._state===1?de.onFulfilled:de.onRejected;if(Ee===null){(ae._state===1?K:j)(de.promise,ae._value);return}var Me;try{Me=Ee(ae._value)}catch(Qe){j(de.promise,Qe);return}K(de.promise,Me)})}function K(ae,de){try{if(de===ae)throw new TypeError("A promise cannot be resolved with itself.");if(de&&(typeof de=="object"||typeof de=="function")){var Ee=de.then;if(de instanceof F){ae._state=3,ae._value=de,J(ae);return}else if(typeof Ee=="function"){ve(M(Ee,de),ae);return}}ae._state=1,ae._value=de,J(ae)}catch(Me){j(ae,Me)}}function j(ae,de){ae._state=2,ae._value=de,J(ae)}function J(ae){ae._state===2&&ae._deferreds.length===0&&F._immediateFn(function(){ae._handled||F._unhandledRejectionFn(ae._value)});for(var de=0,Ee=ae._deferreds.length;de<Ee;de++)U(ae,ae._deferreds[de]);ae._deferreds=null}function fe(ae,de,Ee){this.onFulfilled=typeof ae=="function"?ae:null,this.onRejected=typeof de=="function"?de:null,this.promise=Ee}function ve(ae,de){var Ee=!1;try{ae(function(Me){Ee||(Ee=!0,K(de,Me))},function(Me){Ee||(Ee=!0,j(de,Me))})}catch(Me){if(Ee)return;Ee=!0,j(de,Me)}}F.prototype.catch=function(ae){return this.then(null,ae)},F.prototype.then=function(ae,de){var Ee=new this.constructor(_);return U(this,new fe(ae,de,Ee)),Ee},F.all=function(ae){var de=Array.prototype.slice.call(ae);return new F(function(Ee,Me){if(de.length===0)return Ee([]);var Qe=de.length;function Tt(Yt,lt){try{if(lt&&(typeof lt=="object"||typeof lt=="function")){var Kn=lt.then;if(typeof Kn=="function"){Kn.call(lt,function(kt){Tt(Yt,kt)},Me);return}}de[Yt]=lt,--Qe==0&&Ee(de)}catch(kt){Me(kt)}}for(var jn=0;jn<de.length;jn++)Tt(jn,de[jn])})},F.resolve=function(ae){return ae&&typeof ae=="object"&&ae.constructor===F?ae:new F(function(de){de(ae)})},F.reject=function(ae){return new F(function(de,Ee){Ee(ae)})},F.race=function(ae){return new F(function(de,Ee){for(var Me=0,Qe=ae.length;Me<Qe;Me++)ae[Me].then(de,Ee)})},F._immediateFn=typeof b=="function"?function(ae){b(ae)}:function(ae){k(ae,0)},F._unhandledRejectionFn=function(de){typeof console!="undefined"&&console&&console.warn("Possible Unhandled Promise Rejection:",de)},F._setImmediateFn=function(de){F._immediateFn=de},F._setUnhandledRejectionFn=function(de){F._unhandledRejectionFn=de},typeof f!="undefined"&&f.exports?f.exports=F:C.Promise||(C.Promise=F)})(this)}).call(this,s("timers").setImmediate)},{timers:3}],3:[function(s,f,g){(function(b,C){var k=s("process/browser.js").nextTick,_=Function.prototype.apply,M=Array.prototype.slice,F={},U=0;g.setTimeout=function(){return new K(_.call(setTimeout,window,arguments),clearTimeout)},g.setInterval=function(){return new K(_.call(setInterval,window,arguments),clearInterval)},g.clearTimeout=g.clearInterval=function(j){j.close()};function K(j,J){this._id=j,this._clearFn=J}K.prototype.unref=K.prototype.ref=function(){},K.prototype.close=function(){this._clearFn.call(window,this._id)},g.enroll=function(j,J){clearTimeout(j._idleTimeoutId),j._idleTimeout=J},g.unenroll=function(j){clearTimeout(j._idleTimeoutId),j._idleTimeout=-1},g._unrefActive=g.active=function(j){clearTimeout(j._idleTimeoutId);var J=j._idleTimeout;J>=0&&(j._idleTimeoutId=setTimeout(function(){j._onTimeout&&j._onTimeout()},J))},g.setImmediate=typeof b=="function"?b:function(j){var J=U++,fe=arguments.length<2?!1:M.call(arguments,1);return F[J]=!0,k(function(){F[J]&&(fe?j.apply(null,fe):j.call(null),g.clearImmediate(J))}),J},g.clearImmediate=typeof C=="function"?C:function(j){delete F[j]}}).call(this,s("timers").setImmediate,s("timers").clearImmediate)},{"process/browser.js":1,timers:3}],4:[function(s,f,g){var b=s("promise-polyfill"),C=function(){return typeof window!="undefined"?window:Function("return this;")()}();f.exports={boltExport:C.Promise||b}},{"promise-polyfill":2}]},{},[4])(4)})})(void 0,Sg,Qh,void 0);var ol=Qh.exports.boltExport,Lf=function(e){var n=te.none(),a=[],i=function(k){return Lf(function(_){s(function(M){_(k(M))})})},s=function(k){g()?C(k):a.push(k)},f=function(k){g()||(n=te.some(k),b(a),a=[])},g=function(){return n.isSome()},b=function(k){Ze(k,C)},C=function(k){n.each(function(_){setTimeout(function(){k(_)},0)})};return e(f),{get:s,map:i,isReady:g}},xg=function(e){return Lf(function(n){n(e)})},TT={nu:Lf,pure:xg},Hf=function(e){setTimeout(function(){throw e},0)},Qd=function(e){var n=function(C){e().then(C,Hf)},a=function(C){return Qd(function(){return e().then(C)})},i=function(C){return Qd(function(){return e().then(function(k){return C(k).toPromise()})})},s=function(C){return Qd(function(){return e().then(function(){return C.toPromise()})})},f=function(){return TT.nu(n)},g=function(){var C=null;return Qd(function(){return C===null&&(C=e()),C})},b=e;return{map:a,bind:i,anonBind:s,toLazy:f,toCached:g,toPromise:b,get:n}},ET=function(e){return Qd(function(){return new ol(e)})},Mo=function(e){return Qd(function(){return ol.resolve(e)})},iw={nu:ET,pure:Mo},Vf=function(e,n){return n(function(a){var i=[],s=0,f=function(g){return function(b){i[g]=b,s++,s>=e.length&&a(i)}};e.length===0?a([]):Ze(e,function(g,b){g.get(f(b))})})},Y0=function(e){return Vf(e,iw.nu)},Uf=function(e){var n=function(M){return Uf(e)},a=function(M){return Uf(e)},i=function(M){return Uf(M(e))},s=function(M){return Uf(e)},f=function(M){M(e)},g=function(M){return M(e)},b=function(M,F){return F(e)},C=function(M){return M(e)},k=function(M){return M(e)},_=function(){return te.some(e)};return{isValue:Kt,isError:_t,getOr:Y(e),getOrThunk:Y(e),getOrDie:Y(e),or:n,orThunk:a,fold:b,map:i,mapError:s,each:f,bind:g,exists:C,forall:k,toOptional:_}},Ds=function(e){var n=function(k){return k()},a=function(){return Nn(String(e))()},i=Dn,s=function(k){return k()},f=function(k){return Ds(e)},g=function(k){return Ds(k(e))},b=function(k){return Ds(e)},C=function(k,_){return k(e)};return{isValue:_t,isError:Kt,getOr:Dn,getOrThunk:n,getOrDie:a,or:i,orThunk:s,fold:C,map:f,mapError:g,each:ut,bind:b,exists:_t,forall:Kt,toOptional:te.none}},Xu=function(e,n){return e.fold(function(){return Ds(n)},Uf)},Wf={value:Uf,error:Ds,fromOption:Xu},Tg=function(e){if(!Un(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");var n=[],a={};return Ze(e,function(i,s){var f=mo(i);if(f.length!==1)throw new Error("one and only one name per case");var g=f[0],b=i[g];if(a[g]!==void 0)throw new Error("duplicate key detected:"+g);if(g==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Un(b))throw new Error("case arguments must be an array");n.push(g),a[g]=function(){for(var C=[],k=0;k<arguments.length;k++)C[k]=arguments[k];var _=C.length;if(_!==b.length)throw new Error("Wrong number of arguments to case "+g+". Expected "+b.length+" ("+b+"), got "+_);var M=function(F){var U=mo(F);if(n.length!==U.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+`
Actual: `+U.join(","));var K=No(n,function(j){return rt(U,j)});if(!K)throw new Error("Not all branches were specified when using match. Specified: "+U.join(", ")+`
Required: `+n.join(", "));return F[g].apply(null,C)};return{fold:function(){for(var F=[],U=0;U<arguments.length;U++)F[U]=arguments[U];if(F.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+F.length);var K=F[s];return K.apply(null,C)},match:M,log:function(F){console.log(F,{constructors:n,constructor:g,params:C})}}}}),a},il={generate:Tg};il.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);var jf=function(e){return e.fold(Dn,Dn)};function em(e,n,a,i,s){return e(a,i)?te.some(a):bt(s)&&s(a)?te.none():n(a,i,s)}var qf=function(e,n,a){for(var i=e.dom,s=bt(a)?a:_t;i.parentNode;){i=i.parentNode;var f=Z.fromDom(i);if(n(f))return te.some(f);if(s(f))break}return te.none()},Eg=function(e,n,a){var i=function(s,f){return f(s)};return em(i,qf,e,n,a)},kT=function(e,n){var a=e.dom;return a.parentNode?J0(Z.fromDom(a.parentNode),function(i){return!va(e,i)&&n(i)}):te.none()},J0=function(e,n){var a=function(s){return n(Z.fromDom(s))},i=ra(e.dom.childNodes,a);return i.map(Z.fromDom)},Gf=function(e,n,a){return qf(e,function(i){return Cu(i,n)},a)},ul=function(e,n){return Rc(n,e)},Lv=function(e,n,a){var i=function(s,f){return Cu(s,f)};return em(i,Gf,e,n,a)},mc=function(){var e=function(_,M){return function(){for(var F=[],U=0;U<arguments.length;U++)F[U]=arguments[U];_.apply(M,F)}},n=Array.isArray||function(_){return Object.prototype.toString.call(_)==="[object Array]"},a=function(_){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");if(typeof _!="function")throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],k(_,e(f,this),e(g,this))},i=a.immediateFn||typeof setImmediate=="function"&&setImmediate||function(_){return setTimeout(_,1)};function s(_){var M=this;if(this._state===null){this._deferreds.push(_);return}i(function(){var F=M._state?_.onFulfilled:_.onRejected;if(F===null){(M._state?_.resolve:_.reject)(M._value);return}var U;try{U=F(M._value)}catch(K){_.reject(K);return}_.resolve(U)})}function f(_){try{if(_===this)throw new TypeError("A promise cannot be resolved with itself.");if(_&&(typeof _=="object"||typeof _=="function")){var M=_.then;if(typeof M=="function"){k(e(M,_),e(f,this),e(g,this));return}}this._state=!0,this._value=_,b.call(this)}catch(F){g.call(this,F)}}function g(_){this._state=!1,this._value=_,b.call(this)}function b(){for(var _=0,M=this._deferreds.length;_<M;_++)s.call(this,this._deferreds[_]);this._deferreds=null}function C(_,M,F,U){this.onFulfilled=typeof _=="function"?_:null,this.onRejected=typeof M=="function"?M:null,this.resolve=F,this.reject=U}var k=function(_,M,F){var U=!1;try{_(function(K){U||(U=!0,M(K))},function(K){U||(U=!0,F(K))})}catch(K){if(U)return;U=!0,F(K)}};return a.prototype.catch=function(_){return this.then(null,_)},a.prototype.then=function(_,M){var F=this;return new a(function(U,K){s.call(F,new C(_,M,U,K))})},a.all=function(){for(var _=[],M=0;M<arguments.length;M++)_[M]=arguments[M];var F=Array.prototype.slice.call(_.length===1&&n(_[0])?_[0]:_);return new a(function(U,K){if(F.length===0)return U([]);for(var j=F.length,J=function(ve,ae){try{if(ae&&(typeof ae=="object"||typeof ae=="function")){var de=ae.then;if(typeof de=="function"){de.call(ae,function(Ee){J(ve,Ee)},K);return}}F[ve]=ae,--j==0&&U(F)}catch(Ee){K(Ee)}},fe=0;fe<F.length;fe++)J(fe,F[fe])})},a.resolve=function(_){return _&&typeof _=="object"&&_.constructor===a?_:new a(function(M){M(_)})},a.reject=function(_){return new a(function(M,F){F(_)})},a.race=function(_){return new a(function(M,F){for(var U=0,K=_.length;U<K;U++)_[U].then(M,F)})},a},yi=window.Promise?window.Promise:mc(),tm,Z0=function(e,n){for(var a=window.requestAnimationFrame,i=["ms","moz","webkit"],s=function(g){window.setTimeout(g,0)},f=0;f<i.length&&!a;f++)a=window[i[f]+"RequestAnimationFrame"];a||(a=s),a(e,n)},ep=function(e,n){return typeof n!="number"&&(n=0),setTimeout(e,n)},Q0=function(e,n){return typeof n!="number"&&(n=1),setInterval(e,n)},uw=function(e){return clearTimeout(e)},eb=function(e){return clearInterval(e)},zr=function(e,n){var a,i=function(){for(var s=[],f=0;f<arguments.length;f++)s[f]=arguments[f];clearTimeout(a),a=ep(function(){e.apply(this,s)},n)};return i.stop=function(){clearTimeout(a)},i},sn={requestAnimationFrame:function(e,n){if(tm){tm.then(e);return}tm=new yi(function(a){n||(n=document.body),Z0(a,n)}).then(e)},setTimeout:ep,setInterval:Q0,setEditorTimeout:function(e,n,a){return ep(function(){e.removed||n()},a)},setEditorInterval:function(e,n,a){var i=Q0(function(){e.removed?clearInterval(i):n()},a);return i},debounce:zr,throttle:zr,clearInterval:eb,clearTimeout:uw},Mc=function(e,n){n===void 0&&(n={});var a=0,i={},s=Z.fromDom(e),f=fc(s),g=n.maxLoadTime||5e3,b=function(J){n.referrerPolicy=J},C=function(J){bi(Gu(s),J)},k=function(J){var fe=Gu(s);ul(fe,"#"+J).each(_o)},_=function(J){return ua(i,J).getOrThunk(function(){return{id:"mce-u"+a++,passed:[],failed:[],count:0}})},M=function(J,fe,ve){var ae,de=Je._addCacheSuffix(J),Ee=_(de);i[de]=Ee,Ee.count++;var Me=function(kt,tn){for(var Et=kt.length;Et--;)kt[Et]();Ee.status=tn,Ee.passed=[],Ee.failed=[],ae&&(ae.onload=null,ae.onerror=null,ae=null)},Qe=function(){return Me(Ee.passed,2)},Tt=function(){return Me(Ee.failed,3)},jn=function(kt,tn){kt()||(Date.now()-Kn<g?sn.setTimeout(tn):Tt())},Yt=function(){jn(function(){for(var kt=e.styleSheets,tn=kt.length;tn--;){var Et=kt[tn],zt=Et.ownerNode;if(zt&&zt.id===ae.id)return Qe(),!0}return!1},Yt)};if(fe&&Ee.passed.push(fe),ve&&Ee.failed.push(ve),Ee.status!==1){if(Ee.status===2){Qe();return}if(Ee.status===3){Tt();return}Ee.status=1;var lt=Z.fromTag("link",f.dom);I(lt,{rel:"stylesheet",type:"text/css",id:Ee.id});var Kn=Date.now();n.contentCssCors&&E(lt,"crossOrigin","anonymous"),n.referrerPolicy&&E(lt,"referrerpolicy",n.referrerPolicy),ae=lt.dom,ae.onload=Yt,ae.onerror=Tt,C(lt),E(lt,"href",de)}},F=function(J){return iw.nu(function(fe){M(J,Rr(fe,Y(Wf.value(J))),Rr(fe,Y(Wf.error(J))))})},U=function(J,fe,ve){Y0(kn(J,F)).get(function(ae){var de=ma(ae,function(Ee){return Ee.isValue()});de.fail.length>0?ve(de.fail.map(jf)):fe(de.pass.map(jf))})},K=function(J){var fe=Je._addCacheSuffix(J);ua(i,fe).each(function(ve){var ae=--ve.count;ae===0&&(delete i[fe],k(ve.id))})},j=function(J){Ze(J,function(fe){K(fe)})};return{load:M,loadAll:U,unload:K,unloadAll:j,_setReferrerPolicy:b}},tp=function(){var e=new WeakMap,n=function(a,i){var s=ri(a),f=s.dom;return te.from(e.get(f)).getOrThunk(function(){var g=Mc(f,i);return e.set(f,g),g})};return{forElement:n}},np=tp(),wi=function(){function e(n,a){this.node=n,this.rootNode=a,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}return e.prototype.current=function(){return this.node},e.prototype.next=function(n){return this.node=this.findSibling(this.node,"firstChild","nextSibling",n),this.node},e.prototype.prev=function(n){return this.node=this.findSibling(this.node,"lastChild","previousSibling",n),this.node},e.prototype.prev2=function(n){return this.node=this.findPreviousNode(this.node,"lastChild","previousSibling",n),this.node},e.prototype.findSibling=function(n,a,i,s){var f,g;if(n){if(!s&&n[a])return n[a];if(n!==this.rootNode){if(f=n[i],f)return f;for(g=n.parentNode;g&&g!==this.rootNode;g=g.parentNode)if(f=g[i],f)return f}}},e.prototype.findPreviousNode=function(n,a,i,s){var f,g,b;if(n){if(f=n[i],this.rootNode&&f===this.rootNode)return;if(f){if(!s){for(b=f[a];b;b=b[a])if(!b[a])return b}return f}if(g=n.parentNode,g&&g!==this.rootNode)return g}},e}(),xa=["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"],tb=["td","th"],fs=["thead","tbody","tfoot"],rp=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],ot=["h1","h2","h3","h4","h5","h6"],ap=["li","dd","dt"],cw=["ul","ol","dl"],op=["pre","script","textarea","style"],Zl=function(e){var n;return function(a){return n=n||Xo(e,Kt),cr(n,yo(a))}},nm=Zl(ot),Fc=Zl(xa),cl=function(e){return yo(e)==="table"},ip=function(e){return Ft(e)&&!Fc(e)},vs=function(e){return Ft(e)&&yo(e)==="br"},Ta=Zl(rp),Rs=Zl(cw),Kf=Zl(ap),Pc=Zl(fs),Nc=Zl(tb),kg=Zl(op),Ag=function(e,n,a){return Gf(e,n,a).isSome()},gc="\uFEFF",Ci="\xA0",sw=function(e){return e===gc},lw=function(e){return e.replace(/\uFEFF/g,"")},Wa=gc,Hv=sw,sl=lw,rm=Mn,Si=gn,Xf=function(e){return Si(e)&&(e=e.parentNode),rm(e)&&e.hasAttribute("data-mce-caret")},Vv=function(e){return Si(e)&&Hv(e.data)},Ic=function(e){return Xf(e)||Vv(e)},Yu=function(e){return e.firstChild!==e.lastChild||!Ho(e.firstChild)},am=function(e,n){var a=e.ownerDocument,i=a.createTextNode(Wa),s=e.parentNode;if(n){var f=e.previousSibling;if(Si(f)){if(Ic(f))return f;if(cp(f))return f.splitText(f.data.length-1)}s.insertBefore(i,e)}else{var f=e.nextSibling;if(Si(f)){if(Ic(f))return f;if(om(f))return f.splitText(1),f}e.nextSibling?s.insertBefore(i,e.nextSibling):s.appendChild(i)}return i},nb=function(e){var n=e.container();return gn(n)?n.data.charAt(e.offset())===Wa||e.isAtStart()&&Vv(n.previousSibling):!1},up=function(e){var n=e.container();return gn(n)?n.data.charAt(e.offset()-1)===Wa||e.isAtEnd()&&Vv(n.nextSibling):!1},fw=function(){var e=document.createElement("br");return e.setAttribute("data-mce-bogus","1"),e},rb=function(e,n,a){var i=n.ownerDocument,s=i.createElement(e);s.setAttribute("data-mce-caret",a?"before":"after"),s.setAttribute("data-mce-bogus","all"),s.appendChild(fw());var f=n.parentNode;return a?f.insertBefore(s,n):n.nextSibling?f.insertBefore(s,n.nextSibling):f.appendChild(s),s},om=function(e){return Si(e)&&e.data[0]===Wa},cp=function(e){return Si(e)&&e.data[e.data.length-1]===Wa},$i=function(e){var n=e.getElementsByTagName("br"),a=n[n.length-1];_c(a)&&a.parentNode.removeChild(a)},im=function(e){return e&&e.hasAttribute("data-mce-caret")?($i(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("_moz_abspos"),e):null},vw=function(e){return Xf(e.startContainer)},ab=cs,ob=Ua,sp=Ho,ib=gn,lp=so(["script","style","textarea"]),ub=so(["img","input","textarea","hr","iframe","video","audio","object","embed"]),dw=so(["table"]),Ju=Ic,ll=function(e){return Ju(e)?!1:ib(e)?!lp(e.parentNode):ub(e)||sp(e)||dw(e)||fp(e)},AT=function(e){return Mn(e)&&e.getAttribute("unselectable")==="true"},fp=function(e){return AT(e)===!1&&ob(e)},cb=function(e,n){for(e=e.parentNode;e&&e!==n;e=e.parentNode){if(fp(e))return!1;if(ab(e))return!0}return!0},Yf=function(e){return fp(e)?Ur(mn(e.getElementsByTagName("*")),function(n,a){return n||ab(a)},!1)!==!0:!1},Uv=function(e){return ub(e)||Yf(e)},Og=function(e,n){return ll(e)&&cb(e,n)},sb=/^[ \t\r\n]*$/,Bs=function(e){return sb.test(e)},OT=function(e,n){var a=Z.fromDom(n),i=Z.fromDom(e);return Ag(i,"pre,code",At(va,a))},mw=function(e,n){return gn(e)&&Bs(e.data)&&OT(e,n)===!1},kr=function(e){return Mn(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id"))},Dg=function(e,n){return ll(e)&&mw(e,n)===!1||kr(e)||Eu(e)},Eu=ai("data-mce-bookmark"),$c=ai("data-mce-bogus"),gw=Jd("data-mce-bogus","all"),zi=function(e,n){var a=0;if(Dg(e,e))return!1;var i=e.firstChild;if(!i)return!0;var s=new wi(i,e);do{if(n){if(gw(i)){i=s.next(!0);continue}if($c(i)){i=s.next();continue}}if(Ho(i)){a++,i=s.next();continue}if(Dg(i,e))return!1;i=s.next()}while(i);return a<=1},Zu=function(e,n){return n===void 0&&(n=!0),zi(e.dom,n)},DT=function(e){return e.nodeName.toLowerCase()==="span"},hw=function(e,n){return pt(e)&&(Dg(e,n)||ip(Z.fromDom(e)))},Jf=function(e,n){var a=new wi(e,n).prev(!1),i=new wi(e,n).next(!1),s=qe(a)||hw(a,n),f=qe(i)||hw(i,n);return s&&f},pw=function(e){return DT(e)&&e.getAttribute("data-mce-type")==="bookmark"},bw=function(e,n){return gn(e)&&e.data.length>0&&Jf(e,n)},yw=function(e){return Mn(e)?e.childNodes.length>0:!1},ww=function(e){return fu(e)||yg(e)},bn=function(e,n,a){var i=a||n;if(Mn(n)&&pw(n))return n;for(var s=n.childNodes,f=s.length-1;f>=0;f--)bn(e,s[f],i);if(Mn(n)){var g=n.childNodes;g.length===1&&pw(g[0])&&n.parentNode.insertBefore(g[0],n)}return!ww(n)&&!Dg(n,i)&&!yw(n)&&!bw(n,i)&&e.remove(n),n},RT=Je.makeMap,Rg=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,vp=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,dp=/[<>&\"\']/g,lb=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,mp={128:"\u20AC",130:"\u201A",131:"\u0192",132:"\u201E",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02C6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017D",145:"\u2018",146:"\u2019",147:"\u201C",148:"\u201D",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02DC",153:"\u2122",154:"\u0161",155:"\u203A",156:"\u0153",158:"\u017E",159:"\u0178"},_s={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},um={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},fb=function(e){var n=Z.fromTag("div").dom;return n.innerHTML=e,n.textContent||n.innerText||e},cm=function(e,n){var a,i,s,f={};if(e){for(e=e.split(","),n=n||10,a=0;a<e.length;a+=2)i=String.fromCharCode(parseInt(e[a],n)),_s[i]||(s="&"+e[a+1]+";",f[i]=s,f[s]=i);return f}},vb=cm("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Cw=function(e,n){return e.replace(n?Rg:vp,function(a){return _s[a]||a})},fl=function(e){return(""+e).replace(dp,function(n){return _s[n]||n})},Bg=function(e,n){return e.replace(n?Rg:vp,function(a){return a.length>1?"&#"+((a.charCodeAt(0)-55296)*1024+(a.charCodeAt(1)-56320)+65536)+";":_s[a]||"&#"+a.charCodeAt(0)+";"})},gp=function(e,n,a){return a=a||vb,e.replace(n?Rg:vp,function(i){return _s[i]||a[i]||i})},hp=function(e,n){var a=cm(n)||vb,i=function(g,b){return g.replace(b?Rg:vp,function(C){return _s[C]!==void 0?_s[C]:a[C]!==void 0?a[C]:C.length>1?"&#"+((C.charCodeAt(0)-55296)*1024+(C.charCodeAt(1)-56320)+65536)+";":"&#"+C.charCodeAt(0)+";"})},s=function(g,b){return gp(g,b,a)},f=RT(e.replace(/\+/g,","));return f.named&&f.numeric?i:f.named?n?s:gp:f.numeric?Bg:Cw},Sw=function(e){return e.replace(lb,function(n,a){return a?(a.charAt(0).toLowerCase()==="x"?a=parseInt(a.substr(1),16):a=parseInt(a,10),a>65535?(a-=65536,String.fromCharCode(55296+(a>>10),56320+(a&1023))):mp[a]||String.fromCharCode(a)):um[n]||vb[n]||fb(n)})},Wv={encodeRaw:Cw,encodeAllRaw:fl,encodeNumeric:Bg,encodeNamed:gp,getEncodeFunc:hp,decode:Sw},Iu={},Ms={},tu=Je.makeMap,ku=Je.each,db=Je.extend,xw=Je.explode,Tw=Je.inArray,Za=function(e,n){return e=Je.trim(e),e?e.split(n||" "):[]},BT=function(e){var n={},a,i,s,f,g,b,C=function(_,M,F){var U,K,j,J=function(ve,ae){var de={},Ee,Me;for(Ee=0,Me=ve.length;Ee<Me;Ee++)de[ve[Ee]]=ae||{};return de};F=F||[],M=M||"",typeof F=="string"&&(F=Za(F));var fe=Za(_);for(U=fe.length;U--;)K=Za([a,M].join(" ")),j={attributes:J(K),attributesOrder:K,children:J(F,Ms)},n[fe[U]]=j},k=function(_,M){var F,U,K,j,J=Za(_);F=J.length;for(var fe=Za(M);F--;)for(U=n[J[F]],K=0,j=fe.length;K<j;K++)U.attributes[fe[K]]={},U.attributesOrder.push(fe[K])};return Iu[e]?Iu[e]:(a="id accesskey class dir lang style tabindex title role",i="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",s="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(a+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",i+=" article aside details dialog figure main header footer hgroup section nav",s+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),e!=="html5-strict"&&(a+=" xml:lang",b="acronym applet basefont big font strike tt",s=[s,b].join(" "),ku(Za(b),function(_){C(_,"",s)}),g="center dir isindex noframes",i=[i,g].join(" "),f=[i,s].join(" "),ku(Za(g),function(_){C(_,"",f)})),f=f||[i,s].join(" "),C("html","manifest","head body"),C("head","","base command link meta noscript script style title"),C("title hr noscript br"),C("base","href target"),C("link","href rel media hreflang type sizes hreflang"),C("meta","name http-equiv content charset"),C("style","media type scoped"),C("script","src async defer type charset"),C("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",f),C("address dt dd div caption","",f),C("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",s),C("blockquote","cite",f),C("ol","reversed start type","li"),C("ul","","li"),C("li","value",f),C("dl","","dt dd"),C("a","href target rel media hreflang type",s),C("q","cite",s),C("ins del","cite datetime",f),C("img","src sizes srcset alt usemap ismap width height"),C("iframe","src name width height",f),C("embed","src type width height"),C("object","data type typemustmatch name usemap form width height",[f,"param"].join(" ")),C("param","name value"),C("map","name",[f,"area"].join(" ")),C("area","alt coords shape href target rel media hreflang type"),C("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),C("colgroup","span","col"),C("col","span"),C("tbody thead tfoot","","tr"),C("tr","","td th"),C("td","colspan rowspan headers",f),C("th","colspan rowspan headers scope abbr",f),C("form","accept-charset action autocomplete enctype method name novalidate target",f),C("fieldset","disabled form name",[f,"legend"].join(" ")),C("label","form for",s),C("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),C("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?f:s),C("select","disabled form multiple name required size","option optgroup"),C("optgroup","disabled label","option"),C("option","disabled label selected value"),C("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),C("menu","type label",[f,"li"].join(" ")),C("noscript","",f),e!=="html4"&&(C("wbr"),C("ruby","",[s,"rt rp"].join(" ")),C("figcaption","",f),C("mark rt rp summary bdi","",s),C("canvas","width height",f),C("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[f,"track source"].join(" ")),C("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[f,"track source"].join(" ")),C("picture","","img source"),C("source","src srcset type media sizes"),C("track","kind src srclang label default"),C("datalist","",[s,"option"].join(" ")),C("article section nav aside main header footer","",f),C("hgroup","","h1 h2 h3 h4 h5 h6"),C("figure","",[f,"figcaption"].join(" ")),C("time","datetime",s),C("dialog","open",f),C("command","type label icon disabled checked radiogroup command"),C("output","for form name",s),C("progress","value max",s),C("meter","value min max low high optimum",s),C("details","open",[f,"summary"].join(" ")),C("keygen","autofocus challenge disabled form keytype name")),e!=="html5-strict"&&(k("script","language xml:space"),k("style","xml:space"),k("object","declare classid code codebase codetype archive standby align border hspace vspace"),k("embed","align name hspace vspace"),k("param","valuetype type"),k("a","charset name rev shape coords"),k("br","clear"),k("applet","codebase archive code object alt name width height align hspace vspace"),k("img","name longdesc align border hspace vspace"),k("iframe","longdesc frameborder marginwidth marginheight scrolling align"),k("font basefont","size color face"),k("input","usemap align"),k("select"),k("textarea"),k("h1 h2 h3 h4 h5 h6 div p legend caption","align"),k("ul","type compact"),k("li","type"),k("ol dl menu dir","compact"),k("pre","width xml:space"),k("hr","align noshade size width"),k("isindex","prompt"),k("table","summary width frame rules cellspacing cellpadding align bgcolor"),k("col","width align char charoff valign"),k("colgroup","width align char charoff valign"),k("thead","align char charoff valign"),k("tr","align char charoff valign bgcolor"),k("th","axis align char charoff valign nowrap bgcolor width height"),k("form","accept"),k("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),k("tfoot","align char charoff valign"),k("tbody","align char charoff valign"),k("area","nohref"),k("body","background bgcolor text link vlink alink")),e!=="html4"&&(k("input button select textarea","autofocus"),k("input textarea","placeholder"),k("a","download"),k("link script img","crossorigin"),k("img","loading"),k("iframe","sandbox seamless allowfullscreen loading")),ku(Za("a form meter progress dfn"),function(_){n[_]&&delete n[_].children[_]}),delete n.caption.children.table,delete n.script,Iu[e]=n,n)},vl=function(e,n){var a;return e&&(a={},typeof e=="string"&&(e={"*":e}),ku(e,function(i,s){a[s]=a[s.toUpperCase()]=n==="map"?tu(i,/[, ]/):xw(i,/[, ]/)})),a},Zf=function(e){var n={},a={},i=[],s={},f={},g=function(st,$e,mt){var We=e[st];return We?We=tu(We,/[, ]/,tu(We.toUpperCase(),/[, ]/)):(We=Iu[st],We||(We=tu($e," ",tu($e.toUpperCase()," ")),We=db(We,mt),Iu[st]=We)),We};e=e||{};var b=BT(e.schema);e.verify_html===!1&&(e.valid_elements="*[*]");var C=vl(e.valid_styles),k=vl(e.invalid_styles,"map"),_=vl(e.valid_classes,"map"),M=g("whitespace_elements","pre script noscript style textarea video audio iframe object code"),F=g("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),U=g("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),K=g("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),j="td th iframe video audio object script code",J=g("non_empty_elements",j+" pre",U),fe=g("move_caret_before_on_enter_elements",j+" table",U),ve=g("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),ae=g("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",ve),de=g("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp");ku((e.special||"script noscript iframe noframes noembed title style textarea xmp").split(" "),function(st){f[st]=new RegExp("</"+st+"[^>]*>","gi")});var Ee=function(st){return new RegExp("^"+st.replace(/([?+*])/g,".$1")+"$")},Me=function(st){var $e,mt,We,yn,Lt,ar,dr,ja,Uu,cc,Ef,Ji,bu,Mi,Vd,Ac,ns,kf,H0=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,ao=/^([!\-])?(\w+[\\:]:\w+|[^=:<]+)?(?:([=:<])(.*))?$/,Pa=/[*?+]/;if(st){var fi=Za(st,",");for(n["@"]&&(Ac=n["@"].attributes,ns=n["@"].attributesOrder),$e=0,mt=fi.length;$e<mt;$e++)if(Lt=H0.exec(fi[$e]),Lt){if(Mi=Lt[1],Uu=Lt[2],Vd=Lt[3],ja=Lt[5],Ji={},bu=[],ar={attributes:Ji,attributesOrder:bu},Mi==="#"&&(ar.paddEmpty=!0),Mi==="-"&&(ar.removeEmpty=!0),Lt[4]==="!"&&(ar.removeEmptyAttrs=!0),Ac&&(ur(Ac,function(Rv,Af){Ji[Af]=Rv}),bu.push.apply(bu,ns)),ja){for(ja=Za(ja,"|"),We=0,yn=ja.length;We<yn;We++)if(Lt=ao.exec(ja[We]),Lt){if(dr={},Ef=Lt[1],cc=Lt[2].replace(/[\\:]:/g,":"),Mi=Lt[3],kf=Lt[4],Ef==="!"&&(ar.attributesRequired=ar.attributesRequired||[],ar.attributesRequired.push(cc),dr.required=!0),Ef==="-"){delete Ji[cc],bu.splice(Tw(bu,cc),1);continue}Mi&&(Mi==="="&&(ar.attributesDefault=ar.attributesDefault||[],ar.attributesDefault.push({name:cc,value:kf}),dr.defaultValue=kf),Mi===":"&&(ar.attributesForced=ar.attributesForced||[],ar.attributesForced.push({name:cc,value:kf}),dr.forcedValue=kf),Mi==="<"&&(dr.validValues=tu(kf,"?"))),Pa.test(cc)?(ar.attributePatterns=ar.attributePatterns||[],dr.pattern=Ee(cc),ar.attributePatterns.push(dr)):(Ji[cc]||bu.push(cc),Ji[cc]=dr)}}!Ac&&Uu==="@"&&(Ac=Ji,ns=bu),Vd&&(ar.outputName=Uu,n[Vd]=ar),Pa.test(Uu)?(ar.pattern=Ee(Uu),i.push(ar)):n[Uu]=ar}}},Qe=function(st){n={},i=[],Me(st),ku(b,function($e,mt){a[mt]=$e.children})},Tt=function(st){var $e=/^(~)?(.+)$/;st&&(Iu.text_block_elements=Iu.block_elements=null,ku(Za(st,","),function(mt){var We=$e.exec(mt),yn=We[1]==="~",Lt=yn?"span":"div",ar=We[2];if(a[ar]=a[Lt],s[ar]=Lt,yn||(ae[ar.toUpperCase()]={},ae[ar]={}),!n[ar]){var dr=n[Lt];dr=db({},dr),delete dr.removeEmptyAttrs,delete dr.removeEmpty,n[ar]=dr}ku(a,function(ja,Uu){ja[Lt]&&(a[Uu]=ja=db({},a[Uu]),ja[ar]=ja[Lt])})}))},jn=function(st){var $e=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;Iu[e.schema]=null,st&&ku(Za(st,","),function(mt){var We=$e.exec(mt),yn,Lt;We&&(Lt=We[1],Lt?yn=a[We[2]]:yn=a[We[2]]={"#comment":{}},yn=a[We[2]],ku(Za(We[3],"|"),function(ar){Lt==="-"?delete yn[ar]:yn[ar]={}}))})},Yt=function(st){var $e=n[st],mt;if($e)return $e;for(mt=i.length;mt--;)if($e=i[mt],$e.pattern.test(st))return $e};e.valid_elements?Qe(e.valid_elements):(ku(b,function(st,$e){n[$e]={attributes:st.attributes,attributesOrder:st.attributesOrder},a[$e]=st.children}),e.schema!=="html5"&&ku(Za("strong/b em/i"),function(st){var $e=Za(st,"/");n[$e[1]].outputName=$e[0]}),ku(Za("ol ul sub sup blockquote span font a table tbody strong em b i"),function(st){n[st]&&(n[st].removeEmpty=!0)}),ku(Za("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),function(st){n[st].paddEmpty=!0}),ku(Za("span"),function(st){n[st].removeEmptyAttrs=!0})),Tt(e.custom_elements),jn(e.valid_children),Me(e.extended_valid_elements),jn("+ol[ul|ol],+ul[ul|ol]"),ku({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},function(st,$e){n[$e]&&(n[$e].parentsRequired=Za(st))}),e.invalid_elements&&ku(xw(e.invalid_elements),function(st){n[st]&&delete n[st]}),Yt("span")||Me("span[!data-mce-type|*]");var lt=Y(C),Kn=Y(k),kt=Y(_),tn=Y(K),Et=Y(ae),zt=Y(ve),hn=Y(de),ft=Y(U),cn=Y(F),Sr=Y(J),da=Y(fe),Hr=Y(M),jo=Y(f),Oo=function(st,$e){var mt=a[st.toLowerCase()];return!!(mt&&mt[$e.toLowerCase()])},li=function(st,$e){var mt,We,yn=Yt(st);if(yn)if($e){if(yn.attributes[$e])return!0;if(mt=yn.attributePatterns,mt){for(We=mt.length;We--;)if(mt[We].pattern.test(st))return!0}}else return!0;return!1},Cs=Y(s);return{children:a,elements:n,getValidStyles:lt,getValidClasses:kt,getBlockElements:Et,getInvalidStyles:Kn,getShortEndedElements:ft,getTextBlockElements:zt,getTextInlineElements:hn,getBoolAttrs:tn,getElementRule:Yt,getSelfClosingElements:cn,getNonEmptyElements:Sr,getMoveCaretBeforeOnEnterElements:da,getWhiteSpaceElements:Hr,getSpecialElements:jo,isValidChild:Oo,isValid:li,getCustomElements:Cs,addValidElements:Me,setValidElements:Qe,addCustomElements:Tt,addValidChildren:jn}},Ew=function(e,n,a,i){var s=function(f){return f=parseInt(f,10).toString(16),f.length>1?f:"0"+f};return"#"+s(n)+s(a)+s(i)},pp=function(e,n){var a=this,i=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,s=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,f=/\s*([^:]+):\s*([^;]+);?/g,g=/\s+$/,b,C={},k,_,M=gc;e=e||{},n&&(k=n.getValidStyles(),_=n.getInvalidStyles());var F=(`\\" \\' \\; \\: ; : `+M).split(" ");for(b=0;b<F.length;b++)C[F[b]]=M+b,C[M+b]=F[b];return{toHex:function(U){return U.replace(i,Ew)},parse:function(U){var K={},j,J,fe,ve,ae=e.url_converter,de=e.url_converter_scope||a,Ee=function(kt,tn,Et){var zt=K[kt+"-top"+tn];if(!!zt){var hn=K[kt+"-right"+tn];if(!!hn){var ft=K[kt+"-bottom"+tn];if(!!ft){var cn=K[kt+"-left"+tn];if(!!cn){var Sr=[zt,hn,ft,cn];for(b=Sr.length-1;b--&&Sr[b]===Sr[b+1];);b>-1&&Et||(K[kt+tn]=b===-1?Sr[0]:Sr.join(" "),delete K[kt+"-top"+tn],delete K[kt+"-right"+tn],delete K[kt+"-bottom"+tn],delete K[kt+"-left"+tn])}}}}},Me=function(kt){var tn=K[kt],Et;if(!!tn){for(tn=tn.split(" "),Et=tn.length;Et--;)if(tn[Et]!==tn[0])return!1;return K[kt]=tn[0],!0}},Qe=function(kt,tn,Et,zt){!Me(tn)||!Me(Et)||!Me(zt)||(K[kt]=K[tn]+" "+K[Et]+" "+K[zt],delete K[tn],delete K[Et],delete K[zt])},Tt=function(kt){return ve=!0,C[kt]},jn=function(kt,tn){return ve&&(kt=kt.replace(/\uFEFF[0-9]/g,function(Et){return C[Et]})),tn||(kt=kt.replace(/\\([\'\";:])/g,"$1")),kt},Yt=function(kt){return String.fromCharCode(parseInt(kt.slice(1),16))},lt=function(kt){return kt.replace(/\\[0-9a-f]+/gi,Yt)},Kn=function(kt,tn,Et,zt,hn,ft){if(hn=hn||ft,hn)return hn=jn(hn),"'"+hn.replace(/\'/g,"\\'")+"'";if(tn=jn(tn||Et||zt),!e.allow_script_urls){var cn=tn.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(cn)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(cn))return""}return ae&&(tn=ae.call(de,tn,"style")),"url('"+tn.replace(/\'/g,"\\'")+"')"};if(U){for(U=U.replace(/[\u0000-\u001F]/g,""),U=U.replace(/\\[\"\';:\uFEFF]/g,Tt).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(kt){return kt.replace(/[;:]/g,Tt)});j=f.exec(U);)if(f.lastIndex=j.index+j[0].length,J=j[1].replace(g,"").toLowerCase(),fe=j[2].replace(g,""),J&&fe){if(J=lt(J),fe=lt(fe),J.indexOf(M)!==-1||J.indexOf('"')!==-1||!e.allow_script_urls&&(J==="behavior"||/expression\s*\(|\/\*|\*\//.test(fe)))continue;J==="font-weight"&&fe==="700"?fe="bold":(J==="color"||J==="background-color")&&(fe=fe.toLowerCase()),fe=fe.replace(i,Ew),fe=fe.replace(s,Kn),K[J]=ve?jn(fe,!0):fe}Ee("border","",!0),Ee("border","-width"),Ee("border","-color"),Ee("border","-style"),Ee("padding",""),Ee("margin",""),Qe("border","border-width","border-style","border-color"),K.border==="medium none"&&delete K.border,K["border-image"]==="none"&&delete K["border-image"]}return K},serialize:function(U,K){var j="",J=function(ve){var ae,de=k[ve];if(de)for(var Ee=0,Me=de.length;Ee<Me;Ee++)ve=de[Ee],ae=U[ve],ae&&(j+=(j.length>0?" ":"")+ve+": "+ae+";")},fe=function(ve,ae){var de=_["*"];return de&&de[ve]?!1:(de=_[ae],!(de&&de[ve]))};return K&&k?(J("*"),J(K)):ur(U,function(ve,ae){ve&&(!_||fe(ae,K))&&(j+=(j.length>0?" ":"")+ae+": "+ve+";")}),j}}},bp={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},jv=function(e){return e instanceof Event||bt(e.initEvent)},_T=function(e){return e.isDefaultPrevented===Kt||e.isDefaultPrevented===_t},MT=function(e){return gt(e.preventDefault)||jv(e)},mb=function(e,n){var a=n!=null?n:{};for(var i in e)cr(bp,i)||(a[i]=e[i]);return pt(a.composedPath)&&(a.composedPath=function(){return e.composedPath()}),a},kw=function(e,n,a,i){var s,f=mb(n,i);return f.type=e,gt(f.target)&&(f.target=(s=f.srcElement)!==null&&s!==void 0?s:a),MT(n)&&(f.preventDefault=function(){f.defaultPrevented=!0,f.isDefaultPrevented=Kt,bt(n.preventDefault)?n.preventDefault():jv(n)&&(n.returnValue=!1)},f.stopPropagation=function(){f.cancelBubble=!0,f.isPropagationStopped=Kt,bt(n.stopPropagation)?n.stopPropagation():jv(n)&&(n.cancelBubble=!0)},f.stopImmediatePropagation=function(){f.isImmediatePropagationStopped=Kt,f.stopPropagation()},_T(f)||(f.isDefaultPrevented=f.defaultPrevented===!0?Kt:_t,f.isPropagationStopped=f.cancelBubble===!0?Kt:_t,f.isImmediatePropagationStopped=_t)),f},Aw="mce-data-",Ow=/^(?:mouse|contextmenu)|click/,gb=function(e,n,a,i){e.addEventListener?e.addEventListener(n,a,i||!1):e.attachEvent&&e.attachEvent("on"+n,a)},yp=function(e,n,a,i){e.removeEventListener?e.removeEventListener(n,a,i||!1):e.detachEvent&&e.detachEvent("on"+n,a)},Fs=function(e){return pt(e)&&Ow.test(e.type)},ds=function(e,n){var a=kw(e.type,e,document,n);if(Fs(e)&&qe(e.pageX)&&!qe(e.clientX)){var i=a.target.ownerDocument||document,s=i.documentElement,f=i.body,g=a;g.pageX=e.clientX+(s&&s.scrollLeft||f&&f.scrollLeft||0)-(s&&s.clientLeft||f&&f.clientLeft||0),g.pageY=e.clientY+(s&&s.scrollTop||f&&f.scrollTop||0)-(s&&s.clientTop||f&&f.clientTop||0)}return qe(a.metaKey)&&(a.metaKey=!1),a},hb=function(e,n,a){var i=e.document,s={type:"ready"};if(a.domLoaded){n(s);return}var f=function(){return i.readyState==="complete"||i.readyState==="interactive"&&i.body},g=function(){yp(e,"DOMContentLoaded",g),yp(e,"load",g),a.domLoaded||(a.domLoaded=!0,n(s)),e=null};f()?g():gb(e,"DOMContentLoaded",g),a.domLoaded||gb(e,"load",g)},qv=function(){function e(){this.domLoaded=!1,this.events={},this.count=1,this.expando=Aw+(+new Date).toString(32),this.hasMouseEnterLeave="onmouseenter"in document.documentElement,this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}return e.prototype.bind=function(n,a,i,s){var f=this,g,b,C,k,_,M,F,U=window,K=function(J){f.executeHandlers(ds(J||U.event),g)};if(!(!n||n.nodeType===3||n.nodeType===8)){n[f.expando]?g=n[f.expando]:(g=f.count++,n[f.expando]=g,f.events[g]={}),s=s||n;var j=a.split(" ");for(C=j.length;C--;){if(k=j[C],M=K,_=F=!1,k==="DOMContentLoaded"&&(k="ready"),f.domLoaded&&k==="ready"&&n.readyState==="complete"){i.call(s,ds({type:k}));continue}f.hasMouseEnterLeave||(_=f.mouseEnterLeave[k],_&&(M=function(J){var fe=J.currentTarget,ve=J.relatedTarget;if(ve&&fe.contains)ve=fe.contains(ve);else for(;ve&&ve!==fe;)ve=ve.parentNode;ve||(J=ds(J||U.event),J.type=J.type==="mouseout"?"mouseleave":"mouseenter",J.target=fe,f.executeHandlers(J,g))})),!f.hasFocusIn&&(k==="focusin"||k==="focusout")&&(F=!0,_=k==="focusin"?"focus":"blur",M=function(J){J=ds(J||U.event),J.type=J.type==="focus"?"focusin":"focusout",f.executeHandlers(J,g)}),b=f.events[g][k],b?k==="ready"&&f.domLoaded?i(ds({type:k})):b.push({func:i,scope:s}):(f.events[g][k]=b=[{func:i,scope:s}],b.fakeName=_,b.capture=F,b.nativeHandler=M,k==="ready"?hb(n,M,f):gb(n,_||k,M,F))}return n=b=null,i}},e.prototype.unbind=function(n,a,i){var s,f,g,b,C;if(!n||n.nodeType===3||n.nodeType===8)return this;var k=n[this.expando];if(k){if(C=this.events[k],a){var _=a.split(" ");for(f=_.length;f--;)if(b=_[f],s=C[b],s){if(i){for(g=s.length;g--;)if(s[g].func===i){var M=s.nativeHandler,F=s.fakeName,U=s.capture;s=s.slice(0,g).concat(s.slice(g+1)),s.nativeHandler=M,s.fakeName=F,s.capture=U,C[b]=s}}(!i||s.length===0)&&(delete C[b],yp(n,s.fakeName||b,s.nativeHandler,s.capture))}}else ur(C,function(K,j){yp(n,K.fakeName||j,K.nativeHandler,K.capture)}),C={};for(b in C)if(cr(C,b))return this;delete this.events[k];try{delete n[this.expando]}catch(K){n[this.expando]=null}}return this},e.prototype.fire=function(n,a,i){var s;if(!n||n.nodeType===3||n.nodeType===8)return this;var f=ds({type:a,target:n},i);do s=n[this.expando],s&&this.executeHandlers(f,s),n=n.parentNode||n.ownerDocument||n.defaultView||n.parentWindow;while(n&&!f.isPropagationStopped());return this},e.prototype.clean=function(n){var a,i;if(!n||n.nodeType===3||n.nodeType===8)return this;if(n[this.expando]&&this.unbind(n),n.getElementsByTagName||(n=n.document),n&&n.getElementsByTagName)for(this.unbind(n),i=n.getElementsByTagName("*"),a=i.length;a--;)n=i[a],n[this.expando]&&this.unbind(n);return this},e.prototype.destroy=function(){this.events={}},e.prototype.cancel=function(n){return n&&(n.preventDefault(),n.stopImmediatePropagation()),!1},e.prototype.executeHandlers=function(n,a){var i=this.events[a],s=i&&i[n.type];if(s)for(var f=0,g=s.length;f<g;f++){var b=s[f];if(b&&b.func.call(b.scope,n)===!1&&n.preventDefault(),n.isImmediatePropagationStopped())return}},e.Event=new e,e}(),Li,Ra,wp,dl,sm,Cp,zc,Sp,Au,ms,no,hc,wo,Co,Lc,vu,FT,pc,xi="sizzle"+-new Date,Ou=window.document,ml=0,lm=0,Dw=nu(),xp=nu(),_g=nu(),Gv=function(e,n){return e===n&&(ms=!0),0},Hi="undefined",gl=1<<31,Mg={}.hasOwnProperty,hl=[],Rw=hl.pop,yr=hl.push,bc=hl.push,Kv=hl.slice,oi=hl.indexOf||function(e){for(var n=0,a=this.length;n<a;n++)if(this[n]===e)return n;return-1},fm="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Zr="[\\x20\\t\\r\\n\\f]",Xv="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",pb="\\["+Zr+"*("+Xv+")(?:"+Zr+"*([*^$|!~]?=)"+Zr+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+Xv+"))|)"+Zr+"*\\]",Ma=":("+Xv+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+pb+")*)|.*)\\)|)",Ql=new RegExp("^"+Zr+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Zr+"+$","g"),Qf=new RegExp("^"+Zr+"*,"+Zr+"*"),pl=new RegExp("^"+Zr+"*([>+~]|"+Zr+")"+Zr+"*"),PT=new RegExp("="+Zr+`*([^\\]'"]*?)`+Zr+"*\\]","g"),NT=new RegExp(Ma),Bw=new RegExp("^"+Xv+"$"),Tp={ID:new RegExp("^#("+Xv+")"),CLASS:new RegExp("^\\.("+Xv+")"),TAG:new RegExp("^("+Xv+"|[*])"),ATTR:new RegExp("^"+pb),PSEUDO:new RegExp("^"+Ma),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Zr+"*(even|odd|(([+-]|)(\\d*)n|)"+Zr+"*(?:([+-]|)"+Zr+"*(\\d+)|))"+Zr+"*\\)|)","i"),bool:new RegExp("^(?:"+fm+")$","i"),needsContext:new RegExp("^"+Zr+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Zr+"*((?:-\\d)?\\d*)"+Zr+"*\\)|)(?=[^-]|$)","i")},IT=/^(?:input|select|textarea|button)$/i,$T=/^h\d$/i,bb=/^[^{]+\{\s*\[native \w/,zT=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,yb=/[+~]/,bl=/'|\\/g,Ps=new RegExp("\\\\([\\da-f]{1,6}"+Zr+"?|("+Zr+")|.)","ig"),ev=function(e,n,a){var i="0x"+n-65536;return i!==i||a?n:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,i&1023|56320)};try{bc.apply(hl=Kv.call(Ou.childNodes),Ou.childNodes),hl[Ou.childNodes.length].nodeType}catch(e){bc={apply:hl.length?function(n,a){yr.apply(n,Kv.call(a))}:function(n,a){for(var i=n.length,s=0;n[i++]=a[s++];);n.length=i-1}}}var Ea=function(e,n,a,i){var s,f,g,b,C,k,_,M,F,U;if((n?n.ownerDocument||n:Ou)!==hc&&no(n),n=n||hc,a=a||[],!e||typeof e!="string")return a;if((b=n.nodeType)!==1&&b!==9)return[];if(Co&&!i){if(s=zT.exec(e))if(g=s[1]){if(b===9)if(f=n.getElementById(g),f&&f.parentNode){if(f.id===g)return a.push(f),a}else return a;else if(n.ownerDocument&&(f=n.ownerDocument.getElementById(g))&&pc(n,f)&&f.id===g)return a.push(f),a}else{if(s[2])return bc.apply(a,n.getElementsByTagName(e)),a;if((g=s[3])&&Li.getElementsByClassName)return bc.apply(a,n.getElementsByClassName(g)),a}if(Li.qsa&&(!Lc||!Lc.test(e))){if(M=_=xi,F=n,U=b===9&&e,b===1&&n.nodeName.toLowerCase()!=="object"){for(k=sm(e),(_=n.getAttribute("id"))?M=_.replace(bl,"\\$&"):n.setAttribute("id",M),M="[id='"+M+"'] ",C=k.length;C--;)k[C]=M+Qa(k[C]);F=yb.test(e)&&Ap(n.parentNode)||n,U=k.join(",")}if(U)try{return bc.apply(a,F.querySelectorAll(U)),a}catch(K){}finally{_||n.removeAttribute("id")}}}return zc(e.replace(Ql,"$1"),n,a,i)};function nu(){var e=[];function n(a,i){return e.push(a+" ")>Ra.cacheLength&&delete n[e.shift()],n[a+" "]=i}return n}function So(e){return e[xi]=!0,e}function Ep(e,n){var a=n&&e,i=a&&e.nodeType===1&&n.nodeType===1&&(~n.sourceIndex||gl)-(~e.sourceIndex||gl);if(i)return i;if(a){for(;a=a.nextSibling;)if(a===n)return-1}return e?1:-1}function kp(e){return function(n){var a=n.nodeName.toLowerCase();return a==="input"&&n.type===e}}function Ti(e){return function(n){var a=n.nodeName.toLowerCase();return(a==="input"||a==="button")&&n.type===e}}function Hc(e){return So(function(n){return n=+n,So(function(a,i){for(var s,f=e([],a.length,n),g=f.length;g--;)a[s=f[g]]&&(a[s]=!(i[s]=a[s]))})})}function Ap(e){return e&&typeof e.getElementsByTagName!==Hi&&e}Li=Ea.support={},dl=Ea.isXML=function(e){var n=e&&(e.ownerDocument||e).documentElement;return n?n.nodeName!=="HTML":!1},no=Ea.setDocument=function(e){var n,a=e?e.ownerDocument||e:Ou,i=a.defaultView;function s(f){try{return f.top}catch(g){}return null}return a===hc||a.nodeType!==9||!a.documentElement?hc:(hc=a,wo=a.documentElement,Co=!dl(a),i&&i!==s(i)&&(i.addEventListener?i.addEventListener("unload",function(){no()},!1):i.attachEvent&&i.attachEvent("onunload",function(){no()})),Li.attributes=!0,Li.getElementsByTagName=!0,Li.getElementsByClassName=bb.test(a.getElementsByClassName),Li.getById=!0,Ra.find.ID=function(f,g){if(typeof g.getElementById!==Hi&&Co){var b=g.getElementById(f);return b&&b.parentNode?[b]:[]}},Ra.filter.ID=function(f){var g=f.replace(Ps,ev);return function(b){return b.getAttribute("id")===g}},Ra.find.TAG=Li.getElementsByTagName?function(f,g){if(typeof g.getElementsByTagName!==Hi)return g.getElementsByTagName(f)}:function(f,g){var b,C=[],k=0,_=g.getElementsByTagName(f);if(f==="*"){for(;b=_[k++];)b.nodeType===1&&C.push(b);return C}return _},Ra.find.CLASS=Li.getElementsByClassName&&function(f,g){if(Co)return g.getElementsByClassName(f)},vu=[],Lc=[],Li.disconnectedMatch=!0,Lc=Lc.length&&new RegExp(Lc.join("|")),vu=vu.length&&new RegExp(vu.join("|")),n=bb.test(wo.compareDocumentPosition),pc=n||bb.test(wo.contains)?function(f,g){var b=f.nodeType===9?f.documentElement:f,C=g&&g.parentNode;return f===C||!!(C&&C.nodeType===1&&(b.contains?b.contains(C):f.compareDocumentPosition&&f.compareDocumentPosition(C)&16))}:function(f,g){if(g){for(;g=g.parentNode;)if(g===f)return!0}return!1},Gv=n?function(f,g){if(f===g)return ms=!0,0;var b=!f.compareDocumentPosition-!g.compareDocumentPosition;return b||(b=(f.ownerDocument||f)===(g.ownerDocument||g)?f.compareDocumentPosition(g):1,b&1||!Li.sortDetached&&g.compareDocumentPosition(f)===b?f===a||f.ownerDocument===Ou&&pc(Ou,f)?-1:g===a||g.ownerDocument===Ou&&pc(Ou,g)?1:Au?oi.call(Au,f)-oi.call(Au,g):0:b&4?-1:1)}:function(f,g){if(f===g)return ms=!0,0;var b,C=0,k=f.parentNode,_=g.parentNode,M=[f],F=[g];if(!k||!_)return f===a?-1:g===a?1:k?-1:_?1:Au?oi.call(Au,f)-oi.call(Au,g):0;if(k===_)return Ep(f,g);for(b=f;b=b.parentNode;)M.unshift(b);for(b=g;b=b.parentNode;)F.unshift(b);for(;M[C]===F[C];)C++;return C?Ep(M[C],F[C]):M[C]===Ou?-1:F[C]===Ou?1:0},a)},Ea.matches=function(e,n){return Ea(e,null,null,n)},Ea.matchesSelector=function(e,n){if((e.ownerDocument||e)!==hc&&no(e),n=n.replace(PT,"='$1']"),Li.matchesSelector&&Co&&(!vu||!vu.test(n))&&(!Lc||!Lc.test(n)))try{var a=FT.call(e,n);if(a||Li.disconnectedMatch||e.document&&e.document.nodeType!==11)return a}catch(i){}return Ea(n,hc,null,[e]).length>0},Ea.contains=function(e,n){return(e.ownerDocument||e)!==hc&&no(e),pc(e,n)},Ea.attr=function(e,n){(e.ownerDocument||e)!==hc&&no(e);var a=Ra.attrHandle[n.toLowerCase()],i=a&&Mg.call(Ra.attrHandle,n.toLowerCase())?a(e,n,!Co):void 0;return i!==void 0?i:Li.attributes||!Co?e.getAttribute(n):(i=e.getAttributeNode(n))&&i.specified?i.value:null},Ea.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},Ea.uniqueSort=function(e){var n,a=[],i=0,s=0;if(ms=!Li.detectDuplicates,Au=!Li.sortStable&&e.slice(0),e.sort(Gv),ms){for(;n=e[s++];)n===e[s]&&(i=a.push(s));for(;i--;)e.splice(a[i],1)}return Au=null,e},wp=Ea.getText=function(e){var n,a="",i=0,s=e.nodeType;if(s){if(s===1||s===9||s===11){if(typeof e.textContent=="string")return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)a+=wp(e)}else if(s===3||s===4)return e.nodeValue}else for(;n=e[i++];)a+=wp(n);return a},Ra=Ea.selectors={cacheLength:50,createPseudo:So,match:Tp,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Ps,ev),e[3]=(e[3]||e[4]||e[5]||"").replace(Ps,ev),e[2]==="~="&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),e[1].slice(0,3)==="nth"?(e[3]||Ea.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd")),e[5]=+(e[7]+e[8]||e[3]==="odd")):e[3]&&Ea.error(e[0]),e},PSEUDO:function(e){var n,a=!e[6]&&e[2];return Tp.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":a&&NT.test(a)&&(n=sm(a,!0))&&(n=a.indexOf(")",a.length-n)-a.length)&&(e[0]=e[0].slice(0,n),e[2]=a.slice(0,n)),e.slice(0,3))}},filter:{TAG:function(e){var n=e.replace(Ps,ev).toLowerCase();return e==="*"?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===n}},CLASS:function(e){var n=Dw[e+" "];return n||(n=new RegExp("(^|"+Zr+")"+e+"("+Zr+"|$)"))&&Dw(e,function(a){return n.test(typeof a.className=="string"&&a.className||typeof a.getAttribute!==Hi&&a.getAttribute("class")||"")})},ATTR:function(e,n,a){return function(i){var s=Ea.attr(i,e);return s==null?n==="!=":n?(s+="",n==="="?s===a:n==="!="?s!==a:n==="^="?a&&s.indexOf(a)===0:n==="*="?a&&s.indexOf(a)>-1:n==="$="?a&&s.slice(-a.length)===a:n==="~="?(" "+s+" ").indexOf(a)>-1:n==="|="?s===a||s.slice(0,a.length+1)===a+"-":!1):!0}},CHILD:function(e,n,a,i,s){var f=e.slice(0,3)!=="nth",g=e.slice(-4)!=="last",b=n==="of-type";return i===1&&s===0?function(C){return!!C.parentNode}:function(C,k,_){var M,F,U,K,j,J,fe=f!==g?"nextSibling":"previousSibling",ve=C.parentNode,ae=b&&C.nodeName.toLowerCase(),de=!_&&!b;if(ve){if(f){for(;fe;){for(U=C;U=U[fe];)if(b?U.nodeName.toLowerCase()===ae:U.nodeType===1)return!1;J=fe=e==="only"&&!J&&"nextSibling"}return!0}if(J=[g?ve.firstChild:ve.lastChild],g&&de){for(F=ve[xi]||(ve[xi]={}),M=F[e]||[],j=M[0]===ml&&M[1],K=M[0]===ml&&M[2],U=j&&ve.childNodes[j];U=++j&&U&&U[fe]||(K=j=0)||J.pop();)if(U.nodeType===1&&++K&&U===C){F[e]=[ml,j,K];break}}else if(de&&(M=(C[xi]||(C[xi]={}))[e])&&M[0]===ml)K=M[1];else for(;(U=++j&&U&&U[fe]||(K=j=0)||J.pop())&&!((b?U.nodeName.toLowerCase()===ae:U.nodeType===1)&&++K&&(de&&((U[xi]||(U[xi]={}))[e]=[ml,K]),U===C)););return K-=s,K===i||K%i==0&&K/i>=0}}},PSEUDO:function(e,n){var a,i=Ra.pseudos[e]||Ra.setFilters[e.toLowerCase()]||Ea.error("unsupported pseudo: "+e);return i[xi]?i(n):i.length>1?(a=[e,e,"",n],Ra.setFilters.hasOwnProperty(e.toLowerCase())?So(function(s,f){for(var g,b=i(s,n),C=b.length;C--;)g=oi.call(s,b[C]),s[g]=!(f[g]=b[C])}):function(s){return i(s,0,a)}):i}},pseudos:{not:So(function(e){var n=[],a=[],i=Cp(e.replace(Ql,"$1"));return i[xi]?So(function(s,f,g,b){for(var C,k=i(s,null,b,[]),_=s.length;_--;)(C=k[_])&&(s[_]=!(f[_]=C))}):function(s,f,g){return n[0]=s,i(n,null,g,a),n[0]=null,!a.pop()}}),has:So(function(e){return function(n){return Ea(e,n).length>0}}),contains:So(function(e){return e=e.replace(Ps,ev),function(n){return(n.textContent||n.innerText||wp(n)).indexOf(e)>-1}}),lang:So(function(e){return Bw.test(e||"")||Ea.error("unsupported lang: "+e),e=e.replace(Ps,ev).toLowerCase(),function(n){var a;do if(a=Co?n.lang:n.getAttribute("xml:lang")||n.getAttribute("lang"))return a=a.toLowerCase(),a===e||a.indexOf(e+"-")===0;while((n=n.parentNode)&&n.nodeType===1);return!1}}),target:function(e){var n=window.location&&window.location.hash;return n&&n.slice(1)===e.id},root:function(e){return e===wo},focus:function(e){return e===hc.activeElement&&(!hc.hasFocus||hc.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var n=e.nodeName.toLowerCase();return n==="input"&&!!e.checked||n==="option"&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!Ra.pseudos.empty(e)},header:function(e){return $T.test(e.nodeName)},input:function(e){return IT.test(e.nodeName)},button:function(e){var n=e.nodeName.toLowerCase();return n==="input"&&e.type==="button"||n==="button"},text:function(e){var n;return e.nodeName.toLowerCase()==="input"&&e.type==="text"&&((n=e.getAttribute("type"))==null||n.toLowerCase()==="text")},first:Hc(function(){return[0]}),last:Hc(function(e,n){return[n-1]}),eq:Hc(function(e,n,a){return[a<0?a+n:a]}),even:Hc(function(e,n){for(var a=0;a<n;a+=2)e.push(a);return e}),odd:Hc(function(e,n){for(var a=1;a<n;a+=2)e.push(a);return e}),lt:Hc(function(e,n,a){for(var i=a<0?a+n:a;--i>=0;)e.push(i);return e}),gt:Hc(function(e,n,a){for(var i=a<0?a+n:a;++i<n;)e.push(i);return e})}},Ra.pseudos.nth=Ra.pseudos.eq,Ze(["radio","checkbox","file","password","image"],function(e){Ra.pseudos[e]=kp(e)}),Ze(["submit","reset"],function(e){Ra.pseudos[e]=Ti(e)});function Fg(){}Fg.prototype=Ra.filters=Ra.pseudos,Ra.setFilters=new Fg,sm=Ea.tokenize=function(e,n){var a,i,s,f,g,b,C,k=xp[e+" "];if(k)return n?0:k.slice(0);for(g=e,b=[],C=Ra.preFilter;g;){(!a||(i=Qf.exec(g)))&&(i&&(g=g.slice(i[0].length)||g),b.push(s=[])),a=!1,(i=pl.exec(g))&&(a=i.shift(),s.push({value:a,type:i[0].replace(Ql," ")}),g=g.slice(a.length));for(f in Ra.filter)!Ra.filter.hasOwnProperty(f)||(i=Tp[f].exec(g))&&(!C[f]||(i=C[f](i)))&&(a=i.shift(),s.push({value:a,type:f,matches:i}),g=g.slice(a.length));if(!a)break}return n?g.length:g?Ea.error(e):xp(e,b).slice(0)};function Qa(e){for(var n=0,a=e.length,i="";n<a;n++)i+=e[n].value;return i}function wb(e,n,a){var i=n.dir,s=a&&i==="parentNode",f=lm++;return n.first?function(g,b,C){for(;g=g[i];)if(g.nodeType===1||s)return e(g,b,C)}:function(g,b,C){var k,_,M=[ml,f];if(C){for(;g=g[i];)if((g.nodeType===1||s)&&e(g,b,C))return!0}else for(;g=g[i];)if(g.nodeType===1||s){if(_=g[xi]||(g[xi]={}),(k=_[i])&&k[0]===ml&&k[1]===f)return M[2]=k[2];if(_[i]=M,M[2]=e(g,b,C))return!0}}}function vm(e){return e.length>1?function(n,a,i){for(var s=e.length;s--;)if(!e[s](n,a,i))return!1;return!0}:e[0]}function yl(e,n,a){for(var i=0,s=n.length;i<s;i++)Ea(e,n[i],a);return a}function wl(e,n,a,i,s){for(var f,g=[],b=0,C=e.length,k=n!=null;b<C;b++)(f=e[b])&&(!a||a(f,i,s))&&(g.push(f),k&&n.push(b));return g}function Yv(e,n,a,i,s,f){return i&&!i[xi]&&(i=Yv(i)),s&&!s[xi]&&(s=Yv(s,f)),So(function(g,b,C,k){var _,M,F,U=[],K=[],j=b.length,J=g||yl(n||"*",C.nodeType?[C]:C,[]),fe=e&&(g||!n)?wl(J,U,e,C,k):J,ve=a?s||(g?e:j||i)?[]:b:fe;if(a&&a(fe,ve,C,k),i)for(_=wl(ve,K),i(_,[],C,k),M=_.length;M--;)(F=_[M])&&(ve[K[M]]=!(fe[K[M]]=F));if(g){if(s||e){if(s){for(_=[],M=ve.length;M--;)(F=ve[M])&&_.push(fe[M]=F);s(null,ve=[],_,k)}for(M=ve.length;M--;)(F=ve[M])&&(_=s?oi.call(g,F):U[M])>-1&&(g[_]=!(b[_]=F))}}else ve=wl(ve===b?ve.splice(j,ve.length):ve),s?s(null,b,ve,k):bc.apply(b,ve)})}function Cb(e){for(var n,a,i,s=e.length,f=Ra.relative[e[0].type],g=f||Ra.relative[" "],b=f?1:0,C=wb(function(M){return M===n},g,!0),k=wb(function(M){return oi.call(n,M)>-1},g,!0),_=[function(M,F,U){var K=!f&&(U||F!==Sp)||((n=F).nodeType?C(M,F,U):k(M,F,U));return n=null,K}];b<s;b++)if(a=Ra.relative[e[b].type])_=[wb(vm(_),a)];else{if(a=Ra.filter[e[b].type].apply(null,e[b].matches),a[xi]){for(i=++b;i<s&&!Ra.relative[e[i].type];i++);return Yv(b>1&&vm(_),b>1&&Qa(e.slice(0,b-1).concat({value:e[b-2].type===" "?"*":""})).replace(Ql,"$1"),a,b<i&&Cb(e.slice(b,i)),i<s&&Cb(e=e.slice(i)),i<s&&Qa(e))}_.push(a)}return vm(_)}function ii(e,n){var a=n.length>0,i=e.length>0,s=function(f,g,b,C,k){var _,M,F,U=0,K="0",j=f&&[],J=[],fe=Sp,ve=f||i&&Ra.find.TAG("*",k),ae=ml+=fe==null?1:Math.random()||.1,de=ve.length;for(k&&(Sp=g!==hc&&g);K!==de&&(_=ve[K])!=null;K++){if(i&&_){for(M=0;F=e[M++];)if(F(_,g,b)){C.push(_);break}k&&(ml=ae)}a&&((_=!F&&_)&&U--,f&&j.push(_))}if(U+=K,a&&K!==U){for(M=0;F=n[M++];)F(j,J,g,b);if(f){if(U>0)for(;K--;)j[K]||J[K]||(J[K]=Rw.call(C));J=wl(J)}bc.apply(C,J),k&&!f&&J.length>0&&U+n.length>1&&Ea.uniqueSort(C)}return k&&(ml=ae,Sp=fe),j};return a?So(s):s}Cp=Ea.compile=function(e,n){var a,i=[],s=[],f=_g[e+" "];if(!f){for(n||(n=sm(e)),a=n.length;a--;)f=Cb(n[a]),f[xi]?i.push(f):s.push(f);f=_g(e,ii(s,i)),f.selector=e}return f},zc=Ea.select=function(e,n,a,i){var s,f,g,b,C,k=typeof e=="function"&&e,_=!i&&sm(e=k.selector||e);if(a=a||[],_.length===1){if(f=_[0]=_[0].slice(0),f.length>2&&(g=f[0]).type==="ID"&&Li.getById&&n.nodeType===9&&Co&&Ra.relative[f[1].type]){if(n=(Ra.find.ID(g.matches[0].replace(Ps,ev),n)||[])[0],n)k&&(n=n.parentNode);else return a;e=e.slice(f.shift().value.length)}for(s=Tp.needsContext.test(e)?0:f.length;s--&&(g=f[s],!Ra.relative[b=g.type]);)if((C=Ra.find[b])&&(i=C(g.matches[0].replace(Ps,ev),yb.test(f[0].type)&&Ap(n.parentNode)||n))){if(f.splice(s,1),e=i.length&&Qa(f),!e)return bc.apply(a,i),a;break}}return(k||Cp(e,_))(i,n,!Co,a,yb.test(e)&&Ap(n.parentNode)||n),a},Li.sortStable=xi.split("").sort(Gv).join("")===xi,Li.detectDuplicates=!!ms,no(),Li.sortDetached=!0;var dm=document,Sb=Array.prototype.push,LT=Array.prototype.slice,_w=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,mm=qv.Event,Op=Je.makeMap("children,contents,next,prev"),Pg=function(e){return typeof e!="undefined"},xb=function(e){return typeof e=="string"},HT=function(e){return e&&e===e.window},Ns=function(e,n){n=n||dm;var a=n.createElement("div"),i=n.createDocumentFragment();a.innerHTML=e;for(var s;s=a.firstChild;)i.appendChild(s);return i},Jv=function(e,n,a,i){var s;if(xb(n))n=Ns(n,Is(e[0]));else if(n.length&&!n.nodeType){if(n=vr.makeArray(n),i)for(s=n.length-1;s>=0;s--)Jv(e,n[s],a,i);else for(s=0;s<n.length;s++)Jv(e,n[s],a,i);return e}if(n.nodeType)for(s=e.length;s--;)a.call(e[s],n);return e},Mw=function(e,n){return e&&n&&(" "+e.className+" ").indexOf(" "+n+" ")!==-1},Tb=function(e,n,a){var i,s;return n=vr(n)[0],e.each(function(){var f=this;(!a||i!==f.parentNode)&&(i=f.parentNode,s=n.cloneNode(!1),f.parentNode.insertBefore(s,f)),s.appendChild(f)}),e},Eb=Je.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),kb=Je.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),Fw={for:"htmlFor",class:"className",readonly:"readOnly"},Pw={float:"cssFloat"},Dp={},Ab={},Du=function(e,n){return new vr.fn.init(e,n)},gs=function(e,n){var a;if(n.indexOf)return n.indexOf(e);for(a=n.length;a--;)if(n[a]===e)return a;return-1},Zv=/^\s*|\s*$/g,du=function(e){return e==null?"":(""+e).replace(Zv,"")},Ao=function(e,n){var a,i,s,f;if(e)if(a=e.length,a===void 0){for(i in e)if(e.hasOwnProperty(i)&&(f=e[i],n.call(f,i,f)===!1))break}else for(s=0;s<a&&(f=e[s],n.call(f,s,f)!==!1);s++);return e},tv=function(e,n){var a=[];return Ao(e,function(i,s){n(s,i)&&a.push(s)}),a},Is=function(e){return e?e.nodeType===9?e:e.ownerDocument:dm};Du.fn=Du.prototype={constructor:Du,selector:"",context:null,length:0,init:function(e,n){var a=this,i,s;if(!e)return a;if(e.nodeType)return a.context=a[0]=e,a.length=1,a;if(n&&n.nodeType)a.context=n;else{if(n)return vr(e).attr(n);a.context=n=document}if(xb(e))if(a.selector=e,e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?i=[null,e,null]:i=_w.exec(e),i)if(i[1])for(s=Ns(e,Is(n)).firstChild;s;)Sb.call(a,s),s=s.nextSibling;else{if(s=Is(n).getElementById(i[2]),!s)return a;if(s.id!==i[2])return a.find(e);a.length=1,a[0]=s}else return vr(n).find(e);else this.add(e,!1);return a},toArray:function(){return Je.toArray(this)},add:function(e,n){var a=this,i,s;if(xb(e))return a.add(vr(e));if(n!==!1)for(i=vr.unique(a.toArray().concat(vr.makeArray(e))),a.length=i.length,s=0;s<i.length;s++)a[s]=i[s];else Sb.apply(a,vr.makeArray(e));return a},attr:function(e,n){var a=this,i;if(typeof e=="object")Ao(e,function(s,f){a.attr(s,f)});else if(Pg(n))this.each(function(){var s;if(this.nodeType===1){if(s=Dp[e],s&&s.set){s.set(this,n);return}n===null?this.removeAttribute(e,2):this.setAttribute(e,n,2)}});else{if(a[0]&&a[0].nodeType===1){if(i=Dp[e],i&&i.get)return i.get(a[0],e);if(kb[e])return a.prop(e)?e:void 0;n=a[0].getAttribute(e,2),n===null&&(n=void 0)}return n}return a},removeAttr:function(e){return this.attr(e,null)},prop:function(e,n){var a=this;if(e=Fw[e]||e,typeof e=="object")Ao(e,function(i,s){a.prop(i,s)});else if(Pg(n))this.each(function(){this.nodeType===1&&(this[e]=n)});else return a[0]&&a[0].nodeType&&e in a[0]?a[0][e]:n;return a},css:function(e,n){var a=this,i,s,f=function(b){return b.replace(/-(\D)/g,function(C,k){return k.toUpperCase()})},g=function(b){return b.replace(/[A-Z]/g,function(C){return"-"+C})};if(typeof e=="object")Ao(e,function(b,C){a.css(b,C)});else if(Pg(n))e=f(e),typeof n=="number"&&!Eb[e]&&(n=n.toString()+"px"),a.each(function(){var b=this.style;if(s=Ab[e],s&&s.set){s.set(this,n);return}try{this.style[Pw[e]||e]=n}catch(C){}(n===null||n==="")&&(b.removeProperty?b.removeProperty(g(e)):b.removeAttribute(e))});else{if(i=a[0],s=Ab[e],s&&s.get)return s.get(i);if(i.ownerDocument.defaultView)try{return i.ownerDocument.defaultView.getComputedStyle(i,null).getPropertyValue(g(e))}catch(b){return}else return i.currentStyle?i.currentStyle[f(e)]:""}return a},remove:function(){for(var e=this,n,a=this.length;a--;)n=e[a],mm.clean(n),n.parentNode&&n.parentNode.removeChild(n);return this},empty:function(){for(var e=this,n,a=this.length;a--;)for(n=e[a];n.firstChild;)n.removeChild(n.firstChild);return this},html:function(e){var n=this,a;if(Pg(e)){a=n.length;try{for(;a--;)n[a].innerHTML=e}catch(i){vr(n[a]).empty().append(e)}return n}return n[0]?n[0].innerHTML:""},text:function(e){var n=this,a;if(Pg(e)){for(a=n.length;a--;)"innerText"in n[a]?n[a].innerText=e:n[0].textContent=e;return n}return n[0]?n[0].innerText||n[0].textContent:""},append:function(){return Jv(this,arguments,function(e){(this.nodeType===1||this.host&&this.host.nodeType===1)&&this.appendChild(e)})},prepend:function(){return Jv(this,arguments,function(e){(this.nodeType===1||this.host&&this.host.nodeType===1)&&this.insertBefore(e,this.firstChild)},!0)},before:function(){var e=this;return e[0]&&e[0].parentNode?Jv(e,arguments,function(n){this.parentNode.insertBefore(n,this)}):e},after:function(){var e=this;return e[0]&&e[0].parentNode?Jv(e,arguments,function(n){this.parentNode.insertBefore(n,this.nextSibling)},!0):e},appendTo:function(e){return vr(e).append(this),this},prependTo:function(e){return vr(e).prepend(this),this},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){return Tb(this,e)},wrapAll:function(e){return Tb(this,e,!0)},wrapInner:function(e){return this.each(function(){vr(this).contents().wrapAll(e)}),this},unwrap:function(){return this.parent().each(function(){vr(this).replaceWith(this.childNodes)})},clone:function(){var e=[];return this.each(function(){e.push(this.cloneNode(!0))}),vr(e)},addClass:function(e){return this.toggleClass(e,!0)},removeClass:function(e){return this.toggleClass(e,!1)},toggleClass:function(e,n){var a=this;return typeof e!="string"||(e.indexOf(" ")!==-1?Ao(e.split(" "),function(){a.toggleClass(this,n)}):a.each(function(i,s){var f=Mw(s,e);if(f!==n){var g=s.className;f?s.className=du((" "+g+" ").replace(" "+e+" "," ")):s.className+=g?" "+e:e}})),a},hasClass:function(e){return Mw(this[0],e)},each:function(e){return Ao(this,e)},on:function(e,n){return this.each(function(){mm.bind(this,e,n)})},off:function(e,n){return this.each(function(){mm.unbind(this,e,n)})},trigger:function(e){return this.each(function(){typeof e=="object"?mm.fire(this,e.type,e):mm.fire(this,e)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return vr(LT.apply(this,arguments))},eq:function(e){return e===-1?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(e){var n,a,i=[];for(n=0,a=this.length;n<a;n++)vr.find(e,this[n],i);return vr(i)},filter:function(e){return vr(typeof e=="function"?tv(this.toArray(),function(n,a){return e(a,n)}):vr.filter(e,this.toArray()))},closest:function(e){var n=[];return e instanceof vr&&(e=e[0]),this.each(function(a,i){for(;i;){if(typeof e=="string"&&vr(i).is(e)){n.push(i);break}else if(i===e){n.push(i);break}i=i.parentNode}}),vr(n)},offset:function(e){var n,a,i,s=0,f=0,g;return e?this.css(e):(n=this[0],n&&(a=n.ownerDocument,i=a.documentElement,n.getBoundingClientRect&&(g=n.getBoundingClientRect(),s=g.left+(i.scrollLeft||a.body.scrollLeft)-i.clientLeft,f=g.top+(i.scrollTop||a.body.scrollTop)-i.clientTop)),{left:s,top:f})},push:Sb,sort:Array.prototype.sort,splice:Array.prototype.splice},Je.extend(Du,{extend:Je.extend,makeArray:function(e){return HT(e)||e.nodeType?[e]:Je.toArray(e)},inArray:gs,isArray:Je.isArray,each:Ao,trim:du,grep:tv,find:Ea,expr:Ea.selectors,unique:Ea.uniqueSort,text:Ea.getText,contains:Ea.contains,filter:function(e,n,a){var i=n.length;for(a&&(e=":not("+e+")");i--;)n[i].nodeType!==1&&n.splice(i,1);return n.length===1?n=vr.find.matchesSelector(n[0],e)?[n[0]]:[]:n=vr.find.matches(e,n),n}});var Ob=function(e,n,a){var i=[],s=e[n];for(typeof a!="string"&&a instanceof vr&&(a=a[0]);s&&s.nodeType!==9&&!(a!==void 0&&(s===a||typeof a=="string"&&vr(s).is(a)));)s.nodeType===1&&i.push(s),s=s[n];return i},Rp=function(e,n,a,i){var s=[];for(i instanceof vr&&(i=i[0]);e;e=e[n])if(!(a&&e.nodeType!==a)){if(i!==void 0&&(e===i||typeof i=="string"&&vr(e).is(i)))break;s.push(e)}return s},Db=function(e,n,a){for(e=e[n];e;e=e[n])if(e.nodeType===a)return e;return null};Ao({parent:function(e){var n=e.parentNode;return n&&n.nodeType!==11?n:null},parents:function(e){return Ob(e,"parentNode")},next:function(e){return Db(e,"nextSibling",1)},prev:function(e){return Db(e,"previousSibling",1)},children:function(e){return Rp(e.firstChild,"nextSibling",1)},contents:function(e){return Je.toArray((e.nodeName==="iframe"?e.contentDocument||e.contentWindow.document:e).childNodes)}},function(e,n){Du.fn[e]=function(a){var i=this,s=[];i.each(function(){var g=n.call(s,this,a,s);g&&(vr.isArray(g)?s.push.apply(s,g):s.push(g))}),this.length>1&&(Op[e]||(s=vr.unique(s)),e.indexOf("parents")===0&&(s=s.reverse()));var f=vr(s);return a?f.filter(a):f}}),Ao({parentsUntil:function(e,n){return Ob(e,"parentNode",n)},nextUntil:function(e,n){return Rp(e,"nextSibling",1,n).slice(1)},prevUntil:function(e,n){return Rp(e,"previousSibling",1,n).slice(1)}},function(e,n){Du.fn[e]=function(a,i){var s=this,f=[];s.each(function(){var b=n.call(f,this,a,f);b&&(vr.isArray(b)?f.push.apply(f,b):f.push(b))}),this.length>1&&(f=vr.unique(f),(e.indexOf("parents")===0||e==="prevUntil")&&(f=f.reverse()));var g=vr(f);return i?g.filter(i):g}}),Du.fn.is=function(e){return!!e&&this.filter(e).length>0},Du.fn.init.prototype=Du.fn,Du.overrideDefaults=function(e){var n,a=function(i,s){return n=n||e(),arguments.length===0&&(i=n.element),s||(s=n.context),new a.fn.init(i,s)};return vr.extend(a,this),a},Du.attrHooks=Dp,Du.cssHooks=Ab;var vr=Du,Ng=Je.each,Nw=Je.grep,nv=Ln.ie,VT=/^([a-z0-9],?)+$/i,ru=function(e,n,a){var i=n.keep_values,s={set:function(g,b,C){n.url_converter&&(b=n.url_converter.call(n.url_converter_scope||a(),b,C,g[0])),g.attr("data-mce-"+C,b).attr(C,b)},get:function(g,b){return g.attr("data-mce-"+b)||g.attr(b)}},f={style:{set:function(g,b){if(b!==null&&typeof b=="object"){g.css(b);return}i&&g.attr("data-mce-style",b),b!==null&&typeof b=="string"?(g.removeAttr("style"),g.css(e.parse(b))):g.attr("style",b)},get:function(g){var b=g.attr("data-mce-style")||g.attr("style");return b=e.serialize(e.parse(b),g[0].nodeName),b}}};return i&&(f.href=f.src=s),f},hs=function(e,n){var a=n.attr("style"),i=e.serialize(e.parse(a),n[0].nodeName);i||(i=null),n.attr("data-mce-style",i)},gm=function(e,n){var a=0,i,s;if(e)for(i=e.nodeType,e=e.previousSibling;e;e=e.previousSibling)s=e.nodeType,!(n&&s===3&&(s===i||!e.nodeValue.length))&&(a++,i=s);return a},Fa=function(e,n){n===void 0&&(n={});var a={},i=window,s={},f=0,g=!0,b=!0,C=np.forElement(Z.fromDom(e),{contentCssCors:n.contentCssCors,referrerPolicy:n.referrerPolicy}),k=[],_=n.schema?n.schema:Zf({}),M=pp({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema),F=n.ownEvents?new qv:qv.Event,U=_.getBlockElements(),K=vr.overrideDefaults(function(){return{context:e,element:Kh.getRoot()}}),j=function(be){if(typeof be=="string")return!!U[be];if(be){var je=be.nodeType;if(je)return!!(je===1&&U[be.nodeName])}return!1},J=function(be){return be&&e&&wn(be)?e.getElementById(be):be},fe=function(be){return K(typeof be=="string"?J(be):be)},ve=function(be,je,Ot){var Ht,pr,ta=fe(be);return ta.length&&(Ht=nw[je],Ht&&Ht.get?pr=Ht.get(ta,je):pr=ta.attr(je)),typeof pr=="undefined"&&(pr=Ot||""),pr},ae=function(be){var je=J(be);return je?je.attributes:[]},de=function(be,je,Ot){Ot===""&&(Ot=null);var Ht=fe(be),pr=Ht.attr(je);if(!!Ht.length){var ta=nw[je];ta&&ta.set?ta.set(Ht,Ot,je):Ht.attr(je,Ot),pr!==Ot&&n.onSetAttrib&&n.onSetAttrib({attrElm:Ht,attrName:je,attrValue:Ot})}},Ee=function(be,je){if(!nv||be.nodeType!==1||je)return be.cloneNode(je);var Ot=e.createElement(be.nodeName);return Ng(ae(be),function(Ht){de(Ot,Ht.nodeName,ve(be,Ht.nodeName))}),Ot},Me=function(){return n.root_element||e.body},Qe=function(be){var je=Ni(be);return{x:je.x,y:je.y,w:je.width,h:je.height}},Tt=function(be,je){return xT(e.body,J(be),je)},jn=function(be,je,Ot){var Ht=wn(je)?fe(be).css(je,Ot):fe(be).css(je);n.update_styles&&hs(M,Ht)},Yt=function(be,je){var Ot=fe(be).css(je);n.update_styles&&hs(M,Ot)},lt=function(be,je,Ot){var Ht=fe(be);return Ot?Ht.css(je):(je=je.replace(/-(\D)/g,function(pr,ta){return ta.toUpperCase()}),je==="float"&&(je=Ln.browser.isIE()?"styleFloat":"cssFloat"),Ht[0]&&Ht[0].style?Ht[0].style[je]:void 0)},Kn=function(be){var je,Ot;return be=J(be),je=lt(be,"width"),Ot=lt(be,"height"),je.indexOf("px")===-1&&(je=0),Ot.indexOf("px")===-1&&(Ot=0),{w:parseInt(je,10)||be.offsetWidth||be.clientWidth,h:parseInt(Ot,10)||be.offsetHeight||be.clientHeight}},kt=function(be){be=J(be);var je=Tt(be),Ot=Kn(be);return{x:je.x,y:je.y,w:Ot.w,h:Ot.h}},tn=function(be,je){var Ot;if(!be)return!1;if(!Array.isArray(be)){if(je==="*")return be.nodeType===1;if(VT.test(je)){var Ht=je.toLowerCase().split(/,/),pr=be.nodeName.toLowerCase();for(Ot=Ht.length-1;Ot>=0;Ot--)if(Ht[Ot]===pr)return!0;return!1}if(be.nodeType&&be.nodeType!==1)return!1}var ta=Array.isArray(be)?be:[be];return Ea(je,ta[0].ownerDocument||ta[0],null,ta).length>0},Et=function(be,je,Ot,Ht){var pr=[],ta,oo=J(be);for(Ht=Ht===void 0,Ot=Ot||(Me().nodeName!=="BODY"?Me().parentNode:null),Je.is(je,"string")&&(ta=je,je==="*"?je=function(Ud){return Ud.nodeType===1}:je=function(Ud){return tn(Ud,ta)});oo&&!(oo===Ot||gt(oo.nodeType)||yg(oo)||fu(oo));){if(!je||typeof je=="function"&&je(oo))if(Ht)pr.push(oo);else return[oo];oo=oo.parentNode}return Ht?pr:null},zt=function(be,je,Ot){var Ht=Et(be,je,Ot,!1);return Ht&&Ht.length>0?Ht[0]:null},hn=function(be,je,Ot){var Ht=je;if(be){for(typeof je=="string"&&(Ht=function(pr){return tn(pr,je)}),be=be[Ot];be;be=be[Ot])if(typeof Ht=="function"&&Ht(be))return be}return null},ft=function(be,je){return hn(be,je,"nextSibling")},cn=function(be,je){return hn(be,je,"previousSibling")},Sr=function(be,je){return Ea(be,J(je)||n.root_element||e,[])},da=function(be,je,Ot){var Ht,pr=typeof be=="string"?J(be):be;if(!pr)return!1;if(Je.isArray(pr)&&(pr.length||pr.length===0))return Ht=[],Ng(pr,function(oo,Ud){oo&&Ht.push(je.call(Ot,typeof oo=="string"?J(oo):oo,Ud))}),Ht;var ta=Ot||this;return je.call(ta,pr)},Hr=function(be,je){fe(be).each(function(Ot,Ht){Ng(je,function(pr,ta){de(Ht,ta,pr)})})},jo=function(be,je){var Ot=fe(be);nv?Ot.each(function(Ht,pr){if(pr.canHaveHTML!==!1){for(;pr.firstChild;)pr.removeChild(pr.firstChild);try{pr.innerHTML="<br>"+je,pr.removeChild(pr.firstChild)}catch(ta){vr("<div></div>").html("<br>"+je).contents().slice(1).appendTo(pr)}return je}}):Ot.html(je)},Oo=function(be,je,Ot,Ht,pr){return da(be,function(ta){var oo=typeof je=="string"?e.createElement(je):je;return Hr(oo,Ot),Ht&&(typeof Ht!="string"&&Ht.nodeType?oo.appendChild(Ht):typeof Ht=="string"&&jo(oo,Ht)),pr?oo:ta.appendChild(oo)})},li=function(be,je,Ot){return Oo(e.createElement(be),be,je,Ot,!0)},Cs=Wv.decode,st=Wv.encodeAllRaw,$e=function(be,je,Ot){var Ht="",pr;Ht+="<"+be;for(pr in je)to(je,pr)&&(Ht+=" "+pr+'="'+st(je[pr])+'"');return typeof Ot!="undefined"?Ht+">"+Ot+"</"+be+">":Ht+" />"},mt=function(be){var je,Ot=e.createElement("div"),Ht=e.createDocumentFragment();for(Ht.appendChild(Ot),be&&(Ot.innerHTML=be);je=Ot.firstChild;)Ht.appendChild(je);return Ht.removeChild(Ot),Ht},We=function(be,je){var Ot=fe(be);return je?Ot.each(function(){for(var Ht;Ht=this.firstChild;)Ht.nodeType===3&&Ht.data.length===0?this.removeChild(Ht):this.parentNode.insertBefore(Ht,this)}).remove():Ot.remove(),Ot.length>1?Ot.toArray():Ot[0]},yn=function(be){return da(be,function(je){var Ot,Ht=je.attributes;for(Ot=Ht.length-1;Ot>=0;Ot--)je.removeAttributeNode(Ht.item(Ot))})},Lt=function(be){return M.parse(be)},ar=function(be,je){return M.serialize(be,je)},dr=function(be){var je,Ot;if(Kh!==Fa.DOM&&e===document){if(a[be])return;a[be]=!0}Ot=e.getElementById("mceDefaultStyles"),Ot||(Ot=e.createElement("style"),Ot.id="mceDefaultStyles",Ot.type="text/css",je=e.getElementsByTagName("head")[0],je.firstChild?je.insertBefore(Ot,je.firstChild):je.appendChild(Ot)),Ot.styleSheet?Ot.styleSheet.cssText+=be:Ot.appendChild(e.createTextNode(be))},ja=function(be){be||(be=""),Ze(be.split(","),function(je){s[je]=!0,C.load(je,ut)})},Uu=function(be,je,Ot){fe(be).toggleClass(je,Ot).each(function(){this.className===""&&vr(this).attr("class",null)})},cc=function(be,je){fe(be).addClass(je)},Ef=function(be,je){Uu(be,je,!1)},Ji=function(be,je){return fe(be).hasClass(je)},bu=function(be){fe(be).show()},Mi=function(be){fe(be).hide()},Vd=function(be){return fe(be).css("display")==="none"},Ac=function(be){return(be||"mce_")+f++},ns=function(be){var je=typeof be=="string"?J(be):be;return Mn(je)?je.outerHTML:vr("<div></div>").append(vr(je).clone()).html()},kf=function(be,je){fe(be).each(function(){try{if("outerHTML"in this){this.outerHTML=je;return}}catch(Ot){}We(vr(this).html(je),!0)})},H0=function(be,je){var Ot=J(je);return da(be,function(Ht){var pr=Ot.parentNode,ta=Ot.nextSibling;return ta?pr.insertBefore(Ht,ta):pr.appendChild(Ht),Ht})},ao=function(be,je,Ot){return da(je,function(Ht){return Je.is(Ht,"array")&&(be=be.cloneNode(!0)),Ot&&Ng(Nw(Ht.childNodes),function(pr){be.appendChild(pr)}),Ht.parentNode.replaceChild(be,Ht)})},Pa=function(be,je){var Ot;return be.nodeName!==je.toUpperCase()&&(Ot=li(je),Ng(ae(be),function(Ht){de(Ot,Ht.nodeName,ve(be,Ht.nodeName))}),ao(Ot,be,!0)),Ot||be},fi=function(be,je){for(var Ot=be,Ht;Ot;){for(Ht=je;Ht&&Ot!==Ht;)Ht=Ht.parentNode;if(Ot===Ht)break;Ot=Ot.parentNode}return!Ot&&be.ownerDocument?be.ownerDocument.documentElement:Ot},Rv=function(be){return M.toHex(Je.trim(be))},Af=function(be){if(Mn(be)){var je=be.nodeName.toLowerCase()==="a"&&!ve(be,"href")&&ve(be,"id");if(ve(be,"name")||ve(be,"data-mce-bookmark")||je)return!0}return!1},Wl=function(be,je){var Ot,Ht,pr=0;if(Af(be))return!1;if(be=be.firstChild,be){var ta=new wi(be,be.parentNode),oo=_?_.getWhiteSpaceElements():{};je=je||(_?_.getNonEmptyElements():null);do{if(Ot=be.nodeType,Mn(be)){var Ud=be.getAttribute("data-mce-bogus");if(Ud){be=ta.next(Ud==="all");continue}if(Ht=be.nodeName.toLowerCase(),je&&je[Ht]){if(Ht==="br"){pr++,be=ta.next();continue}return!1}if(Af(be))return!1}if(Ot===8||Ot===3&&!Bs(be.nodeValue)||Ot===3&&be.parentNode&&oo[be.parentNode.nodeName]&&Bs(be.nodeValue))return!1;be=ta.next()}while(be)}return pr<=1},fg=function(){return e.createRange()},eA=function(be,je,Ot){var Ht=fg(),pr,ta,oo;if(be&&je)return Ht.setStart(be.parentNode,gm(be)),Ht.setEnd(je.parentNode,gm(je)),pr=Ht.extractContents(),Ht=fg(),Ht.setStart(je.parentNode,gm(je)+1),Ht.setEnd(be.parentNode,gm(be)+1),ta=Ht.extractContents(),oo=be.parentNode,oo.insertBefore(bn(Kh,pr),be),Ot?oo.insertBefore(Ot,be):oo.insertBefore(je,be),oo.insertBefore(bn(Kh,ta),be),We(be),Ot||je},tw=function(be,je,Ot,Ht){if(Je.isArray(be)){for(var pr=be.length,ta=[];pr--;)ta[pr]=tw(be[pr],je,Ot,Ht);return ta}n.collect&&(be===e||be===i)&&k.push([be,je,Ot,Ht]);var oo=F.bind(be,je,Ot,Ht||Kh);return oo},Of=function(be,je,Ot){if(Je.isArray(be)){for(var Ht=be.length,pr=[];Ht--;)pr[Ht]=Of(be[Ht],je,Ot);return pr}else{if(k.length>0&&(be===e||be===i))for(var Ht=k.length;Ht--;){var ta=k[Ht];be===ta[0]&&(!je||je===ta[1])&&(!Ot||Ot===ta[2])&&F.unbind(ta[0],ta[1],ta[2])}return F.unbind(be,je,Ot)}},tA=function(be,je,Ot){return F.fire(be,je,Ot)},iB=function(be){if(be&&Mn(be)){var je=be.getAttribute("data-mce-contenteditable");return je&&je!=="inherit"?je:be.contentEditable!=="inherit"?be.contentEditable:null}else return null},O8=function(be){for(var je=Me(),Ot=null;be&&be!==je&&(Ot=iB(be),Ot===null);be=be.parentNode);return Ot},Gh=function(){if(k.length>0)for(var be=k.length;be--;){var je=k[be];F.unbind(je[0],je[1],je[2])}ur(s,function(Ot,Ht){C.unload(Ht),delete s[Ht]}),Ea.setDocument&&Ea.setDocument()},D8=function(be,je){if(nv){for(;be;){if(je===be)return!0;be=be.parentNode}return!1}else return be===je||je.contains(be)},R8=function(be){return"startContainer: "+be.startContainer.nodeName+", startOffset: "+be.startOffset+", endContainer: "+be.endContainer.nodeName+", endOffset: "+be.endOffset},Kh={doc:e,settings:n,win:i,files:s,stdMode:g,boxModel:b,styleSheetLoader:C,boundEvents:k,styles:M,schema:_,events:F,isBlock:j,$:K,$$:fe,root:null,clone:Ee,getRoot:Me,getViewPort:Qe,getRect:kt,getSize:Kn,getParent:zt,getParents:Et,get:J,getNext:ft,getPrev:cn,select:Sr,is:tn,add:Oo,create:li,createHTML:$e,createFragment:mt,remove:We,setStyle:jn,getStyle:lt,setStyles:Yt,removeAllAttribs:yn,setAttrib:de,setAttribs:Hr,getAttrib:ve,getPos:Tt,parseStyle:Lt,serializeStyle:ar,addStyle:dr,loadCSS:ja,addClass:cc,removeClass:Ef,hasClass:Ji,toggleClass:Uu,show:bu,hide:Mi,isHidden:Vd,uniqueId:Ac,setHTML:jo,getOuterHTML:ns,setOuterHTML:kf,decode:Cs,encode:st,insertAfter:H0,replace:ao,rename:Pa,findCommonAncestor:fi,toHex:Rv,run:da,getAttribs:ae,isEmpty:Wl,createRng:fg,nodeIndex:gm,split:eA,bind:tw,unbind:Of,fire:tA,getContentEditable:iB,getContentEditableParent:O8,destroy:Gh,isChildOf:D8,dumpRng:R8},nw=ru(M,n,Y(Kh));return Kh};Fa.DOM=Fa(document),Fa.nodeIndex=gm;var UT=Fa.DOM,ef=Je.each,Iw=Je.grep,Qv=0,Bp=1,_p=2,$w=3,tf=function(){function e(n){n===void 0&&(n={}),this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=0,this.settings=n}return e.prototype._setReferrerPolicy=function(n){this.settings.referrerPolicy=n},e.prototype.loadScript=function(n,a,i){var s=UT,f,g=function(){s.remove(k),f&&(f.onerror=f.onload=f=null)},b=function(){g(),a()},C=function(){g(),bt(i)?i():typeof console!="undefined"&&console.log&&console.log("Failed to load script: "+n)},k=s.uniqueId();f=document.createElement("script"),f.id=k,f.type="text/javascript",f.src=Je._addCacheSuffix(n),this.settings.referrerPolicy&&s.setAttrib(f,"referrerpolicy",this.settings.referrerPolicy),f.onload=b,f.onerror=C,(document.getElementsByTagName("head")[0]||document.body).appendChild(f)},e.prototype.isDone=function(n){return this.states[n]===_p},e.prototype.markDone=function(n){this.states[n]=_p},e.prototype.add=function(n,a,i,s){var f=this.states[n];this.queue.push(n),f===void 0&&(this.states[n]=Qv),a&&(this.scriptLoadedCallbacks[n]||(this.scriptLoadedCallbacks[n]=[]),this.scriptLoadedCallbacks[n].push({success:a,failure:s,scope:i||this}))},e.prototype.load=function(n,a,i,s){return this.add(n,a,i,s)},e.prototype.remove=function(n){delete this.states[n],delete this.scriptLoadedCallbacks[n]},e.prototype.loadQueue=function(n,a,i){this.loadScripts(this.queue,n,a,i)},e.prototype.loadScripts=function(n,a,i,s){var f=this,g=[],b=function(k,_){ef(f.scriptLoadedCallbacks[_],function(M){bt(M[k])&&M[k].call(M.scope)}),f.scriptLoadedCallbacks[_]=void 0};f.queueLoadedCallbacks.push({success:a,failure:s,scope:i||this});var C=function(){var k=Iw(n);if(n.length=0,ef(k,function(M){if(f.states[M]===_p){b("success",M);return}if(f.states[M]===$w){b("failure",M);return}f.states[M]!==Bp&&(f.states[M]=Bp,f.loading++,f.loadScript(M,function(){f.states[M]=_p,f.loading--,b("success",M),C()},function(){f.states[M]=$w,f.loading--,g.push(M),b("failure",M),C()}))}),!f.loading){var _=f.queueLoadedCallbacks.slice(0);f.queueLoadedCallbacks.length=0,ef(_,function(M){g.length===0?bt(M.success)&&M.success.call(M.scope):bt(M.failure)&&M.failure.call(M.scope,g)})}};C()},e.ScriptLoader=new e,e}(),Ru=function(e){var n=e,a=function(){return n},i=function(s){n=s};return{get:a,set:i}},hm=function(e){return wt(e)&&cr(e,"raw")},ed=function(e){return Un(e)&&e.length>1},td={},Mp=Ru("en"),Fp=function(){return ua(td,Mp.get())},Pp=function(){return eo(td,function(e){return pn({},e)})},WT=function(e){e&&Mp.set(e)},jT=function(){return Mp.get()},Np=function(e,n){var a=td[e];a||(td[e]=a={}),ur(n,function(i,s){a[s.toLowerCase()]=i})},Qu=function(e){var n=Fp().getOr({}),a=function(C){return bt(C)?Object.prototype.toString.call(C):i(C)?"":""+C},i=function(C){return C===""||C===null||C===void 0},s=function(C){var k=a(C);return ua(n,k.toLowerCase()).map(a).getOr(k)},f=function(C){return C.replace(/{context:\w+}$/,"")};if(i(e))return"";if(hm(e))return a(e.raw);if(ed(e)){var g=e.slice(1),b=s(e[0]).replace(/\{([0-9]+)\}/g,function(C,k){return cr(g,k)?a(g[k]):C});return f(b)}return f(s(e))},Ip=function(){return Fp().bind(function(e){return ua(e,"_dir")}).exists(function(e){return e==="rtl"})},Kr=function(e){return cr(td,e)},xo={getData:Pp,setCode:WT,getCode:jT,add:Np,translate:Qu,isRtl:Ip,hasCode:Kr},Ei=function(){var e=[],n={},a={},i=[],s=function(j,J){var fe=dn(i,function(ve){return ve.name===j&&ve.state===J});Ze(fe,function(ve){return ve.callback()})},f=function(j){if(a[j])return a[j].instance},g=function(j){var J;return a[j]&&(J=a[j].dependencies),J||[]},b=function(j,J){Ei.languageLoad!==!1&&K(j,function(){var fe=xo.getCode(),ve=","+(J||"")+",";!fe||J&&ve.indexOf(","+fe+",")===-1||tf.ScriptLoader.add(n[j]+"/langs/"+fe+".js")},"loaded")},C=function(j,J,fe){var ve=J;return e.push(ve),a[j]={instance:ve,dependencies:fe},s(j,"added"),ve},k=function(j){delete n[j],delete a[j]},_=function(j,J){return typeof J=="object"?J:typeof j=="string"?{prefix:"",resource:J,suffix:""}:{prefix:j.prefix,resource:J,suffix:j.suffix}},M=function(j,J){var fe=n[j];Ze(J,function(ve){tf.ScriptLoader.add(fe+"/"+ve)})},F=function(j,J,fe,ve){var ae=g(j);Ze(ae,function(de){var Ee=_(J,de);U(Ee.resource,Ee,void 0,void 0)}),fe&&(ve?fe.call(ve):fe.call(tf))},U=function(j,J,fe,ve,ae){if(!n[j]){var de=typeof J=="string"?J:J.prefix+J.resource+J.suffix;de.indexOf("/")!==0&&de.indexOf("://")===-1&&(de=Ei.baseURL+"/"+de),n[j]=de.substring(0,de.lastIndexOf("/"));var Ee=function(){s(j,"loaded"),F(j,J,fe,ve)};a[j]?Ee():tf.ScriptLoader.add(de,Ee,ve,ae)}},K=function(j,J,fe){fe===void 0&&(fe="added"),cr(a,j)&&fe==="added"||cr(n,j)&&fe==="loaded"?J():i.push({name:j,state:fe,callback:J})};return{items:e,urls:n,lookup:a,_listeners:i,get:f,dependencies:g,requireLangPack:b,add:C,remove:k,createUrl:_,addComponents:M,load:U,waitFor:K}};Ei.languageLoad=!0,Ei.baseURL="",Ei.PluginManager=Ei(),Ei.ThemeManager=Ei();var Rb=function(e){var n=Ru(te.none()),a=function(){return n.get().each(e)},i=function(){a(),n.set(te.none())},s=function(){return n.get().isSome()},f=function(){return n.get()},g=function(b){a(),n.set(te.some(b))};return{clear:i,isSet:s,get:f,set:g}},sa=function(){var e=Rb(ut),n=function(a){return e.get().each(a)};return pn(pn({},e),{on:n})},$p=function(e,n){var a=null,i=function(){re(a)||(clearTimeout(a),a=null)},s=function(){for(var f=[],g=0;g<arguments.length;g++)f[g]=arguments[g];re(a)&&(a=setTimeout(function(){a=null,e.apply(null,f)},n))};return{cancel:i,throttle:s}},Bb=function(e,n){var a=null,i=function(){re(a)||(clearTimeout(a),a=null)},s=function(){for(var f=[],g=0;g<arguments.length;g++)f[g]=arguments[g];i(),a=setTimeout(function(){a=null,e.apply(null,f)},n)};return{cancel:i,throttle:s}},ui=function(e,n){var a=H(e,n);return a===void 0||a===""?[]:a.split(" ")},rv=function(e,n,a){var i=ui(e,n),s=i.concat([a]);return E(e,n,s.join(" ")),!0},qT=function(e,n,a){var i=dn(ui(e,n),function(s){return s!==a});return i.length>0?E(e,n,i.join(" ")):St(e,n),!1},zp=function(e){return e.dom.classList!==void 0},GT=function(e){return ui(e,"class")},Ig=function(e,n){return rv(e,"class",n)},pm=function(e,n){return qT(e,"class",n)},nd=function(e,n){zp(e)?e.dom.classList.add(n):Ig(e,n)},_b=function(e){var n=zp(e)?e.dom.classList:GT(e);n.length===0&&St(e,"class")},$g=function(e,n){if(zp(e)){var a=e.dom.classList;a.remove(n)}else pm(e,n);_b(e)},Mb=function(e,n){return zp(e)&&e.dom.classList.contains(n)},Fb=function(e,n){var a=[];return Ze(Su(e),function(i){n(i)&&(a=a.concat([i])),a=a.concat(Fb(i,n))}),a},$u=function(e,n){return aa(n,e)},av=Y("mce-annotation"),Bu=Y("data-mce-annotation"),zg=Y("data-mce-annotation-uid"),ci=function(e,n){var a=e.selection.getRng(),i=Z.fromDom(a.startContainer),s=Z.fromDom(e.getBody()),f=n.fold(function(){return"."+av()},function(k){return"["+Bu()+'="'+k+'"]'}),g=Lo(i,a.startOffset).getOr(i),b=Lv(g,f,function(k){return va(k,s)}),C=function(k,_){return Ae(k,_)?te.some(H(k,_)):te.none()};return b.bind(function(k){return C(k,""+zg()).bind(function(_){return C(k,""+Bu()).map(function(M){var F=ov(e,_);return{uid:_,name:M,elements:F}})})})},zw=function(e){return Ft(e)&&Mb(e,av())},ov=function(e,n){var a=Z.fromDom(e.getBody());return $u(a,"["+zg()+'="'+n+'"]')},Lw=function(e,n){var a=Z.fromDom(e.getBody()),i=$u(a,"["+Bu()+'="'+n+'"]'),s={};return Ze(i,function(f){var g=H(f,zg()),b=ua(s,g).getOr([]);s[g]=b.concat([f])}),s},Lp=function(e,n){var a=Ru({}),i=function(){return{listeners:[],previous:sa()}},s=function(_,M){f(_,function(F){return M(F),F})},f=function(_,M){var F=a.get(),U=ua(F,_).getOrThunk(i),K=M(U);F[_]=K,a.set(F)},g=function(_,M,F){s(_,function(U){Ze(U.listeners,function(K){return K(!0,_,{uid:M,nodes:kn(F,function(j){return j.dom})})})})},b=function(_){s(_,function(M){Ze(M.listeners,function(F){return F(!1,_)})})},C=Bb(function(){var _=a.get(),M=Ba(mo(_));Ze(M,function(F){f(F,function(U){var K=U.previous.get();return ci(e,te.some(F)).fold(function(){K.isSome()&&(b(F),U.previous.clear())},function(j){var J=j.uid,fe=j.name,ve=j.elements;ss(K,J)||(g(fe,J,ve),U.previous.set(J))}),{previous:U.previous,listeners:U.listeners}})})},30);e.on("remove",function(){C.cancel()}),e.on("NodeChange",function(){C.throttle()});var k=function(_,M){f(_,function(F){return{previous:F.previous,listeners:F.listeners.concat([M])}})};return{addListener:k}},Pb=function(e,n){var a=function(i){return te.from(i.attr(Bu())).bind(n.lookup)};e.on("init",function(){e.serializer.addNodeFilter("span",function(i){Ze(i,function(s){a(s).each(function(f){f.persistent===!1&&s.unwrap()})})})})},Nb=function(){var e={},n=function(i,s){e[i]={name:i,settings:s}},a=function(i){return ua(e,i).map(function(s){return s.settings})};return{register:n,lookup:a}},Hp=0,Ib=function(e){var n=new Date,a=n.getTime(),i=Math.floor(Math.random()*1e9);return Hp++,e+"_"+i+Hp+String(a)},Vp=function(e,n){Ze(n,function(a){nd(e,a)})},Hw=function(e,n){var a=n||document,i=a.createElement("div");return i.innerHTML=e,Su(Z.fromDom(i))},au=function(e){return kn(e,Z.fromDom)},ou=function(e){return e.dom.innerHTML},_u=function(e,n){var a=Kl(e),i=a.dom,s=Z.fromDom(i.createDocumentFragment()),f=Hw(n,i);Xl(s,f),Yl(e),bi(e,s)},Mu=function(e,n){return Z.fromDom(e.dom.cloneNode(n))},Vi=function(e){return Mu(e,!1)},Ui=function(e){return Mu(e,!0)},Up=function(e,n,a){a===void 0&&(a=_t);var i=new wi(e,n),s=function(f){var g;do g=i[f]();while(g&&!gn(g)&&!a(g));return te.from(g).filter(gn)};return{current:function(){return te.from(i.current()).filter(gn)},next:function(){return s("next")},prev:function(){return s("prev")},prev2:function(){return s("prev2")}}},Wp=function(e,n){var a=n||function(g){return e.isBlock(g)||Ho(g)||Ua(g)},i=function(g,b,C,k){if(gn(g)){var _=k(g,b,g.data);if(_!==-1)return te.some({container:g,offset:_})}return C().bind(function(M){return i(M.container,M.offset,C,k)})},s=function(g,b,C,k){var _=Up(g,k,a);return i(g,b,function(){return _.prev().map(function(M){return{container:M,offset:M.length}})},C).getOrNull()},f=function(g,b,C,k){var _=Up(g,k,a);return i(g,b,function(){return _.next().map(function(M){return{container:M,offset:0}})},C).getOrNull()};return{backwards:s,forwards:f}},iv=Math.round,nf=function(e){return e?{left:iv(e.left),top:iv(e.top),bottom:iv(e.bottom),right:iv(e.right),width:iv(e.width),height:iv(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}},$b=function(e,n){return e=nf(e),n||(e.left=e.left+e.width),e.right=e.left,e.width=0,e},Vw=function(e,n){return e.left===n.left&&e.top===n.top&&e.bottom===n.bottom&&e.right===n.right},jp=function(e,n,a){return e>=0&&e<=Math.min(n.height,a.height)/2},uv=function(e,n){var a=Math.min(n.height/2,e.height/2);return e.bottom-a<n.top?!0:e.top>n.bottom?!1:jp(n.top-e.bottom,e,n)},ec=function(e,n){return e.top>n.bottom?!0:e.bottom<n.top?!1:jp(n.bottom-e.top,e,n)},Lg=function(e,n,a){return n>=e.left&&n<=e.right&&a>=e.top&&a<=e.bottom},ki=function(e,n,a){return Math.min(Math.max(e,n),a)},qp=function(e){var n=e.startContainer,a=e.startOffset;return n.hasChildNodes()&&e.endOffset===a+1?n.childNodes[a]:null},cv=function(e,n){if(Mn(e)&&e.hasChildNodes()){var a=e.childNodes,i=ki(n,0,a.length-1);return a[i]}else return e},Hg=function(e,n){if(!(n<0&&Mn(e)&&e.hasChildNodes()))return cv(e,n)},KT=new RegExp("[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962-\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2-\u09E3\u0A01-\u0A02\u0A3C\u0A41-\u0A42\u0A47-\u0A48\u0A4B-\u0A4D\u0A51\u0A70-\u0A71\u0A75\u0A81-\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7-\u0AC8\u0ACD\u0AE2-\u0AE3\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B56\u0B57\u0B62-\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55-\u0C56\u0C62-\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC-\u0CCD\u0CD5-\u0CD6\u0CE2-\u0CE3\u0D01\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62-\u0D63\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB-\u0EBC\u0EC8-\u0ECD\u0F18-\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86-\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039-\u103A\u103D-\u103E\u1058-\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17B4-\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u18A9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193B\u1A17-\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ABD\u1ABE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80-\u1B81\u1BA2-\u1BA5\u1BA8-\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8-\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8-\u1CF9\u1DC0-\u1DF5\u1DFC-\u1DFF\u200C-\u200D\u20D0-\u20DC\u20DD-\u20E0\u20E1\u20E2-\u20E4\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u302E-\u302F\u3099-\u309A\uA66F\uA670-\uA672\uA674-\uA67D\uA69E-\uA69F\uA6F0-\uA6F1\uA802\uA806\uA80B\uA825-\uA826\uA8C4\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9E5\uAA29-\uAA2E\uAA31-\uAA32\uAA35-\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7-\uAAB8\uAABE-\uAABF\uAAC1\uAAEC-\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E-\uFF9F]"),Uw=function(e){return typeof e=="string"&&e.charCodeAt(0)>=768&&KT.test(e)},XT=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return function(a){for(var i=0;i<e.length;i++)if(e[i](a))return!0;return!1}},YT=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return function(a){for(var i=0;i<e.length;i++)if(!e[i](a))return!1;return!0}},Gp=Mn,Pt=ll,zb=Ii("display","block table"),si=Ii("float","left right"),rd=YT(Gp,Pt,Oa(si)),Kp=Oa(Ii("white-space","pre pre-line pre-wrap")),ad=gn,yc=Ho,Ww=Fa.nodeIndex,bm=Hg,Vg=function(e){return"createRange"in e?e.createRange():Fa.DOM.createRng()},Fu=function(e){return e&&/[\r\n\t ]/.test(e)},jw=function(e){return!!e.setStart&&!!e.setEnd},Xp=function(e){var n=e.startContainer,a=e.startOffset;if(Fu(e.toString())&&Kp(n.parentNode)&&gn(n)){var i=n.data;if(Fu(i[a-1])||Fu(i[a+1]))return!0}return!1},tc=function(e){var n=e.ownerDocument,a=Vg(n),i=n.createTextNode(Ci),s=e.parentNode;s.insertBefore(i,e),a.setStart(i,0),a.setEnd(i,1);var f=nf(a.getBoundingClientRect());return s.removeChild(i),f},Vc=function(e){var n=e.startContainer,a=e.endContainer,i=e.startOffset,s=e.endOffset;if(n===a&&gn(a)&&i===0&&s===1){var f=e.cloneRange();return f.setEndAfter(a),Wi(f)}else return null},Lb=function(e){return e.left===0&&e.right===0&&e.top===0&&e.bottom===0},Wi=function(e){var n,a=e.getClientRects();return a.length>0?n=nf(a[0]):n=nf(e.getBoundingClientRect()),!jw(e)&&yc(e)&&Lb(n)?tc(e):Lb(n)&&jw(e)?Vc(e):n},Cl=function(e,n){var a=$b(e,n);return a.width=1,a.right=a.left+1,a},ym=function(e){var n=[],a=function(C){C.height!==0&&(n.length>0&&Vw(C,n[n.length-1])||n.push(C))},i=function(C,k){var _=Vg(C.ownerDocument);if(k<C.data.length){if(Uw(C.data[k]))return n;if(Uw(C.data[k-1])&&(_.setStart(C,k),_.setEnd(C,k+1),!Xp(_)))return a(Cl(Wi(_),!1)),n}k>0&&(_.setStart(C,k-1),_.setEnd(C,k),Xp(_)||a(Cl(Wi(_),!1))),k<C.data.length&&(_.setStart(C,k),_.setEnd(C,k+1),Xp(_)||a(Cl(Wi(_),!0)))},s=e.container(),f=e.offset();if(ad(s))return i(s,f),n;if(Gp(s))if(e.isAtEnd()){var g=bm(s,f);ad(g)&&i(g,g.data.length),rd(g)&&!yc(g)&&a(Cl(Wi(g),!1))}else{var g=bm(s,f);if(ad(g)&&i(g,0),rd(g)&&e.isAtEnd())return a(Cl(Wi(g),!1)),n;var b=bm(e.container(),e.offset()-1);rd(b)&&!yc(b)&&(zb(b)||zb(g)||!rd(g))&&a(Cl(Wi(b),!1)),rd(g)&&a(Cl(Wi(g),!0))}return n},Ge=function(e,n,a){var i=function(){return ad(e),n===0},s=function(){return ad(e)?n>=e.data.length:n>=e.childNodes.length},f=function(){var _=Vg(e.ownerDocument);return _.setStart(e,n),_.setEnd(e,n),_},g=function(){return a||(a=ym(Ge(e,n))),a},b=function(){return g().length>0},C=function(_){return _&&e===_.container()&&n===_.offset()},k=function(_){return bm(e,_?n-1:n)};return{container:Y(e),offset:Y(n),toRange:f,getClientRects:g,isVisible:b,isAtStart:i,isAtEnd:s,isEqual:C,getNode:k}};Ge.fromRangeStart=function(e){return Ge(e.startContainer,e.startOffset)},Ge.fromRangeEnd=function(e){return Ge(e.endContainer,e.endOffset)},Ge.after=function(e){return Ge(e.parentNode,Ww(e)+1)},Ge.before=function(e){return Ge(e.parentNode,Ww(e))},Ge.isAbove=function(e,n){return xu(Ca(n.getClientRects()),Yo(e.getClientRects()),uv).getOr(!1)},Ge.isBelow=function(e,n){return xu(Yo(n.getClientRects()),Ca(e.getClientRects()),ec).getOr(!1)},Ge.isAtStart=function(e){return e?e.isAtStart():!1},Ge.isAtEnd=function(e){return e?e.isAtEnd():!1},Ge.isTextPosition=function(e){return e?gn(e.container()):!1},Ge.isElementPosition=function(e){return Ge.isTextPosition(e)===!1};var Ug=function(e,n){gn(n)&&n.data.length===0&&e.remove(n)},qw=function(e,n,a){n.insertNode(a),Ug(e,a.previousSibling),Ug(e,a.nextSibling)},Yp=function(e,n,a){var i=te.from(a.firstChild),s=te.from(a.lastChild);n.insertNode(a),i.each(function(f){return Ug(e,f.previousSibling)}),s.each(function(f){return Ug(e,f.nextSibling)})},Wg=function(e,n,a){fu(a)?Yp(e,n,a):qw(e,n,a)},Uc=gn,Hb=_c,Vb=Fa.nodeIndex,Gw=function(e){var n=e.parentNode;return Hb(n)?Gw(n):n},Jp=function(e){return e?mi(e.childNodes,function(n,a){return Hb(a)&&a.nodeName!=="BR"?n=n.concat(Jp(a)):n.push(a),n},[]):[]},Kw=function(e,n){for(;(e=e.previousSibling)&&Uc(e);)n+=e.data.length;return n},od=function(e){return function(n){return e===n}},Zp=function(e){var n,a;n=Jp(Gw(e)),a=pa(n,od(e),e),n=n.slice(0,a+1);var i=mi(n,function(s,f,g){return Uc(f)&&Uc(n[g-1])&&s++,s},0);return n=To(n,so([e.nodeName])),a=pa(n,od(e),e),a-i},Ub=function(e){var n;return Uc(e)?n="text()":n=e.nodeName.toLowerCase(),n+"["+Zp(e)+"]"},JT=function(e,n,a){var i=[];for(n=n.parentNode;n!==e&&!(a&&a(n));n=n.parentNode)i.push(n);return i},jg=function(e,n){var a,i,s=[],f,g,b;return a=n.container(),i=n.offset(),Uc(a)?f=Kw(a,i):(g=a.childNodes,i>=g.length?(f="after",i=g.length-1):f="before",a=g[i]),s.push(Ub(a)),b=JT(e,a),b=To(b,Oa(_c)),s=s.concat($o(b,function(C){return Ub(C)})),s.reverse().join("/")+","+f},qg=function(e,n,a){var i=Jp(e);return i=To(i,function(s,f){return!Uc(s)||!Uc(i[f-1])}),i=To(i,so([n])),i[a]},Wb=function(e,n){for(var a=e,i=0,s;Uc(a);){if(s=a.data.length,n>=i&&n<=i+s){e=a,n=n-i;break}if(!Uc(a.nextSibling)){e=a,n=s;break}i+=s,a=a.nextSibling}return Uc(e)&&n>e.data.length&&(n=e.data.length),Ge(e,n)},jb=function(e,n){var a;if(!n)return null;var i=n.split(","),s=i[0].split("/");a=i.length>1?i[1]:"before";var f=mi(s,function(g,b){var C=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(b);return C?(C[1]==="text()"&&(C[1]="#text"),qg(g,C[1],parseInt(C[2],10))):null},e);return f?Uc(f)?Wb(f,parseInt(a,10)):(a==="after"?a=Vb(f)+1:a=Vb(f),Ge(f.parentNode,a)):null},Qp=Ua,ZT=function(e,n,a){var i,s;for(s=e(n.data.slice(0,a)).length,i=n.previousSibling;i&&gn(i);i=i.previousSibling)s+=e(i.data).length;return s},e1=function(e,n,a,i,s){var f=i[s?"startContainer":"endContainer"],g=i[s?"startOffset":"endOffset"],b=[],C,k=0,_=e.getRoot();for(gn(f)?b.push(a?ZT(n,f,g):g):(C=f.childNodes,g>=C.length&&C.length&&(k=1,g=Math.max(0,C.length-1)),b.push(e.nodeIndex(C[g],a)+k));f&&f!==_;f=f.parentNode)b.push(e.nodeIndex(f,a));return b},QT=function(e,n,a,i){var s=n.dom,f={};return f.start=e1(s,e,a,i,!0),n.isCollapsed()||(f.end=e1(s,e,a,i,!1)),vw(i)&&(f.isFakeCaret=!0),f},Sl=function(e,n,a){var i=0;return Je.each(e.select(n),function(s){if(s.getAttribute("data-mce-bogus")!=="all"){if(s===a)return!1;i++}}),i},ro=function(e,n){var a,i,s,f=n?"start":"end";a=e[f+"Container"],i=e[f+"Offset"],Mn(a)&&a.nodeName==="TR"&&(s=a.childNodes,a=s[Math.min(n?i:i-1,s.length-1)],a&&(i=n?0:a.childNodes.length,e["set"+(n?"Start":"End")](a,i)))},qb=function(e){return ro(e,!0),ro(e,!1),e},ji=function(e,n){var a;if(Mn(e)&&(e=cv(e,n),Qp(e)))return e;if(Ic(e)&&(gn(e)&&Xf(e)&&(e=e.parentNode),a=e.previousSibling,Qp(a)||(a=e.nextSibling,Qp(a))))return a},Gg=function(e){return ji(e.startContainer,e.startOffset)||ji(e.endContainer,e.endOffset)},t1=function(e,n,a){var i=a.getNode(),s=i?i.nodeName:null,f=a.getRng();if(Qp(i)||s==="IMG")return{name:s,index:Sl(a.dom,s,i)};var g=Gg(f);return g?(s=g.tagName,{name:s,index:Sl(a.dom,s,g)}):QT(e,a,n,f)},Gb=function(e){var n=e.getRng();return{start:jg(e.dom.getRoot(),Ge.fromRangeStart(n)),end:jg(e.dom.getRoot(),Ge.fromRangeEnd(n))}},n1=function(e){return{rng:e.getRng()}},Xw=function(e,n,a){var i={"data-mce-type":"bookmark",id:n,style:"overflow:hidden;line-height:0px"};return a?e.create("span",i,"&#xFEFF;"):e.create("span",i)},Yw=function(e,n){var a=e.dom,i=e.getRng(),s=a.uniqueId(),f=e.isCollapsed(),g=e.getNode(),b=g.nodeName;if(b==="IMG")return{name:b,index:Sl(a,b,g)};var C=qb(i.cloneRange());if(!f){C.collapse(!1);var k=Xw(a,s+"_end",n);Wg(a,C,k)}i=qb(i),i.collapse(!0);var _=Xw(a,s+"_start",n);return Wg(a,i,_),e.moveToBookmark({id:s,keep:!0}),{id:s}},eE=function(e,n,a){return n===2?t1(sl,a,e):n===3?Gb(e):n?n1(e):Yw(e,!1)},Jw=At(t1,Dn,!0),tE=Fa.DOM,Zw="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow",r1=function(e,n,a){var i=e.getParam(n,a);if(i.indexOf("=")!==-1){var s=e.getParam(n,"","hash");return ua(s,e.id).getOr(a)}else return i},nE=function(e){return e.getParam("iframe_attrs",{})},rE=function(e){return e.getParam("doctype","<!DOCTYPE html>")},Kb=function(e){return e.getParam("document_base_url","")},Xb=function(e){return r1(e,"body_id","tinymce")},Qw=function(e){return r1(e,"body_class","")},Yb=function(e){return e.getParam("content_security_policy","")},eC=function(e){return e.getParam("br_in_pre",!0)},iu=function(e){if(e.getParam("force_p_newlines",!1))return"p";var n=e.getParam("forced_root_block","p");return n===!1?"":n===!0?"p":n},Kg=function(e){return e.getParam("forced_root_block_attrs",{})},sv=function(e){return e.getParam("br_newline_selector",".mce-toc h2,figcaption,caption")},wm=function(e){return e.getParam("no_newline_selector","")},tC=function(e){return e.getParam("keep_styles",!0)},aE=function(e){return e.getParam("end_container_on_empty_block",!1)},oE=function(e){return Je.explode(e.getParam("font_size_style_values","xx-small,x-small,small,medium,large,x-large,xx-large"))},Cm=function(e){return Je.explode(e.getParam("font_size_classes",""))},a1=function(e){return e.getParam("images_dataimg_filter",Kt,"function")},Xg=function(e){return e.getParam("automatic_uploads",!0,"boolean")},o1=function(e){return e.getParam("images_reuse_filename",!1,"boolean")},iE=function(e){return e.getParam("images_replace_blob_uris",!0,"boolean")},xl=function(e){return e.getParam("icons","","string")},id=function(e){return e.getParam("icons_url","","string")},uE=function(e){return e.getParam("images_upload_url","","string")},$s=function(e){return e.getParam("images_upload_base_path","","string")},Sm=function(e){return e.getParam("images_upload_credentials",!1,"boolean")},Jb=function(e){return e.getParam("images_upload_handler",null,"function")},qi=function(e){return e.getParam("content_css_cors",!1,"boolean")},nC=function(e){return e.getParam("referrer_policy","","string")},i1=function(e){return e.getParam("language","en","string")},rC=function(e){return e.getParam("language_url","","string")},aC=function(e){return e.getParam("indent_use_margin",!1)},Tl=function(e){return e.getParam("indentation","40px","string")},El=function(e){var n=e.getParam("content_css");return wn(n)?kn(n.split(","),Zt):Un(n)?n:n===!1||e.inline?[]:["default"]},oC=function(e){var n=e.getParam("font_css",[]);return Un(n)?n:kn(n.split(","),Zt)},Zb=function(e){return e.getParam("directionality",xo.isRtl()?"rtl":void 0)},iC=function(e){return e.getParam("inline_boundaries_selector","a[href],code,.mce-annotation","string")},Qb=function(e){var n=e.getParam("object_resizing");return n===!1||Ln.iOS?!1:wn(n)?n:"table,img,figure.image,div,video,iframe"},cE=function(e){return e.getParam("resize_img_proportional",!0,"boolean")},ey=function(e){return e.getParam("placeholder",tE.getAttrib(e.getElement(),"placeholder"),"string")},ty=function(e){return e.getParam("event_root")},uC=function(e){return e.getParam("service_message")},Yg=function(e){return e.getParam("theme")},xm=function(e){return e.getParam("validate")},rf=function(e){return e.getParam("inline_boundaries")!==!1},sE=function(e){return e.getParam("formats")},cC=function(e){var n=e.getParam("preview_styles",Zw);return wn(n)?n:""},ny=function(e){return e.getParam("format_empty_lines",!1,"boolean")},u1=function(e){return e.getParam("custom_ui_selector","","string")},sC=function(e){return e.getParam("theme_url")},ry=function(e){return e.getParam("inline")},lE=function(e){return e.getParam("hidden_input")},fE=function(e){return e.getParam("submit_patch")},vE=function(e){return e.getParam("encoding")==="xml"},Jg=function(e){return e.getParam("add_form_submit_trigger")},c1=function(e){return e.getParam("add_unload_trigger")},dE=function(e){return iu(e)!==""},mE=function(e){return e.getParam("custom_undo_redo_levels",0,"number")},lC=function(e){return e.getParam("disable_nodechange")},gE=function(e){return e.getParam("readonly")},fC=function(e){return e.getParam("content_css_cors")},s1=function(e){return e.getParam("plugins","","string")},hE=function(e){return e.getParam("external_plugins")},Tm=function(e){return e.getParam("block_unsupported_drop",!0,"boolean")},pE=function(e){return e.getParam("visual",!0,"boolean")},vC=function(e){return e.getParam("visual_table_class","mce-item-table","string")},dC=function(e){return e.getParam("visual_anchor_class","mce-item-anchor","string")},mC=function(e){return e.getParam("iframe_aria_text","Rich Text Area. Press ALT-0 for help.","string")},ay=Mn,l1=gn,oy=function(e){var n=e.parentNode;n&&n.removeChild(e)},ud=function(e){var n=sl(e);return{count:e.length-n.length,text:n}},f1=function(e){for(var n;(n=e.data.lastIndexOf(Wa))!==-1;)e.deleteData(n,1)},gC=function(e,n){return cd(e),n},hC=function(e,n){var a=ud(e.data.substr(0,n.offset())),i=ud(e.data.substr(n.offset())),s=a.text+i.text;return s.length>0?(f1(e),Ge(e,n.offset()-a.count)):n},Em=function(e,n){var a=n.container(),i=$t(mn(a.childNodes),e).map(function(s){return s<n.offset()?Ge(a,n.offset()-1):n}).getOr(n);return cd(e),i},iy=function(e,n){return l1(e)&&n.container()===e?hC(e,n):gC(e,n)},pC=function(e,n){return n.container()===e.parentNode?Em(e,n):gC(e,n)},uy=function(e,n){return Ge.isTextPosition(n)?iy(e,n):pC(e,n)},cd=function(e){ay(e)&&Ic(e)&&(Yu(e)?e.removeAttribute("data-mce-caret"):oy(e)),l1(e)&&(f1(e),e.data.length===0&&oy(e))},v1=fn().browser,bE=Ua,bC=$n,yE=wg,Gi="*[contentEditable=false],video,audio,embed,object",yC=function(e,n,a){var i=$b(n.getBoundingClientRect(),a),s,f;if(e.tagName==="BODY"){var g=e.ownerDocument.documentElement;s=e.scrollLeft||g.scrollLeft,f=e.scrollTop||g.scrollTop}else{var b=e.getBoundingClientRect();s=e.scrollLeft-b.left,f=e.scrollTop-b.top}i.left+=s,i.right+=s,i.top+=f,i.bottom+=f,i.width=1;var C=n.offsetWidth-n.clientWidth;return C>0&&(a&&(C*=-1),i.left+=C,i.right+=C),i},wE=function(e){for(var n=$u(Z.fromDom(e),Gi),a=0;a<n.length;a++){var i=n[a].dom,s=i.previousSibling;if(cp(s)){var f=s.data;f.length===1?s.parentNode.removeChild(s):s.deleteData(f.length-1,1)}if(s=i.nextSibling,om(s)){var f=s.data;f.length===1?s.parentNode.removeChild(s):s.deleteData(0,1)}}},zu=function(e,n,a,i){var s=sa(),f,g,b=iu(e),C=b.length>0?b:"p",k=function(j,J){var fe;if(_(),yE(J))return null;if(a(J)){g=rb(C,J,j);var ve=yC(n,J,j);vr(g).css("top",ve.top);var ae=vr('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(pn({},ve)).appendTo(n)[0];s.set({caret:ae,element:J,before:j}),j&&vr(ae).addClass("mce-visual-caret-before"),M(),fe=J.ownerDocument.createRange(),fe.setStart(g,0),fe.setEnd(g,0)}else return g=am(J,j),fe=J.ownerDocument.createRange(),sd(g.nextSibling)?(fe.setStart(g,0),fe.setEnd(g,0)):(fe.setStart(g,1),fe.setEnd(g,1)),fe;return fe},_=function(){wE(n),g&&(cd(g),g=null),s.on(function(j){vr(j.caret).remove(),s.clear()}),f&&(sn.clearInterval(f),f=void 0)},M=function(){f=sn.setInterval(function(){i()?vr("div.mce-visual-caret",n).toggleClass("mce-visual-caret-hidden"):vr("div.mce-visual-caret",n).addClass("mce-visual-caret-hidden")},500)},F=function(){s.on(function(j){var J=yC(n,j.element,j.before);vr(j.caret).css(pn({},J))})},U=function(){return sn.clearInterval(f)},K=function(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"};return{show:k,hide:_,getCss:K,reposition:F,destroy:U}},wC=function(){return v1.isIE()||v1.isEdge()||v1.isFirefox()},sd=function(e){return bE(e)||bC(e)},af=function(e){return sd(e)||dc(e)&&wC()},d1=Ua,CE=$n,SE=Ii("display","block table table-cell table-caption list-item"),m1=Ic,cy=Xf,lv=Mn,xE=ll,ld=function(e){return e>0},ei=function(e){return e<0},fd=function(e,n){for(var a;a=e(n);)if(!cy(a))return a;return null},km=function(e,n,a,i,s){var f=new wi(e,i),g=d1(e)||cy(e);if(ei(n)){if(g&&(e=fd(f.prev.bind(f),!0),a(e)))return e;for(;e=fd(f.prev.bind(f),s);)if(a(e))return e}if(ld(n)){if(g&&(e=fd(f.next.bind(f),!0),a(e)))return e;for(;e=fd(f.next.bind(f),s);)if(a(e))return e}return null},zs=function(e,n){for(;e&&e!==n;){if(SE(e))return e;e=e.parentNode}return null},Ls=function(e,n,a){return zs(e.container(),a)===zs(n.container(),a)},g1=function(e,n){if(!n)return null;var a=n.container(),i=n.offset();return lv(a)?a.childNodes[i+e]:null},sy=function(e,n){var a=n.ownerDocument.createRange();return e?(a.setStartBefore(n),a.setEndBefore(n)):(a.setStartAfter(n),a.setEndAfter(n)),a},CC=function(e,n,a){return zs(n,e)===zs(a,e)},ly=function(e,n,a){for(var i=e?"previousSibling":"nextSibling";a&&a!==n;){var s=a[i];if(m1(s)&&(s=s[i]),d1(s)||CE(s)){if(CC(n,s,a))return s;break}if(xE(s))break;a=a.parentNode}return null},Am=At(sy,!0),fv=At(sy,!1),h1=function(e,n,a){var i,s=At(ly,!0,n),f=At(ly,!1,n),g=a.startContainer,b=a.startOffset;if(Xf(g)){lv(g)||(g=g.parentNode);var C=g.getAttribute("data-mce-caret");if(C==="before"&&(i=g.nextSibling,af(i)))return Am(i);if(C==="after"&&(i=g.previousSibling,af(i)))return fv(i)}if(!a.collapsed)return a;if(gn(g)){if(m1(g)){if(e===1){if(i=f(g),i)return Am(i);if(i=s(g),i)return fv(i)}if(e===-1){if(i=s(g),i)return fv(i);if(i=f(g),i)return Am(i)}return a}if(cp(g)&&b>=g.data.length-1)return e===1&&(i=f(g),i)?Am(i):a;if(om(g)&&b<=1)return e===-1&&(i=s(g),i)?fv(i):a;if(b===g.data.length)return i=f(g),i?Am(i):a;if(b===0)return i=s(g),i?fv(i):a}return a},fy=function(e,n){return te.from(g1(e?0:-1,n)).filter(d1)},Om=function(e,n,a){var i=h1(e,n,a);return e===-1?Ge.fromRangeStart(i):Ge.fromRangeEnd(i)},p1=function(e){return te.from(e.getNode()).map(Z.fromDom)},TE=function(e){return te.from(e.getNode(!0)).map(Z.fromDom)},vy=function(e,n){for(;n=e(n);)if(n.isVisible())return n;return n},b1=function(e,n){var a=Ls(e,n);return!a&&Ho(e.getNode())?!0:a},Ki;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(Ki||(Ki={}));var y1=Ua,kl=gn,SC=Mn,dy=Ho,Dm=ll,my=Uv,Zg=Og,EE=function(e,n){for(var a=[];e&&e!==n;)a.push(e),e=e.parentNode;return a},w1=function(e,n){return e.hasChildNodes()&&n<e.childNodes.length?e.childNodes[n]:null},C1=function(e,n){if(ld(e)){if(Dm(n.previousSibling)&&!kl(n.previousSibling))return Ge.before(n);if(kl(n))return Ge(n,0)}if(ei(e)){if(Dm(n.nextSibling)&&!kl(n.nextSibling))return Ge.after(n);if(kl(n))return Ge(n,n.data.length)}return ei(e)?dy(n)?Ge.before(n):Ge.after(n):Ge.before(n)},xC=function(e,n){var a=n.nextSibling;return a&&Dm(a)?kl(a)?Ge(a,0):Ge.before(a):S1(Ki.Forwards,Ge.after(n),e)},S1=function(e,n,a){var i,s,f,g;if(!SC(a)||!n)return null;if(n.isEqual(Ge.after(a))&&a.lastChild){if(g=Ge.after(a.lastChild),ei(e)&&Dm(a.lastChild)&&SC(a.lastChild))return dy(a.lastChild)?Ge.before(a.lastChild):g}else g=n;var b=g.container(),C=g.offset();if(kl(b)){if(ei(e)&&C>0)return Ge(b,--C);if(ld(e)&&C<b.length)return Ge(b,++C);i=b}else{if(ei(e)&&C>0&&(s=w1(b,C-1),Dm(s)))return!my(s)&&(f=km(s,e,Zg,s),f)?kl(f)?Ge(f,f.data.length):Ge.after(f):kl(s)?Ge(s,s.data.length):Ge.before(s);if(ld(e)&&C<b.childNodes.length&&(s=w1(b,C),Dm(s)))return dy(s)?xC(a,s):!my(s)&&(f=km(s,e,Zg,s),f)?kl(f)?Ge(f,0):Ge.before(f):kl(s)?Ge(s,0):Ge.after(s);i=s||g.getNode()}if((ld(e)&&g.isAtEnd()||ei(e)&&g.isAtStart())&&(i=km(i,e,Kt,a,!0),Zg(i,a)))return C1(e,i);s=km(i,e,Zg,a);var k=Ha(dn(EE(b,a),y1));return k&&(!s||!k.contains(s))?(ld(e)?g=Ge.after(k):g=Ge.before(k),g):s?C1(e,s):null},lo=function(e){return{next:function(n){return S1(Ki.Forwards,n,e)},prev:function(n){return S1(Ki.Backwards,n,e)}}},Qg=function(e,n,a){var i=e?Ge.before(a):Ge.after(a);return wc(e,n,i)},x1=function(e){return Ho(e)?Ge.before(e):Ge.after(e)},T1=function(e){return Ge.isTextPosition(e)?e.offset()===0:ll(e.getNode())},TC=function(e){if(Ge.isTextPosition(e)){var n=e.container();return e.offset()===n.data.length}else return ll(e.getNode(!0))},gy=function(e,n){return!Ge.isTextPosition(e)&&!Ge.isTextPosition(n)&&e.getNode()===n.getNode(!0)},vd=function(e){return!Ge.isTextPosition(e)&&Ho(e.getNode())},EC=function(e,n,a){return e?!gy(n,a)&&!vd(n)&&TC(n)&&T1(a):!gy(a,n)&&T1(n)&&TC(a)},wc=function(e,n,a){var i=lo(n);return te.from(e?i.next(a):i.prev(a))},Al=function(e,n,a){return wc(e,n,a).bind(function(i){return Ls(a,i,n)&&EC(e,a,i)?wc(e,n,i):te.some(i)})},hy=function(e,n,a,i){return Al(e,n,a).bind(function(s){return i(s)?hy(e,n,s,i):te.some(s)})},vv=function(e,n){var a=e?n.firstChild:n.lastChild;return gn(a)?te.some(Ge(a,e?0:a.data.length)):a?ll(a)?te.some(e?Ge.before(a):x1(a)):Qg(e,n,a):te.none()},Hs=At(wc,!0),Vs=At(wc,!1),Pu=At(vv,!0),Us=At(vv,!1),py="_mce_caret",Ol=function(e){return Mn(e)&&e.id===py},dd=function(e,n){for(;n&&n!==e;){if(n.id===py)return n;n=n.parentNode}return null},kC=function(e){return wn(e.start)},AC=function(e){return cr(e,"rng")},kE=function(e){return cr(e,"id")},AE=function(e){return cr(e,"name")},OC=function(e){return Je.isArray(e.start)},DC=function(e,n){return Mn(n)&&e.isBlock(n)&&!n.innerHTML&&!Ln.ie&&(n.innerHTML='<br data-mce-bogus="1" />'),n},RC=function(e,n){var a,i=e.createRng();return a=jb(e.getRoot(),n.start),i.setStart(a.container(),a.offset()),a=jb(e.getRoot(),n.end),i.setEnd(a.container(),a.offset()),i},BC=function(e,n){var a=e.ownerDocument.createTextNode(Wa);e.appendChild(a),n.setStart(a,0),n.setEnd(a,0)},_C=function(e){return e.hasChildNodes()===!1},OE=function(e,n){return Us(e).fold(_t,function(a){return n.setStart(a.container(),a.offset()),n.setEnd(a.container(),a.offset()),!0})},MC=function(e,n,a){return _C(n)&&dd(e,n)?(BC(n,a),!0):!1},FC=function(e,n,a,i){var s=a[n?"start":"end"],f,g,b,C,k=e.getRoot();if(s){for(b=s[0],g=k,f=s.length-1;f>=1;f--){if(C=g.childNodes,MC(k,g,i))return!0;if(s[f]>C.length-1)return MC(k,g,i)?!0:OE(g,i);g=C[s[f]]}g.nodeType===3&&(b=Math.min(s[0],g.nodeValue.length)),g.nodeType===1&&(b=Math.min(s[0],g.childNodes.length)),n?i.setStart(g,b):i.setEnd(g,b)}return!0},by=function(e){return gn(e)&&e.data.length>0},PC=function(e,n,a){var i=e.get(a.id+"_"+n),s,f,g,b,C=a.keep,k,_;if(i){if(s=i.parentNode,n==="start"?(C?i.hasChildNodes()?(s=i.firstChild,f=1):by(i.nextSibling)?(s=i.nextSibling,f=0):by(i.previousSibling)?(s=i.previousSibling,f=i.previousSibling.data.length):(s=i.parentNode,f=e.nodeIndex(i)+1):f=e.nodeIndex(i),k=s,_=f):(C?i.hasChildNodes()?(s=i.firstChild,f=1):by(i.previousSibling)?(s=i.previousSibling,f=i.previousSibling.data.length):(s=i.parentNode,f=e.nodeIndex(i)):f=e.nodeIndex(i),k=s,_=f),!C){for(b=i.previousSibling,g=i.nextSibling,Je.each(Je.grep(i.childNodes),function(M){gn(M)&&(M.nodeValue=M.nodeValue.replace(/\uFEFF/g,""))});i=e.get(a.id+"_"+n);)e.remove(i,!0);b&&g&&b.nodeType===g.nodeType&&gn(b)&&!Ln.opera&&(f=b.nodeValue.length,b.appendData(g.nodeValue),e.remove(g),k=b,_=f)}return te.some(Ge(k,_))}else return te.none()},DE=function(e,n){var a=e.createRng();return FC(e,!0,n,a)&&FC(e,!1,n,a)?te.some(a):te.none()},Or=function(e,n){var a=PC(e,"start",n),i=PC(e,"end",n);return xu(a,i.or(a),function(s,f){var g=e.createRng();return g.setStart(DC(e,s.container()),s.offset()),g.setEnd(DC(e,f.container()),f.offset()),g})},md=function(e,n){return te.from(e.select(n.name)[n.index]).map(function(a){var i=e.createRng();return i.selectNode(a),i})},Rm=function(e,n){var a=e.dom;if(n){if(OC(n))return DE(a,n);if(kC(n))return te.some(RC(a,n));if(kE(n))return Or(a,n);if(AE(n))return md(a,n);if(AC(n))return te.some(n.rng)}return te.none()},yy=function(e,n,a){return eE(e,n,a)},RE=function(e,n){Rm(e,n).each(function(a){e.setRng(a)})},nc=function(e){return Mn(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark"},BE=function(e){return function(n){return e===n}},gd=BE(Ci),of=function(e){return e!==""&&` \f
\r	\v`.indexOf(e)!==-1},eh=function(e){return!of(e)&&!gd(e)},th=function(e){return!!e.nodeType},NC=function(e){return e&&/^(IMG)$/.test(e.nodeName)},IC=function(e,n,a){var i=a.startOffset,s=a.startContainer;if(!(s===a.endContainer&&NC(s.childNodes[i]))&&Mn(s)){var f=s.childNodes,g=void 0;i<f.length?(s=f[i],g=new wi(s,e.getParent(s,e.isBlock))):(s=f[f.length-1],g=new wi(s,e.getParent(s,e.isBlock)),g.next(!0));for(var b=g.current();b;b=g.next())if(gn(b)&&!k1(b)){a.setStart(b,0),n.setRng(a);return}}},wy=function(e,n,a){if(e){var i=n?"nextSibling":"previousSibling";for(e=a?e:e[i];e;e=e[i])if(Mn(e)||!k1(e))return e}},E1=function(e,n){return th(n)&&(n=n.nodeName),!!e.schema.getTextBlockElements()[n.toLowerCase()]},Bm=function(e,n,a){return e.schema.isValidChild(n,a)},k1=function(e,n){if(n===void 0&&(n=!1),pt(e)&&gn(e)){var a=n?e.data.replace(/ /g,"\xA0"):e.data;return Bs(a)}else return!1},_E=function(e){return pt(e)&&gn(e)&&e.length===0},Dl=function(e,n){return bt(e)?e=e(n):pt(n)&&(e=e.replace(/%(\w+)/g,function(a,i){return n[i]||a})),e},A1=function(e,n){return e=e||"",n=n||"",e=""+(e.nodeName||e),n=""+(n.nodeName||n),e.toLowerCase()===n.toLowerCase()},_m=function(e,n,a){return(a==="color"||a==="backgroundColor")&&(n=e.toHex(n)),a==="fontWeight"&&n===700&&(n="bold"),a==="fontFamily"&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+n},hd=function(e,n,a){return _m(e,e.getStyle(n,a),a)},$C=function(e,n){var a;return e.getParent(n,function(i){return a=e.getStyle(i,"text-decoration"),a&&a!=="none"}),a},Mm=function(e,n,a){return e.getParents(n,a,e.getRoot())},ME=function(e,n){var a=function(i){var s=function(f){return f.length>1&&f.charAt(0)==="%"};return an(["styles","attributes"],function(f){return ua(i,f).exists(function(g){var b=Un(g)?g:Br(g);return an(b,s)})})};return an(e.formatter.get(n),a)},Cy=function(e,n,a){var i=["inline","block","selector","attributes","styles","classes"],s=function(f){return di(f,function(g,b){return an(i,function(C){return C===b})})};return an(e.formatter.get(n),function(f){var g=s(f);return an(e.formatter.get(a),function(b){var C=s(b);return $r(g,C)})})},Rl=function(e){return to(e,"block")},Cc=function(e){return to(e,"selector")},Xi=function(e){return to(e,"inline")},FE=function(e){return Cc(e)&&Xi(e)&&ss(ua(e,"mixed"),!0)},Sy=function(e){return Cc(e)&&e.expand!==!1&&!Xi(e)},Fm=nc,O1=Mm,xy=k1,PE=E1,NE=function(e){return Ho(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling},Vt=function(e,n){for(var a=n;a;){if(Mn(a)&&e.getContentEditable(a))return e.getContentEditable(a)==="false"?a:n;a=a.parentNode}return n},Vo=function(e,n,a,i){for(var s=n.data,f=a;e?f>=0:f<s.length;e?f--:f++)if(i(s.charAt(f)))return e?f+1:f;return-1},D1=function(e,n,a){return Vo(e,n,a,function(i){return gd(i)||of(i)})},Ai=function(e,n,a){return Vo(e,n,a,eh)},Sc=function(e,n,a,i,s,f){var g,b=e.getParent(a,e.isBlock)||n,C=function(_,M,F){var U=Wp(e),K=s?U.backwards:U.forwards;return te.from(K(_,M,function(j,J){return Fm(j.parentNode)?-1:(g=j,F(s,j,J))},b))},k=C(a,i,D1);return k.bind(function(_){return f?C(_.container,_.offset+(s?-1:0),Ai):te.some(_)}).orThunk(function(){return g?te.some({container:g,offset:s?0:g.length}):te.none()})},Ty=function(e,n,a,i,s){gn(i)&&Wr(i.data)&&i[s]&&(i=i[s]);for(var f=O1(e,i),g=0;g<f.length;g++)for(var b=0;b<n.length;b++){var C=n[b];if(!(pt(C.collapsed)&&C.collapsed!==a.collapsed)&&Cc(C)&&e.is(f[g],C.selector))return f[g]}return i},pd=function(e,n,a,i){var s=a,f=e.dom,g=f.getRoot(),b=n[0];if(Rl(b)&&!b.wrapper&&(s=f.getParent(a,b.block,g)),!s){var C=f.getParent(a,"LI,TD,TH");s=f.getParent(gn(a)?a.parentNode:a,function(k){return k!==g&&PE(e,k)},C)}if(s&&Rl(b)&&b.wrapper&&(s=O1(f,s,"ul,ol").reverse()[0]||s),!s)for(s=a;s[i]&&!f.isBlock(s[i])&&(s=s[i],!A1(s,"br")););return s||a},R1=function(e,n,a,i){var s=a.parentNode;return pt(a[i])?!1:s===n||gt(s)||e.isBlock(s)?!0:R1(e,n,s,i)},Pm=function(e,n,a,i,s){var f=a,g=s?"previousSibling":"nextSibling",b=e.getRoot();if(gn(a)&&!xy(a)&&(s?i>0:i<a.data.length))return a;for(;;){if(!n[0].block_expand&&e.isBlock(f))return f;for(var C=f[g];C;C=C[g]){var k=gn(C)&&!R1(e,b,C,g);if(!Fm(C)&&!NE(C)&&!xy(C,k))return f}if(f===b||f.parentNode===b){a=f;break}f=f.parentNode}return a},Nm=function(e){return Fm(e.parentNode)||Fm(e)},Wc=function(e,n,a,i){i===void 0&&(i=!1);var s=n.startContainer,f=n.startOffset,g=n.endContainer,b=n.endOffset,C=e.dom,k=a[0];if(Mn(s)&&s.hasChildNodes()&&(s=cv(s,f),gn(s)&&(f=0)),Mn(g)&&g.hasChildNodes()&&(g=cv(g,n.collapsed?b:b-1),gn(g)&&(b=g.nodeValue.length)),s=Vt(C,s),g=Vt(C,g),Nm(s)&&(s=Fm(s)?s:s.parentNode,n.collapsed?s=s.previousSibling||s:s=s.nextSibling||s,gn(s)&&(f=n.collapsed?s.length:0)),Nm(g)&&(g=Fm(g)?g:g.parentNode,n.collapsed?g=g.nextSibling||g:g=g.previousSibling||g,gn(g)&&(b=n.collapsed?0:g.length)),n.collapsed){var _=Sc(C,e.getBody(),s,f,!0,i);_.each(function(F){var U=F.container,K=F.offset;s=U,f=K});var M=Sc(C,e.getBody(),g,b,!1,i);M.each(function(F){var U=F.container,K=F.offset;g=U,b=K})}return(Xi(k)||k.block_expand)&&((!Xi(k)||!gn(s)||f===0)&&(s=Pm(C,a,s,f,!0)),(!Xi(k)||!gn(g)||b===g.nodeValue.length)&&(g=Pm(C,a,g,b,!1))),Sy(k)&&(s=Ty(C,a,n,s,"previousSibling"),g=Ty(C,a,n,g,"nextSibling")),(Rl(k)||Cc(k))&&(s=pd(e,a,s,"previousSibling"),g=pd(e,a,g,"nextSibling"),Rl(k)&&(C.isBlock(s)||(s=Pm(C,a,s,f,!0)),C.isBlock(g)||(g=Pm(C,a,g,b,!1)))),Mn(s)&&(f=C.nodeIndex(s),s=s.parentNode),Mn(g)&&(b=C.nodeIndex(g)+1,g=g.parentNode),{startContainer:s,startOffset:f,endContainer:g,endOffset:b}},Bl=function(e,n,a){var i=n.startOffset,s=cv(n.startContainer,i),f=n.endOffset,g=cv(n.endContainer,f-1),b=function(j){var J=j[0];gn(J)&&J===s&&i>=J.data.length&&j.splice(0,1);var fe=j[j.length-1];return f===0&&j.length>0&&fe===g&&gn(fe)&&j.splice(j.length-1,1),j},C=function(j,J,fe){for(var ve=[];j&&j!==fe;j=j[J])ve.push(j);return ve},k=function(j,J){return e.getParent(j,function(fe){return fe.parentNode===J},J)},_=function(j,J,fe){for(var ve=fe?"nextSibling":"previousSibling",ae=j,de=ae.parentNode;ae&&ae!==J;ae=de){de=ae.parentNode;var Ee=C(ae===j?ae:ae[ve],ve);Ee.length&&(fe||Ee.reverse(),a(b(Ee)))}};if(s===g)return a(b([s]));var M=e.findCommonAncestor(s,g);if(e.isChildOf(s,g))return _(s,M,!0);if(e.isChildOf(g,s))return _(g,M);var F=k(s,M)||s,U=k(g,M)||g;_(s,F,!0);var K=C(F===s?F:F.nextSibling,"nextSibling",U===g?U.nextSibling:U);K.length&&a(b(K)),_(g,U)},bd=function(e){var n=[];if(e)for(var a=0;a<e.rangeCount;a++)n.push(e.getRangeAt(a));return n},nh=function(e){return vi(e,function(n){var a=qp(n);return a?[Z.fromDom(a)]:[]})},rh=function(e){return bd(e).length>1},zC=function(e){return dn(nh(e),Nc)},Ey=function(e){return $u(e,"td[data-mce-selected],th[data-mce-selected]")},ah=function(e,n){var a=Ey(n);return a.length>0?a:zC(e)},uf=function(e){return ah(bd(e.selection.getSel()),Z.fromDom(e.getBody()))},dv=function(e,n){return Gf(e,"table",n)},Im=function(e){var n=e.startContainer,a=e.startOffset;return gn(n)?a===0?te.some(Z.fromDom(n)):te.none():te.from(n.childNodes[a]).map(Z.fromDom)},B1=function(e){var n=e.endContainer,a=e.endOffset;return gn(n)?a===n.data.length?te.some(Z.fromDom(n)):te.none():te.from(n.childNodes[a-1]).map(Z.fromDom)},mv=function(e){return qd(e).fold(Y([e]),function(n){return[e].concat(mv(n))})},cf=function(e){return Es(e).fold(Y([e]),function(n){return yo(n)==="br"?qu(n).map(function(a){return[e].concat(cf(a))}).getOr([]):[e].concat(cf(n))})},gv=function(e,n){return xu(Im(n),B1(n),function(a,i){var s=ra(mv(e),At(va,a)),f=ra(cf(e),At(va,i));return s.isSome()&&f.isSome()}).getOr(!1)},_1=function(e,n,a,i){var s=a,f=new wi(a,s),g=di(e.schema.getMoveCaretBeforeOnEnterElements(),function(b,C){return!rt(["td","th","table"],C.toLowerCase())});do{if(gn(a)&&Je.trim(a.nodeValue).length!==0){i?n.setStart(a,0):n.setEnd(a,a.nodeValue.length);return}if(g[a.nodeName]){i?n.setStartBefore(a):a.nodeName==="BR"?n.setEndBefore(a):n.setEndAfter(a);return}}while(a=i?f.next():f.prev());s.nodeName==="BODY"&&(i?n.setStart(s,0):n.setEnd(s,s.childNodes.length))},oh=function(e){var n=e.selection.getSel();return n&&n.rangeCount>0},ih=function(e,n){var a=uf(e);a.length>0?Ze(a,function(i){var s=i.dom,f=e.dom.createRng();f.setStartBefore(s),f.setEndAfter(s),n(f,!0)}):n(e.selection.getRng(),!1)},ky=function(e,n,a){var i=Yw(e,n);a(i),e.moveToBookmark(i)},LC=function(e,n){var a=function(f){if(!e(f))throw new Error("Can only get "+n+" value of a "+n+" node");return i(f).getOr("")},i=function(f){return e(f)?te.from(f.dom.nodeValue):te.none()},s=function(f,g){if(!e(f))throw new Error("Can only set raw "+n+" value of a "+n+" node");f.dom.nodeValue=g};return{get:a,getOption:i,set:s}},HC=LC(lc,"text"),Ay=function(e){return HC.get(e)},M1=function(e){return lc(e)&&Ay(e)===Wa},uu=function(e,n,a,i){return _a(n).fold(function(){return"skipping"},function(s){return i==="br"||M1(n)?"valid":zw(n)?"existing":Ol(n.dom)?"caret":!Bm(e,a,i)||!Bm(e,yo(s),a)?"invalid-child":"valid"})},jc=function(e,n){var a=Wc(e,n,[{inline:"span"}]);n.setStart(a.startContainer,a.startOffset),n.setEnd(a.endContainer,a.endOffset),e.selection.setRng(n)},ps=function(e,n,a,i){var s=n.uid,f=s===void 0?Ib("mce-annotation"):s,g=Cn(n,["uid"]),b=Z.fromTag("span",e);nd(b,av()),E(b,""+zg(),f),E(b,""+Bu(),a);var C=i(f,g),k=C.attributes,_=k===void 0?{}:k,M=C.classes,F=M===void 0?[]:M;return I(b,_),Vp(b,F),b},F1=function(e,n,a,i,s){var f=[],g=ps(e.getDoc(),s,a,i),b=sa(),C=function(){b.clear()},k=function(){return b.get().getOrThunk(function(){var U=Vi(g);return f.push(U),b.set(U),U})},_=function(U){Ze(U,M)},M=function(U){var K=uu(e,U,"span",yo(U));switch(K){case"invalid-child":{C();var j=Su(U);_(j),C();break}case"valid":{var J=k();If(U,J);break}}},F=function(U){var K=kn(U,Z.fromDom);_(K)};return Bl(e.dom,n,function(U){C(),F(U)}),f},Oy=function(e,n,a,i){e.undoManager.transact(function(){var s=e.selection,f=s.getRng(),g=uf(e).length>0;if(f.collapsed&&!g&&jc(e,f),s.getRng().collapsed&&!g){var b=ps(e.getDoc(),i,n,a.decorate);_u(b,Ci),s.getRng().insertNode(b.dom),s.select(b.dom)}else ky(s,!1,function(){ih(e,function(C){F1(e,C,n,a.decorate,i)})})})},VC=function(e){var n=Nb();Pb(e,n);var a=Lp(e);return{register:function(i,s){n.register(i,s)},annotate:function(i,s){n.lookup(i).each(function(f){Oy(e,i,f,s)})},annotationChanged:function(i,s){a.addListener(i,s)},remove:function(i){ci(e,te.some(i)).each(function(s){var f=s.elements;Ze(f,Iv)})},getAll:function(i){var s=Lw(e,i);return eo(s,function(f){return kn(f,function(g){return g.dom})})}}},yd=function(e){return{getBookmark:At(yy,e),moveToBookmark:At(RE,e)}};yd.isBookmarkNode=nc;var uh=function(e,n){for(;n&&n!==e;){if(cs(n)||Ua(n))return n;n=n.parentNode}return null},ch=function(e,n,a){if(a.collapsed)return!1;if(Ln.browser.isIE()&&a.startOffset===a.endOffset-1&&a.startContainer===a.endContainer){var i=a.startContainer.childNodes[a.startOffset];if(Mn(i))return an(i.getClientRects(),function(s){return Lg(s,e,n)})}return an(a.getClientRects(),function(s){return Lg(s,e,n)})},IE=function(e,n){return e.fire("PreProcess",n)},Dy=function(e,n){return e.fire("PostProcess",n)},UC=function(e){return e.fire("remove")},Ry=function(e){return e.fire("detach")},By=function(e,n){return e.fire("SwitchMode",{mode:n})},_y=function(e,n,a,i,s){e.fire("ObjectResizeStart",{target:n,width:a,height:i,origin:s})},ya=function(e,n,a,i,s){e.fire("ObjectResized",{target:n,width:a,height:i,origin:s})},_l=function(e){return e.fire("PreInit")},WC=function(e){return e.fire("PostRender")},jC=function(e){return e.fire("Init")},qC=function(e,n){return e.fire("PlaceholderToggle",{state:n})},P1=function(e,n,a){return e.fire(n,a)},sh=function(e,n,a,i){return e.fire("FormatApply",{format:n,node:a,vars:i})},lh=function(e,n,a,i){return e.fire("FormatRemove",{format:n,node:a,vars:i})},qn={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey||qn.metaKeyPressed(e)},metaKeyPressed:function(e){return Ln.mac?e.metaKey:e.ctrlKey&&!e.altKey}},GC=Ua,fh=function(e,n){var a="data-mce-selected",i=n.dom,s=Je.each,f,g,b,C,k,_,M,F,U,K,j,J,fe,ve,ae,de=n.getDoc(),Ee=document,Me=Math.abs,Qe=Math.round,Tt=n.getBody(),jn,Yt,lt={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},Kn=function(We){return We&&(We.nodeName==="IMG"||n.dom.is(We,"figure.image"))},kt=function(We){return $n(We)||i.hasClass(We,"mce-preview-object")},tn=function(We,yn){if(We.type==="longpress"||We.type.indexOf("touch")===0){var Lt=We.touches[0];return Kn(We.target)&&!ch(Lt.clientX,Lt.clientY,yn)}else return Kn(We.target)&&!ch(We.clientX,We.clientY,yn)},Et=function(We){var yn=We.target;tn(We,n.selection.getRng())&&!We.isDefaultPrevented()&&n.selection.select(yn)},zt=function(We){return i.is(We,"figure.image")?[We.querySelector("img")]:i.hasClass(We,"mce-preview-object")&&pt(We.firstElementChild)?[We,We.firstElementChild]:[We]},hn=function(We){var yn=Qb(n);return!yn||We.getAttribute("data-mce-resize")==="false"||We===n.getBody()?!1:i.hasClass(We,"mce-preview-object")?Cu(Z.fromDom(We.firstElementChild),yn):Cu(Z.fromDom(We),yn)},ft=function(We){return kt(We)?i.create("img",{src:Ln.transparentSrc}):We.cloneNode(!0)},cn=function(We,yn,Lt){if(pt(Lt)){var ar=zt(We);Ze(ar,function(dr){dr.style[yn]||!n.schema.isValid(dr.nodeName.toLowerCase(),yn)?i.setStyle(dr,yn,Lt):i.setAttrib(dr,yn,""+Lt)})}},Sr=function(We,yn,Lt){cn(We,"width",yn),cn(We,"height",Lt)},da=function(We){var yn,Lt,ar,dr,ja;yn=We.screenX-_,Lt=We.screenY-M,ve=yn*C[2]+K,ae=Lt*C[3]+j,ve=ve<5?5:ve,ae=ae<5?5:ae,(Kn(f)||kt(f))&&cE(n)!==!1?ar=!qn.modifierPressed(We):ar=qn.modifierPressed(We),ar&&(Me(yn)>Me(Lt)?(ae=Qe(ve*J),ve=Qe(ae/J)):(ve=Qe(ae/J),ae=Qe(ve*J))),Sr(g,ve,ae),dr=C.startPos.x+yn,ja=C.startPos.y+Lt,dr=dr>0?dr:0,ja=ja>0?ja:0,i.setStyles(b,{left:dr,top:ja,display:"block"}),b.innerHTML=ve+" &times; "+ae,C[2]<0&&g.clientWidth<=ve&&i.setStyle(g,"left",F+(K-ve)),C[3]<0&&g.clientHeight<=ae&&i.setStyle(g,"top",U+(j-ae)),yn=Tt.scrollWidth-jn,Lt=Tt.scrollHeight-Yt,yn+Lt!==0&&i.setStyles(b,{left:dr-yn,top:ja-Lt}),fe||(_y(n,f,K,j,"corner-"+C.name),fe=!0)},Hr=function(){var We=fe;fe=!1,We&&(cn(f,"width",ve),cn(f,"height",ae)),i.unbind(de,"mousemove",da),i.unbind(de,"mouseup",Hr),Ee!==de&&(i.unbind(Ee,"mousemove",da),i.unbind(Ee,"mouseup",Hr)),i.remove(g),i.remove(b),i.remove(k),jo(f),We&&(ya(n,f,ve,ae,"corner-"+C.name),i.setAttrib(f,"style",i.getAttrib(f,"style"))),n.nodeChanged()},jo=function(We){st();var yn=i.getPos(We,Tt),Lt=yn.x,ar=yn.y,dr=We.getBoundingClientRect(),ja=dr.width||dr.right-dr.left,Uu=dr.height||dr.bottom-dr.top;f!==We&&(Oo(),f=We,ve=ae=0);var cc=n.fire("ObjectSelected",{target:We}),Ef=i.getAttrib(f,a,"1");hn(We)&&!cc.isDefaultPrevented()?s(lt,function(Ji,bu){var Mi,Vd=function(Ac){var ns=zt(f)[0];_=Ac.screenX,M=Ac.screenY,K=ns.clientWidth,j=ns.clientHeight,J=j/K,C=Ji,C.name=bu,C.startPos={x:ja*Ji[0]+Lt,y:Uu*Ji[1]+ar},jn=Tt.scrollWidth,Yt=Tt.scrollHeight,k=i.add(Tt,"div",{class:"mce-resize-backdrop"}),i.setStyles(k,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),g=ft(f),i.addClass(g,"mce-clonedresizable"),i.setAttrib(g,"data-mce-bogus","all"),g.contentEditable="false",i.setStyles(g,{left:Lt,top:ar,margin:0}),Sr(g,ja,Uu),g.removeAttribute(a),Tt.appendChild(g),i.bind(de,"mousemove",da),i.bind(de,"mouseup",Hr),Ee!==de&&(i.bind(Ee,"mousemove",da),i.bind(Ee,"mouseup",Hr)),b=i.add(Tt,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},K+" &times; "+j)};Mi=i.get("mceResizeHandle"+bu),Mi&&i.remove(Mi),Mi=i.add(Tt,"div",{id:"mceResizeHandle"+bu,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+bu+"-resize; margin:0; padding:0"}),Ln.ie===11&&(Mi.contentEditable=!1),i.bind(Mi,"mousedown",function(Ac){Ac.stopImmediatePropagation(),Ac.preventDefault(),Vd(Ac)}),Ji.elm=Mi,i.setStyles(Mi,{left:ja*Ji[0]+Lt-Mi.offsetWidth/2,top:Uu*Ji[1]+ar-Mi.offsetHeight/2})}):Oo(),i.getAttrib(f,a)||f.setAttribute(a,Ef)},Oo=function(){st(),f&&f.removeAttribute(a),ur(lt,function(We,yn){var Lt=i.get("mceResizeHandle"+yn);Lt&&(i.unbind(Lt),i.remove(Lt))})},li=function(We){var yn,Lt,ar=function(dr,ja){if(dr)do if(dr===ja)return!0;while(dr=dr.parentNode)};if(!(fe||n.removed)){if(s(i.select("img[data-mce-selected],hr[data-mce-selected]"),function(dr){dr.removeAttribute(a)}),Lt=We.type==="mousedown"?We.target:e.getNode(),Lt=i.$(Lt).closest("table,img,figure.image,hr,video,span.mce-preview-object")[0],ar(Lt,Tt)&&($e(),yn=e.getStart(!0),ar(yn,Lt)&&ar(e.getEnd(!0),Lt))){jo(Lt);return}Oo()}},Cs=function(We){return GC(uh(n.getBody(),We))},st=function(){ur(lt,function(We){We.elm&&(i.unbind(We.elm),delete We.elm)})},$e=function(){try{n.getDoc().execCommand("enableObjectResizing",!1,"false")}catch(We){}};n.on("init",function(){if($e(),Ln.browser.isIE()||Ln.browser.isEdge()){n.on("mousedown click",function(Lt){var ar=Lt.target,dr=ar.nodeName;!fe&&/^(TABLE|IMG|HR)$/.test(dr)&&!Cs(ar)&&(Lt.button!==2&&n.selection.select(ar,dr==="TABLE"),Lt.type==="mousedown"&&n.nodeChanged())});var We=function(Lt){var ar=function(dr){sn.setEditorTimeout(n,function(){return n.selection.select(dr)})};if(Cs(Lt.target)||$n(Lt.target)){Lt.preventDefault(),ar(Lt.target);return}/^(TABLE|IMG|HR)$/.test(Lt.target.nodeName)&&(Lt.preventDefault(),Lt.target.tagName==="IMG"&&ar(Lt.target))};i.bind(Tt,"mscontrolselect",We),n.on("remove",function(){return i.unbind(Tt,"mscontrolselect",We)})}var yn=sn.throttle(function(Lt){n.composing||li(Lt)});n.on("nodechange ResizeEditor ResizeWindow ResizeContent drop FullscreenStateChanged",yn),n.on("keyup compositionend",function(Lt){f&&f.nodeName==="TABLE"&&yn(Lt)}),n.on("hide blur",Oo),n.on("contextmenu longpress",Et,!0)}),n.on("remove",st);var mt=function(){f=g=k=null};return{isResizable:hn,showResizeRect:jo,hideResizeRect:Oo,updateResizeRect:li,destroy:mt}},$E=function(e){return cs(e)||Ua(e)},My=function(e,n,a){for(;e&&e!==n;){if(a(e))return e;e=e.parentNode}return null},zE=function(e,n,a){var i,s=a.elementFromPoint(e,n),f=a.body.createTextRange();if((!s||s.tagName==="HTML")&&(s=a.body),f.moveToElementText(s),i=Je.toArray(f.getClientRects()),i=i.sort(function(g,b){return g=Math.abs(Math.max(g.top-n,g.bottom-n)),b=Math.abs(Math.max(b.top-n,b.bottom-n)),g-b}),i.length>0){n=(i[0].bottom+i[0].top)/2;try{return f.moveToPoint(e,n),f.collapse(!0),f}catch(g){}}return null},KC=function(e,n){var a=e&&e.parentElement?e.parentElement():null;return Ua(My(a,n,$E))?null:e},N1=function(e,n,a){var i,s,f=a;if(f.caretPositionFromPoint)s=f.caretPositionFromPoint(e,n),s&&(i=a.createRange(),i.setStart(s.offsetNode,s.offset),i.collapse(!0));else if(f.caretRangeFromPoint)i=f.caretRangeFromPoint(e,n);else if(f.body.createTextRange){i=f.body.createTextRange();try{i.moveToPoint(e,n),i.collapse(!0)}catch(g){i=zE(e,n,a)}return KC(i,a.body)}return i},hv=function(e,n){return e&&n&&e.startContainer===n.startContainer&&e.startOffset===n.startOffset&&e.endContainer===n.endContainer&&e.endOffset===n.endOffset},LE=function(e,n,a){for(;e&&e!==n;){if(a(e))return e;e=e.parentNode}return null},xc=function(e,n,a){return LE(e,n,a)!==null},mu=function(e,n,a){return xc(e,n,function(i){return i.nodeName===a})},pv=function(e){return e&&e.nodeName==="TABLE"},vh=function(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)},Fy=function(e,n){return Ic(e)&&xc(e,n,Ol)===!1},Py=function(e,n,a){for(var i=new wi(n,e.getParent(n.parentNode,e.isBlock)||e.getRoot());n=i[a?"prev":"next"]();)if(Ho(n))return!0},Dr=function(e,n){return e.previousSibling&&e.previousSibling.nodeName===n},HE=function(e,n){for(;n&&n!==e;){if(Ua(n))return!0;n=n.parentNode}return!1},I1=function(e,n,a,i,s){var f,g=e.getRoot(),b,C=e.schema.getNonEmptyElements(),k=e.getParent(s.parentNode,e.isBlock)||g;if(i&&Ho(s)&&n&&e.isEmpty(k))return te.some(Ge(s.parentNode,e.nodeIndex(s)));for(var _=new wi(s,k);b=_[i?"prev":"next"]();){if(e.getContentEditableParent(b)==="false"||Fy(b,g))return te.none();if(gn(b)&&b.nodeValue.length>0)return mu(b,g,"A")===!1?te.some(Ge(b,i?b.nodeValue.length:0)):te.none();if(e.isBlock(b)||C[b.nodeName.toLowerCase()])return te.none();f=b}return a&&f?te.some(Ge(f,0)):te.none()},bv=function(e,n,a,i){var s,f,g=e.getRoot(),b,C,k=!1;s=i[(a?"start":"end")+"Container"],f=i[(a?"start":"end")+"Offset"];var _=Mn(s)&&f===s.childNodes.length,M=e.schema.getNonEmptyElements();if(C=a,Ic(s))return te.none();if(Mn(s)&&f>s.childNodes.length-1&&(C=!1),yg(s)&&(s=g,f=0),s===g){if(C&&(b=s.childNodes[f>0?f-1:0],b&&(Ic(b)||M[b.nodeName]||pv(b))))return te.none();if(s.hasChildNodes()){if(f=Math.min(!C&&f>0?f-1:f,s.childNodes.length-1),s=s.childNodes[f],f=gn(s)&&_?s.data.length:0,!n&&s===g.lastChild&&pv(s)||HE(g,s)||Ic(s))return te.none();if(s.hasChildNodes()&&pv(s)===!1){b=s;var F=new wi(s,g);do{if(Ua(b)||Ic(b)){k=!1;break}if(gn(b)&&b.nodeValue.length>0){f=C?0:b.nodeValue.length,s=b,k=!0;break}if(M[b.nodeName.toLowerCase()]&&!vh(b)){f=e.nodeIndex(b),s=b.parentNode,C||f++,k=!0;break}}while(b=C?F.next():F.prev())}}}return n&&(gn(s)&&f===0&&I1(e,_,n,!0,s).each(function(U){s=U.container(),f=U.offset(),k=!0}),Mn(s)&&(b=s.childNodes[f],b||(b=s.childNodes[f-1]),b&&Ho(b)&&!Dr(b,"A")&&!Py(e,b,!1)&&!Py(e,b,!0)&&I1(e,_,n,!0,b).each(function(U){s=U.container(),f=U.offset(),k=!0}))),C&&!n&&gn(s)&&f===s.nodeValue.length&&I1(e,_,n,!1,s).each(function(U){s=U.container(),f=U.offset(),k=!0}),k?te.some(Ge(s,f)):te.none()},$m=function(e,n){var a=n.collapsed,i=n.cloneRange(),s=Ge.fromRangeStart(n);return bv(e,a,!0,i).each(function(f){(!a||!Ge.isAbove(s,f))&&i.setStart(f.container(),f.offset())}),a||bv(e,a,!1,i).each(function(f){i.setEnd(f.container(),f.offset())}),a&&i.collapse(!0),hv(n,i)?te.none():te.some(i)},$1=function(e,n){return e.splitText(n)},z1=function(e){var n=e.startContainer,a=e.startOffset,i=e.endContainer,s=e.endOffset;return n===i&&gn(n)?a>0&&a<n.nodeValue.length&&(i=$1(n,a),n=i.previousSibling,s>a?(s=s-a,n=i=$1(i,s).previousSibling,s=i.nodeValue.length,a=0):s=0):(gn(n)&&a>0&&a<n.nodeValue.length&&(n=$1(n,a),a=0),gn(i)&&s>0&&s<i.nodeValue.length&&(i=$1(i,s).previousSibling,s=i.nodeValue.length)),{startContainer:n,startOffset:a,endContainer:i,endOffset:s}},dh=function(e){var n=function(s,f){return Bl(e,s,f)},a=z1,i=function(s){return $m(e,s).fold(_t,function(f){return s.setStart(f.startContainer,f.startOffset),s.setEnd(f.endContainer,f.endOffset),!0})};return{walk:n,split:a,normalize:i}};dh.compareRanges=hv,dh.getCaretRangeFromPoint=N1,dh.getSelectedNode=qp,dh.getNode=cv;var VE=function(e,n){var a=function(b,C){if(!rn(C)&&!C.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+C);var k=b.dom;zv(k)&&(k.style[e]=C+"px")},i=function(b){var C=n(b);if(C<=0||C===null){var k=Cr(b,e);return parseFloat(k)||0}return C},s=i,f=function(b,C){return Ur(C,function(k,_){var M=Cr(b,_),F=M===void 0?0:parseInt(M,10);return isNaN(F)?k:k+F},0)},g=function(b,C,k){var _=f(b,k),M=C>_?C-_:0;return M};return{set:a,get:i,getOuter:s,aggregate:f,max:g}},UE=VE("height",function(e){var n=e.dom;return nl(e)?n.getBoundingClientRect().height:n.offsetHeight}),cu=function(e){return UE.get(e)},wd=function(e,n){var a=e.view(n);return a.fold(Y([]),function(i){var s=e.owner(i),f=wd(e,s);return[i].concat(f)})},XC=function(e,n){var a=n.owner(e);return wd(n,a)},WE=function(e){var n,a=e.dom===document?te.none():te.from((n=e.dom.defaultView)===null||n===void 0?void 0:n.frameElement);return a.map(Z.fromDom)},jE=function(e){return fc(e)},qE=Object.freeze({__proto__:null,view:WE,owner:jE}),GE=function(e){var n=Z.fromDom(document),a=Kd(n),i=XC(e,qE),s=$v(e),f=qr(i,function(g,b){var C=$v(b);return{left:g.left+C.left,top:g.top+C.top}},{left:0,top:0});return us(f.left+s.left+a.left,f.top+s.top+a.top)},Ny=function(e){return yo(e)==="textarea"},KE=function(e,n){var a=e.fire("ScrollIntoView",n);return a.isDefaultPrevented()},Tn=function(e,n){e.fire("AfterScrollIntoView",n)},YC=function(e,n){var a=Su(e);if(a.length===0||Ny(e))return{element:e,offset:n};if(n<a.length&&!Ny(a[n]))return{element:a[n],offset:0};var i=a[a.length-1];return Ny(i)?{element:e,offset:n}:yo(i)==="img"?{element:i,offset:1}:lc(i)?{element:i,offset:Ay(i).length}:{element:i,offset:Su(i).length}},JC=function(e,n){var a=dg(e),i=cu(e);return{element:e,bottom:a.top+i,height:i,pos:a,cleanup:n}},XE=function(e,n){var a=YC(e,n),i=Z.fromHtml('<span data-mce-bogus="all">'+Wa+"</span>");return pi(a.element,i),JC(i,function(){return _o(i)})},mh=function(e){return JC(Z.fromDom(e),ut)},ZC=function(e,n,a,i){$y(e,function(s,f){return L1(e,n,a,i)},a)},Iy=function(e,n,a,i,s){var f={elm:i.element.dom,alignToTop:s};if(!KE(e,f)){var g=Kd(n).top;a(n,g,i,s),Tn(e,f)}},L1=function(e,n,a,i){var s=Z.fromDom(e.getBody()),f=Z.fromDom(e.getDoc());Zh(s);var g=XE(Z.fromDom(a.startContainer),a.startOffset);Iy(e,f,n,g,i),g.cleanup()},QC=function(e,n,a,i){var s=Z.fromDom(e.getDoc());Iy(e,s,a,mh(n),i)},$y=function(e,n,a){var i=a.startContainer,s=a.startOffset,f=a.endContainer,g=a.endOffset;n(Z.fromDom(i),Z.fromDom(f));var b=e.dom.createRng();b.setStart(i,s),b.setEnd(f,g),e.selection.setRng(a)},Cd=function(e,n,a,i){var s=e.pos;if(a)Xd(s.left,s.top,i);else{var f=s.top-n+e.height;Xd(s.left,f,i)}},zy=function(e,n,a,i,s){var f=a+n,g=i.pos.top,b=i.bottom,C=b-g>=a;if(g<n)Cd(i,a,s!==!1,e);else if(g>f){var k=C?s!==!1:s===!0;Cd(i,a,k,e)}else b>f&&!C&&Cd(i,a,s===!0,e)},Ly=function(e,n,a,i){var s=e.dom.defaultView.innerHeight;zy(e,n,s,a,i)},Hy=function(e,n,a,i){var s=e.dom.defaultView.innerHeight;zy(e,n,s,a,i);var f=GE(a.element),g=Ni(window);f.top<g.y?mg(a.element,i!==!1):f.top>g.bottom&&mg(a.element,i===!0)},H1=function(e,n,a){return ZC(e,Ly,n,a)},Vy=function(e,n,a){return QC(e,n,Ly,a)},YE=function(e,n,a){return ZC(e,Hy,n,a)},Uy=function(e,n,a){return QC(e,n,Hy,a)},JE=function(e,n,a){var i=e.inline?Vy:Uy;i(e,n,a)},V1=function(e,n,a){var i=e.inline?H1:YE;i(e,n,a)},Qr=function(){return Z.fromDom(document)},eS=function(e){return e.dom.focus()},sf=function(e){var n=ri(e).dom;return e.dom===n.activeElement},qc=function(e){return e===void 0&&(e=Qr()),te.from(e.dom.activeElement).map(Z.fromDom)},U1=function(e){return qc(ri(e)).filter(function(n){return e.dom.contains(n.dom)})},Lu=function(e,n,a,i){return{start:e,soffset:n,finish:a,foffset:i}},gh={create:Lu},Sd=il.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),W1=function(e,n,a,i){return e.fold(n,a,i)},zm=function(e){return e.fold(Dn,Dn,Dn)},ZE=Sd.before,QE=Sd.on,e3=Sd.after,t3={before:ZE,on:QE,after:e3,cata:W1,getStart:zm},Er=il.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Ws=function(e){return Er.exact(e.start,e.soffset,e.finish,e.foffset)},lf=function(e){return e.match({domRange:function(n){return Z.fromDom(n.startContainer)},relative:function(n,a){return t3.getStart(n)},exact:function(n,a,i,s){return n}})},tS=Er.domRange,xd=Er.relative,Nr=Er.exact,n3=function(e){var n=lf(e);return Pf(n)},nS=gh.create,yv={domRange:tS,relative:xd,exact:Nr,exactFromRange:Ws,getWin:n3,range:nS},Wy=fn().browser,Td=function(e,n){var a=lc(n)?Ay(n).length:Su(n).length+1;return e>a?a:e<0?0:e},Ed=function(e){return yv.range(e.start,Td(e.soffset,e.start),e.finish,Td(e.foffset,e.finish))},j1=function(e,n){return!Yd(n.dom)&&(os(e,n)||va(e,n))},q1=function(e){return function(n){return j1(e,n.start)&&j1(e,n.finish)}},jy=function(e){return e.inline===!0||Wy.isIE()},rS=function(e){return yv.range(Z.fromDom(e.startContainer),e.startOffset,Z.fromDom(e.endContainer),e.endOffset)},Lm=function(e){var n=e.getSelection(),a=!n||n.rangeCount===0?te.none():te.from(n.getRangeAt(0));return a.map(rS)},Hm=function(e){var n=Pf(e);return Lm(n.dom).filter(q1(e))},aS=function(e,n){return te.from(n).filter(q1(e)).map(Ed)},oS=function(e){var n=document.createRange();try{return n.setStart(e.start.dom,e.soffset),n.setEnd(e.finish.dom,e.foffset),te.some(n)}catch(a){return te.none()}},hh=function(e){var n=jy(e)?Hm(Z.fromDom(e.getBody())):te.none();e.bookmark=n.isSome()?n:e.bookmark},r3=function(e,n){var a=Z.fromDom(e.getBody()),i=jy(e)?te.from(n):te.none(),s=i.map(rS).filter(q1(a));e.bookmark=s.isSome()?s:e.bookmark},qy=function(e){var n=e.bookmark?e.bookmark:te.none();return n.bind(function(a){return aS(Z.fromDom(e.getBody()),a)}).bind(oS)},iS=function(e){qy(e).each(function(n){return e.selection.setRng(n)})},a3=function(e){var n=e.className.toString();return n.indexOf("tox-")!==-1||n.indexOf("mce-")!==-1},Gy={isEditorUIElement:a3},uS=function(e){return e.type==="nodechange"&&e.selectionChange},Ky=function(e,n){var a=function(){n.throttle()};Fa.DOM.bind(document,"mouseup",a),e.on("remove",function(){Fa.DOM.unbind(document,"mouseup",a)})},G1=function(e){e.on("focusout",function(){hh(e)})},Xy=function(e,n){e.on("mouseup touchend",function(a){n.throttle()})},cS=function(e,n){var a=fn().browser;a.isIE()?G1(e):Xy(e,n),e.on("keyup NodeChange",function(i){uS(i)||hh(e)})},sS=function(e){var n=$p(function(){hh(e)},0);e.on("init",function(){e.inline&&Ky(e,n),cS(e,n)}),e.on("remove",function(){n.cancel()})},js,Vm=Fa.DOM,lS=function(e){return Gy.isEditorUIElement(e)},Yy=function(e){var n=e.classList;return n!==void 0?n.contains("tox-edit-area")||n.contains("tox-edit-area__iframe")||n.contains("mce-content-body"):!1},kd=function(e,n){var a=u1(e),i=Vm.getParent(n,function(s){return lS(s)||(a?e.dom.is(s,a):!1)});return i!==null},fS=function(e){try{var n=ri(Z.fromDom(e.getElement()));return qc(n).fold(function(){return document.body},function(a){return a.dom})}catch(a){return document.body}},Jy=function(e,n){var a=n.editor;sS(a),a.on("focusin",function(){var i=e.focusedEditor;i!==a&&(i&&i.fire("blur",{focusedEditor:a}),e.setActive(a),e.focusedEditor=a,a.fire("focus",{blurredEditor:i}),a.focus(!0))}),a.on("focusout",function(){sn.setEditorTimeout(a,function(){var i=e.focusedEditor;!kd(a,fS(a))&&i===a&&(a.fire("blur",{focusedEditor:null}),e.focusedEditor=null)})}),js||(js=function(i){var s=e.activeEditor;s&&As(i).each(function(f){f.ownerDocument===document&&f!==document.body&&!kd(s,f)&&e.focusedEditor===s&&(s.fire("blur",{focusedEditor:null}),e.focusedEditor=null)})},Vm.bind(document,"focusin",js))},vS=function(e,n){e.focusedEditor===n.editor&&(e.focusedEditor=null),e.activeEditor||(Vm.unbind(document,"focusin",js),js=null)},K1=function(e){e.on("AddEditor",At(Jy,e)),e.on("RemoveEditor",At(vS,e))},Zy=function(e,n){return e.dom.getParent(n,function(a){return e.dom.getContentEditable(a)==="true"})},Um=function(e){return e.collapsed?te.from(cv(e.startContainer,e.startOffset)).map(Z.fromDom):te.none()},ph=function(e,n){return Um(n).bind(function(a){return Pc(a)?te.some(a):os(e,a)===!1?te.some(e):te.none()})},dS=function(e,n){ph(Z.fromDom(e.getBody()),n).bind(function(a){return Pu(a.dom)}).fold(function(){e.selection.normalize()},function(a){return e.selection.setRng(a.toRange())})},X1=function(e){if(e.setActive)try{e.setActive()}catch(n){e.focus()}else e.focus()},o3=function(e){return sf(e)||U1(e).isSome()},i3=function(e){return e.iframeElement&&sf(Z.fromDom(e.iframeElement))},mS=function(e){var n=e.getBody();return n&&o3(Z.fromDom(n))},Qy=function(e){var n=ri(Z.fromDom(e.getElement()));return qc(n).filter(function(a){return!Yy(a.dom)&&kd(e,a.dom)}).isSome()},Ml=function(e){return e.inline?mS(e):i3(e)},gS=function(e){return Ml(e)||Qy(e)},hS=function(e){var n=e.selection,a=e.getBody(),i=n.getRng();e.quirks.refreshContentEditable(),e.bookmark!==void 0&&Ml(e)===!1&&qy(e).each(function(f){e.selection.setRng(f),i=f});var s=Zy(e,n.getNode());if(e.$.contains(a,s)){X1(s),dS(e,i),Y1(e);return}e.inline||(Ln.opera||X1(a),e.getWin().focus()),(Ln.gecko||e.inline)&&(X1(a),dS(e,i)),Y1(e)},Y1=function(e){return e.editorManager.setActive(e)},pS=function(e,n){e.removed||(n?Y1(e):hS(e))},e2=function(e,n,a,i,s){var f=a?n.startContainer:n.endContainer,g=a?n.startOffset:n.endOffset;return te.from(f).map(Z.fromDom).map(function(b){return!i||!n.collapsed?Lo(b,s(b,g)).getOr(b):b}).bind(function(b){return Ft(b)?te.some(b):_a(b).filter(Ft)}).map(function(b){return b.dom}).getOr(e)},t2=function(e,n,a){return e2(e,n,!0,a,function(i,s){return Math.min(Gd(i),s)})},bh=function(e,n,a){return e2(e,n,!1,a,function(i,s){return s>0?s-1:s})},n2=function(e,n){for(var a=e;e&&gn(e)&&e.length===0;)e=n?e.nextSibling:e.previousSibling;return e||a},bS=function(e,n){var a,i,s;if(!n)return e;i=n.startContainer,s=n.endContainer;var f=n.startOffset,g=n.endOffset;return a=n.commonAncestorContainer,!n.collapsed&&(i===s&&g-f<2&&i.hasChildNodes()&&(a=i.childNodes[f]),i.nodeType===3&&s.nodeType===3&&(i.length===f?i=n2(i.nextSibling,!0):i=i.parentNode,g===0?s=n2(s.previousSibling,!1):s=s.parentNode,i&&i===s))?i:a&&a.nodeType===3?a.parentNode:a},J1=function(e,n,a,i){var s,f=[],g=e.getRoot();if(a=e.getParent(a||t2(g,n,n.collapsed),e.isBlock),i=e.getParent(i||bh(g,n,n.collapsed),e.isBlock),a&&a!==g&&f.push(a),a&&i&&a!==i){s=a;for(var b=new wi(a,g);(s=b.next())&&s!==i;)e.isBlock(s)&&f.push(s)}return i&&a!==i&&i!==g&&f.push(i),f},u3=function(e,n,a){return te.from(n).map(function(i){var s=e.nodeIndex(i),f=e.createRng();return f.setStart(i.parentNode,s),f.setEnd(i.parentNode,s+1),a&&(_1(e,f,i,!0),_1(e,f,i,!1)),f})},r2=function(e,n){return kn(n,function(a){var i=e.fire("GetSelectionRange",{range:a});return i.range!==a?i.range:a})},Wm={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Z1=function(e,n,a){var i=a?"lastChild":"firstChild",s=a?"prev":"next";if(e[i])return e[i];if(e!==n){var f=e[s];if(f)return f;for(var g=e.parent;g&&g!==n;g=g.parent)if(f=g[s],f)return f}},yS=function(e){if(!Bs(e.value))return!1;var n=e.parent;return!(n&&(n.name!=="span"||n.attr("style"))&&/^[ ]+$/.test(e.value))},a2=function(e){var n=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||n},Gc=function(){function e(n,a){this.name=n,this.type=a,a===1&&(this.attributes=[],this.attributes.map={})}return e.create=function(n,a){var i=new e(n,Wm[n]||1);return a&&ur(a,function(s,f){i.attr(f,s)}),i},e.prototype.replace=function(n){var a=this;return n.parent&&n.remove(),a.insert(n,a),a.remove(),a},e.prototype.attr=function(n,a){var i=this,s;if(typeof n!="string")return n!=null&&ur(n,function(g,b){i.attr(b,g)}),i;if(s=i.attributes){if(a!==void 0){if(a===null){if(n in s.map){delete s.map[n];for(var f=s.length;f--;)if(s[f].name===n)return s.splice(f,1),i}return i}if(n in s.map){for(var f=s.length;f--;)if(s[f].name===n){s[f].value=a;break}}else s.push({name:n,value:a});return s.map[n]=a,i}return s.map[n]}},e.prototype.clone=function(){var n=this,a=new e(n.name,n.type),i;if(i=n.attributes){var s=[];s.map={};for(var f=0,g=i.length;f<g;f++){var b=i[f];b.name!=="id"&&(s[s.length]={name:b.name,value:b.value},s.map[b.name]=b.value)}a.attributes=s}return a.value=n.value,a.shortEnded=n.shortEnded,a},e.prototype.wrap=function(n){var a=this;return a.parent.insert(n,a),n.append(a),a},e.prototype.unwrap=function(){for(var n=this,a=n.firstChild;a;){var i=a.next;n.insert(a,n,!0),a=i}n.remove()},e.prototype.remove=function(){var n=this,a=n.parent,i=n.next,s=n.prev;return a&&(a.firstChild===n?(a.firstChild=i,i&&(i.prev=null)):s.next=i,a.lastChild===n?(a.lastChild=s,s&&(s.next=null)):i.prev=s,n.parent=n.next=n.prev=null),n},e.prototype.append=function(n){var a=this;n.parent&&n.remove();var i=a.lastChild;return i?(i.next=n,n.prev=i,a.lastChild=n):a.lastChild=a.firstChild=n,n.parent=a,n},e.prototype.insert=function(n,a,i){n.parent&&n.remove();var s=a.parent||this;return i?(a===s.firstChild?s.firstChild=n:a.prev.next=n,n.prev=a.prev,n.next=a,a.prev=n):(a===s.lastChild?s.lastChild=n:a.next.prev=n,n.next=a.next,n.prev=a,a.next=n),n.parent=s,n},e.prototype.getAll=function(n){for(var a=this,i=[],s=a.firstChild;s;s=Z1(s,a))s.name===n&&i.push(s);return i},e.prototype.children=function(){for(var n=this,a=[],i=n.firstChild;i;i=i.next)a.push(i);return a},e.prototype.empty=function(){var n=this;if(n.firstChild){for(var a=[],i=n.firstChild;i;i=Z1(i,n))a.push(i);for(var s=a.length;s--;){var i=a[s];i.parent=i.firstChild=i.lastChild=i.next=i.prev=null}}return n.firstChild=n.lastChild=null,n},e.prototype.isEmpty=function(n,a,i){a===void 0&&(a={});var s=this,f=s.firstChild;if(a2(s))return!1;if(f)do{if(f.type===1){if(f.attr("data-mce-bogus"))continue;if(n[f.name]||a2(f))return!1}if(f.type===8||f.type===3&&!yS(f)||f.type===3&&f.parent&&a[f.parent.name]&&Bs(f.value)||i&&i(f))return!1}while(f=Z1(f,s));return!0},e.prototype.walk=function(n){return Z1(this,null,n)},e}(),jm=function(e){for(var n=/data:[^;]+;base64,([a-z0-9\+\/=\s]+)/gi,a=[],i={},s=Ib("img"),f,g=0,b=0;f=n.exec(e);){var C=f[0],k=s+"_"+b++;i[k]=C,g<f.index&&a.push(e.substr(g,f.index-g)),a.push(k),g=f.index+C.length}var _=new RegExp(s+"_[0-9]+","g");return g===0?{prefix:s,uris:i,html:e,re:_}:(g<e.length&&a.push(e.substr(g)),{prefix:s,uris:i,html:a.join(""),re:_})},o2=function(e,n){return e.replace(n.re,function(a){return ua(n.uris,a).getOr(a)})},c3=function(e){var n=/data:([^;]+);base64,([a-z0-9\+\/=\s]+)/i.exec(e);return n?te.some({type:n[1],data:decodeURIComponent(n[2])}):te.none()},s3=["img","video"],qm=Je.makeMap("button,fieldset,form,iframe,img,image,input,object,output,select,textarea"),Q1=function(e){return e.indexOf("data-")===0||e.indexOf("aria-")===0},wS=function(e,n){var a=gt(e)?rt(s3,n):e;return!a},CS=function(e,n,a){return e.allow_html_data_urls?!1:/^data:image\//i.test(n)?wS(e.allow_svg_data_urls,a)&&/^data:image\/svg\+xml/i.test(n):/^data:/i.test(n)},e0=function(e,n,a){for(var i=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,s=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,f=e.getShortEndedElements(),g=1,b=a;g!==0;)for(i.lastIndex=b;;){var C=i.exec(n);if(C===null)return b;if(C[1]==="!"){at(C[2],"--")?b=i2(n,!1,C.index+"!--".length):b=i2(n,!0,C.index+1);break}else{s.lastIndex=i.lastIndex;var k=s.exec(n);if(re(k)||k.index!==i.lastIndex)continue;C[1]==="/"?g-=1:cr(f,C[2])||(g+=1),b=i.lastIndex+k[0].length;break}}return b},l3=function(e,n){return/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(e.substr(n))},i2=function(e,n,a){a===void 0&&(a=0);var i=e.toLowerCase();if(i.indexOf("[if ",a)!==-1&&l3(i,a)){var s=i.indexOf("[endif]",a);return i.indexOf(">",s)}else if(n){var f=i.indexOf(">",a);return f!==-1?f:i.length}else{var g=/--!?>/g;g.lastIndex=a;var b=g.exec(e);return b?b.index+b[0].length:i.length}},t0=function(e,n){var a=e.exec(n);if(a){var i=a[1],s=a[2];return typeof i=="string"&&i.toLowerCase()==="data-mce-bogus"?s:null}else return null},Ad=function(e,n){var a;n===void 0&&(n=Zf()),e=e||{};var i=(a=e.document)!==null&&a!==void 0?a:document,s=i.createElement("form");e.fix_self_closing!==!1&&(e.fix_self_closing=!0);var f=e.comment?e.comment:ut,g=e.cdata?e.cdata:ut,b=e.text?e.text:ut,C=e.start?e.start:ut,k=e.end?e.end:ut,_=e.pi?e.pi:ut,M=e.doctype?e.doctype:ut,F=function(K,j){j===void 0&&(j="html");for(var J=K.html,fe,ve=0,ae,de,Ee=[],Me,Qe,Tt,jn,Yt,lt,Kn,kt,tn,Et,zt,hn,ft,cn,Sr,da,Hr,jo=0,Oo=Wv.decode,li=Je.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),Cs=/((java|vb)script|mhtml):/i,st=j==="html"?0:1,$e=function(ao){var Pa,fi;for(Pa=Ee.length;Pa--&&Ee[Pa].name!==ao;);if(Pa>=0){for(fi=Ee.length-1;fi>=Pa;fi--)ao=Ee[fi],ao.valid&&k(ao.name);Ee.length=Pa}},mt=function(ao,Pa){return b(o2(ao,K),Pa)},We=function(ao){ao!==""&&(ao.charAt(0)===">"&&(ao=" "+ao),!e.allow_conditional_comments&&ao.substr(0,3).toLowerCase()==="[if"&&(ao=" "+ao),f(o2(ao,K)))},yn=function(ao){return o2(ao,K)},Lt=function(ao,Pa){var fi=ao||"",Rv=!at(fi,"--"),Af=i2(J,Rv,Pa);return ao=J.substr(Pa,Af-Pa),We(Rv?fi+ao:ao),Af+1},ar=function(ao,Pa,fi,Rv,Af){var Wl,fg,eA=/[\s\u0000-\u001F]+/g;if(Pa=Pa.toLowerCase(),fi=yn(Pa in Ef?Pa:Oo(fi||Rv||Af||"")),Ji&&!Yt&&Q1(Pa)===!1){if(Wl=zt[Pa],!Wl&&hn){for(fg=hn.length;fg--&&(Wl=hn[fg],!Wl.pattern.test(Pa)););fg===-1&&(Wl=null)}if(!Wl||Wl.validValues&&!(fi in Wl.validValues))return}var tw=Pa==="name"||Pa==="id";if(!(tw&&ao in qm&&(fi in i||fi in s))){if(li[Pa]&&!e.allow_script_urls){var Of=fi.replace(eA,"");try{Of=decodeURIComponent(Of)}catch(tA){Of=unescape(Of)}if(Cs.test(Of)||CS(e,Of,ao))return}Yt&&(Pa in li||Pa.indexOf("on")===0)||(Me.map[Pa]=fi,Me.push({name:Pa,value:fi}))}},dr=new RegExp(`<(?:(?:!--([\\w\\W]*?)--!?>)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:![Dd][Oo][Cc][Tt][Yy][Pp][Ee]([\\w\\W]*?)>)|(?:!(--)?)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|(?:([A-Za-z][A-Za-z0-9\\-_:.]*)(\\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\\s*|\\/)>))`,"g"),ja=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,Uu=n.getShortEndedElements(),cc=e.self_closing_elements||n.getSelfClosingElements(),Ef=n.getBoolAttrs(),Ji=e.validate,bu=e.remove_internals,Mi=e.fix_self_closing,Vd=n.getSpecialElements(),Ac=J+">";fe=dr.exec(Ac);){var ns=fe[0];if(ve<fe.index&&mt(Oo(J.substr(ve,fe.index-ve))),ae=fe[7])ae=ae.toLowerCase(),ae.charAt(0)===":"&&(ae=ae.substr(1)),$e(ae);else if(ae=fe[8]){if(fe.index+ns.length>J.length){mt(Oo(J.substr(fe.index))),ve=fe.index+ns.length;continue}ae=ae.toLowerCase(),ae.charAt(0)===":"&&(ae=ae.substr(1)),lt=ae in Uu,Mi&&cc[ae]&&Ee.length>0&&Ee[Ee.length-1].name===ae&&$e(ae);var kf=t0(ja,fe[9]);if(kf!==null){if(kf==="all"){ve=e0(n,J,dr.lastIndex),dr.lastIndex=ve;continue}kt=!1}if(!Ji||(Kn=n.getElementRule(ae))){if(kt=!0,Ji&&(zt=Kn.attributes,hn=Kn.attributePatterns),(Et=fe[9])?(Yt=Et.indexOf("data-mce-type")!==-1,Yt&&bu&&(kt=!1),Me=[],Me.map={},Et.replace(ja,function(ao,Pa,fi,Rv,Af){return ar(ae,Pa,fi,Rv,Af),""})):(Me=[],Me.map={}),Ji&&!Yt){if(ft=Kn.attributesRequired,cn=Kn.attributesDefault,Sr=Kn.attributesForced,da=Kn.removeEmptyAttrs,da&&!Me.length&&(kt=!1),Sr)for(Qe=Sr.length;Qe--;)tn=Sr[Qe],jn=tn.name,Hr=tn.value,Hr==="{$uid}"&&(Hr="mce_"+jo++),Me.map[jn]=Hr,Me.push({name:jn,value:Hr});if(cn)for(Qe=cn.length;Qe--;)tn=cn[Qe],jn=tn.name,jn in Me.map||(Hr=tn.value,Hr==="{$uid}"&&(Hr="mce_"+jo++),Me.map[jn]=Hr,Me.push({name:jn,value:Hr}));if(ft){for(Qe=ft.length;Qe--&&!(ft[Qe]in Me.map););Qe===-1&&(kt=!1)}if(tn=Me.map["data-mce-bogus"]){if(tn==="all"){ve=e0(n,J,dr.lastIndex),dr.lastIndex=ve;continue}kt=!1}}kt&&C(ae,Me,lt)}else kt=!1;if(de=Vd[ae]){de.lastIndex=ve=fe.index+ns.length,(fe=de.exec(J))?(kt&&(Tt=J.substr(ve,fe.index-ve)),ve=fe.index+fe[0].length):(Tt=J.substr(ve),ve=J.length),kt&&(Tt.length>0&&mt(Tt,!0),k(ae)),dr.lastIndex=ve;continue}lt||(!Et||Et.indexOf("/")!==Et.length-1?Ee.push({name:ae,valid:kt}):kt&&k(ae))}else if(ae=fe[1])We(ae);else if(ae=fe[2]){var H0=st===1||e.preserve_cdata||Ee.length>0&&n.isValidChild(Ee[Ee.length-1].name,"#cdata");if(H0)g(ae);else{ve=Lt("",fe.index+2),dr.lastIndex=ve;continue}}else if(ae=fe[3])M(ae);else if((ae=fe[4])||ns==="<!"){ve=Lt(ae,fe.index+ns.length),dr.lastIndex=ve;continue}else if(ae=fe[5])if(st===1)_(ae,fe[6]);else{ve=Lt("?",fe.index+2),dr.lastIndex=ve;continue}ve=fe.index+ns.length}for(ve<J.length&&mt(Oo(J.substr(ve))),Qe=Ee.length-1;Qe>=0;Qe--)ae=Ee[Qe],ae.valid&&k(ae.name)},U=function(K,j){j===void 0&&(j="html"),F(jm(K),j)};return{parse:U}};Ad.findEndTag=e0;var SS=function(e,n){var a=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return n.replace(a,"")},xS=function(e,n){for(var a=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,i=e.schema,s=SS(e.getTempAttrs(),n),f=i.getShortEndedElements(),g;g=a.exec(s);){var b=a.lastIndex,C=g[0].length,k=void 0;f[g[1]]?k=b:k=Ad.findEndTag(i,s,b),s=s.substring(0,b-C)+s.substring(k),a.lastIndex=b-C}return sl(s)},f3=xS,v3=function(e,n){var a=iu(e),i=new RegExp("^(<"+a+"[^>]*>(&nbsp;|&#160;|\\s|\xA0|<br \\/>|)<\\/"+a+`>[\r
]*|<br \\/>[\r
]*)$`);return n.replace(i,"")},n0=function(e,n){return pn(pn({},e),{format:n,get:!0,getInner:!0})},TS=function(e,n,a,i){var s=n0(n,a),f=n.no_events?s:e.fire("BeforeGetContent",s),g;return f.format==="raw"?g=Je.trim(f3(e.serializer,i.innerHTML)):f.format==="text"?g=e.dom.isEmpty(i)?"":sl(i.innerText||i.textContent):f.format==="tree"?g=e.serializer.serialize(i,f):g=v3(e,e.serializer.serialize(i,f)),!rt(["text","tree"],f.format)&&!kg(Z.fromDom(i))?f.content=Je.trim(g):f.content=g,f.no_events?f.content:e.fire("GetContent",f).content},ES=function(e,n,a){return te.from(e.getBody()).fold(Y(n.format==="tree"?new Gc("body",11):""),function(i){return TS(e,n,a,i)})},kS=Je.each,Kc=function(e){var n=function(a,i){if(a.nodeName!==i.nodeName)return!1;var s=function(g){var b={};return kS(e.getAttribs(g),function(C){var k=C.nodeName.toLowerCase();k.indexOf("_")!==0&&k!=="style"&&k.indexOf("data-")!==0&&(b[k]=e.getAttrib(g,k))}),b},f=function(g,b){var C,k;for(k in g)if(cr(g,k)){if(C=b[k],typeof C=="undefined"||g[k]!==C)return!1;delete b[k]}for(k in b)if(cr(b,k))return!1;return!0};return!f(s(a),s(i))||!f(e.parseStyle(e.getAttrib(a,"style")),e.parseStyle(e.getAttrib(i,"style")))?!1:!nc(a)&&!nc(i)};return{compare:n}},u2=Je.makeMap,bs=function(e){var n=[];e=e||{};var a=e.indent,i=u2(e.indent_before||""),s=u2(e.indent_after||""),f=Wv.getEncodeFunc(e.entity_encoding||"raw",e.entities),g=e.element_format==="html";return{start:function(b,C,k){var _,M,F,U;if(a&&i[b]&&n.length>0&&(U=n[n.length-1],U.length>0&&U!==`
`&&n.push(`
`)),n.push("<",b),C)for(_=0,M=C.length;_<M;_++)F=C[_],n.push(" ",F.name,'="',f(F.value,!0),'"');!k||g?n[n.length]=">":n[n.length]=" />",k&&a&&s[b]&&n.length>0&&(U=n[n.length-1],U.length>0&&U!==`
`&&n.push(`
`))},end:function(b){var C;n.push("</",b,">"),a&&s[b]&&n.length>0&&(C=n[n.length-1],C.length>0&&C!==`
`&&n.push(`
`))},text:function(b,C){b.length>0&&(n[n.length]=C?b:f(b))},cdata:function(b){n.push("<![CDATA[",b,"]]>")},comment:function(b){n.push("<!--",b,"-->")},pi:function(b,C){C?n.push("<?",b," ",f(C),"?>"):n.push("<?",b,"?>"),a&&n.push(`
`)},doctype:function(b){n.push("<!DOCTYPE",b,">",a?`
`:"")},reset:function(){n.length=0},getContent:function(){return n.join("").replace(/\n$/,"")}}},Gm=function(e,n){n===void 0&&(n=Zf());var a=bs(e);e=e||{},e.validate="validate"in e?e.validate:!0;var i=function(s){var f=e.validate,g={3:function(C){a.text(C.value,C.raw)},8:function(C){a.comment(C.value)},7:function(C){a.pi(C.name,C.value)},10:function(C){a.doctype(C.value)},4:function(C){a.cdata(C.value)},11:function(C){if(C=C.firstChild)do b(C);while(C=C.next)}};a.reset();var b=function(C){var k=g[C.type];if(k)k(C);else{var _=C.name,M=C.shortEnded,F=C.attributes;if(f&&F&&F.length>1){var U=[];U.map={};var K=n.getElementRule(C.name);if(K){for(var j=0,J=K.attributesOrder.length;j<J;j++){var fe=K.attributesOrder[j];if(fe in F.map){var ve=F.map[fe];U.map[fe]=ve,U.push({name:fe,value:ve})}}for(var j=0,J=F.length;j<J;j++){var fe=F[j].name;if(!(fe in U.map)){var ve=F.map[fe];U.map[fe]=ve,U.push({name:fe,value:ve})}}F=U}}if(a.start(C.name,F,M),!M){if(C=C.firstChild)do b(C);while(C=C.next);a.end(_)}}};return s.type===1&&!e.inner?b(s):g[11](s),a.getContent()};return{serialize:i}},c2=new Set;(function(){var e=["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"];Ze(e,function(n){c2.add(n)})})();var AS=["font","text-decoration","text-emphasis"],s2=function(e,n){return mo(e.parseStyle(e.getAttrib(n,"style")))},d3=function(e){return c2.has(e)},m3=function(e,n){return No(s2(e,n),function(a){return!d3(a)})},OS=function(e){return dn(e,function(n){return an(AS,function(a){return at(n,a)})})},g3=function(e,n,a){var i=s2(e,n),s=s2(e,a),f=function(g){var b=e.getStyle(n,g),C=e.getStyle(a,g);return sr(b)&&sr(C)&&b!==C};return an(i,function(g){var b=function(k){return an(k,function(_){return _===g})};if(!b(s)&&b(AS)){var C=OS(s);return an(C,f)}else return f(g)})},yh=function(e,n,a){return te.from(a.container()).filter(gn).exists(function(i){var s=e?0:-1;return n(i.data.charAt(a.offset()+s))})},r0=At(yh,!0,of),l2=At(yh,!1,of),h3=function(e){var n=e.container();return gn(n)&&(n.data.length===0||Hv(n.data)&&yd.isBookmarkNode(n.parentNode))},ff=function(e,n){return function(a){return te.from(g1(e?0:-1,a)).filter(n).isSome()}},Km=function(e){return q0(e)&&Cr(Z.fromDom(e),"display")==="block"},DS=function(e){return Ua(e)&&!pg(e)},p3=ff(!0,Km),f2=ff(!1,Km),Od=ff(!0,$n),Dd=ff(!1,$n),RS=ff(!0,dc),BS=ff(!1,dc),wv=ff(!0,DS),vf=ff(!1,DS),_S=function(e){for(var n=[],a=e.dom;a;)n.push(Z.fromDom(a)),a=a.lastChild;return n},b3=function(e){var n=$u(e,"br"),a=dn(_S(e).slice(-1),vs);n.length===a.length&&Ze(a,_o)},Rd=function(e){Yl(e),bi(e,Z.fromHtml('<br data-mce-bogus="1">'))},MS=function(e){Es(e).each(function(n){qu(n).each(function(a){Fc(e)&&vs(n)&&Fc(a)&&_o(n)})})},FS=function(e){return e.slice(0,-1)},y3=function(e,n,a){return os(n,e)?FS(Pv(e,function(i){return a(i)||va(i,n)})):[]},Pn=function(e,n){return y3(e,n,_t)},Fl=function(e,n){return[e].concat(Pn(e,n))},Pl=function(e,n,a){return hy(e,n,a,h3)},a0=function(e,n){return ra(Fl(Z.fromDom(n.container()),e),Fc)},wh=function(e,n,a){return Pl(e,n.dom,a).forall(function(i){return a0(n,a).fold(function(){return Ls(i,a,n.dom)===!1},function(s){return Ls(i,a,n.dom)===!1&&os(s,Z.fromDom(i.container()))})})},Ch=function(e,n,a){return a0(n,a).fold(function(){return Pl(e,n.dom,a).forall(function(i){return Ls(i,a,n.dom)===!1})},function(i){return Pl(e,i.dom,a).isNone()})},Xm=At(Ch,!1),v2=At(Ch,!0),w3=At(wh,!1),C3=At(wh,!0),nr=function(e){return p1(e).exists(vs)},df=function(e,n,a){var i=dn(Fl(Z.fromDom(a.container()),n),Fc),s=Ca(i).getOr(n);return wc(e,s.dom,a).filter(nr)},lr=function(e,n){return p1(n).exists(vs)||df(!0,e,n).isSome()},o0=function(e,n){return TE(n).exists(vs)||df(!1,e,n).isSome()},S3=At(df,!1),x3=At(df,!0),PS=function(e){return Ge.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd()},NS=function(e,n){var a=dn(Fl(Z.fromDom(n.container()),e),Fc);return Ca(a).getOr(e)},IS=function(e,n){return PS(n)?l2(n):l2(n)||Vs(NS(e,n).dom,n).exists(l2)},$S=function(e,n){return PS(n)?r0(n):r0(n)||Hs(NS(e,n).dom,n).exists(r0)},T3=function(e){return rt(["pre","pre-wrap"],e)},Qn=function(e){return p1(e).bind(function(n){return Eg(n,Ft)}).exists(function(n){return T3(Cr(n,"white-space"))})},E3=function(e,n){return Vs(e.dom,n).isNone()},zS=function(e,n){return Hs(e.dom,n).isNone()},LS=function(e,n){return E3(e,n)||zS(e,n)||Xm(e,n)||v2(e,n)||o0(e,n)||lr(e,n)},i0=function(e,n){return Qn(n)?!1:LS(e,n)||IS(e,n)||$S(e,n)},Sh=function(e,n){return Qn(n)?!1:Xm(e,n)||w3(e,n)||o0(e,n)||IS(e,n)},HS=function(e){var n=e.container(),a=e.offset();return gn(n)&&a<n.data.length?Ge(n,a+1):e},Ym=function(e,n){return Qn(n)?!1:v2(e,n)||C3(e,n)||lr(e,n)||$S(e,n)},VS=function(e,n){return Sh(e,n)||Ym(e,HS(n))},d2=function(e,n){return gd(e.charAt(n))},k3=function(e){var n=e.container();return gn(n)&&Le(n.data,Ci)},A3=function(e){var n=e.split("");return kn(n,function(a,i){return gd(a)&&i>0&&i<n.length-1&&eh(n[i-1])&&eh(n[i+1])?" ":a}).join("")},O3=function(e,n){var a=n.data,i=Ge(n,0);return d2(a,0)&&!VS(e,i)?(n.data=" "+a.slice(1),!0):!1},u=function(e){var n=e.data,a=A3(n);return a!==n?(e.data=a,!0):!1},l=function(e,n){var a=n.data,i=Ge(n,a.length-1);return d2(a,a.length-1)&&!VS(e,i)?(n.data=a.slice(0,-1)+" ",!0):!1},d=function(e,n){return te.some(n).filter(k3).bind(function(a){var i=a.container(),s=O3(e,i)||u(i)||l(e,i);return s?te.some(a):te.none()})},h=function(e){var n=Z.fromDom(e.getBody());e.selection.isCollapsed()&&d(n,Ge.fromRangeStart(e.selection.getRng())).each(function(a){e.selection.setRng(a.toRange())})},y=function(e,n,a){var i=Ur(e,function(s,f){return of(f)||gd(f)?s.previousCharIsSpace||s.str===""&&n||s.str.length===e.length-1&&a?{previousCharIsSpace:!1,str:s.str+Ci}:{previousCharIsSpace:!0,str:s.str+" "}:{previousCharIsSpace:!1,str:s.str+f}},{previousCharIsSpace:!1,str:""});return i.str},x=function(e,n,a){if(a!==0){var i=Z.fromDom(e),s=qf(i,Fc).getOr(i),f=e.data.slice(n,n+a),g=n+a>=e.data.length&&Ym(s,Ge(e,e.data.length)),b=n===0&&Sh(s,Ge(e,0));e.replaceData(n,a,y(f,b,g))}},A=function(e,n){var a=e.data.slice(n),i=a.length-Rn(a).length;x(e,n,i)},P=function(e,n){var a=e.data.slice(0,n),i=a.length-Yn(a).length;x(e,n-i,i)},V=function(e,n,a,i){i===void 0&&(i=!0);var s=Yn(e.data).length,f=i?e:n,g=i?n:e;return i?f.appendData(g.data):f.insertData(0,g.data),_o(Z.fromDom(g)),a&&A(f,s),f},Q=function(e,n){var a=e.container(),i=e.offset();return Ge.isTextPosition(e)===!1&&a===n.parentNode&&i>Ge.before(n).offset()},pe=function(e,n){return Q(n,e)?Ge(n.container(),n.offset()-1):n},Xe=function(e){return gn(e)?Ge(e,0):Ge.before(e)},ht=function(e){return gn(e)?Ge(e,e.data.length):Ge.after(e)},tt=function(e){return ll(e.previousSibling)?te.some(ht(e.previousSibling)):e.previousSibling?Us(e.previousSibling):te.none()},Ye=function(e){return ll(e.nextSibling)?te.some(Xe(e.nextSibling)):e.nextSibling?Pu(e.nextSibling):te.none()},qt=function(e,n){var a=Ge.before(n.previousSibling?n.previousSibling:n.parentNode);return Vs(e,a).fold(function(){return Hs(e,Ge.after(n))},te.some)},Wt=function(e,n){return Hs(e,Ge.after(n)).fold(function(){return Vs(e,Ge.before(n))},te.some)},rr=function(e,n){return tt(n).orThunk(function(){return Ye(n)}).orThunk(function(){return qt(e,n)})},oa=function(e,n){return Ye(n).orThunk(function(){return tt(n)}).orThunk(function(){return Wt(e,n)})},Fn=function(e,n,a){return e?oa(n,a):rr(n,a)},er=function(e,n,a){return Fn(e,n,a).map(At(pe,a))},_r=function(e,n,a){a.fold(function(){e.focus()},function(i){e.selection.setRng(i.toRange(),n)})},Ir=function(e){return function(n){return n.dom===e}},Oi=function(e,n){return n&&cr(e.schema.getBlockElements(),yo(n))},gu=function(e){if(Zu(e)){var n=Z.fromHtml('<br data-mce-bogus="1">');return Yl(e),bi(e,n),te.some(Ge.before(n.dom))}else return te.none()},rc=function(e,n,a){var i=qu(e).filter(lc),s=Ya(e).filter(lc);return _o(e),K0(i,s,n,function(f,g,b){var C=f.dom,k=g.dom,_=C.data.length;return V(C,k,a),b.container()===k?Ge(C,_):b}).orThunk(function(){return a&&(i.each(function(f){return P(f.dom,f.dom.length)}),s.each(function(f){return A(f.dom,0)})),n})},jr=function(e,n){return cr(e.schema.getTextInlineElements(),yo(n))},Gn=function(e,n,a,i){i===void 0&&(i=!0);var s=er(n,e.getBody(),a.dom),f=qf(a,At(Oi,e),Ir(e.getBody())),g=rc(a,s,jr(e,a));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):f.bind(gu).fold(function(){i&&_r(e,n,g)},function(b){i&&_r(e,n,te.some(b))})},Mr=function(e){return function(n){return va(e,n)}},ka=function(e){return $u(e,"td,th")},fo=function(e,n){var a=function(k){return dv(Z.fromDom(k),n)},i=a(e.startContainer),s=a(e.endContainer),f=i.isSome(),g=s.isSome(),b=xu(i,s,va).getOr(!1),C=!b&&f&&g;return{startTable:i,endTable:s,isStartInTable:f,isEndInTable:g,isSameTable:b,isMultiTable:C}},hu=function(e,n){return{start:e,end:n}},qs=function(e,n,a){return{rng:e,table:n,cells:a}},Gs=il.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),Di=function(e,n){return Lv(Z.fromDom(e),"td,th",n)},u0=function(e){return!va(e.start,e.end)},Bd=function(e,n){return dv(e.start,n).bind(function(a){return dv(e.end,n).bind(function(i){return Cg(va(a,i),a)})})},Nl=function(e,n){return!u0(e)&&Bd(e,n).exists(function(a){var i=a.dom.rows;return i.length===1&&i[0].cells.length===1})},Ks=function(e,n){var a=Di(e.startContainer,n),i=Di(e.endContainer,n);return xu(a,i,hu)},mf=function(e){return function(n){return dv(n,e).bind(function(a){return Yo(ka(a)).map(function(i){return hu(n,i)})})}},D3=function(e){return function(n){return dv(n,e).bind(function(a){return Ca(ka(a)).map(function(i){return hu(i,n)})})}},xh=function(e){return function(n){return Bd(n,e).map(function(a){return qs(n,a,ka(a))})}},US=function(e,n,a,i){if(a.collapsed||!e.forall(u0))return te.none();if(n.isSameTable){var s=e.bind(xh(i));return te.some({start:s,end:s})}else{var f=Di(a.startContainer,i),g=Di(a.endContainer,i),b=f.bind(mf(i)).bind(xh(i)),C=g.bind(D3(i)).bind(xh(i));return te.some({start:b,end:C})}},Cv=function(e,n){return Po(e,function(a){return va(a,n)})},m2=function(e){return xu(Cv(e.cells,e.rng.start),Cv(e.cells,e.rng.end),function(n,a){return e.cells.slice(n,a+1)})},R3=function(e,n,a){return e.exists(function(i){return Nl(i,a)&&gv(i.start,n)})},za=function(e,n){var a=n.startTable,i=n.endTable,s=e.cloneRange();return a.each(function(f){return s.setStartAfter(f.dom)}),i.each(function(f){return s.setEndBefore(f.dom)}),s},Sv=function(e,n,a,i){return US(e,n,a,i).bind(function(s){var f=s.start,g=s.end;return f.or(g)}).bind(function(s){var f=n.isSameTable,g=m2(s).getOr([]);if(f&&s.cells.length===g.length)return te.some(Gs.fullTable(s.table));if(g.length>0){if(f)return te.some(Gs.partialTable(g,te.none()));var b=za(a,n);return te.some(Gs.partialTable(g,te.some(pn(pn({},n),{rng:b}))))}else return te.none()})},_d=function(e,n,a,i){return US(e,n,a,i).bind(function(s){var f=s.start,g=s.end,b=f.bind(m2).getOr([]),C=g.bind(m2).getOr([]);if(b.length>0&&C.length>0){var k=za(a,n);return te.some(Gs.multiTable(b,C,k))}else return te.none()})},lA=function(e,n){var a=Mr(e),i=Ks(n,a),s=fo(n,a);return R3(i,n,a)?i.map(function(f){return Gs.singleCellTable(n,f.start)}):s.isMultiTable?_d(i,s,n,a):Sv(i,s,n,a)},WS=function(e){var n=Yh(e)?qu(e):Es(e);return n.bind(WS).orThunk(function(){return te.some(e)})},jS=function(e){return Ze(e,function(n){St(n,"contenteditable"),Rd(n)})},B3=function(e,n){return te.from(e.dom.getParent(n,e.dom.isBlock)).map(Z.fromDom)},fA=function(e,n,a){a.each(function(i){n?_o(i):(Rd(i),e.selection.setCursorLocation(i.dom,0))})},g2=function(e,n){var a=uf(e);e.selection.setCursorLocation(n.dom,0),a.length>1&&E(n,"data-mce-selected","1")},h2=function(e,n,a){return jS(n),a.map(function(i){var s=i.rng,f=i.isStartInTable,g=B3(e,f?s.endContainer:s.startContainer);s.deleteContents(),fA(e,f,g.filter(Zu))}),a.forall(function(i){return i.isStartInTable})?g2(e,n[0]):e.selection.collapse(!0),!0},p2=function(e,n,a,i){return jS(n.concat(a)),i.deleteContents(),g2(e,n[0]),!0},c0=function(e,n,a){n.deleteContents();var i=WS(a).getOr(a),s=Z.fromDom(e.dom.getParent(i.dom,e.dom.isBlock));if(Zu(s)&&(Rd(s),e.selection.setCursorLocation(s.dom,0)),!va(a,s)){var f=ss(_a(s),a)?[]:tl(s);Ze(f.concat(Su(a)),function(g){!va(g,s)&&!os(g,s)&&_o(g)})}return!0},gf=function(e,n){return Gn(e,!1,n),!0},s0=function(e,n,a){return lA(n,a).map(function(i){return i.fold(At(c0,e),At(gf,e),At(h2,e),At(p2,e))})},vA=function(e,n){return Il(e,n)},dA=function(e,n,a,i){return M3(n,i).fold(function(){return s0(e,n,a)},function(s){return vA(e,s)}).getOr(!1)},DB=function(e,n,a){var i=Z.fromDom(e.getBody()),s=e.selection.getRng();return a.length!==0?h2(e,a,te.none()):dA(e,i,s,n)},_3=function(e,n){return ra(Fl(n,e),Nc)},M3=function(e,n){return ra(Fl(n,e),Gl("caption"))},RB=function(e,n,a,i,s){return Al(a,e.getBody(),s).bind(function(f){return _3(n,Z.fromDom(f.getNode())).map(function(g){return va(g,i)===!1})})},Il=function(e,n){return Rd(n),e.selection.setCursorLocation(n.dom,0),te.some(!0)},BB=function(e,n,a,i){return Pu(e.dom).bind(function(s){return Us(e.dom).map(function(f){return n?a.isEqual(s)&&i.isEqual(f):a.isEqual(f)&&i.isEqual(s)})}).getOr(!0)},ac=function(e,n){return Il(e,n)},ea=function(e,n,a){return M3(e,Z.fromDom(a.getNode())).map(function(i){return va(i,n)===!1})},hf=function(e,n,a,i,s){return Al(a,e.getBody(),s).bind(function(f){return BB(i,a,s,f)?ac(e,i):ea(n,i,f)}).or(te.some(!0))},_B=function(e,n,a,i){var s=Ge.fromRangeStart(e.selection.getRng());return _3(a,i).bind(function(f){return Zu(f)?Il(e,f):RB(e,a,n,f,s)}).getOr(!1)},mA=function(e,n,a,i){var s=Ge.fromRangeStart(e.selection.getRng());return Zu(i)?Il(e,i):hf(e,a,n,i,s)},qS=function(e,n){return e?RS(n):BS(n)},F3=function(e,n){var a=Ge.fromRangeStart(e.selection.getRng());return qS(n,a)||wc(n,e.getBody(),a).exists(function(i){return qS(n,i)})},gA=function(e,n,a){var i=Z.fromDom(e.getBody());return M3(i,a).fold(function(){return _B(e,n,i,a)||F3(e,n)},function(s){return mA(e,n,i,s).getOr(!1)})},b2=function(e,n){var a=Z.fromDom(e.selection.getStart(!0)),i=uf(e);return e.selection.isCollapsed()&&i.length===0?gA(e,n,a):DB(e,a,i)},MB=function(e,n,a,i){var s=document.createRange();return s.setStart(e,n),s.setEnd(a,i),s},FB=function(e){var n=Ge.fromRangeStart(e),a=Ge.fromRangeEnd(e),i=e.commonAncestorContainer;return wc(!1,i,a).map(function(s){return!Ls(n,a,i)&&Ls(n,s,i)?MB(n.container(),n.offset(),s.container(),s.offset()):e}).getOr(e)},y2=function(e){return e.collapsed?e:FB(e)},hA=function(e){return e.firstChild&&e.firstChild===e.lastChild},pf=function(e){return e.name==="br"||e.value===Ci},PB=function(e,n){var a=e.getBlockElements();return a[n.name]&&hA(n)&&pf(n.firstChild)},NB=function(e,n){var a=e.getNonEmptyElements();return n&&(n.isEmpty(a)||PB(e,n))},IB=function(e,n){var a=n.firstChild,i=n.lastChild;return a&&a.name==="meta"&&(a=a.next),i&&i.attr("id")==="mce_marker"&&(i=i.prev),NB(e,i)&&(i=i.prev),!a||a!==i?!1:a.name==="ul"||a.name==="ol"},P3=function(e){var n=e.firstChild,a=e.lastChild;return n&&n.nodeName==="META"&&n.parentNode.removeChild(n),a&&a.id==="mce_marker"&&a.parentNode.removeChild(a),e},$B=function(e,n,a){var i=n.serialize(a),s=e.createFragment(i);return P3(s)},zB=function(e){return dn(e.childNodes,function(n){return n.nodeName==="LI"})},N3=function(e){return e.data===Ci||Ho(e)},LB=function(e){return e&&e.firstChild&&e.firstChild===e.lastChild&&N3(e.firstChild)},HB=function(e){return!e.firstChild||LB(e)},pA=function(e){return e.length>0&&HB(e[e.length-1])?e.slice(0,-1):e},I3=function(e,n){var a=e.getParent(n,e.isBlock);return a&&a.nodeName==="LI"?a:null},VB=function(e,n){return!!I3(e,n)},GS=function(e,n){var a=n.cloneRange(),i=n.cloneRange();return a.setStartBefore(e),i.setEndAfter(e),[a.cloneContents(),i.cloneContents()]},UB=function(e,n){var a=Ge.before(e),i=lo(n),s=i.next(a);return s?s.toRange():null},$3=function(e,n){var a=Ge.after(e),i=lo(n),s=i.prev(a);return s?s.toRange():null},bA=function(e,n,a,i){var s=GS(e,i),f=e.parentNode;return f.insertBefore(s[0],e),Je.each(n,function(g){f.insertBefore(g,e)}),f.insertBefore(s[1],e),f.removeChild(e),$3(n[n.length-1],a)},z3=function(e,n,a){var i=e.parentNode;return Je.each(n,function(s){i.insertBefore(s,e)}),UB(e,a)},WB=function(e,n,a,i){return i.insertAfter(n.reverse(),e),$3(n[0],a)},jB=function(e,n,a,i){var s=$B(n,e,i),f=I3(n,a.startContainer),g=pA(zB(s.firstChild)),b=1,C=2,k=n.getRoot(),_=function(M){var F=Ge.fromRangeStart(a),U=lo(n.getRoot()),K=M===b?U.prev(F):U.next(F);return K?I3(n,K.getNode())!==f:!0};return _(b)?z3(f,g,k):_(C)?WB(f,g,k,n):bA(f,g,k,a)},L3=function(e,n,a){var i=Z.fromDom(e.getRoot());return Sh(i,Ge.fromRangeStart(n))?a=a.replace(/^ /,"&nbsp;"):a=a.replace(/^&nbsp;/," "),Ym(i,Ge.fromRangeEnd(n))?a=a.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):a=a.replace(/&nbsp;(<br( \/)?>)?$/," "),a},H3=wg,qB=function(e,n,a){if(a!==null){var i=e.getParent(n.endContainer,H3);return a===i&&gv(Z.fromDom(a),n)}else return!1},w2=function(e,n,a){if(a.getAttribute("data-mce-bogus")==="all")a.parentNode.insertBefore(e.dom.createFragment(n),a);else{var i=a.firstChild,s=a.lastChild;!i||i===s&&i.nodeName==="BR"?e.dom.setHTML(a,n):e.selection.setContent(n)}},V3=function(e,n){te.from(e.getParent(n,"td,th")).map(Z.fromDom).each(MS)},GB=function(e,n){var a=e.schema.getTextInlineElements(),i=e.dom;if(n){var s=e.getBody(),f=Kc(i);Je.each(i.select("*[data-mce-fragment]"),function(g){var b=pt(a[g.nodeName.toLowerCase()]);if(b&&m3(i,g))for(var C=g.parentNode;pt(C)&&C!==s;C=C.parentNode){var k=g3(i,g,C);if(k)break;if(f.compare(C,g)){i.remove(g,!0);break}}})}},KB=function(e){for(var n=e;n=n.walk();)n.type===1&&n.attr("data-mce-fragment","1")},yA=function(e){Je.each(e.getElementsByTagName("*"),function(n){n.removeAttribute("data-mce-fragment")})},wA=function(e){return!!e.getAttribute("data-mce-fragment")},XB=function(e,n){return n&&!e.schema.getShortEndedElements()[n.nodeName]},YB=function(e,n){var a,i=e.dom,s=e.selection,f=function(F){for(var U=e.getBody();F&&F!==U;F=F.parentNode)if(i.getContentEditable(F)==="false")return F;return null};if(!!n){s.scrollIntoView(n);var g=f(n);if(g){i.remove(n),s.select(g);return}var b=i.createRng(),C=n.previousSibling;if(gn(C)){if(b.setStart(C,C.nodeValue.length),!Ln.ie){var k=n.nextSibling;gn(k)&&(C.appendData(k.data),k.parentNode.removeChild(k))}}else b.setStartBefore(n),b.setEndBefore(n);var _=function(F){var U=Ge.fromRangeStart(F),K=lo(e.getBody());if(U=K.next(U),U)return U.toRange()},M=i.getParent(n,i.isBlock);i.remove(n),M&&i.isEmpty(M)&&(e.$(M).empty(),b.setStart(M,0),b.setEnd(M,0),!H3(M)&&!wA(M)&&(a=_(b))?(b=a,i.remove(M)):i.add(M,i.create("br",{"data-mce-bogus":"1"}))),s.setRng(b)}},JB=function(e){var n=e.dom,a=y2(e.selection.getRng());e.selection.setRng(a);var i=n.getParent(a.startContainer,H3);qB(n,a,i)?c0(e,a,Z.fromDom(i)):e.getDoc().execCommand("Delete",!1,null)},ZB=function(e,n,a){var i,s,f,g=e.selection,b=e.dom;/^ | $/.test(n)&&(n=L3(b,g.getRng(),n));var C=e.parser,k=a.merge,_=Gm({validate:xm(e)},e.schema),M='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>',F=e.fire("BeforeSetContent",{content:n,format:"html",selection:!0,paste:a.paste});if(F.isDefaultPrevented()){e.fire("SetContent",{content:F.content,format:"html",selection:!0,paste:a.paste});return}n=F.content,n.indexOf("{$caret}")===-1&&(n+="{$caret}"),n=n.replace(/\{\$caret\}/,M),s=g.getRng();var U=s.startContainer||(s.parentElement?s.parentElement():null),K=e.getBody();U===K&&g.isCollapsed()&&b.isBlock(K.firstChild)&&XB(e,K.firstChild)&&b.isEmpty(K.firstChild)&&(s=b.createRng(),s.setStart(K.firstChild,0),s.setEnd(K.firstChild,0),g.setRng(s)),g.isCollapsed()||JB(e),i=g.getNode();var j={context:i.nodeName.toLowerCase(),data:a.data,insert:!0},J=C.parse(n,j);if(a.paste===!0&&IB(e.schema,J)&&VB(b,i)){s=jB(_,b,g.getRng(),J),g.setRng(s),e.fire("SetContent",F);return}if(KB(J),f=J.lastChild,f.attr("id")==="mce_marker"){var fe=f;for(f=f.prev;f;f=f.walk(!0))if(f.type===3||!b.isBlock(f.name)){e.schema.isValidChild(f.parent.name,"span")&&f.parent.insert(fe,f,f.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(i),!j.invalid)n=_.serialize(J),w2(e,n,i);else{e.selection.setContent(M),i=g.getNode();var ve=e.getBody();for(i.nodeType===9?i=f=ve:f=i;f!==ve;)i=f,f=f.parentNode;n=i===ve?ve.innerHTML:b.getOuterHTML(i),n=_.serialize(C.parse(n.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return _.serialize(J)}))),i===ve?b.setHTML(ve,n):b.setOuterHTML(i,n)}GB(e,k),YB(e,b.get("mce_marker")),yA(e.getBody()),V3(b,g.getStart()),e.fire("SetContent",F),e.addVisual()},KS=function(e,n){n(e),e.firstChild&&KS(e.firstChild,n),e.next&&KS(e.next,n)},CA=function(e,n,a){var i={},s={},f=[];a.firstChild&&KS(a.firstChild,function(C){Ze(e,function(k){k.name===C.name&&(i[k.name]?i[k.name].nodes.push(C):i[k.name]={filter:k,nodes:[C]})}),Ze(n,function(k){typeof C.attr(k.name)=="string"&&(s[k.name]?s[k.name].nodes.push(C):s[k.name]={filter:k,nodes:[C]})})});for(var g in i)cr(i,g)&&f.push(i[g]);for(var b in s)cr(s,b)&&f.push(s[b]);return f},QB=function(e,n,a){var i=CA(e,n,a);Ze(i,function(s){Ze(s.filter.callbacks,function(f){f(s.nodes,s.filter.name,{})})})},e_="html",U3=function(e){return e instanceof Gc},t_=function(e){Ml(e)&&Pu(e.getBody()).each(function(n){var a=n.getNode(),i=dc(a)?Pu(a).getOr(n):n;e.selection.setRng(i.toRange())})},W3=function(e,n,a){e.dom.setHTML(e.getBody(),n),a!==!0&&t_(e)},n_=function(e,n,a,i){if(a.length===0||/^\s+$/.test(a)){var s='<br data-mce-bogus="1">';n.nodeName==="TABLE"?a="<tr><td>"+s+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(a="<li>"+s+"</li>");var f=iu(e);f&&e.schema.isValidChild(n.nodeName.toLowerCase(),f.toLowerCase())?(a=s,a=e.dom.createHTML(f,Kg(e),a)):a||(a='<br data-mce-bogus="1">'),W3(e,a,i.no_selection),e.fire("SetContent",i)}else i.format!=="raw"&&(a=Gm({validate:e.validate},e.schema).serialize(e.parser.parse(a,{isRootContent:!0,insert:!0}))),i.content=kg(Z.fromDom(n))?a:Je.trim(a),W3(e,i.content,i.no_selection),i.no_events||e.fire("SetContent",i);return i.content},C2=function(e,n,a,i){QB(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),a);var s=Gm({validate:e.validate},e.schema).serialize(a);return i.content=kg(Z.fromDom(n))?s:Je.trim(s),W3(e,i.content,i.no_selection),i.no_events||e.fire("SetContent",i),a},r_=function(e,n){return pn(pn({format:e_},e),{set:!0,content:U3(n)?"":n})},SA=function(e,n,a){var i=r_(a,n),s=a.no_events?i:e.fire("BeforeSetContent",i);return U3(n)||(n=s.content),te.from(e.getBody()).fold(Y(n),function(f){return U3(n)?C2(e,f,n,s):n_(e,f,n,s)})},j3=function(e,n){return kT(e,n).isSome()},xA=function(e){return bt(e)?e:_t},TA=function(e,n,a){for(var i=e.dom,s=xA(a);i.parentNode;){i=i.parentNode;var f=Z.fromDom(i),g=n(f);if(g.isSome())return g;if(s(f))break}return te.none()},XS=function(e,n,a){var i=n(e),s=xA(a);return i.orThunk(function(){return s(e)?te.none():TA(e,n,s)})},q3=A1,EA=function(e,n,a){var i=e.formatter.get(a);if(i)for(var s=0;s<i.length;s++){var f=i[s];if(Cc(f)&&f.inherit===!1&&e.dom.is(n,f.selector))return!0}return!1},G3=function(e,n,a,i,s){var f=e.dom.getRoot();return n===f?!1:(n=e.dom.getParent(n,function(g){return EA(e,g,a)?!0:g.parentNode===f||!!xv(e,g,a,i,!0)}),!!xv(e,n,a,i,s))},kA=function(e,n,a){if(q3(n,a.inline)||q3(n,a.block))return!0;if(a.selector)return n.nodeType===1&&e.is(n,a.selector)},AA=function(e,n,a,i,s,f){var g=a[i];if(bt(a.onmatch))return a.onmatch(n,a,i);if(g){if(qe(g.length)){for(var b in g)if(cr(g,b)){var C=i==="attributes"?e.getAttrib(n,b):hd(e,n,b),k=Dl(g[b],f),_=gt(C)||Wr(C);if(_&&gt(k))continue;if(s&&_&&!a.exact||(!s||a.exact)&&!q3(C,_m(e,k,b)))return!1}}else for(var M=0;M<g.length;M++)if(i==="attributes"?e.getAttrib(n,g[M]):hd(e,n,g[M]))return!0}return!0},xv=function(e,n,a,i,s){var f=e.formatter.get(a),g=e.dom;if(f&&n)for(var b=0;b<f.length;b++){var C=f[b];if(kA(e.dom,n,C)&&AA(g,n,C,"attributes",s,i)&&AA(g,n,C,"styles",s,i)){var k=C.classes;if(k){for(var _=0;_<k.length;_++)if(!e.dom.hasClass(n,Dl(k[_],i)))return}return C}}},K3=function(e,n,a,i,s){if(i)return G3(e,i,n,a,s);if(i=e.selection.getNode(),G3(e,i,n,a,s))return!0;var f=e.selection.getStart();return!!(f!==i&&G3(e,f,n,a,s))},a_=function(e,n,a){var i=[],s={},f=e.selection.getStart();return e.dom.getParent(f,function(g){for(var b=0;b<n.length;b++){var C=n[b];!s[C]&&xv(e,g,C,a)&&(s[C]=!0,i.push(C))}},e.dom.getRoot()),i},o_=function(e,n){var a=function(s){return va(s,Z.fromDom(e.getBody()))},i=function(s,f){return xv(e,s.dom,f)?te.some(f):te.none()};return te.from(e.selection.getStart(!0)).bind(function(s){return XS(Z.fromDom(s),function(f){return Yr(n,function(g){return i(f,g)})},a)}).getOrNull()},i_=function(e,n){var a=e.formatter.get(n),i=e.dom;if(a)for(var s=e.selection.getStart(),f=Mm(i,s),g=a.length-1;g>=0;g--){var b=a[g];if(!Cc(b)||pt(b.defaultBlock))return!0;for(var C=f.length-1;C>=0;C--)if(i.is(f[C],b.selector))return!0}return!1},u_=function(e,n,a){return Ur(a,function(i,s){var f=ME(e,s);return e.formatter.matchNode(n,s,{},f)?i.concat([s]):i},[])},Jm=Wa,$l="_mce_caret",X3=function(e,n){return e.importNode(n,!0)},Y3=function(e){for(var n=[];e;){if(e.nodeType===3&&e.nodeValue!==Jm||e.childNodes.length>1)return[];e.nodeType===1&&n.push(e),e=e.firstChild}return n},YS=function(e){return Y3(e).length>0},OA=function(e){if(e){var n=new wi(e,e);for(e=n.current();e;e=n.next())if(gn(e))return e}return null},JS=function(e){var n=Z.fromTag("span");return I(n,{id:$l,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&bi(n,Z.fromText(Jm)),n},c_=function(e){var n=OA(e);return n&&n.nodeValue.charAt(0)===Jm&&n.deleteData(0,1),n},ZS=function(e,n,a){a===void 0&&(a=!0);var i=e.dom,s=e.selection;if(YS(n))Gn(e,!1,Z.fromDom(n),a);else{var f=s.getRng(),g=i.getParent(n,i.isBlock),b=f.startContainer,C=f.startOffset,k=f.endContainer,_=f.endOffset,M=c_(n);i.remove(n,!0),b===M&&C>0&&f.setStart(M,C-1),k===M&&_>0&&f.setEnd(M,_-1),g&&i.isEmpty(g)&&Rd(Z.fromDom(g)),s.setRng(f)}},S2=function(e,n,a){a===void 0&&(a=!0);var i=e.dom,s=e.selection;if(n)ZS(e,n,a);else if(n=dd(e.getBody(),s.getStart()),!n)for(;n=i.get($l);)ZS(e,n,!1)},s_=function(e,n,a){var i=e.dom,s=i.getParent(a,At(E1,e));s&&i.isEmpty(s)?a.parentNode.replaceChild(n,a):(b3(Z.fromDom(a)),i.isEmpty(a)?a.parentNode.replaceChild(n,a):i.insertAfter(n,a))},J3=function(e,n){return e.appendChild(n),n},DA=function(e,n){var a=qr(e,function(i,s){return J3(i,s.cloneNode(!1))},n);return J3(a,a.ownerDocument.createTextNode(Jm))},x2=function(e,n,a,i,s,f){var g=e.formatter,b=e.dom,C=dn(mo(g.get()),function(F){return F!==i&&!Le(F,"removeformat")}),k=u_(e,a,C),_=dn(k,function(F){return!Cy(e,F,i)});if(_.length>0){var M=a.cloneNode(!1);return b.add(n,M),g.remove(i,s,M,f),b.remove(M),te.some(M)}else return te.none()},RA=function(e,n,a){var i,s,f=e.selection,g=f.getRng(),b=g.startOffset,C=g.startContainer,k=C.nodeValue;i=dd(e.getBody(),f.getStart()),i&&(s=OA(i));var _=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(k&&b>0&&b<k.length&&_.test(k.charAt(b))&&_.test(k.charAt(b-1))){var M=f.getBookmark();g.collapse(!0);var F=Wc(e,g,e.formatter.get(n));F=z1(F),e.formatter.apply(n,a,F),f.moveToBookmark(M)}else(!i||s.nodeValue!==Jm)&&(i=X3(e.getDoc(),JS(!0).dom),s=i.firstChild,g.insertNode(i),b=1),e.formatter.apply(n,a,i),f.setCursorLocation(s,b)},l_=function(e,n,a,i){var s=e.dom,f=e.selection,g,b,C,k=[],_=f.getRng(),M=_.startContainer,F=_.startOffset;for(b=M,M.nodeType===3&&(F!==M.nodeValue.length&&(g=!0),b=b.parentNode);b;){if(xv(e,b,n,a,i)){C=b;break}b.nextSibling&&(g=!0),k.push(b),b=b.parentNode}if(!!C)if(g){var U=f.getBookmark();_.collapse(!0);var K=Wc(e,_,e.formatter.get(n),!0);K=z1(K),e.formatter.remove(n,a,K,i),f.moveToBookmark(U)}else{var j=dd(e.getBody(),C),J=JS(!1).dom;s_(e,J,j!==null?j:C);var fe=x2(e,J,C,n,a,i),ve=DA(k.concat(fe.toArray()),J);ZS(e,j,!1),f.setCursorLocation(ve,1),s.isEmpty(C)&&s.remove(C)}},BA=function(e,n){var a=e.selection,i=e.getBody();S2(e,null,!1),(n===8||n===46)&&a.isCollapsed()&&a.getStart().innerHTML===Jm&&S2(e,dd(i,a.getStart())),(n===37||n===39)&&S2(e,dd(i,a.getStart()))},f_=function(e){e.on("mouseup keydown",function(n){BA(e,n.keyCode)})},v_=function(e,n){var a=JS(!1),i=DA(n,a.dom);return pi(Z.fromDom(e),a),_o(Z.fromDom(e)),Ge(i,0)},d_=function(e,n){var a=e.schema.getTextInlineElements();return cr(a,yo(n))&&!Ol(n.dom)&&!_c(n.dom)},m_=function(e){return Ol(e.dom)&&YS(e.dom)},QS={},Z3=To,_A=Gr,Q3=function(e,n){var a=QS[e];a||(QS[e]=[]),QS[e].push(n)},l0=function(e,n){_A(QS[e],function(a){a(n)})};Q3("pre",function(e){var n=e.selection.getRng(),a,i=function(g){return f(g.previousSibling)&&zo(a,g.previousSibling)!==-1},s=function(g,b){vr(b).remove(),vr(g).append("<br><br>").append(b.childNodes)},f=so(["pre"]);n.collapsed||(a=e.selection.getSelectedBlocks(),_A(Z3(Z3(a,f),i),function(g){s(g.previousSibling,g)}))});var e4=Je.each,t4=function(e){return Mn(e)&&!nc(e)&&!Ol(e)&&!_c(e)},T2=function(e,n){for(var a=e;a;a=a[n]){if(gn(a)&&sr(a.data))return e;if(Mn(a)&&!nc(a))return a}return e},ex=function(e,n,a){var i=Kc(e);if(n&&a&&(n=T2(n,"previousSibling"),a=T2(a,"nextSibling"),i.compare(n,a))){for(var s=n.nextSibling;s&&s!==a;){var f=s;s=s.nextSibling,n.appendChild(f)}return e.remove(a),Je.each(Je.grep(a.childNodes),function(g){n.appendChild(g)}),n}return a},MA=function(e,n,a,i){if(i&&n.merge_siblings!==!1){var s=ex(e,wy(i),i);ex(e,s,wy(s,!0))}},g_=function(e,n,a){if(n.clear_child_styles){var i=n.links?"*:not(a)":"*";e4(e.select(i,a),function(s){t4(s)&&e4(n.styles,function(f,g){e.setStyle(s,g,"")})})}},tx=function(e,n,a){e4(e.childNodes,function(i){t4(i)&&(n(i)&&a(i),i.hasChildNodes()&&tx(i,n,a))})},n4=function(e,n){n.nodeName==="SPAN"&&e.getAttribs(n).length===0&&e.remove(n,!0)},FA=function(e,n){return function(a){return!!(a&&hd(e,a,n))}},E2=function(e,n,a){return function(i){e.setStyle(i,n,a),i.getAttribute("style")===""&&i.removeAttribute("style"),n4(e,i)}},Xs=il.generate([{keep:[]},{rename:["name"]},{removed:[]}]),h_=/^(src|href|style)$/,k2=Je.each,f0=A1,p_=function(e){return/^(TR|TH|TD)$/.test(e.nodeName)},PA=function(e,n,a){return e.isChildOf(n,a)&&n!==a&&!e.isBlock(a)},NA=function(e,n,a){var i=n[a?"startContainer":"endContainer"],s=n[a?"startOffset":"endOffset"];if(Mn(i)){var f=i.childNodes.length-1;!a&&s&&s--,i=i.childNodes[s>f?f:s]}return gn(i)&&a&&s>=i.nodeValue.length&&(i=new wi(i,e.getBody()).next()||i),gn(i)&&!a&&s===0&&(i=new wi(i,e.getBody()).prev()||i),i},r4=function(e,n){var a=n?"firstChild":"lastChild";if(p_(e)&&e[a]){var i=e[a];return e.nodeName==="TR"&&i[a]||i}return e},a4=function(e,n,a,i){var s=e.create(a,i);return n.parentNode.insertBefore(s,n),s.appendChild(n),s},Th=function(e,n,a,i,s){var f=Z.fromDom(n),g=Z.fromDom(e.create(i,s)),b=a?jd(f):Wd(f);return Xl(g,b),a?(pi(f,g),vg(g,f)):(is(f,g),bi(g,f)),g.dom},b_=function(e,n,a){if(Xi(a)&&f0(n,a.inline)||Rl(a)&&f0(n,a.block))return!0;if(Cc(a))return Mn(n)&&e.is(n,a.selector)},y_=function(e,n){return n.links&&e.nodeName==="A"},nx=function(e,n,a,i){var s=wy(n,a,i);return gt(s)||s.nodeName==="BR"||e.isBlock(s)},w_=function(e,n,a){var i=n.parentNode,s,f=e.dom,g=iu(e);Rl(a)&&(g?i===f.getRoot()&&(!a.list_block||!f0(n,a.list_block))&&Ze(mn(n.childNodes),function(b){Bm(e,g,b.nodeName.toLowerCase())?s?s.appendChild(b):(s=a4(f,b,g),f.setAttribs(s,e.settings.forced_root_block_attrs)):s=null}):f.isBlock(n)&&!f.isBlock(i)&&(!nx(f,n,!1)&&!nx(f,n.firstChild,!0,!0)&&n.insertBefore(f.create("br"),n.firstChild),!nx(f,n,!0)&&!nx(f,n.lastChild,!1,!0)&&n.appendChild(f.create("br")))),!(FE(a)&&!f0(a.inline,n))&&f.remove(n,!0)},o4=function(e,n,a,i,s){var f,g=e.dom;if(!b_(g,i,n)&&!y_(i,n))return Xs.keep();var b=i;if(Xi(n)&&n.remove==="all"&&Un(n.preserve_attributes)){var C=dn(g.getAttribs(b),function(F){return rt(n.preserve_attributes,F.name.toLowerCase())});if(g.removeAllAttribs(b),Ze(C,function(F){return g.setAttrib(b,F.name,F.value)}),C.length>0)return Xs.rename("span")}if(n.remove!=="all"){k2(n.styles,function(F,U){F=_m(g,Dl(F,a),U+""),rn(U)&&(U=F,s=null),(n.remove_similar||!s||f0(hd(g,s,U),F))&&g.setStyle(b,U,""),f=!0}),f&&g.getAttrib(b,"style")===""&&(b.removeAttribute("style"),b.removeAttribute("data-mce-style")),k2(n.attributes,function(F,U){var K;if(F=Dl(F,a),rn(U)&&(U=F,s=null),n.remove_similar||!s||f0(g.getAttrib(s,U),F)){if(U==="class"&&(F=g.getAttrib(b,U),F&&(K="",Ze(F.split(/\s+/),function(j){/mce\-\w+/.test(j)&&(K+=(K?" ":"")+j)}),K))){g.setAttrib(b,U,K);return}if(h_.test(U)&&b.removeAttribute("data-mce-"+U),U==="style"&&so(["li"])(b)&&g.getStyle(b,"list-style-type")==="none"){b.removeAttribute(U),g.setStyle(b,"list-style-type","none");return}U==="class"&&b.removeAttribute("className"),b.removeAttribute(U)}}),k2(n.classes,function(F){F=Dl(F,a),(!s||g.hasClass(s,F))&&g.removeClass(b,F)});for(var k=g.getAttribs(b),_=0;_<k.length;_++){var M=k[_].nodeName;if(M.indexOf("_")!==0&&M.indexOf("data-")!==0)return Xs.keep()}}return n.remove!=="none"?(w_(e,b,n),Xs.removed()):Xs.keep()},v0=function(e,n,a,i,s){return o4(e,n,a,i,s).fold(_t,function(f){return e.dom.rename(i,f),!0},Kt)},C_=function(e,n,a,i,s){var f;return Ze(Mm(e.dom,n.parentNode).reverse(),function(g){if(!f&&g.id!=="_start"&&g.id!=="_end"){var b=xv(e,g,a,i,s);b&&b.split!==!1&&(f=g)}}),f},S_=function(e,n,a,i){return o4(e,n,a,i,i).fold(Y(i),function(s){var f=e.dom.createFragment();return f.appendChild(i),e.dom.rename(i,s)},Y(null))},x_=function(e,n,a,i,s,f,g,b){var C,k,_,M=e.dom;if(a){for(var F=a.parentNode,U=i.parentNode;U&&U!==F;U=U.parentNode){C=M.clone(U,!1);for(var K=0;K<n.length&&(C=S_(e,n[K],b,C),C!==null);K++);C&&(k&&C.appendChild(k),_||(_=C),k=C)}f&&(!g.mixed||!M.isBlock(a))&&(i=M.split(a,i)),k&&(s.parentNode.insertBefore(k,s),_.appendChild(s),Xi(g)&&MA(M,g,b,k))}return i},IA=function(e,n,a,i,s){var f=e.formatter.get(n),g=f[0],b=!0,C=e.dom,k=e.selection,_=function(ve){var ae=C_(e,ve,n,a,s);return x_(e,f,ae,ve,ve,!0,g,a)},M=function(ve){return nc(ve)&&Mn(ve)&&(ve.id==="_start"||ve.id==="_end")},F=function(ve){return an(f,function(ae){return v0(e,ae,a,ve,ve)})},U=function(ve){var ae=!0,de=!1;Mn(ve)&&C.getContentEditable(ve)&&(ae=b,b=C.getContentEditable(ve)==="true",de=!0);var Ee=mn(ve.childNodes);if(b&&!de){var Me=F(ve),Qe=ve.parentNode;!Me&&pt(Qe)&&Sy(g)&&F(Qe)}if(g.deep&&Ee.length){for(var Tt=0;Tt<Ee.length;Tt++)U(Ee[Tt]);de&&(b=ae)}var jn=["underline","line-through","overline"];Ze(jn,function(Yt){Mn(ve)&&e.dom.getStyle(ve,"text-decoration")===Yt&&ve.parentNode&&$C(C,ve.parentNode)===Yt&&v0(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:Yt}},null,ve)})},K=function(ve){var ae=C.get(ve?"_start":"_end"),de=ae[ve?"firstChild":"lastChild"];return M(de)&&(de=de[ve?"firstChild":"lastChild"]),gn(de)&&de.data.length===0&&(de=ve?ae.previousSibling||ae.nextSibling:ae.nextSibling||ae.previousSibling),C.remove(ae,!0),de},j=function(ve){var ae,de,Ee=Wc(e,ve,f,ve.collapsed);if(g.split){if(Ee=z1(Ee),ae=NA(e,Ee,!0),de=NA(e,Ee),ae!==de){if(ae=r4(ae,!0),de=r4(de,!1),PA(C,ae,de)){var Me=te.from(ae.firstChild).getOr(ae);_(Th(C,Me,!0,"span",{id:"_start","data-mce-type":"bookmark"})),K(!0);return}if(PA(C,de,ae)){var Me=te.from(de.lastChild).getOr(de);_(Th(C,Me,!1,"span",{id:"_end","data-mce-type":"bookmark"})),K(!1);return}ae=a4(C,ae,"span",{id:"_start","data-mce-type":"bookmark"}),de=a4(C,de,"span",{id:"_end","data-mce-type":"bookmark"});var Qe=C.createRng();Qe.setStartAfter(ae),Qe.setEndBefore(de),Bl(C,Qe,function(Tt){Ze(Tt,function(jn){!nc(jn)&&!nc(jn.parentNode)&&_(jn)})}),_(ae),_(de),ae=K(!0),de=K()}else ae=de=_(ae);Ee.startContainer=ae.parentNode?ae.parentNode:ae,Ee.startOffset=C.nodeIndex(ae),Ee.endContainer=de.parentNode?de.parentNode:de,Ee.endOffset=C.nodeIndex(de)+1}Bl(C,Ee,function(Tt){Ze(Tt,U)})};if(i){if(th(i)){var J=C.createRng();J.setStartBefore(i),J.setEndAfter(i),j(J)}else j(i);lh(e,n,i,a);return}if(C.getContentEditable(k.getNode())==="false"){i=k.getNode();for(var fe=0;fe<f.length&&!(f[fe].ceFalseOverride&&v0(e,f[fe],a,i,i));fe++);lh(e,n,i,a);return}!k.isCollapsed()||!Xi(g)||uf(e).length?(ky(k,!0,function(){ih(e,j)}),Xi(g)&&K3(e,n,a,k.getStart())&&IC(C,k,k.getRng()),e.nodeChanged()):l_(e,n,a,s),lh(e,n,i,a)},$A=Je.each,T_=function(e,n,a,i){var s=function(f){if(f.nodeType===1&&f.parentNode&&f.parentNode.nodeType===1){var g=$C(e,f.parentNode);e.getStyle(f,"color")&&g?e.setStyle(f,"text-decoration",g):e.getStyle(f,"text-decoration")===g&&e.setStyle(f,"text-decoration",null)}};n.styles&&(n.styles.color||n.styles.textDecoration)&&(Je.walk(i,s,"childNodes"),s(i))},E_=function(e,n,a,i){n.styles&&n.styles.backgroundColor&&tx(i,FA(e,"fontSize"),E2(e,"backgroundColor",Dl(n.styles.backgroundColor,a)))},k_=function(e,n,a,i){Xi(n)&&(n.inline==="sub"||n.inline==="sup")&&(tx(i,FA(e,"fontSize"),E2(e,"fontSize","")),e.remove(e.select(n.inline==="sup"?"sub":"sup",i),!0))},A_=function(e,n,a,i){$A(n,function(s){Xi(s)&&$A(e.dom.select(s.inline,i),function(f){!t4(f)||v0(e,s,a,f,s.exact?f:null)}),g_(e.dom,s,i)})},i4=function(e,n,a,i,s){xv(e,s.parentNode,a,i)&&v0(e,n,i,s)||n.merge_with_parents&&e.dom.getParent(s.parentNode,function(f){if(xv(e,f,a,i))return v0(e,n,i,s),!0})},A2=Je.each,O_=function(e){return Mn(e)&&!nc(e)&&!Ol(e)&&!_c(e)},rx=function(e,n,a,i){if(ny(e)&&Xi(n)){var s=pn(pn({},e.schema.getTextBlockElements()),{td:{},th:{},li:{},dt:{},dd:{},figcaption:{},caption:{},details:{},summary:{}}),f=j3(Z.fromDom(a),function(g){return Ol(g.dom)});return to(s,i)&&Zu(Z.fromDom(a.parentNode),!1)&&!f}else return!1},ax=function(e,n,a,i){var s=e.formatter.get(n),f=s[0],g=!i&&e.selection.isCollapsed(),b=e.dom,C=e.selection,k=function(ae,de){if(de===void 0&&(de=f),bt(de.onformat)&&de.onformat(ae,de,a,i),A2(de.styles,function(Me,Qe){b.setStyle(ae,Qe,Dl(Me,a))}),de.styles){var Ee=b.getAttrib(ae,"style");Ee&&b.setAttrib(ae,"data-mce-style",Ee)}A2(de.attributes,function(Me,Qe){b.setAttrib(ae,Qe,Dl(Me,a))}),A2(de.classes,function(Me){Me=Dl(Me,a),b.hasClass(ae,Me)||b.addClass(ae,Me)})},_=function(ae,de){var Ee=!1;return A2(ae,function(Me){if(!Cc(Me))return!1;if(!(pt(Me.collapsed)&&Me.collapsed!==g)&&b.is(de,Me.selector)&&!Ol(de))return k(de,Me),Ee=!0,!1}),Ee},M=function(ae){if(wn(ae)){var de=b.create(ae);return k(de),de}else return null},F=function(ae,de,Ee){var Me=[],Qe=!0,Tt=f.inline||f.block,jn=M(Tt);Bl(ae,de,function(Yt){var lt,Kn=function(kt){var tn=!1,Et=Qe,zt=kt.nodeName.toLowerCase(),hn=kt.parentNode,ft=hn.nodeName.toLowerCase();if(Mn(kt)&&ae.getContentEditable(kt)&&(Et=Qe,Qe=ae.getContentEditable(kt)==="true",tn=!0),Ho(kt)&&!rx(e,f,kt,ft)){lt=null,Rl(f)&&ae.remove(kt);return}if(Rl(f)&&f.wrapper&&xv(e,kt,n,a)){lt=null;return}if(Qe&&!tn&&Rl(f)&&!f.wrapper&&E1(e,zt)&&Bm(e,ft,Tt)){var cn=ae.rename(kt,Tt);k(cn),Me.push(cn),lt=null;return}if(Cc(f)){var Sr=_(s,kt);if(!Sr&&pt(hn)&&Sy(f)&&(Sr=_(s,hn)),!Xi(f)||Sr){lt=null;return}}Qe&&!tn&&Bm(e,Tt,zt)&&Bm(e,ft,Tt)&&!(!Ee&&gn(kt)&&Hv(kt.data))&&!Ol(kt)&&(!Xi(f)||!ae.isBlock(kt))?(lt||(lt=ae.clone(jn,!1),kt.parentNode.insertBefore(lt,kt),Me.push(lt)),lt.appendChild(kt)):(lt=null,Ze(mn(kt.childNodes),Kn),tn&&(Qe=Et),lt=null)};Ze(Yt,Kn)}),f.links===!0&&Ze(Me,function(Yt){var lt=function(Kn){Kn.nodeName==="A"&&k(Kn,f),Ze(mn(Kn.childNodes),lt)};lt(Yt)}),Ze(Me,function(Yt){var lt=function(tn){var Et=0;return Ze(tn.childNodes,function(zt){!_E(zt)&&!nc(zt)&&Et++}),Et},Kn=function(tn){var Et=ra(tn.childNodes,O_).filter(function(zt){return kA(ae,zt,f)});return Et.map(function(zt){var hn=ae.clone(zt,!1);return k(hn),ae.replace(hn,tn,!0),ae.remove(zt,!0),hn}).getOr(tn)},kt=lt(Yt);if((Me.length>1||!ae.isBlock(Yt))&&kt===0){ae.remove(Yt,!0);return}(Xi(f)||Rl(f)&&f.wrapper)&&(!f.exact&&kt===1&&(Yt=Kn(Yt)),A_(e,s,a,Yt),i4(e,f,n,a,Yt),E_(ae,f,a,Yt),T_(ae,f,a,Yt),k_(ae,f,a,Yt),MA(ae,f,a,Yt))})};if(b.getContentEditable(C.getNode())==="false"){i=C.getNode();for(var U=0,K=s.length;U<K;U++){var j=s[U];if(j.ceFalseOverride&&Cc(j)&&b.is(i,j.selector)){k(i,j);break}}sh(e,n,i,a);return}if(f){if(i)if(th(i)){if(!_(s,i)){var J=b.createRng();J.setStartBefore(i),J.setEndAfter(i),F(b,Wc(e,J,s),!0)}}else F(b,i,!0);else if(!g||!Xi(f)||uf(e).length){var fe=C.getNode(),ve=s[0];!e.settings.forced_root_block&&ve.defaultBlock&&!b.getParent(fe,b.isBlock)&&ax(e,ve.defaultBlock),C.setRng(y2(C.getRng())),ky(C,!0,function(){ih(e,function(ae,de){var Ee=de?ae:Wc(e,ae,s);F(b,Ee,!1)})}),IC(b,C,C.getRng()),e.nodeChanged()}else RA(e,n,a);l0(n,e)}sh(e,n,i,a)},d0=function(e){return cr(e,"vars")},O2=function(e,n){e.set({}),n.on("NodeChange",function(a){HA(n,a.element,e.get())}),n.on("FormatApply FormatRemove",function(a){var i=te.from(a.node).map(function(s){return th(s)?s:s.startContainer}).bind(function(s){return Mn(s)?te.some(s):te.from(s.parentElement)}).getOrThunk(function(){return u4(n)});HA(n,i,e.get())})},u4=function(e){return e.selection.getStart()},zA=function(e,n,a,i,s){var f=function(b){var C=e.formatter.matchNode(b,a,s!=null?s:{},i);return!qe(C)},g=function(b){return EA(e,b,a)?!0:i?!1:pt(e.formatter.matchNode(b,a,s,!0))};return On(n,f,g)},LA=function(e,n){var a=n!=null?n:u4(e);return dn(Mm(e.dom,a),function(i){return Mn(i)&&!_c(i)})},HA=function(e,n,a){var i=LA(e,n);ur(a,function(s,f){var g=function(b){var C=zA(e,i,f,b.similar,d0(b)?b.vars:void 0),k=C.isSome();if(b.state.get()!==k){b.state.set(k);var _=C.getOr(n);d0(b)?b.callback(k,{node:_,format:f,parents:i}):Ze(b.callbacks,function(M){return M(k,{node:_,format:f,parents:i})})}};Ze([s.withSimilar,s.withoutSimilar],g),Ze(s.withVars,g)})},D_=function(e,n,a,i,s,f){var g=n.get();Ze(a.split(","),function(b){var C=ua(g,b).getOrThunk(function(){var M={withSimilar:{state:Ru(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Ru(!1),similar:!1,callbacks:[]},withVars:[]};return g[b]=M,M}),k=function(){var M=LA(e);return zA(e,M,b,s,f).isSome()};if(qe(f)){var _=s?C.withSimilar:C.withoutSimilar;_.callbacks.push(i),_.callbacks.length===1&&_.state.set(k())}else C.withVars.push({state:Ru(k()),similar:s,vars:f,callback:i})}),n.set(g)},R_=function(e,n,a){var i=e.get();Ze(n.split(","),function(s){return ua(i,s).each(function(f){i[s]={withSimilar:pn(pn({},f.withSimilar),{callbacks:dn(f.withSimilar.callbacks,function(g){return g!==a})}),withoutSimilar:pn(pn({},f.withoutSimilar),{callbacks:dn(f.withoutSimilar.callbacks,function(g){return g!==a})}),withVars:dn(f.withVars,function(g){return g.callback!==a})}})}),e.set(i)},B_=function(e,n,a,i,s,f){return n.get()===null&&O2(n,e),D_(e,n,a,i,s,f),{unbind:function(){return R_(n,a,i)}}},__=function(e,n,a,i){var s=e.formatter.get(n);K3(e,n,a,i)&&(!("toggle"in s[0])||s[0].toggle)?IA(e,n,a,i):ax(e,n,a,i)},ox=function(e,n){var a=n||document,i=a.createDocumentFragment();return Ze(e,function(s){i.appendChild(s.dom)}),Z.fromDom(i)},c4=function(e,n,a){return{element:e,width:n,rows:a}},m0=function(e,n){return{element:e,cells:n}},M_=function(e,n){return{x:e,y:n}},VA=function(e,n){var a=parseInt(H(e,n),10);return isNaN(a)?1:a},F_=function(e,n,a,i,s){for(var f=VA(s,"rowspan"),g=VA(s,"colspan"),b=e.rows,C=a;C<a+f;C++){b[C]||(b[C]=m0(Ui(i),[]));for(var k=n;k<n+g;k++){var _=b[C].cells;_[k]=C===a&&k===n?s:Vi(s)}}},P_=function(e,n,a){var i=e.rows,s=i[a]?i[a].cells:[];return!!s[n]},UA=function(e,n,a){for(;P_(e,n,a);)n++;return n},s4=function(e){return Ur(e,function(n,a){return a.cells.length>n?a.cells.length:n},0)},l4=function(e,n){for(var a=e.rows,i=0;i<a.length;i++)for(var s=a[i].cells,f=0;f<s.length;f++)if(va(s[f],n))return te.some(M_(f,i));return te.none()},f4=function(e,n,a,i,s){for(var f=[],g=e.rows,b=a;b<=s;b++){var C=g[b].cells,k=n<i?C.slice(n,i+1):C.slice(i,n+1);f.push(m0(g[b].element,k))}return f},v4=function(e,n,a){var i=n.x,s=n.y,f=a.x,g=a.y,b=s<g?f4(e,i,s,f,g):f4(e,i,g,f,s);return c4(e.element,s4(b),b)},WA=function(e,n){var a=Vi(e.element),i=Z.fromTag("tbody");return Xl(i,n),bi(a,i),a},N_=function(e){return kn(e.rows,function(n){var a=kn(n.cells,function(s){var f=Ui(s);return St(f,"colspan"),St(f,"rowspan"),f}),i=Vi(n.element);return Xl(i,a),i})},I_=function(e){var n=c4(Vi(e),0,[]);return Ze($u(e,"tr"),function(a,i){Ze($u(a,"td,th"),function(s,f){F_(n,UA(n,f,i),i,a,s)})}),c4(n.element,s4(n.rows),n.rows)},$_=function(e){return WA(e,N_(e))},z_=function(e,n,a){return l4(e,n).bind(function(i){return l4(e,a).map(function(s){return v4(e,i,s)})})},L_=function(e){return ra(e,function(n){return yo(n)==="ul"||yo(n)==="ol"})},d4=function(e,n){return ra(e,function(a){return yo(a)==="li"&&gv(a,n)}).fold(Y([]),function(a){return L_(e).map(function(i){var s=Z.fromTag(yo(i)),f=di(Ku(i),function(g,b){return at(b,"list-style")});return Tr(s,f),[Z.fromTag("li"),s]}).getOr([])})},m4=function(e,n){var a=Ur(n,function(i,s){return bi(s,i),s},e);return n.length>0?ox([a]):a},jA=function(e){return Kf(e)?_a(e).filter(Rs).fold(Y([]),function(n){return[e,n]}):Rs(e)?[e]:[]},ix=function(e,n){var a=Z.fromDom(n.commonAncestorContainer),i=Fl(a,e),s=dn(i,function(b){return ip(b)||nm(b)}),f=d4(i,n),g=s.concat(f.length?f:jA(a));return kn(g,Vi)},Xc=function(){return ox([])},D2=function(e,n){return m4(Z.fromDom(n.cloneContents()),ix(e,n))},Eh=function(e,n){return Gf(n,"table",At(va,e))},H_=function(e,n){return Eh(e,n[0]).bind(function(a){var i=n[0],s=n[n.length-1],f=I_(a);return z_(f,i,s).map(function(g){return ox([$_(g)])})}).getOrThunk(Xc)},qA=function(e,n){return n.length>0&&n[0].collapsed?Xc():D2(e,n[0])},GA=function(e,n){var a=ah(n,e);return a.length>0?H_(e,a):qA(e,n)},V_=function(e){return e.replace(/^[ \f\n\r\t\v]+/,"")},ux=function(e,n){return n>=0&&n<e.length&&of(e.charAt(n))},KA=function(e,n){var a=sl(e.innerText);return n?V_(a):a},XA=function(e){return e.map(function(n){return n.nodeName}).getOr("div").toLowerCase()},cx=function(e){return te.from(e.selection.getRng()).map(function(n){var a=te.from(e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock)),i=e.getBody(),s=XA(a),f=Ln.browser.isIE()&&s!=="pre",g=e.dom.add(i,s,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},n.cloneContents()),b=KA(g,f),C=sl(g.textContent);if(e.dom.remove(g),ux(C,0)||ux(C,C.length-1)){var k=a.getOr(i),_=KA(k,f),M=_.indexOf(b);if(M===-1)return b;var F=ux(_,M-1),U=ux(_,M+b.length);return(F?" ":"")+b+(U?" ":"")}else return b}).getOr("")},YA=function(e,n){var a=e.selection.getRng(),i=e.dom.create("body"),s=e.selection.getSel(),f=r2(e,bd(s)),g=n.contextual?GA(Z.fromDom(e.getBody()),f).dom:a.cloneContents();return g&&i.appendChild(g),e.selection.serializer.serialize(i,n)},JA=function(e,n){return pn(pn({},e),{format:n,get:!0,selection:!0})},sx=function(e,n,a){a===void 0&&(a={});var i=JA(a,n),s=e.fire("BeforeGetContent",i);if(s.isDefaultPrevented())return e.fire("GetContent",s),s.content;if(s.format==="text")return cx(e);s.getInner=!0;var f=YA(e,s);return s.format==="tree"?f:(s.content=e.selection.isCollapsed()?"":f,e.fire("GetContent",s),s.content)},g4=0,ZA=1,QA=2,U_=function(e,n){var a=e.length+n.length+2,i=new Array(a),s=new Array(a),f=function(_,M,F){return{start:_,end:M,diag:F}},g=function(_,M,F,U,K){var j=C(_,M,F,U);if(j===null||j.start===M&&j.diag===M-U||j.end===_&&j.diag===_-F)for(var J=_,fe=F;J<M||fe<U;)J<M&&fe<U&&e[J]===n[fe]?(K.push([g4,e[J]]),++J,++fe):M-_>U-F?(K.push([QA,e[J]]),++J):(K.push([ZA,n[fe]]),++fe);else{g(_,j.start,F,j.start-j.diag,K);for(var ve=j.start;ve<j.end;++ve)K.push([g4,e[ve]]);g(j.end,M,j.end-j.diag,U,K)}},b=function(_,M,F,U){for(var K=_;K-M<U&&K<F&&e[K]===n[K-M];)++K;return f(_,K,M)},C=function(_,M,F,U){var K=M-_,j=U-F;if(K===0||j===0)return null;var J=K-j,fe=j+K,ve=(fe%2==0?fe:fe+1)/2;i[1+ve]=_,s[1+ve]=M+1;var ae,de,Ee,Me,Qe;for(ae=0;ae<=ve;++ae){for(de=-ae;de<=ae;de+=2){for(Ee=de+ve,de===-ae||de!==ae&&i[Ee-1]<i[Ee+1]?i[Ee]=i[Ee+1]:i[Ee]=i[Ee-1]+1,Me=i[Ee],Qe=Me-_+F-de;Me<M&&Qe<U&&e[Me]===n[Qe];)i[Ee]=++Me,++Qe;if(J%2!=0&&J-ae<=de&&de<=J+ae&&s[Ee-J]<=i[Ee])return b(s[Ee-J],de+_-F,M,U)}for(de=J-ae;de<=J+ae;de+=2){for(Ee=de+ve-J,de===J-ae||de!==J+ae&&s[Ee+1]<=s[Ee-1]?s[Ee]=s[Ee+1]-1:s[Ee]=s[Ee-1],Me=s[Ee]-1,Qe=Me-_+F-de;Me>=_&&Qe>=F&&e[Me]===n[Qe];)s[Ee]=Me--,Qe--;if(J%2==0&&-ae<=de&&de<=ae&&s[Ee]<=i[Ee+J])return b(s[Ee],de+_-F,M,U)}}},k=[];return g(0,e.length,0,n.length,k),k},eO=function(e){return Mn(e)?e.outerHTML:gn(e)?Wv.encodeRaw(e.data,!1):Jl(e)?"<!--"+e.data+"-->":""},W_=function(e){var n,a=document.createElement("div"),i=document.createDocumentFragment();for(e&&(a.innerHTML=e);n=a.firstChild;)i.appendChild(n);return i},j_=function(e,n,a){var i=W_(n);if(e.hasChildNodes()&&a<e.childNodes.length){var s=e.childNodes[a];s.parentNode.insertBefore(i,s)}else e.appendChild(i)},q_=function(e,n){if(e.hasChildNodes()&&n<e.childNodes.length){var a=e.childNodes[n];a.parentNode.removeChild(a)}},G_=function(e,n){var a=0;Ze(e,function(i){i[0]===g4?a++:i[0]===ZA?(j_(n,i[1],a),a++):i[0]===QA&&q_(n,a)})},K_=function(e){return dn(kn(mn(e.childNodes),eO),function(n){return n.length>0})},X_=function(e,n){var a=kn(mn(n.childNodes),eO);return G_(U_(a,e),n),n},Y_=Na(function(){return document.implementation.createHTMLDocument("undo")}),h4=function(e){return e.indexOf("</iframe>")!==-1},J_=function(e){return{type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}},g0=function(e){return{type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}},lx=function(e){var n=K_(e.getBody()),a=vi(n,function(s){var f=xS(e.serializer,s);return f.length>0?[f]:[]}),i=a.join("");return h4(i)?J_(a):g0(i)},Uo=function(e,n,a){var i=a?n.beforeBookmark:n.bookmark;n.type==="fragmented"?X_(n.fragments,e.getBody()):e.setContent(n.content,{format:"raw",no_selection:pt(i)&&OC(i)?!i.isFakeCaret:!0}),e.selection.moveToBookmark(i)},p4=function(e){return e.type==="fragmented"?e.fragments.join(""):e.content},tO=function(e){var n=Z.fromTag("body",Y_());return _u(n,p4(e)),Ze($u(n,"*[data-mce-bogus]"),Iv),ou(n)},Z_=function(e,n){return p4(e)===p4(n)},Q_=function(e,n){return tO(e)===tO(n)},Yc=function(e,n){return!e||!n?!1:Z_(e,n)?!0:Q_(e,n)},h0=function(e){return e.get()===0},Zm=function(e,n,a){h0(a)&&(e.typing=n)},p0=function(e,n){e.typing&&(Zm(e,!1,n),e.add())},b4=function(e){e.typing&&(e.typing=!1,e.add())},eM=function(e,n,a){h0(n)&&a.set(Jw(e.selection))},tM=function(e,n,a,i,s,f,g){var b=lx(e);if(f=f||{},f=Je.extend(f,b),h0(i)===!1||e.removed)return null;var C=n.data[a.get()];if(e.fire("BeforeAddUndo",{level:f,lastLevel:C,originalEvent:g}).isDefaultPrevented()||C&&Yc(C,f))return null;n.data[a.get()]&&s.get().each(function(F){n.data[a.get()].beforeBookmark=F});var k=mE(e);if(k&&n.data.length>k){for(var _=0;_<n.data.length-1;_++)n.data[_]=n.data[_+1];n.data.length--,a.set(n.data.length)}f.bookmark=Jw(e.selection),a.get()<n.data.length-1&&(n.data.length=a.get()+1),n.data.push(f),a.set(n.data.length-1);var M={level:f,lastLevel:C,originalEvent:g};return a.get()>0?(e.setDirty(!0),e.fire("AddUndo",M),e.fire("change",M)):e.fire("AddUndo",M),f},b0=function(e,n,a){n.data=[],a.set(0),n.typing=!1,e.fire("ClearUndos")},y0=function(e,n,a,i,s){if(n.transact(i)){var f=n.data[a.get()].bookmark,g=n.data[a.get()-1];Uo(e,g,!0),n.transact(s)&&(n.data[a.get()-1].beforeBookmark=f)}},w0=function(e,n,a){var i;return n.get()<a.length-1&&(n.set(n.get()+1),i=a[n.get()],Uo(e,i,!1),e.setDirty(!0),e.fire("Redo",{level:i})),i},y4=function(e,n,a,i){var s;return n.typing&&(n.add(),n.typing=!1,Zm(n,!1,a)),i.get()>0&&(i.set(i.get()-1),s=n.data[i.get()],Uo(e,s,!0),e.setDirty(!0),e.fire("Undo",{level:s})),s},nM=function(e){e.clear(),e.add()},w4=function(e,n,a){return a.get()>0||n.typing&&n.data[0]&&!Yc(lx(e),n.data[0])},nO=function(e,n){return n.get()<e.data.length-1&&!e.typing},rO=function(e,n,a){return p0(e,n),e.beforeChange(),e.ignore(a),e.add()},rM=function(e,n){try{e.set(e.get()+1),n()}finally{e.set(e.get()-1)}},aM=function(e,n){var a=e.dom,i=pt(n)?n:e.getBody();qe(e.hasVisual)&&(e.hasVisual=pE(e)),Ze(a.select("table,a",i),function(s){switch(s.nodeName){case"TABLE":var f=vC(e),g=a.getAttrib(s,"border");(!g||g==="0")&&e.hasVisual?a.addClass(s,f):a.removeClass(s,f);break;case"A":if(!a.getAttrib(s,"href")){var b=a.getAttrib(s,"name")||s.id,C=dC(e);b&&e.hasVisual?a.addClass(s,C):a.removeClass(s,C)}break}}),e.fire("VisualAid",{element:n,hasVisual:e.hasVisual})},C4=function(e){return{undoManager:{beforeChange:function(n,a){return eM(e,n,a)},add:function(n,a,i,s,f,g){return tM(e,n,a,i,s,f,g)},undo:function(n,a,i){return y4(e,n,a,i)},redo:function(n,a){return w0(e,n,a)},clear:function(n,a){return b0(e,n,a)},reset:function(n){return nM(n)},hasUndo:function(n,a){return w4(e,n,a)},hasRedo:function(n,a){return nO(n,a)},transact:function(n,a,i){return rO(n,a,i)},ignore:function(n,a){return rM(n,a)},extra:function(n,a,i,s){return y0(e,n,a,i,s)}},formatter:{match:function(n,a,i,s){return K3(e,n,a,i,s)},matchAll:function(n,a){return a_(e,n,a)},matchNode:function(n,a,i,s){return xv(e,n,a,i,s)},canApply:function(n){return i_(e,n)},closest:function(n){return o_(e,n)},apply:function(n,a,i){return ax(e,n,a,i)},remove:function(n,a,i,s){return IA(e,n,a,i,s)},toggle:function(n,a,i){return __(e,n,a,i)},formatChanged:function(n,a,i,s,f){return B_(e,n,a,i,s,f)}},editor:{getContent:function(n,a){return ES(e,n,a)},setContent:function(n,a){return SA(e,n,a)},insertContent:function(n,a){return ZB(e,n,a)},addVisual:function(n){return aM(e,n)}},selection:{getContent:function(n,a){return sx(e,n,a)}},raw:{getModel:function(){return te.none()}}}},oM=function(e){var n=function(b){return wt(b)?b:{}},a=e.undoManager,i=e.formatter,s=e.editor,f=e.selection,g=e.raw;return{undoManager:{beforeChange:a.beforeChange,add:a.add,undo:a.undo,redo:a.redo,clear:a.clear,reset:a.reset,hasUndo:a.hasUndo,hasRedo:a.hasRedo,transact:function(b,C,k){return a.transact(k)},ignore:function(b,C){return a.ignore(C)},extra:function(b,C,k,_){return a.extra(k,_)}},formatter:{match:function(b,C,k,_){return i.match(b,n(C),_)},matchAll:i.matchAll,matchNode:i.matchNode,canApply:function(b){return i.canApply(b)},closest:function(b){return i.closest(b)},apply:function(b,C,k){return i.apply(b,n(C))},remove:function(b,C,k,_){return i.remove(b,n(C))},toggle:function(b,C,k){return i.toggle(b,n(C))},formatChanged:function(b,C,k,_,M){return i.formatChanged(C,k,_,M)}},editor:{getContent:function(b,C){return s.getContent(b)},setContent:function(b,C){return s.setContent(b,C)},insertContent:function(b,C){return s.insertContent(b)},addVisual:s.addVisual},selection:{getContent:function(b,C){return f.getContent(C)}},raw:{getModel:function(){return te.some(g.getRawModel())}}}},iM=function(){var e=Y(null),n=Y("");return{undoManager:{beforeChange:ut,add:e,undo:e,redo:e,clear:ut,reset:ut,hasUndo:_t,hasRedo:_t,transact:e,ignore:ut,extra:ut},formatter:{match:_t,matchAll:Y([]),matchNode:Y(void 0),canApply:_t,closest:n,apply:ut,remove:ut,toggle:ut,formatChanged:Y({unbind:ut})},editor:{getContent:n,setContent:n,insertContent:ut,addVisual:ut},selection:{getContent:n},raw:{getModel:Y(te.none())}}},Md=function(e){return cr(e.plugins,"rtc")},uM=function(e){return ua(e.plugins,"rtc").bind(function(n){return te.from(n.setup)})},cM=function(e){var n=e;return uM(e).fold(function(){return n.rtcInstance=C4(e),te.none()},function(a){return n.rtcInstance=iM(),te.some(function(){return a().then(function(i){return n.rtcInstance=oM(i),i.rtc.isRemote})})})},fx=function(e){return e.rtcInstance?e.rtcInstance:C4(e)},Yi=function(e){var n=e.rtcInstance;if(n)return n;throw new Error("Failed to get RTC instance not yet initialized.")},R2=function(e,n,a){Yi(e).undoManager.beforeChange(n,a)},aO=function(e,n,a,i,s,f,g){return Yi(e).undoManager.add(n,a,i,s,f,g)},sM=function(e,n,a,i){return Yi(e).undoManager.undo(n,a,i)},oO=function(e,n,a){return Yi(e).undoManager.redo(n,a)},lM=function(e,n,a){Yi(e).undoManager.clear(n,a)},iO=function(e,n){Yi(e).undoManager.reset(n)},fM=function(e,n,a){return Yi(e).undoManager.hasUndo(n,a)},vM=function(e,n,a){return Yi(e).undoManager.hasRedo(n,a)},uO=function(e,n,a,i){return Yi(e).undoManager.transact(n,a,i)},cO=function(e,n,a){Yi(e).undoManager.ignore(n,a)},sO=function(e,n,a,i,s){Yi(e).undoManager.extra(n,a,i,s)},lO=function(e,n,a,i,s){return Yi(e).formatter.match(n,a,i,s)},fO=function(e,n,a){return Yi(e).formatter.matchAll(n,a)},dM=function(e,n,a,i,s){return Yi(e).formatter.matchNode(n,a,i,s)},mM=function(e,n){return Yi(e).formatter.canApply(n)},gM=function(e,n){return Yi(e).formatter.closest(n)},hM=function(e,n,a,i){Yi(e).formatter.apply(n,a,i)},S4=function(e,n,a,i,s){Yi(e).formatter.remove(n,a,i,s)},B2=function(e,n,a,i){Yi(e).formatter.toggle(n,a,i)},vO=function(e,n,a,i,s,f){return Yi(e).formatter.formatChanged(n,a,i,s,f)},dO=function(e,n,a){return fx(e).editor.getContent(n,a)},vx=function(e,n,a){return fx(e).editor.setContent(n,a)},pM=function(e,n,a){return fx(e).editor.insertContent(n,a)},bM=function(e,n,a){return Yi(e).selection.getContent(n,a)},Qm=function(e,n){return Yi(e).editor.addVisual(n)},x4=function(e,n){n===void 0&&(n={});var a=n.format?n.format:"html";return bM(e,a,n)},T4=function(e){return e.dom.length===0?(_o(e),te.none()):te.some(e)},_2=function(e,n){return e.filter(function(a){return yd.isBookmarkNode(a.dom)}).bind(n?Ya:qu)},mO=function(e,n,a,i){var s=e.dom,f=n.dom,g=i?s.length:f.length;i?(V(s,f,!1,!i),a.setStart(f,g)):(V(f,s,!1,!i),a.setEnd(f,g))},gO=function(e,n){_a(e).each(function(a){var i=e.dom;n&&Sh(a,Ge(i,0))?A(i,0):!n&&Ym(a,Ge(i,i.length))&&P(i,i.length)})},E4=function(e,n,a,i){e.bind(function(s){var f=i?P:A;return f(s.dom,i?s.dom.length:0),n.filter(lc).map(function(g){return mO(s,g,a,i)})}).orThunk(function(){var s=_2(n,i).or(n).filter(lc);return s.map(function(f){return gO(f,i)})})},hO=function(e,n){var a=te.from(n.firstChild).map(Z.fromDom),i=te.from(n.lastChild).map(Z.fromDom);e.deleteContents(),e.insertNode(n);var s=a.bind(qu).filter(lc).bind(T4),f=i.bind(Ya).filter(lc).bind(T4);E4(s,a,e,!0),E4(f,i,e,!1),e.collapse(!1)},yM=function(e,n){return pn(pn({format:"html"},e),{set:!0,selection:!0,content:n})},wM=function(e,n){if(n.format!=="raw"){var a=e.selection.getRng(),i=e.dom.getParent(a.commonAncestorContainer,e.dom.isBlock),s=i?{context:i.nodeName.toLowerCase()}:{},f=e.parser.parse(n.content,pn(pn({isRootContent:!0,forced_root_block:!1},s),n));return Gm({validate:e.validate},e.schema).serialize(f)}else return n.content},CM=function(e,n,a){a===void 0&&(a={});var i=yM(a,n),s=i;if(!i.no_events){var f=e.fire("BeforeSetContent",i);if(f.isDefaultPrevented()){e.fire("SetContent",f);return}else s=f}s.content=wM(e,s);var g=e.selection.getRng();hO(g,g.createContextualFragment(s.content)),e.selection.setRng(g),V1(e,g),s.no_events||e.fire("SetContent",s)},dx=function(e,n,a){if(e&&cr(e,n)){var i=dn(e[n],function(s){return s!==a});i.length===0?delete e[n]:e[n]=i}};function SM(e,n){var a,i;return{selectorChangedWithUnbind:function(s,f){return a||(a={},i={},n.on("NodeChange",function(g){var b=g.element,C=e.getParents(b,null,e.getRoot()),k={};Je.each(a,function(_,M){Je.each(C,function(F){if(e.is(F,M))return i[M]||(Je.each(_,function(U){U(!0,{node:F,selector:M,parents:C})}),i[M]=_),k[M]=_,!1})}),Je.each(i,function(_,M){k[M]||(delete i[M],Je.each(_,function(F){F(!1,{node:b,selector:M,parents:C})}))})})),a[s]||(a[s]=[]),a[s].push(f),{unbind:function(){dx(a,s,f),dx(i,s,f)}}}}}var pO=function(e){return!!e.select},C0=function(e){return!!(e&&e.ownerDocument)&&os(Z.fromDom(e.ownerDocument),Z.fromDom(e))},k4=function(e){return e?pO(e)?!0:C0(e.startContainer)&&C0(e.endContainer):!1},bO=function(e,n,a,i){var s,f,g=SM(e,i).selectorChangedWithUnbind,b=function(ft,cn){var Sr=e.createRng();pt(ft)&&pt(cn)?(Sr.setStart(ft,cn),Sr.setEnd(ft,cn),ae(Sr),J(!1)):(_1(e,Sr,i.getBody(),!0),ae(Sr))},C=function(ft){return x4(i,ft)},k=function(ft,cn){return CM(i,ft,cn)},_=function(ft){return t2(i.getBody(),ve(),ft)},M=function(ft){return bh(i.getBody(),ve(),ft)},F=function(ft,cn){return zt.getBookmark(ft,cn)},U=function(ft){return zt.moveToBookmark(ft)},K=function(ft,cn){return u3(e,ft,cn).each(ae),ft},j=function(){var ft=ve(),cn=fe();return!ft||ft.item?!1:ft.compareEndPoints?ft.compareEndPoints("StartToEnd",ft)===0:!cn||ft.collapsed},J=function(ft){var cn=ve();cn.collapse(!!ft),ae(cn)},fe=function(){return n.getSelection?n.getSelection():n.document.selection},ve=function(){var ft,cn,Sr,da=function(Oo,li,Cs){try{return li.compareBoundaryPoints(Oo,Cs)}catch(st){return-1}},Hr=n.document;if(i.bookmark!==void 0&&Ml(i)===!1){var jo=qy(i);if(jo.isSome())return jo.map(function(Oo){return r2(i,[Oo])[0]}).getOr(Hr.createRange())}try{(ft=fe())&&!Yd(ft.anchorNode)&&(ft.rangeCount>0?cn=ft.getRangeAt(0):cn=ft.createRange?ft.createRange():Hr.createRange(),cn=r2(i,[cn])[0])}catch(Oo){}return cn||(cn=Hr.createRange?Hr.createRange():Hr.body.createTextRange()),cn.setStart&&cn.startContainer.nodeType===9&&cn.collapsed&&(Sr=e.getRoot(),cn.setStart(Sr,0),cn.setEnd(Sr,0)),s&&f&&(da(cn.START_TO_START,cn,s)===0&&da(cn.END_TO_END,cn,s)===0?cn=f:(s=null,f=null)),cn},ae=function(ft,cn){var Sr;if(!!k4(ft)){var da=pO(ft)?ft:null;if(da){f=null;try{da.select()}catch(Oo){}return}var Hr=fe(),jo=i.fire("SetSelectionRange",{range:ft,forward:cn});if(ft=jo.range,Hr){f=ft;try{Hr.removeAllRanges(),Hr.addRange(ft)}catch(Oo){}cn===!1&&Hr.extend&&(Hr.collapse(ft.endContainer,ft.endOffset),Hr.extend(ft.startContainer,ft.startOffset)),s=Hr.rangeCount>0?Hr.getRangeAt(0):null}!ft.collapsed&&ft.startContainer===ft.endContainer&&Hr.setBaseAndExtent&&!Ln.ie&&ft.endOffset-ft.startOffset<2&&ft.startContainer.hasChildNodes()&&(Sr=ft.startContainer.childNodes[ft.startOffset],Sr&&Sr.tagName==="IMG"&&(Hr.setBaseAndExtent(ft.startContainer,ft.startOffset,ft.endContainer,ft.endOffset),(Hr.anchorNode!==ft.startContainer||Hr.focusNode!==ft.endContainer)&&Hr.setBaseAndExtent(Sr,0,Sr,1))),i.fire("AfterSetSelectionRange",{range:ft,forward:cn})}},de=function(ft){return k(e.getOuterHTML(ft)),ft},Ee=function(){return bS(i.getBody(),ve())},Me=function(ft,cn){return J1(e,ve(),ft,cn)},Qe=function(){var ft=fe(),cn=ft==null?void 0:ft.anchorNode,Sr=ft==null?void 0:ft.focusNode;if(!ft||!cn||!Sr||Yd(cn)||Yd(Sr))return!0;var da=e.createRng();da.setStart(cn,ft.anchorOffset),da.collapse(!0);var Hr=e.createRng();return Hr.setStart(Sr,ft.focusOffset),Hr.collapse(!0),da.compareBoundaryPoints(da.START_TO_START,Hr)<=0},Tt=function(){var ft=ve(),cn=fe();if(!rh(cn)&&oh(i)){var Sr=$m(e,ft);return Sr.each(function(da){ae(da,Qe())}),Sr.getOr(ft)}return ft},jn=function(ft,cn){return g(ft,cn),Et},Yt=function(){for(var ft,cn=e.getRoot();cn&&cn.nodeName!=="BODY";){if(cn.scrollHeight>cn.clientHeight){ft=cn;break}cn=cn.parentNode}return ft},lt=function(ft,cn){return JE(i,ft,cn)},Kn=function(ft,cn){return ae(N1(ft,cn,i.getDoc()))},kt=function(){var ft=ve();return ft.collapsed?Ge.fromRangeStart(ft).getClientRects()[0]:ft.getBoundingClientRect()},tn=function(){n=s=f=null,hn.destroy()},Et={bookmarkManager:null,controlSelection:null,dom:e,win:n,serializer:a,editor:i,collapse:J,setCursorLocation:b,getContent:C,setContent:k,getBookmark:F,moveToBookmark:U,select:K,isCollapsed:j,isForward:Qe,setNode:de,getNode:Ee,getSel:fe,setRng:ae,getRng:ve,getStart:_,getEnd:M,getSelectedBlocks:Me,normalize:Tt,selectorChanged:jn,selectorChangedWithUnbind:g,getScrollContainer:Yt,scrollIntoView:lt,placeCaretAt:Kn,getBoundingClientRect:kt,destroy:tn},zt=yd(Et),hn=fh(Et,i);return Et.bookmarkManager=zt,Et.controlSelection=hn,Et},yO=function(e,n){Ze(n,function(a){e.attr(a,null)})},xM=function(e,n,a){e.addNodeFilter("font",function(i){Ze(i,function(s){var f=n.parse(s.attr("style")),g=s.attr("color"),b=s.attr("face"),C=s.attr("size");g&&(f.color=g),b&&(f["font-family"]=b),C&&(f["font-size"]=a[parseInt(s.attr("size"),10)-1]),s.name="span",s.attr("style",n.serialize(f)),yO(s,["color","face","size"])})})},mx=function(e,n){e.addNodeFilter("strike",function(a){Ze(a,function(i){var s=n.parse(i.attr("style"));s["text-decoration"]="line-through",i.name="span",i.attr("style",n.serialize(s))})})},wO=function(e,n){var a=pp();n.convert_fonts_to_spans&&xM(e,a,Je.explode(n.font_size_legacy_values)),mx(e,a)},TM=function(e,n){n.inline_styles&&wO(e,n)},Ri=function(e){return new yi(function(n,a){var i=function(){a("Cannot convert "+e+" to Blob. Resource might not exist or is inaccessible.")};try{var s=new XMLHttpRequest;s.open("GET",e,!0),s.responseType="blob",s.onload=function(){s.status===200?n(s.response):i()},s.onerror=i,s.send()}catch(f){i()}})},A4=function(e){var n,a=decodeURIComponent(e).split(","),i=/data:([^;]+)/.exec(a[0]);return i&&(n=i[1]),{type:n,data:a[1]}},O4=function(e,n){var a;try{a=atob(n)}catch(f){return te.none()}for(var i=new Uint8Array(a.length),s=0;s<i.length;s++)i[s]=a.charCodeAt(s);return te.some(new Blob([i],{type:e}))},EM=function(e){return new yi(function(n){var a=A4(e),i=a.type,s=a.data;O4(i,s).fold(function(){return n(new Blob([]))},n)})},CO=function(e){return e.indexOf("blob:")===0?Ri(e):e.indexOf("data:")===0?EM(e):null},SO=function(e){return new yi(function(n){var a=new FileReader;a.onloadend=function(){n(a.result)},a.readAsDataURL(e)})},kM=0,M2=function(e){return(e||"blobid")+kM++},AM=function(e,n,a,i){var s,f;if(n.src.indexOf("blob:")===0){f=e.getByUri(n.src),f?a({image:n,blobInfo:f}):CO(n.src).then(function(k){SO(k).then(function(_){s=A4(_).data,f=e.create(M2(),k,s),e.add(f),a({image:n,blobInfo:f})})},function(k){i(k)});return}var g=A4(n.src),b=g.data,C=g.type;s=b,f=e.getByData(s,C),f?a({image:n,blobInfo:f}):CO(n.src).then(function(k){f=e.create(M2(),k,s),e.add(f),a({image:n,blobInfo:f})},function(k){i(k)})},xO=function(e){return e?mn(e.getElementsByTagName("img")):[]},OM=function(e,n){var a={},i=function(s,f){f||(f=Kt);var g=dn(xO(s),function(C){var k=C.src;return!Ln.fileApi||C.hasAttribute("data-mce-bogus")||C.hasAttribute("data-mce-placeholder")||!k||k===Ln.transparentSrc?!1:k.indexOf("blob:")===0?!e.isUploaded(k)&&f(C):k.indexOf("data:")===0?f(C):!1}),b=kn(g,function(C){if(a[C.src]!==void 0)return new yi(function(_){a[C.src].then(function(M){if(typeof M=="string")return M;_({image:C,blobInfo:M.blobInfo})})});var k=new yi(function(_,M){AM(n,C,_,M)}).then(function(_){return delete a[_.image.src],_}).catch(function(_){return delete a[C.src],_});return a[C.src]=k,k});return yi.all(b)};return{findAll:i}},TO=function(e,n,a,i){var s=e.padd_empty_with_br||n.insert;s&&a[i.name]?i.empty().append(new Gc("br",1)).shortEnded=!0:i.empty().append(new Gc("#text",3)).value=Ci},DM=function(e){return EO(e,"#text")&&e.firstChild.value===Ci},EO=function(e,n){return e&&e.firstChild&&e.firstChild===e.lastChild&&e.firstChild.name===n},RM=function(e,n){var a=e.getElementRule(n.name);return a&&a.paddEmpty},S0=function(e,n,a,i){return i.isEmpty(n,a,function(s){return RM(e,s)})},kO=function(e,n){return e&&(cr(n,e.name)||e.name==="br")},D4=function(e){return pt(e.attr("data-mce-bogus"))},AO=function(e){return e.attr("src")===Ln.transparentSrc||pt(e.attr("data-mce-placeholder"))},OO=function(e,n){if(n.images_dataimg_filter){var a=new Image;return a.src=e.attr("src"),ur(e.attributes.map,function(i,s){a.setAttribute(s,i)}),n.images_dataimg_filter(a)}else return!0},DO=function(e,n){var a=n.blob_cache,i=function(s){var f=s.attr("src");AO(s)||D4(s)||c3(f).filter(function(){return OO(s,n)}).bind(function(g){var b=g.type,C=g.data;return te.from(a.getByData(C,b)).orThunk(function(){return O4(b,C).map(function(k){var _=a.create(M2(),k,C);return a.add(_),_})})}).each(function(g){s.attr("src",g.blobUri())})};a&&e.addAttributeFilter("src",function(s){return Ze(s,i)})},RO=function(e,n){var a=e.schema;n.remove_trailing_brs&&e.addNodeFilter("br",function(i,s,f){var g,b=i.length,C,k=Je.extend({},a.getBlockElements()),_=a.getNonEmptyElements(),M,F,U,K,j=a.getWhiteSpaceElements(),J,fe;for(k.body=1,g=0;g<b;g++)if(C=i[g],M=C.parent,k[C.parent.name]&&C===M.lastChild){for(U=C.prev;U;){if(K=U.name,K!=="span"||U.attr("data-mce-type")!=="bookmark"){K==="br"&&(C=null);break}U=U.prev}C&&(C.remove(),S0(a,_,j,M)&&(J=a.getElementRule(M.name),J&&(J.removeEmpty?M.remove():J.paddEmpty&&TO(n,f,k,M))))}else{for(F=C;M&&M.firstChild===F&&M.lastChild===F&&(F=M,!k[M.name]);)M=M.parent;F===M&&n.padd_empty_with_br!==!0&&(fe=new Gc("#text",3),fe.value=Ci,C.replace(fe))}}),e.addAttributeFilter("href",function(i){var s=i.length,f=function(C){var k=C.split(" ").filter(function(_){return _.length>0});return k.concat(["noopener"]).sort().join(" ")},g=function(C){var k=C?Je.trim(C):"";return/\b(noopener)\b/g.test(k)?k:f(k)};if(!n.allow_unsafe_link_target)for(;s--;){var b=i[s];b.name==="a"&&b.attr("target")==="_blank"&&b.attr("rel",g(b.attr("rel")))}}),n.allow_html_in_named_anchor||e.addAttributeFilter("id,name",function(i){for(var s=i.length,f,g,b,C;s--;)if(C=i[s],C.name==="a"&&C.firstChild&&!C.attr("href")){b=C.parent,f=C.lastChild;do g=f.prev,b.insert(f,C),f=g;while(f)}}),n.fix_list_elements&&e.addNodeFilter("ul,ol",function(i){for(var s=i.length,f,g;s--;)if(f=i[s],g=f.parent,g.name==="ul"||g.name==="ol")if(f.prev&&f.prev.name==="li")f.prev.append(f);else{var b=new Gc("li",1);b.attr("style","list-style-type: none"),f.wrap(b)}}),n.validate&&a.getValidClasses()&&e.addAttributeFilter("class",function(i){for(var s=a.getValidClasses(),f=i.length;f--;){for(var g=i[f],b=g.attr("class").split(" "),C="",k=0;k<b.length;k++){var _=b[k],M=!1,F=s["*"];F&&F[_]&&(M=!0),F=s[g.name],!M&&F&&F[_]&&(M=!0),M&&(C&&(C+=" "),C+=_)}C.length||(C=null),g.attr("class",C)}}),DO(e,n)},R4=Je.makeMap,B4=Je.each,BO=Je.explode,_4=Je.extend,M4=function(e,n){n===void 0&&(n=Zf());var a={},i=[],s={},f={};e=e||{},e.validate="validate"in e?e.validate:!0,e.root_name=e.root_name||"body";var g=function(K){for(var j=R4("tr,td,th,tbody,thead,tfoot,table"),J=n.getNonEmptyElements(),fe=n.getWhiteSpaceElements(),ve=n.getTextBlockElements(),ae=n.getSpecialElements(),de=function(zt,hn){if(hn===void 0&&(hn=zt.parent),ae[zt.name])zt.empty().remove();else{for(var ft=zt.children(),cn=0,Sr=ft;cn<Sr.length;cn++){var da=Sr[cn];n.isValidChild(hn.name,da.name)||de(da,hn)}zt.unwrap()}},Ee=0;Ee<K.length;Ee++){var Me=K[Ee],Qe=void 0,Tt=void 0,jn=void 0;if(!(!Me.parent||Me.fixed)){if(ve[Me.name]&&Me.parent.name==="li"){for(var Yt=Me.next;Yt&&ve[Yt.name];){Yt.name="li",Yt.fixed=!0,Me.parent.insert(Yt,Me.parent);Yt=Yt.next}Me.unwrap();continue}var lt=[Me];for(Qe=Me.parent;Qe&&!n.isValidChild(Qe.name,Me.name)&&!j[Qe.name];Qe=Qe.parent)lt.push(Qe);if(Qe&&lt.length>1)if(n.isValidChild(Qe.name,Me.name)){lt.reverse(),Tt=b(lt[0].clone());for(var Kn=Tt,kt=0;kt<lt.length-1;kt++){n.isValidChild(Kn.name,lt[kt].name)?(jn=b(lt[kt].clone()),Kn.append(jn)):jn=Kn;for(var tn=lt[kt].firstChild;tn&&tn!==lt[kt+1];){var Et=tn.next;jn.append(tn),tn=Et}Kn=jn}S0(n,J,fe,Tt)?Qe.insert(Me,lt[0],!0):(Qe.insert(Tt,lt[0],!0),Qe.insert(Me,Tt)),Qe=lt[0],(S0(n,J,fe,Qe)||EO(Qe,"br"))&&Qe.empty().remove()}else de(Me);else if(Me.parent){if(Me.name==="li"){var Yt=Me.prev;if(Yt&&(Yt.name==="ul"||Yt.name==="ol")){Yt.append(Me);continue}if(Yt=Me.next,Yt&&(Yt.name==="ul"||Yt.name==="ol")){Yt.insert(Me,Yt.firstChild,!0);continue}Me.wrap(b(new Gc("ul",1)));continue}n.isValidChild(Me.parent.name,"div")&&n.isValidChild("div",Me.name)?Me.wrap(b(new Gc("div",1))):de(Me)}}}},b=function(K){var j=K.name;if(j in a){var J=s[j];J?J.push(K):s[j]=[K]}for(var fe=i.length;fe--;){var ve=i[fe].name;if(ve in K.attributes.map){var J=f[ve];J?J.push(K):f[ve]=[K]}}return K},C=function(K,j){B4(BO(K),function(J){var fe=a[J];fe||(a[J]=fe=[]),fe.push(j)})},k=function(){var K=[];for(var j in a)cr(a,j)&&K.push({name:j,callbacks:a[j]});return K},_=function(K,j){B4(BO(K),function(J){var fe;for(fe=0;fe<i.length;fe++)if(i[fe].name===J){i[fe].callbacks.push(j);return}i.push({name:J,callbacks:[j]})})},M=function(){return[].concat(i)},F=function(K,j){var J,fe,ve,ae,de,Ee,Me,Qe=[],Tt,jn=function($e){return $e===!1?"":$e===!0?"p":$e};j=j||{},s={},f={};var Yt=_4(R4("script,style,head,html,body,title,meta,param"),n.getBlockElements()),lt=n.getNonEmptyElements(),Kn=n.children,kt=e.validate,tn="forced_root_block"in j?j.forced_root_block:e.forced_root_block,Et=jn(tn),zt=n.getWhiteSpaceElements(),hn=/^[ \t\r\n]+/,ft=/[ \t\r\n]+$/,cn=/[ \t\r\n]+/g,Sr=/^[ \t\r\n]+$/,da=cr(zt,j.context)||cr(zt,e.root_name),Hr=function(){var $e=st.firstChild,mt=null,We=function(Lt){Lt&&($e=Lt.firstChild,$e&&$e.type===3&&($e.value=$e.value.replace(hn,"")),$e=Lt.lastChild,$e&&$e.type===3&&($e.value=$e.value.replace(ft,"")))};if(!!n.isValidChild(st.name,Et.toLowerCase())){for(;$e;){var yn=$e.next;$e.type===3||$e.type===1&&$e.name!=="p"&&!Yt[$e.name]&&!$e.attr("data-mce-type")?(mt||(mt=jo(Et,1),mt.attr(e.forced_root_block_attrs),st.insert(mt,$e)),mt.append($e)):(We(mt),mt=null),$e=yn}We(mt)}},jo=function($e,mt){var We=new Gc($e,mt),yn;return $e in a&&(yn=s[$e],yn?yn.push(We):s[$e]=[We]),We},Oo=function($e){for(var mt=n.getBlockElements(),We=$e.prev;We&&We.type===3;){var yn=We.value.replace(ft,"");if(yn.length>0){We.value=yn;return}var Lt=We.next;if(Lt){if(Lt.type===3&&Lt.value.length){We=We.prev;continue}if(!mt[Lt.name]&&Lt.name!=="script"&&Lt.name!=="style"){We=We.prev;continue}}var ar=We.prev;We.remove(),We=ar}},li=function($e){var mt={};for(var We in $e)We!=="li"&&We!=="p"&&(mt[We]=$e[We]);return mt},Cs=Ad({validate:kt,document:e.document,allow_html_data_urls:e.allow_html_data_urls,allow_svg_data_urls:e.allow_svg_data_urls,allow_script_urls:e.allow_script_urls,allow_conditional_comments:e.allow_conditional_comments,preserve_cdata:e.preserve_cdata,self_closing_elements:li(n.getSelfClosingElements()),cdata:function($e){Tt.append(jo("#cdata",4)).value=$e},text:function($e,mt){var We;da||($e=$e.replace(cn," "),kO(Tt.lastChild,Yt)&&($e=$e.replace(hn,""))),$e.length!==0&&(We=jo("#text",3),We.raw=!!mt,Tt.append(We).value=$e)},comment:function($e){Tt.append(jo("#comment",8)).value=$e},pi:function($e,mt){Tt.append(jo($e,7)).value=mt,Oo(Tt)},doctype:function($e){var mt=Tt.append(jo("#doctype",10));mt.value=$e,Oo(Tt)},start:function($e,mt,We){var yn=kt?n.getElementRule($e):{};if(yn){var Lt=jo(yn.outputName||$e,1);Lt.attributes=mt,Lt.shortEnded=We,Tt.append(Lt);var ar=Kn[Tt.name];ar&&Kn[Lt.name]&&!ar[Lt.name]&&Qe.push(Lt);for(var dr=i.length;dr--;){var ja=i[dr].name;ja in mt.map&&(Ee=f[ja],Ee?Ee.push(Lt):f[ja]=[Lt])}Yt[$e]&&Oo(Lt),We||(Tt=Lt),!da&&zt[$e]&&(da=!0)}},end:function($e){var mt,We,yn,Lt,ar=kt?n.getElementRule($e):{};if(ar){if(Yt[$e]&&!da){if(mt=Tt.firstChild,mt&&mt.type===3)if(We=mt.value.replace(hn,""),We.length>0)mt.value=We,mt=mt.next;else for(yn=mt.next,mt.remove(),mt=yn;mt&&mt.type===3;)We=mt.value,yn=mt.next,(We.length===0||Sr.test(We))&&(mt.remove(),mt=yn),mt=yn;if(mt=Tt.lastChild,mt&&mt.type===3)if(We=mt.value.replace(ft,""),We.length>0)mt.value=We,mt=mt.prev;else for(yn=mt.prev,mt.remove(),mt=yn;mt&&mt.type===3;)We=mt.value,yn=mt.prev,(We.length===0||Sr.test(We))&&(mt.remove(),mt=yn),mt=yn}if(da&&zt[$e]&&(da=!1),ar.removeEmpty&&S0(n,lt,zt,Tt)){Lt=Tt.parent,Yt[Tt.name]?Tt.empty().remove():Tt.unwrap(),Tt=Lt;return}ar.paddEmpty&&(DM(Tt)||S0(n,lt,zt,Tt))&&TO(e,j,Yt,Tt),Tt=Tt.parent}}},n),st=Tt=new Gc(j.context||e.root_name,11);if(Cs.parse(K,j.format),kt&&Qe.length&&(j.context?j.invalid=!0:g(Qe)),Et&&(st.name==="body"||j.isRootContent)&&Hr(),!j.invalid){for(Me in s)if(!!cr(s,Me)){for(Ee=a[Me],J=s[Me],ae=J.length;ae--;)J[ae].parent||J.splice(ae,1);for(fe=0,ve=Ee.length;fe<ve;fe++)Ee[fe](J,Me,j)}for(fe=0,ve=i.length;fe<ve;fe++)if(Ee=i[fe],Ee.name in f){for(J=f[Ee.name],ae=J.length;ae--;)J[ae].parent||J.splice(ae,1);for(ae=0,de=Ee.callbacks.length;ae<de;ae++)Ee.callbacks[ae](J,Ee.name,j)}}return st},U={schema:n,addAttributeFilter:_,getAttributeFilters:M,addNodeFilter:C,getNodeFilters:k,filterNode:b,parse:F};return RO(U,e),TM(U,e),U},gx=function(e,n,a){e.addAttributeFilter("data-mce-tabindex",function(i,s){for(var f=i.length;f--;){var g=i[f];g.attr("tabindex",g.attr("data-mce-tabindex")),g.attr(s,null)}}),e.addAttributeFilter("src,href,style",function(i,s){for(var f="data-mce-"+s,g=n.url_converter,b=n.url_converter_scope,C=i.length;C--;){var k=i[C],_=k.attr(f);_!==void 0?(k.attr(s,_.length>0?_:null),k.attr(f,null)):(_=k.attr(s),s==="style"?_=a.serializeStyle(a.parseStyle(_),k.name):g&&(_=g.call(b,_,s,k.name)),k.attr(s,_.length>0?_:null))}}),e.addAttributeFilter("class",function(i){for(var s=i.length;s--;){var f=i[s],g=f.attr("class");g&&(g=f.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),f.attr("class",g.length>0?g:null))}}),e.addAttributeFilter("data-mce-type",function(i,s,f){for(var g=i.length;g--;){var b=i[g];if(b.attr("data-mce-type")==="bookmark"&&!f.cleanup){var C=te.from(b.firstChild).exists(function(k){return!Hv(k.value)});C?b.unwrap():b.remove()}}}),e.addNodeFilter("noscript",function(i){for(var s=i.length;s--;){var f=i[s].firstChild;f&&(f.value=Wv.decode(f.value))}}),e.addNodeFilter("script,style",function(i,s){for(var f=function(_){return _.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")},g=i.length;g--;){var b=i[g],C=b.firstChild?b.firstChild.value:"";if(s==="script"){var k=b.attr("type");k&&b.attr("type",k==="mce-no/type"?null:k.replace(/^mce\-/,"")),n.element_format==="xhtml"&&C.length>0&&(b.firstChild.value=`// <![CDATA[
`+f(C)+`
// ]]>`)}else n.element_format==="xhtml"&&C.length>0&&(b.firstChild.value=`<!--
`+f(C)+`
-->`)}}),e.addNodeFilter("#comment",function(i){for(var s=i.length;s--;){var f=i[s];n.preserve_cdata&&f.value.indexOf("[CDATA[")===0?(f.name="#cdata",f.type=4,f.value=a.decode(f.value.replace(/^\[CDATA\[|\]\]$/g,""))):f.value.indexOf("mce:protected ")===0&&(f.name="#text",f.type=3,f.raw=!0,f.value=unescape(f.value).substr(14))}}),e.addNodeFilter("xml:namespace,input",function(i,s){for(var f=i.length;f--;){var g=i[f];g.type===7?g.remove():g.type===1&&s==="input"&&!g.attr("type")&&g.attr("type","text")}}),e.addAttributeFilter("data-mce-type",function(i){Ze(i,function(s){s.attr("data-mce-type")==="format-caret"&&(s.isEmpty(e.schema.getNonEmptyElements())?s.remove():s.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize,data-mce-placeholder",function(i,s){for(var f=i.length;f--;)i[f].attr(s,null)})},BM=function(e){var n=function(s){return s&&s.name==="br"},a=e.lastChild;if(n(a)){var i=a.prev;n(i)&&(a.remove(),i.remove())}},_M=function(e,n,a){var i,s=e.dom,f=n.cloneNode(!0),g=document.implementation;if(g.createHTMLDocument){var b=g.createHTMLDocument("");Je.each(f.nodeName==="BODY"?f.childNodes:[f],function(C){b.body.appendChild(b.importNode(C,!0))}),f.nodeName!=="BODY"?f=b.body.firstChild:f=b.body,i=s.doc,s.doc=b}return IE(e,pn(pn({},a),{node:f})),i&&(s.doc=i),f},MM=function(e,n){return e&&e.hasEventListeners("PreProcess")&&!n.no_events},_O=function(e,n,a){return MM(e,a)?_M(e,n,a):n},MO=function(e,n,a){Je.inArray(n,a)===-1&&(e.addAttributeFilter(a,function(i,s){for(var f=i.length;f--;)i[f].attr(s,null)}),n.push(a))},FM=function(e,n,a){if(!n.no_events&&e){var i=Dy(e,pn(pn({},n),{content:a}));return i.content}else return a},PM=function(e,n,a){var i=sl(a.getInner?n.innerHTML:e.getOuterHTML(n));return a.selection||kg(Z.fromDom(n))?i:Je.trim(i)},NM=function(e,n,a){var i=a.selection?pn({forced_root_block:!1},a):a,s=e.parse(n,i);return BM(s),s},IM=function(e,n,a){var i=Gm(e,n);return i.serialize(a)},$M=function(e,n,a,i,s){var f=IM(n,a,i);return FM(e,s,f)},zM=function(e,n){var a=["data-mce-selected"],i=n&&n.dom?n.dom:Fa.DOM,s=n&&n.schema?n.schema:Zf(e);e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs="remove_trailing_brs"in e?e.remove_trailing_brs:!0;var f=M4(e,s);gx(f,e,i);var g=function(b,C){C===void 0&&(C={});var k=pn({format:"html"},C),_=_O(n,b,k),M=PM(i,_,k),F=NM(f,M,k);return k.format==="tree"?F:$M(n,e,s,F,k)};return{schema:s,addNodeFilter:f.addNodeFilter,addAttributeFilter:f.addAttributeFilter,serialize:g,addRules:s.addValidElements,setRules:s.setValidElements,addTempAttr:At(MO,f,a),getTempAttrs:Y(a),getNodeFilters:f.getNodeFilters,getAttributeFilters:f.getAttributeFilters}},FO=function(e,n){var a=zM(e,n);return{schema:a.schema,addNodeFilter:a.addNodeFilter,addAttributeFilter:a.addAttributeFilter,serialize:a.serialize,addRules:a.addRules,setRules:a.setRules,addTempAttr:a.addTempAttr,getTempAttrs:a.getTempAttrs,getNodeFilters:a.getNodeFilters,getAttributeFilters:a.getAttributeFilters}},LM="html",HM=function(e,n){n===void 0&&(n={});var a=n.format?n.format:LM;return dO(e,n,a)},F4=function(e,n,a){return a===void 0&&(a={}),vx(e,n,a)},hx=Fa.DOM,VM=function(e){hx.setStyle(e.id,"display",e.orgDisplay)},px=function(e){return te.from(e).each(function(n){return n.destroy()})},PO=function(e){e.contentAreaContainer=e.formElement=e.container=e.editorContainer=null,e.bodyElement=e.contentDocument=e.contentWindow=null,e.iframeElement=e.targetElm=null,e.selection&&(e.selection=e.selection.win=e.selection.dom=e.selection.dom.doc=null)},UM=function(e){var n=e.formElement;n&&(n._mceOldSubmit&&(n.submit=n._mceOldSubmit,n._mceOldSubmit=null),hx.unbind(n,"submit reset",e.formEventDelegate))},WM=function(e){if(!e.removed){var n=e._selectionOverrides,a=e.editorUpload,i=e.getBody(),s=e.getElement();i&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&s&&hx.remove(s.nextSibling),UC(e),e.editorManager.remove(e),!e.inline&&i&&VM(e),Ry(e),hx.remove(e.getContainer()),px(n),px(a),e.destroy()}},jM=function(e,n){var a=e.selection,i=e.dom;if(!e.destroyed){if(!n&&!e.removed){e.remove();return}n||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),px(a),px(i)),UM(e),PO(e),e.destroyed=!0}},qM=function(e,n){var a=wt(e)&&wt(n);return a?x0(e,n):n},GM=function(e){return function(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];if(n.length===0)throw new Error("Can't merge zero objects");for(var i={},s=0;s<n.length;s++){var f=n[s];for(var g in f)cr(f,g)&&(i[g]=e(i[g],f[g]))}return i}},x0=GM(qM),KM=function(e,n){return{sections:Y(e),settings:Y(n)}},P4=fn().deviceType,NO=P4.isTouch(),N4=P4.isPhone(),XM=P4.isTablet(),YM=["lists","autolink","autosave"],IO={table_grid:!1,object_resizing:!1,resize:!1},Fd=function(e){var n=Un(e)?e.join(" "):e,a=kn(wn(n)?n.split(" "):[],Zt);return dn(a,function(i){return i.length>0})},$O=function(e){return dn(e,At(rt,YM))},zO=function(e,n){var a=Zo(n,function(i,s){return rt(e,s)});return KM(a.t,a.f)},JM=function(e,n,a){a===void 0&&(a={});var i=e.sections(),s=ua(i,n).getOr({});return Je.extend({},a,s)},F2=function(e,n){return cr(e.sections(),n)},ZM=function(e,n,a){var i=e.sections();return F2(e,n)&&i[n].theme===a},QM=function(e,n){return F2(e,n)?e.sections()[n]:{}},LO=function(e,n){return ua(e,"toolbar_mode").orThunk(function(){return ua(e,"toolbar_drawer").map(function(a){return a===!1?"wrap":a})}).getOr(n)},HO=function(e,n,a,i,s){var f={id:n,theme:"silver",toolbar_mode:LO(e,"floating"),plugins:"",document_base_url:a,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,inline_styles:!0,convert_fonts_to_spans:!0,indent:!0,indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",entity_encoding:"named",url_converter:s.convertURL,url_converter_scope:s};return pn(pn({},f),i?IO:{})},e6=function(e,n){var a={resize:!1,toolbar_mode:LO(e,"scrolling"),toolbar_sticky:!1},i={menubar:!1};return pn(pn(pn({},IO),a),n?i:{})},t6=function(e,n){var a=n.external_plugins?n.external_plugins:{};return e&&e.external_plugins?Je.extend({},e.external_plugins,a):a},n6=function(e,n){return[].concat(Fd(e)).concat(Fd(n))},r6=function(e,n,a,i){return e&&ZM(n,"mobile","mobile")?$O(i):e&&F2(n,"mobile")?i:a},VO=function(e,n,a,i){var s=Fd(a.forced_plugins),f=Fd(i.plugins),g=QM(n,"mobile"),b=g.plugins?Fd(g.plugins):f,C=r6(e,n,f,b),k=n6(s,C);if(Ln.browser.isIE()&&rt(k,"rtc"))throw new Error("RTC plugin is not supported on IE 11.");return Je.extend(i,{plugins:k.join(" ")})},a6=function(e,n){return e&&F2(n,"mobile")},o6=function(e,n,a,i,s){var f=e?{mobile:e6(s.mobile||{},n)}:{},g=zO(["mobile"],x0(f,s)),b=Je.extend(a,i,g.settings(),a6(e,g)?JM(g,"mobile"):{},{validate:!0,external_plugins:t6(i,g.settings())});return VO(e,g,i,b)},P2=function(e,n,a,i,s){var f=HO(s,n,a,NO,e);return o6(N4||XM,N4,f,i,s)},eg=function(e,n,a){return te.from(n.settings[a]).filter(e)},UO=function(e){var n={};return typeof e=="string"?Ze(e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(","),function(a){var i=a.split("=");i.length>1?n[Je.trim(i[0])]=Je.trim(i[1]):n[Je.trim(i[0])]=Je.trim(i[0])}):n=e,n},i6=function(e){return function(n){return Un(n)&&No(n,e)}},u6=function(e,n,a,i){var s=n in e.settings?e.settings[n]:a;return i==="hash"?UO(s):i==="string"?eg(wn,e,n).getOr(a):i==="number"?eg(rn,e,n).getOr(a):i==="boolean"?eg(Te,e,n).getOr(a):i==="object"?eg(wt,e,n).getOr(a):i==="array"?eg(Un,e,n).getOr(a):i==="string[]"?eg(i6(wn),e,n).getOr(a):i==="function"?eg(bt,e,n).getOr(a):s},c6=function(){var e={},n=function(s,f){e[s]=f},a=function(s){return e[s]?e[s]:{icons:{}}},i=function(s){return cr(e,s)};return{add:n,get:a,has:i}},N2=c6(),WO=function(e,n){var a=n.dom;return a[e]},jO=function(e,n){return parseInt(Cr(n,e),10)},s6=At(WO,"clientWidth"),l6=At(WO,"clientHeight"),f6=At(jO,"margin-top"),Nu=At(jO,"margin-left"),qO=function(e){return e.dom.getBoundingClientRect()},v6=function(e,n,a){var i=s6(e),s=l6(e);return n>=0&&a>=0&&n<=i&&a<=s},d6=function(e,n,a,i){var s=qO(n),f=e?s.left+n.dom.clientLeft+Nu(n):0,g=e?s.top+n.dom.clientTop+f6(n):0,b=a-f,C=i-g;return{x:b,y:C}},GO=function(e,n,a){var i=Z.fromDom(e.getBody()),s=e.inline?i:Bo(i),f=d6(e.inline,s,n,a);return v6(s,f.x,f.y)},m6=function(e){return te.from(e).map(Z.fromDom)},Xr=function(e){var n=e.inline?e.getBody():e.getContentAreaContainer();return m6(n).map(nl).getOr(!1)},g6=function(){var e=function(){throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,reposition:e,getArgs:e}},KO=function(e){var n=[],a=function(){var F=e.theme;return F&&F.getNotificationManagerImpl?F.getNotificationManagerImpl():g6()},i=function(){return te.from(n[0])},s=function(F,U){return F.type===U.type&&F.text===U.text&&!F.progressBar&&!F.timeout&&!U.progressBar&&!U.timeout},f=function(){n.length>0&&a().reposition(n)},g=function(F){n.push(F)},b=function(F){Po(n,function(U){return U===F}).each(function(U){n.splice(U,1)})},C=function(F,U){if(U===void 0&&(U=!0),!(e.removed||!Xr(e)))return U&&e.fire("BeforeOpenNotification",{notification:F}),ra(n,function(K){return s(a().getArgs(K),F)}).getOrThunk(function(){e.editorManager.setActive(e);var K=a().open(F,function(){b(K),f(),i().fold(function(){return e.focus()},function(j){return eS(Z.fromDom(j.getEl()))})});return g(K),f(),e.fire("OpenNotification",{notification:pn({},K)}),K})},k=function(){i().each(function(F){a().close(F),b(F),f()})},_=Y(n),M=function(F){F.on("SkinLoaded",function(){var U=uC(F);U&&C({text:U,type:"warning",timeout:0},!1)}),F.on("ResizeEditor ResizeWindow NodeChange",function(){sn.requestAnimationFrame(f)}),F.on("remove",function(){Ze(n.slice(),function(U){a().close(U)})})};return M(e),{open:C,close:k,getNotifications:_}},bf=Ei.PluginManager,La=Ei.ThemeManager;function h6(){var e=function(){throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e,getParams:e,setParams:e}}var T0=function(e){var n=[],a=function(){var j=e.theme;return j&&j.getWindowManagerImpl?j.getWindowManagerImpl():h6()},i=function(j,J){return function(){for(var fe=[],ve=0;ve<arguments.length;ve++)fe[ve]=arguments[ve];return J?J.apply(j,fe):void 0}},s=function(j){e.fire("OpenWindow",{dialog:j})},f=function(j){e.fire("CloseWindow",{dialog:j})},g=function(j){n.push(j),s(j)},b=function(j){f(j),n=dn(n,function(J){return J!==j}),n.length===0&&e.focus()},C=function(){return te.from(n[n.length-1])},k=function(j){e.editorManager.setActive(e),hh(e);var J=j();return g(J),J},_=function(j,J){return k(function(){return a().open(j,J,b)})},M=function(j){return k(function(){return a().openUrl(j,b)})},F=function(j,J,fe){var ve=a();ve.alert(j,i(fe||ve,J))},U=function(j,J,fe){var ve=a();ve.confirm(j,i(fe||ve,J))},K=function(){C().each(function(j){a().close(j),b(j)})};return e.on("remove",function(){Ze(n,function(j){a().close(j)})}),{open:_,openUrl:M,alert:F,confirm:U,close:K}},XO=function(e,n){e.notificationManager.open({type:"error",text:n})},bx=function(e,n){e._skinLoaded?XO(e,n):e.on("SkinLoaded",function(){XO(e,n)})},p6=function(e,n){bx(e,xo.translate(["Failed to upload image: {0}",n]))},yx=function(e,n,a){P1(e,n,{message:a}),console.error(a)},Tv=function(e,n,a){return a?"Failed to load "+e+": "+a+" from url "+n:"Failed to load "+e+" url: "+n},Tc=function(e,n,a){yx(e,"PluginLoadError",Tv("plugin",n,a))},I2=function(e,n,a){yx(e,"IconsLoadError",Tv("icons",n,a))},kh=function(e,n,a){yx(e,"LanguageLoadError",Tv("language",n,a))},Ev=function(e,n,a){var i=xo.translate(["Failed to initialize plugin: {0}",n]);P1(e,"PluginLoadError",{message:i}),tg(i,a),bx(e,i)},tg=function(e){for(var n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];var i=window.console;i&&(i.error?i.error.apply(i,Xn([e],n)):i.log.apply(i,Xn([e],n)))},I4=function(e){return/^[a-z0-9\-]+$/i.test(e)},$4=function(e){return z4(e,El(e))},YO=function(e){return z4(e,oC(e))},z4=function(e,n){var a=e.editorManager.baseURL+"/skins/content",i=e.editorManager.suffix,s="content"+i+".css",f=e.inline===!0;return kn(n,function(g){return I4(g)&&!f?a+"/"+g+"/"+s:e.documentBaseURI.toAbsolute(g)})},b6=function(e){e.contentCSS=e.contentCSS.concat($4(e),YO(e))},L4=function(){var e=1,n=2,a={},i=function(F,U){return{status:F,resultUri:U}},s=function(F){return F in a},f=function(F){var U=a[F];return U?U.resultUri:null},g=function(F){return s(F)?a[F].status===e:!1},b=function(F){return s(F)?a[F].status===n:!1},C=function(F){a[F]=i(e,null)},k=function(F,U){a[F]=i(n,U)},_=function(F){delete a[F]},M=function(){a={}};return{hasBlobUri:s,getResultUri:f,isPending:g,isUploaded:b,markPending:C,markUploaded:k,removeFailed:_,destroy:M}},JO=0,y6=function(){var e=function(){return Math.round(Math.random()*4294967295).toString(36)},n=new Date().getTime();return"s"+n.toString(36)+e()+e()+e()},H4=function(e){return e+JO+++y6()},w6=function(){var e=[],n=function(M){var F={"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"};return F[M.toLowerCase()]||"dat"},a=function(M,F,U,K,j){if(wn(M)){var J=M;return i({id:J,name:K,filename:j,blob:F,base64:U})}else{if(wt(M))return i(M);throw new Error("Unknown input type")}},i=function(M){if(!M.blob||!M.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");var F=M.id||H4("blobid"),U=M.name||F,K=M.blob;return{id:Y(F),name:Y(U),filename:Y(M.filename||U+"."+n(K.type)),blob:Y(K),base64:Y(M.base64),blobUri:Y(M.blobUri||URL.createObjectURL(K)),uri:Y(M.uri)}},s=function(M){g(M.id())||e.push(M)},f=function(M){return ra(e,M).getOrUndefined()},g=function(M){return f(function(F){return F.id()===M})},b=function(M){return f(function(F){return F.blobUri()===M})},C=function(M,F){return f(function(U){return U.base64()===M&&U.blob().type===F})},k=function(M){e=dn(e,function(F){return F.blobUri()===M?(URL.revokeObjectURL(F.blobUri()),!1):!0})},_=function(){Ze(e,function(M){URL.revokeObjectURL(M.blobUri())}),e=[]};return{create:a,add:s,get:g,getByUri:b,getByData:C,findFirst:f,removeByUri:k,destroy:_}},$2=function(e,n){var a={},i=function(K,j){return K?K.replace(/\/$/,"")+"/"+j.replace(/^\//,""):j},s=function(K,j,J,fe){var ve=new XMLHttpRequest;ve.open("POST",n.url),ve.withCredentials=n.credentials,ve.upload.onprogress=function(de){fe(de.loaded/de.total*100)},ve.onerror=function(){J("Image upload failed due to a XHR Transport error. Code: "+ve.status)},ve.onload=function(){if(ve.status<200||ve.status>=300){J("HTTP Error: "+ve.status);return}var de=JSON.parse(ve.responseText);if(!de||typeof de.location!="string"){J("Invalid JSON: "+ve.responseText);return}j(i(n.basePath,de.location))};var ae=new FormData;ae.append("file",K.blob(),K.filename()),ve.send(ae)},f=function(){return new yi(function(K){K([])})},g=function(K,j){return{url:j,blobInfo:K,status:!0}},b=function(K,j,J){return{url:"",blobInfo:K,status:!1,error:{message:j,options:J}}},C=function(K,j){Je.each(a[K],function(J){J(j)}),delete a[K]},k=function(K,j,J){return e.markPending(K.blobUri()),new yi(function(fe){var ve,ae;try{var de=function(){ve&&(ve.close(),ae=ut)},Ee=function(Qe){de(),e.markUploaded(K.blobUri(),Qe),C(K.blobUri(),g(K,Qe)),fe(g(K,Qe))},Me=function(Qe,Tt){var jn=Tt||{};de(),e.removeFailed(K.blobUri()),C(K.blobUri(),b(K,Qe,jn)),fe(b(K,Qe,jn))};ae=function(Qe){Qe<0||Qe>100||te.from(ve).orThunk(function(){return te.from(J).map(D)}).each(function(Tt){ve=Tt,Tt.progressBar.value(Qe)})},j(K,Ee,Me,ae)}catch(Qe){fe(b(K,Qe.message,{}))}})},_=function(K){return K===s},M=function(K){var j=K.blobUri();return new yi(function(J){a[j]=a[j]||[],a[j].push(J)})},F=function(K,j){return K=Je.grep(K,function(J){return!e.isUploaded(J.blobUri())}),yi.all(Je.map(K,function(J){return e.isPending(J.blobUri())?M(J):k(J,n.handler,j)}))},U=function(K,j){return!n.url&&_(n.handler)?f():F(K,j)};return bt(n.handler)===!1&&(n.handler=s),{upload:U}},V4=function(e){return function(){return e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})}},U4=function(e,n){return $2(n,{url:uE(e),basePath:$s(e),credentials:Sm(e),handler:Jb(e)})},ZO=function(e){var n=L4(),a=U4(e,n);return{upload:function(i,s){return s===void 0&&(s=!0),a.upload(i,s?V4(e):void 0)}}},W4=function(e){var n=Ru(null);e.on("change AddUndo",function(i){n.set(pn({},i.level))});var a=function(){var i=e.undoManager.data;Yo(i).filter(function(s){return!Yc(n.get(),s)}).each(function(s){e.setDirty(!0),e.fire("change",{level:s,lastLevel:vo(i,i.length-2).getOrNull()})})};return{fireIfChanged:a}},C6=function(e){var n=w6(),a,i,s=L4(),f=[],g=W4(e),b=function(de){return function(Ee){return e.selection?de(Ee):[]}},C=function(de){return de+(de.indexOf("?")===-1?"?":"&")+new Date().getTime()},k=function(de,Ee,Me){var Qe=0;do Qe=de.indexOf(Ee,Qe),Qe!==-1&&(de=de.substring(0,Qe)+Me+de.substr(Qe+Ee.length),Qe+=Me.length-Ee.length+1);while(Qe!==-1);return de},_=function(de,Ee,Me){var Qe='src="'+Me+'"'+(Me===Ln.transparentSrc?' data-mce-placeholder="1"':"");return de=k(de,'src="'+Ee+'"',Qe),de=k(de,'data-mce-src="'+Ee+'"','data-mce-src="'+Me+'"'),de},M=function(de,Ee){Ze(e.undoManager.data,function(Me){Me.type==="fragmented"?Me.fragments=kn(Me.fragments,function(Qe){return _(Qe,de,Ee)}):Me.content=_(Me.content,de,Ee)})},F=function(de,Ee){var Me=e.convertURL(Ee,"src");M(de.src,Ee),e.$(de).attr({src:o1(e)?C(Ee):Ee,"data-mce-src":Me})},U=function(de){return a||(a=U4(e,s)),fe().then(b(function(Ee){var Me=kn(Ee,function(Qe){return Qe.blobInfo});return a.upload(Me,V4(e)).then(b(function(Qe){var Tt=[],jn=kn(Qe,function(Yt,lt){var Kn=Ee[lt].blobInfo,kt=Ee[lt].image;return Yt.status&&iE(e)?(n.removeByUri(kt.src),Md(e)||F(kt,Yt.url)):Yt.error&&(Yt.error.options.remove&&(M(kt.getAttribute("src"),Ln.transparentSrc),Tt.push(kt)),p6(e,Yt.error.message)),{element:kt,status:Yt.status,uploadUri:Yt.url,blobInfo:Kn}});return jn.length>0&&g.fireIfChanged(),Tt.length>0&&(Md(e)?console.error("Removing images on failed uploads is currently unsupported for RTC"):e.undoManager.transact(function(){Ze(Tt,function(Yt){e.dom.remove(Yt),n.removeByUri(Yt.src)})})),de&&de(jn),jn}))}))},K=function(de){if(Xg(e))return U(de)},j=function(de){if(No(f,function(Me){return Me(de)})===!1)return!1;if(de.getAttribute("src").indexOf("data:")===0){var Ee=a1(e);return Ee(de)}return!0},J=function(de){f.push(de)},fe=function(){return i||(i=OM(s,n)),i.findAll(e.getBody(),j).then(b(function(de){return de=dn(de,function(Ee){return typeof Ee=="string"?(bx(e,Ee),!1):!0}),Md(e)||Ze(de,function(Ee){M(Ee.image.src,Ee.blobInfo.blobUri()),Ee.image.src=Ee.blobInfo.blobUri(),Ee.image.removeAttribute("data-mce-src")}),de}))},ve=function(){n.destroy(),s.destroy(),i=a=null},ae=function(de){return de.replace(/src="(blob:[^"]+)"/g,function(Ee,Me){var Qe=s.getResultUri(Me);if(Qe)return'src="'+Qe+'"';var Tt=n.getByUri(Me);if(Tt||(Tt=Ur(e.editorManager.get(),function(Yt,lt){return Yt||lt.editorUpload&&lt.editorUpload.blobCache.getByUri(Me)},null)),Tt){var jn=Tt.blob();return'src="data:'+jn.type+";base64,"+Tt.base64()+'"'}return Ee})};return e.on("SetContent",function(){Xg(e)?K():fe()}),e.on("RawSaveContent",function(de){de.content=ae(de.content)}),e.on("GetContent",function(de){de.source_view||de.format==="raw"||de.format==="tree"||(de.content=ae(de.content))}),e.on("PostRender",function(){e.parser.addNodeFilter("img",function(de){Ze(de,function(Ee){var Me=Ee.attr("src");if(!n.getByUri(Me)){var Qe=s.getResultUri(Me);Qe&&Ee.attr("src",Qe)}})})}),{blobCache:n,addFilter:J,uploadImages:U,uploadImagesAuto:K,scanForImages:fe,destroy:ve}},S6=function(e){var n={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all",preserve_attributes:["class","style"]},{inline:"s",remove:"all",preserve_attributes:["class","style"]}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",defaultBlock:"p",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(a,i,s){return Mn(a)&&a.hasAttribute("href")},onformat:function(a,i,s){Je.each(s,function(f,g){e.setAttrib(a,g,f)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":function(a){var i;return(i=a==null?void 0:a.customValue)!==null&&i!==void 0?i:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Je.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),function(a){n[a]={block:a,remove:"all"}}),n},x6=function(e){var n={},a=function(g){return pt(g)?n[g]:n},i=function(g){return cr(n,g)},s=function(g,b){g&&(wn(g)?(Un(b)||(b=[b]),Ze(b,function(C){qe(C.deep)&&(C.deep=!Cc(C)),qe(C.split)&&(C.split=!Cc(C)||Xi(C)),qe(C.remove)&&Cc(C)&&!Xi(C)&&(C.remove="none"),Cc(C)&&Xi(C)&&(C.mixed=!0,C.block_expand=!0),wn(C.classes)&&(C.classes=C.classes.split(/\s+/))}),n[g]=b):ur(g,function(C,k){s(k,C)}))},f=function(g){return g&&n[g]&&delete n[g],n};return s(S6(e.dom)),s(sE(e)),{get:a,has:i,register:s,unregister:f}},Pd=Je.each,oc=Fa.DOM,QO=function(e,n){var a,i,s,f=n&&n.schema||Zf({}),g=function(_,M){M.classes.length&&oc.addClass(_,M.classes.join(" ")),oc.setAttribs(_,M.attrs)},b=function(_){i=typeof _=="string"?{name:_,classes:[],attrs:{}}:_;var M=oc.create(i.name);return g(M,i),M},C=function(_,M){var F=typeof _!="string"?_.nodeName.toLowerCase():_,U=f.getElementRule(F),K=U&&U.parentsRequired;return K&&K.length?M&&Je.inArray(K,M)!==-1?M:K[0]:!1},k=function(_,M,F){var U,K,j=M.length>0&&M[0],J=j&&j.name,fe=C(_,J);if(fe)J===fe?(K=M[0],M=M.slice(1)):K=fe;else if(j)K=M[0],M=M.slice(1);else if(!F)return _;return K&&(U=b(K),U.appendChild(_)),F&&(U||(U=oc.create("div"),U.appendChild(_)),Je.each(F,function(ve){var ae=b(ve);U.insertBefore(ae,_)})),k(U,M,K&&K.siblings)};return e&&e.length?(i=e[0],a=b(i),s=oc.create("div"),s.appendChild(k(a,e.slice(1),i.siblings)),s):""},pu=function(e){var n,a={classes:[],attrs:{}};return e=a.selector=Je.trim(e),e!=="*"&&(n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,function(i,s,f,g,b){switch(s){case"#":a.attrs.id=f;break;case".":a.classes.push(f);break;case":":Je.inArray("checked disabled enabled read-only required".split(" "),f)!==-1&&(a.attrs[f]=f);break}if(g==="["){var C=b.match(/([\w\-]+)(?:\=\"([^\"]+))?/);C&&(a.attrs[C[1]]=C[2])}return""})),a.name=n||"div",a},T6=function(e){return!e||typeof e!="string"?[]:(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Je.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),function(n){var a=Je.map(n.split(/(?:~\+|~|\+)/),pu),i=a.pop();return a.length&&(i.siblings=a),i}).reverse())},eD=function(e,n){var a,i,s="",f,g=cC(e);if(g==="")return"";var b=function(M){return M.replace(/%(\w+)/g,"")};if(typeof n=="string"){if(n=e.formatter.get(n),!n)return;n=n[0]}if("preview"in n){var C=ua(n,"preview");if(ss(C,!1))return"";g=C.getOr(g)}a=n.block||n.inline||"span";var k=T6(n.selector);k.length?(k[0].name||(k[0].name=a),a=n.selector,i=QO(k,e)):i=QO([a],e);var _=oc.select(a,i)[0]||i.firstChild;return Pd(n.styles,function(M,F){var U=b(M);U&&oc.setStyle(_,F,U)}),Pd(n.attributes,function(M,F){var U=b(M);U&&oc.setAttrib(_,F,U)}),Pd(n.classes,function(M){var F=b(M);oc.hasClass(_,F)||oc.addClass(_,F)}),e.fire("PreviewFormats"),oc.setStyles(i,{position:"absolute",left:-65535}),e.getBody().appendChild(i),f=oc.getStyle(e.getBody(),"fontSize",!0),f=/px$/.test(f)?parseInt(f,10):0,Pd(g.split(" "),function(M){var F=oc.getStyle(_,M,!0);if(!(M==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(F)&&(F=oc.getStyle(e.getBody(),M,!0),oc.toHex(F).toLowerCase()==="#ffffff"))&&!(M==="color"&&oc.toHex(F).toLowerCase()==="#000000")){if(M==="font-size"&&/em|%$/.test(F)){if(f===0)return;var U=parseFloat(F)/(/%$/.test(F)?100:1);F=U*f+"px"}M==="border"&&F&&(s+="padding:0 2px;"),s+=M+":"+F+";"}}),e.fire("AfterPreviewFormats"),oc.remove(i),s},tD=function(e){e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(var n=1;n<=6;n++)e.addShortcut("access+"+n,"",["FormatBlock",!1,"h"+n]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},j4=function(e){var n=x6(e),a=Ru(null);return tD(e),f_(e),{get:n.get,has:n.has,register:n.register,unregister:n.unregister,apply:function(i,s,f){hM(e,i,s,f)},remove:function(i,s,f,g){S4(e,i,s,f,g)},toggle:function(i,s,f){B2(e,i,s,f)},match:function(i,s,f,g){return lO(e,i,s,f,g)},closest:function(i){return gM(e,i)},matchAll:function(i,s){return fO(e,i,s)},matchNode:function(i,s,f,g){return dM(e,i,s,f,g)},canApply:function(i){return mM(e,i)},formatChanged:function(i,s,f,g){return vO(e,a,i,s,f,g)},getCssText:At(eD,e)}},q4=function(e){switch(e.toLowerCase()){case"undo":case"redo":case"mcerepaint":case"mcefocus":return!0;default:return!1}},G4=function(e,n,a){var i=Ru(!1),s=function(C){Zm(n,!1,a),n.add({},C)};e.on("init",function(){n.add()}),e.on("BeforeExecCommand",function(C){var k=C.command;q4(k)||(p0(n,a),n.beforeChange())}),e.on("ExecCommand",function(C){var k=C.command;q4(k)||s(C)}),e.on("ObjectResizeStart cut",function(){n.beforeChange()}),e.on("SaveContent ObjectResized blur",s),e.on("dragend",s),e.on("keyup",function(C){var k=C.keyCode;C.isDefaultPrevented()||((k>=33&&k<=36||k>=37&&k<=40||k===45||C.ctrlKey)&&(s(),e.nodeChanged()),(k===46||k===8)&&e.nodeChanged(),i.get()&&n.typing&&Yc(lx(e),n.data[0])===!1&&(e.isDirty()===!1&&(e.setDirty(!0),e.fire("change",{level:n.data[0],lastLevel:null})),e.fire("TypingUndo"),i.set(!1),e.nodeChanged()))}),e.on("keydown",function(C){var k=C.keyCode;if(!C.isDefaultPrevented()){if(k>=33&&k<=36||k>=37&&k<=40||k===45){n.typing&&s(C);return}var _=C.ctrlKey&&!C.altKey||C.metaKey;(k<16||k>20)&&k!==224&&k!==91&&!n.typing&&!_&&(n.beforeChange(),Zm(n,!0,a),n.add({},C),i.set(!0))}}),e.on("mousedown",function(C){n.typing&&s(C)});var f=function(C){return C.inputType==="insertReplacementText"},g=function(C){return C.inputType==="insertText"&&C.data===null},b=function(C){return C.inputType==="insertFromPaste"||C.inputType==="insertFromDrop"};e.on("input",function(C){C.inputType&&(f(C)||g(C)||b(C))&&s(C)}),e.on("AddUndo Undo Redo ClearUndos",function(C){C.isDefaultPrevented()||e.nodeChanged()})},E6=function(e){e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},nD=function(e){var n=sa(),a=Ru(0),i=Ru(0),s={data:[],typing:!1,beforeChange:function(){R2(e,a,n)},add:function(f,g){return aO(e,s,i,a,n,f,g)},undo:function(){return sM(e,s,a,i)},redo:function(){return oO(e,i,s.data)},clear:function(){lM(e,s,i)},reset:function(){iO(e,s)},hasUndo:function(){return fM(e,s,i)},hasRedo:function(){return vM(e,s,i)},transact:function(f){return uO(e,s,a,f)},ignore:function(f){cO(e,a,f)},extra:function(f,g){sO(e,s,i,f,g)}};return Md(e)||G4(e,s,a),E6(e),s},k6=[9,27,qn.HOME,qn.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,qn.DOWN,qn.UP,qn.LEFT,qn.RIGHT].concat(Ln.browser.isFirefox()?[224]:[]),rD="data-mce-placeholder",aD=function(e){return e.type==="keydown"||e.type==="keyup"},yf=function(e){var n=e.keyCode;return n===qn.BACKSPACE||n===qn.DELETE},A6=function(e){if(aD(e)){var n=e.keyCode;return!yf(e)&&(qn.metaKeyPressed(e)||e.altKey||n>=112&&n<=123||rt(k6,n))}else return!1},O6=function(e){return aD(e)&&!(yf(e)||e.type==="keyup"&&e.keyCode===229)},D6=function(e,n,a){if(Zu(Z.fromDom(n),!1)){var i=a==="",s=n.firstElementChild;return s?e.getStyle(n.firstElementChild,"padding-left")||e.getStyle(n.firstElementChild,"padding-right")?!1:i?!e.isBlock(s):a===s.nodeName.toLowerCase():!0}else return!1},R6=function(e){var n=e.dom,a=iu(e),i=ey(e),s=function(f,g){if(!A6(f)){var b=e.getBody(),C=O6(f)?!1:D6(n,b,a),k=n.getAttrib(b,rD)!=="";(k!==C||g)&&(n.setAttrib(b,rD,C?i:null),n.setAttrib(b,"aria-placeholder",C?i:null),qC(e,C),e.on(C?"keydown":"keyup",s),e.off(C?"keyup":"keydown",s))}};i&&e.on("init",function(f){s(f,!0),e.on("change SetContent ExecCommand",s),e.on("paste",function(g){return sn.setEditorTimeout(e,function(){return s(g)})})})},B6=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,Wo=function(e){return B6.test(e)},ng=function(e,n){return Cu(Z.fromDom(n),iC(e))},oD=function(e){return Fa.DOM.getStyle(e,"direction",!0)==="rtl"||Wo(e.textContent)},wf=function(e,n,a){return dn(Fa.DOM.getParents(a.container(),"*",n),e)},Nd=function(e,n,a){var i=wf(e,n,a);return te.from(i[i.length-1])},_6=function(e,n,a){var i=zs(n,e),s=zs(a,e);return i&&i===s},M6=function(e){return nb(e)||up(e)},Jc=function(e,n){if(!n)return n;var a=n.container(),i=n.offset();return e?Vv(a)?gn(a.nextSibling)?Ge(a.nextSibling,0):Ge.after(a):nb(n)?Ge(a,i+1):n:Vv(a)?gn(a.previousSibling)?Ge(a.previousSibling,a.previousSibling.data.length):Ge.before(a):up(n)?Ge(a,i-1):n},iD=At(Jc,!0),Ah=At(Jc,!1),F6=function(e){return function(n){return va(e,Z.fromDom(n.dom.parentNode))}},uD=function(e){return Ta(e)||Kf(e)},z2=function(e,n){return os(e,n)?Eg(n,uD,F6(e)):te.none()},K4=function(e){var n=e.getBody(),a=n.firstChild&&e.dom.isBlock(n.firstChild)?n.firstChild:n;e.selection.setCursorLocation(a,0)},X4=function(e){e.dom.isEmpty(e.getBody())&&(e.setContent(""),K4(e))},Y4=function(e,n,a){return xu(Pu(a),Us(a),function(i,s){var f=Jc(!0,i),g=Jc(!1,s),b=Jc(!1,n);return e?Hs(a,b).exists(function(C){return C.isEqual(g)&&n.isEqual(f)}):Vs(a,b).exists(function(C){return C.isEqual(f)&&n.isEqual(g)})}).getOr(!0)},P6=function(e,n){return{block:e,position:n}},N6=function(e,n){return{from:e,to:n}},J4=function(e,n){var a=Z.fromDom(e),i=Z.fromDom(n.container());return z2(a,i).map(function(s){return P6(s,n)})},zl=function(e){return va(e.from.block,e.to.block)===!1},I6=function(e){return _a(e.from.block).bind(function(n){return _a(e.to.block).filter(function(a){return va(n,a)})}).isSome()},$6=function(e){return Ua(e.from.block.dom)===!1&&Ua(e.to.block.dom)===!1},z6=function(e,n,a){return Ho(a.position.getNode())&&Zu(a.block)===!1?vv(!1,a.block.dom).bind(function(i){return i.isEqual(a.position)?wc(n,e,i).bind(function(s){return J4(e,s)}):te.some(a)}).getOr(a):a},L2=function(e,n,a){var i=J4(e,Ge.fromRangeStart(a)),s=i.bind(function(f){return wc(n,e,f.position).bind(function(g){return J4(e,g).map(function(b){return z6(e,n,b)})})});return xu(i,s,N6).filter(function(f){return zl(f)&&I6(f)&&$6(f)})},L6=function(e,n,a){return a.collapsed?L2(e,n,a):te.none()},cD=function(e){var n=Su(e);return Po(n,Fc).fold(Y(n),function(a){return n.slice(0,a)})},Z4=function(e){var n=cD(e);return Ze(n,_o),n},Q4=function(e,n){var a=Fl(n,e);return ra(a.reverse(),function(i){return Zu(i)}).each(_o)},H6=function(e){return dn(Wd(e),function(n){return!Zu(n)}).length===0},V6=function(e,n,a,i){if(Zu(a))return Rd(a),Pu(a.dom);H6(i)&&Zu(n)&&pi(i,Z.fromTag("br"));var s=Vs(a.dom,Ge.before(i.dom));return Ze(Z4(n),function(f){pi(i,f)}),Q4(e,n),s},rg=function(e,n,a){if(Zu(a))return _o(a),Zu(n)&&Rd(n),Pu(n.dom);var i=Us(a.dom);return Ze(Z4(n),function(s){bi(a,s)}),Q4(e,n),i},U6=function(e,n){var a=Fl(n,e);return te.from(a[a.length-1])},W6=function(e,n){return os(n,e)?U6(n,e):te.none()},sD=function(e,n){vv(e,n.dom).map(function(a){return a.getNode()}).map(Z.fromDom).filter(vs).each(_o)},lD=function(e,n,a){return sD(!0,n),sD(!1,a),W6(n,a).fold(At(rg,e,n,a),At(V6,e,n,a))},fD=function(e,n,a,i){return n?lD(e,i,a):lD(e,a,i)},wx=function(e,n){var a=Z.fromDom(e.getBody()),i=L6(a.dom,n,e.selection.getRng()).bind(function(s){return fD(a,n,s.from.block,s.to.block)});return i.each(function(s){e.selection.setRng(s.toRange())}),i.isSome()},j6=function(e,n){var a=n.getRng();return xu(z2(e,Z.fromDom(a.startContainer)),z2(e,Z.fromDom(a.endContainer)),function(i,s){return va(i,s)===!1?(a.deleteContents(),fD(e,!0,i,s).each(function(f){n.setRng(f.toRange())}),!0):!1}).getOr(!1)},vD=function(e,n){var a=Z.fromDom(n),i=At(va,e);return qf(a,Nc,i).isSome()},q6=function(e,n){return vD(e,n.startContainer)||vD(e,n.endContainer)},G6=function(e,n){var a=Vs(e.dom,Ge.fromRangeStart(n)).isNone(),i=Hs(e.dom,Ge.fromRangeEnd(n)).isNone();return!q6(e,n)&&a&&i},K6=function(e){return e.setContent(""),e.selection.setCursorLocation(),!0},X6=function(e){var n=Z.fromDom(e.getBody()),a=e.selection.getRng();return G6(n,a)?K6(e):j6(n,e.selection)},ag=function(e,n){return e.selection.isCollapsed()?!1:X6(e)},Y6=cs,ek=Ua,Id=function(e,n,a,i,s){return te.from(n._selectionOverrides.showCaret(e,a,i,s))},J6=function(e){var n=e.ownerDocument.createRange();return n.selectNode(e),n},E0=function(e,n){var a=e.fire("BeforeObjectSelected",{target:n});return a.isDefaultPrevented()?te.none():te.some(J6(n))},dD=function(e,n,a){var i=h1(1,e.getBody(),n),s=Ge.fromRangeStart(i),f=s.getNode();if(sd(f))return Id(1,e,f,!s.isAtEnd(),!1);var g=s.getNode(!0);if(sd(g))return Id(1,e,g,!1,!1);var b=e.dom.getParent(s.getNode(),function(C){return ek(C)||Y6(C)});return sd(b)?Id(1,e,b,!1,a):te.none()},$d=function(e,n,a){return n.collapsed?dD(e,n,a).getOr(n):n},Oh=function(e){return wv(e)||Od(e)},Cx=function(e){return vf(e)||Dd(e)},Sx=function(e,n){gn(n)&&n.data.length===0&&e.remove(n)},og=function(e,n,a,i,s,f){return Id(i,e,f.getNode(!s),s,!0).each(function(g){if(n.collapsed){var b=n.cloneRange();s?b.setEnd(g.startContainer,g.startOffset):b.setStart(g.endContainer,g.endOffset),b.deleteContents()}else n.deleteContents();e.selection.setRng(g)}),Sx(e.dom,a),!0},Dh=function(e,n){var a=e.selection.getRng();if(!gn(a.commonAncestorContainer))return!1;var i=n?Ki.Forwards:Ki.Backwards,s=lo(e.getBody()),f=At(vy,n?s.next:s.prev),g=n?Oh:Cx,b=Om(i,e.getBody(),a),C=Jc(n,f(b));if(!C||!b1(b,C))return!1;if(g(C))return og(e,a,b.getNode(),i,n,C);var k=f(C);return k&&g(k)&&b1(C,k)?og(e,a,b.getNode(),i,n,k):!1},Rh=function(e,n){return Dh(e,n)},xx=function(e){return Nc(Z.fromDom(e))||Kf(Z.fromDom(e))},Zc=il.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),tk=function(e,n){var a=n.getNode(e===!1),i=e?"after":"before";return Mn(a)&&a.getAttribute("data-mce-caret")===i},nk=function(e,n,a,i){var s=function(f){return ip(Z.fromDom(f))&&!Ls(a,i,e)};return fy(!n,a).fold(function(){return fy(n,i).fold(_t,s)},s)},rk=function(e,n,a,i){var s=i.getNode(n===!1);return z2(Z.fromDom(e),Z.fromDom(a.getNode())).map(function(f){return Zu(f)?Zc.remove(f.dom):Zc.moveToElement(s)}).orThunk(function(){return te.some(Zc.moveToElement(s))})},ak=function(e,n,a){return wc(n,e,a).bind(function(i){return xx(i.getNode())||nk(e,n,a,i)?te.none():n&&Ua(i.getNode())||n===!1&&Ua(i.getNode(!0))?rk(e,n,a,i):n&&vf(a)||n===!1&&wv(a)?te.some(Zc.moveToPosition(i)):te.none()})},k0=function(e,n){return e&&Ua(n.nextSibling)?te.some(Zc.moveToElement(n.nextSibling)):e===!1&&Ua(n.previousSibling)?te.some(Zc.moveToElement(n.previousSibling)):te.none()},mD=function(e,n,a){return a.fold(function(i){return te.some(Zc.remove(i))},function(i){return te.some(Zc.moveToElement(i))},function(i){return Ls(n,i,e)?te.none():te.some(Zc.moveToPosition(i))})},gD=function(e,n,a){return tk(n,a)?k0(n,a.getNode(n===!1)).fold(function(){return ak(e,n,a)},te.some):ak(e,n,a).bind(function(i){return mD(e,a,i)})},hD=function(e,n,a){var i=h1(n?1:-1,e,a),s=Ge.fromRangeStart(i),f=Z.fromDom(e);return n===!1&&vf(s)?te.some(Zc.remove(s.getNode(!0))):n&&wv(s)?te.some(Zc.remove(s.getNode())):n===!1&&wv(s)&&o0(f,s)?S3(f,s).map(function(g){return Zc.remove(g.getNode())}):n&&vf(s)&&lr(f,s)?x3(f,s).map(function(g){return Zc.remove(g.getNode())}):gD(e,n,s)},Tx=function(e,n){return function(a){return e._selectionOverrides.hideFakeCaret(),Gn(e,n,Z.fromDom(a)),!0}},pD=function(e,n){return function(a){var i=n?Ge.before(a):Ge.after(a);return e.selection.setRng(i.toRange()),!0}},bD=function(e){return function(n){return e.selection.setRng(n.toRange()),!0}},ok=function(e,n){return te.from(uh(e.getBody(),n))},yD=function(e,n){var a=e.selection.getNode();return ok(e,a).filter(Ua).fold(function(){return hD(e.getBody(),n,e.selection.getRng()).exists(function(i){return i.fold(Tx(e,n),pD(e,n),bD(e))})},Kt)},zd=function(e){Ze($u(e,".mce-offscreen-selection"),_o)},wD=function(e,n){var a=e.selection.getNode();if(Ua(a)&&!wg(a)){var i=ok(e,a.parentNode).filter(Ua);return i.fold(function(){return zd(Z.fromDom(e.getBody())),Gn(e,n,Z.fromDom(e.selection.getNode())),X4(e),!0},Kt)}return!1},ik=function(e){var n=e.dom,a=e.selection,i=uh(e.getBody(),a.getNode());if(cs(i)&&n.isBlock(i)&&n.isEmpty(i)){var s=n.create("br",{"data-mce-bogus":"1"});n.setHTML(i,""),i.appendChild(s),a.setRng(Ge.before(s).toRange())}return!0},Cf=function(e,n){return e.selection.isCollapsed()?yD(e,n):wD(e,n)},Ll=function(e,n){var a=Ge.fromRangeStart(e.selection.getRng());return wc(n,e.getBody(),a).filter(function(i){return n?p3(i):f2(i)}).bind(function(i){return te.from(g1(n?0:-1,i))}).exists(function(i){return e.selection.select(i),!0})},Ex=function(e,n){return e.selection.isCollapsed()?Ll(e,n):!1},A0=gn,CD=function(e){return A0(e)&&e.data[0]===Wa},SD=function(e){return A0(e)&&e.data[e.data.length-1]===Wa},xD=function(e){return e.ownerDocument.createTextNode(Wa)},Z6=function(e){if(A0(e.previousSibling))return SD(e.previousSibling)||e.previousSibling.appendData(Wa),e.previousSibling;if(A0(e))return CD(e)||e.insertData(0,Wa),e;var n=xD(e);return e.parentNode.insertBefore(n,e),n},Q6=function(e){if(A0(e.nextSibling))return CD(e.nextSibling)||e.nextSibling.insertData(0,Wa),e.nextSibling;if(A0(e))return SD(e)||e.appendData(Wa),e;var n=xD(e);return e.nextSibling?e.parentNode.insertBefore(n,e.nextSibling):e.parentNode.appendChild(n),n},kx=function(e,n){return e?Z6(n):Q6(n)},eF=At(kx,!0),tF=At(kx,!1),TD=function(e,n){return gn(e.container())?kx(n,e.container()):kx(n,e.getNode())},ED=function(e,n){var a=n.get();return a&&e.container()===a&&Vv(a)},H2=function(e,n){return n.fold(function(a){cd(e.get());var i=eF(a);return e.set(i),te.some(Ge(i,i.length-1))},function(a){return Pu(a).map(function(i){if(ED(i,e))return Ge(e.get(),1);cd(e.get());var s=TD(i,!0);return e.set(s),Ge(s,1)})},function(a){return Us(a).map(function(i){if(ED(i,e))return Ge(e.get(),e.get().length-1);cd(e.get());var s=TD(i,!1);return e.set(s),Ge(s,s.length-1)})},function(a){cd(e.get());var i=tF(a);return e.set(i),te.some(Ge(i,1))})},Ax=function(e,n){for(var a=0;a<e.length;a++){var i=e[a].apply(null,n);if(i.isSome())return i}return te.none()},Hu=il.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),kD=function(e,n){var a=zs(n,e);return a||e},nF=function(e,n,a){var i=iD(a),s=kD(n,i.container());return Nd(e,s,i).fold(function(){return Hs(s,i).bind(At(Nd,e,s)).map(function(f){return Hu.before(f)})},te.none)},AD=function(e,n){return dd(e,n)===null},uk=function(e,n,a){return Nd(e,n,a).filter(At(AD,n))},ck=function(e,n,a){var i=Ah(a);return uk(e,n,i).bind(function(s){var f=Vs(s,i);return f.isNone()?te.some(Hu.start(s)):te.none()})},OD=function(e,n,a){var i=iD(a);return uk(e,n,i).bind(function(s){var f=Hs(s,i);return f.isNone()?te.some(Hu.end(s)):te.none()})},DD=function(e,n,a){var i=Ah(a),s=kD(n,i.container());return Nd(e,s,i).fold(function(){return Vs(s,i).bind(At(Nd,e,s)).map(function(f){return Hu.after(f)})},te.none)},Ox=function(e){return oD(sk(e))===!1},kv=function(e,n,a){var i=Ax([nF,ck,OD,DD],[e,n,a]);return i.filter(Ox)},sk=function(e){return e.fold(Dn,Dn,Dn,Dn)},Sf=function(e){return e.fold(Y("before"),Y("start"),Y("end"),Y("after"))},Qc=function(e){return e.fold(Hu.before,Hu.before,Hu.after,Hu.after)},O0=function(e){return e.fold(Hu.start,Hu.start,Hu.end,Hu.end)},RD=function(e,n){return Sf(e)===Sf(n)&&sk(e)===sk(n)},Dx=function(e,n,a,i,s,f){return xu(Nd(n,a,i),Nd(n,a,s),function(g,b){return g!==b&&_6(a,g,b)?Hu.after(e?g:b):f}).getOr(f)},BD=function(e,n){return e.fold(Kt,function(a){return!RD(a,n)})},_D=function(e,n,a,i,s){var f=Jc(e,s),g=wc(e,a,f).map(At(Jc,e)),b=g.fold(function(){return i.map(Qc)},function(C){return kv(n,a,C).map(At(Dx,e,n,a,f,C)).filter(At(BD,i))});return b.filter(Ox)},MD=function(e,n){return e?n.fold(Rr(te.some,Hu.start),te.none,Rr(te.some,Hu.after),te.none):n.fold(te.none,Rr(te.some,Hu.before),te.none,Rr(te.some,Hu.end))},Rx=function(e,n,a,i){var s=Jc(e,i),f=kv(n,a,s);return kv(n,a,s).bind(At(MD,e)).orThunk(function(){return _D(e,n,a,f,i)})};At(Rx,!1),At(Rx,!0);var FD=function(e){return bt(e.selection.getSel().modify)},lk=function(e,n,a){var i=e?1:-1;return n.setRng(Ge(a.container(),a.offset()+i).toRange()),n.getSel().modify("move",e?"forward":"backward","word"),!0},Bx=function(e,n){var a=n.selection.getRng(),i=e?Ge.fromRangeEnd(a):Ge.fromRangeStart(a);return FD(n)?e&&nb(i)?lk(!0,n.selection,i):!e&&up(i)?lk(!1,n.selection,i):!1:!1},Ys;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(Ys||(Ys={}));var D0=function(e,n){return e===Ki.Backwards?Ga(n):n},rF=function(e,n,a){return e===Ki.Forwards?n.next(a):n.prev(a)},aF=function(e,n,a,i){return Ho(i.getNode(n===Ki.Forwards))?Ys.Br:Ls(a,i)===!1?Ys.Block:Ys.Wrap},PD=function(e,n,a,i){for(var s=lo(a),f=i,g=[];f;){var b=rF(n,s,f);if(!b)break;if(Ho(b.getNode(!1)))return n===Ki.Forwards?{positions:D0(n,g).concat([b]),breakType:Ys.Br,breakAt:te.some(b)}:{positions:D0(n,g),breakType:Ys.Br,breakAt:te.some(b)};if(!b.isVisible()){f=b;continue}if(e(f,b)){var C=aF(a,n,f,b);return{positions:D0(n,g),breakType:C,breakAt:te.some(b)}}g.push(b),f=b}return{positions:D0(n,g),breakType:Ys.Eol,breakAt:te.none()}},ND=function(e,n,a,i){return n(a,i).breakAt.map(function(s){var f=n(a,s).positions;return e===Ki.Backwards?f.concat(s):[s].concat(f)}).getOr([])},_x=function(e,n){return Ur(e,function(a,i){return a.fold(function(){return te.some(i)},function(s){return xu(Ca(s.getClientRects()),Ca(i.getClientRects()),function(f,g){var b=Math.abs(n-f.left),C=Math.abs(n-g.left);return C<=b?i:s}).or(a)})},te.none())},ID=function(e,n){return Ca(n.getClientRects()).bind(function(a){return _x(e,a.left)})},V2=At(PD,Ge.isAbove,-1),Bh=At(PD,Ge.isBelow,1),oF=At(ND,-1,V2),iF=At(ND,1,Bh),uF=function(e,n){return V2(e,n).breakAt.isNone()},cF=function(e,n){return Bh(e,n).breakAt.isNone()},sF=function(e){return Pu(e).map(function(n){return[n].concat(Bh(e,n).positions)}).getOr([])},lF=function(e){return Us(e).map(function(n){return V2(e,n).positions.concat(n)}).getOr([])},fF=function(e){var n=function(i){return kn(i,function(s){var f=nf(s);return f.node=e,f})};if(Mn(e))return n(e.getClientRects());if(gn(e)){var a=e.ownerDocument.createRange();return a.setStart(e,0),a.setEnd(e,e.data.length),n(a.getClientRects())}},R0=function(e){return vi(e,fF)},Av;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(Av||(Av={}));var fk=function(e,n,a,i){for(;i=km(i,e,Og,n);)if(a(i))return},$D=function(e,n,a,i,s,f){var g=0,b=[],C=function(M){var F=R0([M]);e===-1&&(F=F.reverse());for(var U=0;U<F.length;U++){var K=F[U];if(!a(K,k)){if(b.length>0&&n(K,Ha(b))&&g++,K.line=g,s(K))return!0;b.push(K)}}},k=Ha(f.getClientRects());if(!k)return b;var _=f.getNode();return C(_),fk(e,i,C,_),b},vF=function(e,n){return n.line>e},dF=function(e,n){return n.line===e},mF=At($D,Av.Up,uv,ec),zD=At($D,Av.Down,ec,uv),gF=function(e,n,a,i){var s=lo(n),f,g,b,C,k=[],_=0,M=function(j){return Ha(j.getClientRects())};e===1?(f=s.next,g=ec,b=uv,C=Ge.after(i)):(f=s.prev,g=uv,b=ec,C=Ge.before(i));var F=M(C);do if(!!C.isVisible()){var U=M(C);if(!b(U,F)){k.length>0&&g(U,Ha(k))&&_++;var K=nf(U);if(K.position=C,K.line=_,a(K))return k;k.push(K)}}while(C=f(C));return k},LD=function(e){return function(n){return vF(e,n)}},U2=function(e){return function(n){return dF(e,n)}},hF=Ua,HD=km,vk=function(e,n){return Math.abs(e.left-n)},dk=function(e,n){return Math.abs(e.right-n)},VD=function(e,n){return e>=n.left&&e<=n.right},pF=function(e,n){return e>=n.top&&e<=n.bottom},Mx=function(e,n){return mi(e,function(a,i){var s=Math.min(vk(a,n),dk(a,n)),f=Math.min(vk(i,n),dk(i,n));return VD(n,i)?i:VD(n,a)?a:f===s&&hF(i.node)||f<s?i:a})},W2=function(e,n,a,i,s){var f=HD(i,e,Og,n,!s);do if(!f||a(f))return;while(f=HD(f,e,Og,n))},Fx=function(e,n,a){a===void 0&&(a=!0);var i=[],s=function(f,g){var b=dn(R0([g]),function(C){return!f(C,n)});return i=i.concat(b),b.length===0};return i.push(n),W2(Av.Up,e,At(s,uv),n.node,a),W2(Av.Down,e,At(s,ec),n.node,a),i},bF=function(e){return dn(mn(e.getElementsByTagName("*")),af)},yF=function(e,n){return{node:e.node,before:vk(e,n)<dk(e,n)}},Px=function(e,n,a){var i=R0(bF(e)),s=dn(i,At(pF,a)),f=Mx(s,n);if(f){var g=!dc(f.node)&&!$n(f.node);if(f=Mx(Fx(e,f,g),n),f&&af(f.node))return yF(f,n)}return null},Ld=function(e,n){e.selection.setRng(n),V1(e,e.selection.getRng())},mk=function(e,n,a){return te.some($d(e,n,a))},UD=function(e,n,a,i,s,f){var g=n===Ki.Forwards,b=lo(e.getBody()),C=At(vy,g?b.next:b.prev),k=g?i:s;if(!a.collapsed){var _=qp(a);if(f(_))return Id(n,e,_,n===Ki.Backwards,!1)}var M=Om(n,e.getBody(),a);if(k(M))return E0(e,M.getNode(!g));var F=Jc(g,C(M)),U=vw(a);if(!F)return U?te.some(a):te.none();if(k(F))return Id(n,e,F.getNode(!g),g,!1);var K=C(F);return K&&k(K)&&b1(F,K)?Id(n,e,K.getNode(!g),g,!1):U?mk(e,F.toRange(),!1):te.none()},WD=function(e,n,a,i,s,f){var g=Om(n,e.getBody(),a),b=Ha(g.getClientRects()),C=n===Av.Down;if(!b)return te.none();var k=C?zD:mF,_=k(e.getBody(),LD(1),g),M=dn(_,U2(1)),F=b.left,U=Mx(M,F);if(U&&f(U.node)){var K=Math.abs(F-U.left),j=Math.abs(F-U.right);return Id(n,e,U.node,K<j,!1)}var J;if(i(g)?J=g.getNode():s(g)?J=g.getNode(!0):J=qp(a),J){var fe=gF(n,e.getBody(),LD(1),J),ve=Mx(dn(fe,U2(1)),F);if(ve||(ve=Ha(dn(fe,U2(0))),ve))return mk(e,ve.position.toRange(),!1)}return M.length===0?gk(e,C).filter(C?s:i).map(function(ae){return $d(e,ae.toRange(),!1)}):te.none()},gk=function(e,n){var a=e.selection.getRng(),i=e.getBody();if(n){var s=Ge.fromRangeEnd(a),f=Bh(i,s);return Yo(f.positions)}else{var s=Ge.fromRangeStart(a),f=V2(i,s);return Ca(f.positions)}},jD=function(e,n,a){return gk(e,n).filter(a).exists(function(i){return e.selection.setRng(i.toRange()),!0})},Nx=function(e,n){var a=e.dom.createRng();a.setStart(n.container(),n.offset()),a.setEnd(n.container(),n.offset()),e.selection.setRng(a)},qD=function(e,n){e?n.setAttribute("data-mce-selected","inline-boundary"):n.removeAttribute("data-mce-selected")},GD=function(e,n,a){return H2(n,a).map(function(i){return Nx(e,i),a})},wF=function(e,n,a){var i=e.getBody(),s=Ge.fromRangeStart(e.selection.getRng()),f=At(ng,e),g=Rx(a,f,i,s);return g.bind(function(b){return GD(e,n,b)})},CF=function(e,n,a){var i=kn($u(Z.fromDom(n.getRoot()),'*[data-mce-selected="inline-boundary"]'),function(g){return g.dom}),s=dn(i,e),f=dn(a,e);Ze(Ka(s,f),At(qD,!1)),Ze(Ka(f,s),At(qD,!0))},SF=function(e,n){if(e.selection.isCollapsed()&&e.composing!==!0&&n.get()){var a=Ge.fromRangeStart(e.selection.getRng());Ge.isTextPosition(a)&&M6(a)===!1&&(Nx(e,uy(n.get(),a)),n.set(null))}},Hl=function(e,n,a,i){if(n.selection.isCollapsed()){var s=dn(i,e);Ze(s,function(f){var g=Ge.fromRangeStart(n.selection.getRng());kv(e,n.getBody(),g).bind(function(b){return GD(n,a,b)})})}},Ix=function(e,n,a){return rf(e)?wF(e,n,a).isSome():!1},hk=function(e,n,a){return rf(n)?Bx(e,n):!1},KD=function(e){var n=Ru(null),a=At(ng,e);return e.on("NodeChange",function(i){rf(e)&&!(Ln.browser.isIE()&&i.initial)&&(CF(a,e.dom,i.parents),SF(e,n),Hl(a,e,n,i.parents))}),n},xF=At(hk,!0),XD=At(hk,!1),$x=function(e,n,a){if(rf(e)){var i=gk(e,n).getOrThunk(function(){var s=e.selection.getRng();return n?Ge.fromRangeEnd(s):Ge.fromRangeStart(s)});return kv(At(ng,e),e.getBody(),i).exists(function(s){var f=Qc(s);return H2(a,f).exists(function(g){return Nx(e,g),!0})})}else return!1},YD=function(e,n){var a=document.createRange();return a.setStart(e.container(),e.offset()),a.setEnd(n.container(),n.offset()),a},TF=function(e){return xu(Pu(e),Us(e),function(n,a){var i=Jc(!0,n),s=Jc(!1,a);return Hs(e,i).forall(function(f){return f.isEqual(s)})}).getOr(!0)},JD=function(e,n){return function(a){return H2(n,a).exists(function(i){return Nx(e,i),!0})}},ZD=function(e,n,a,i){var s=e.getBody(),f=At(ng,e);e.undoManager.ignore(function(){e.selection.setRng(YD(a,i)),e.execCommand("Delete"),kv(f,s,Ge.fromRangeStart(e.selection.getRng())).map(O0).map(JD(e,n))}),e.nodeChanged()},B0=function(e,n){var a=zs(n,e);return a||e},QD=function(e,n,a,i){var s=B0(e.getBody(),i.container()),f=At(ng,e),g=kv(f,s,i);return g.bind(function(b){return a?b.fold(Y(te.some(O0(b))),te.none,Y(te.some(Qc(b))),te.none):b.fold(te.none,Y(te.some(Qc(b))),te.none,Y(te.some(O0(b))))}).map(JD(e,n)).getOrThunk(function(){var b=Al(a,s,i),C=b.bind(function(k){return kv(f,s,k)});return xu(g,C,function(){return Nd(f,s,i).exists(function(k){return TF(k)?(Gn(e,a,Z.fromDom(k)),!0):!1})}).orThunk(function(){return C.bind(function(k){return b.map(function(_){return a?ZD(e,n,i,_):ZD(e,n,_,i),!0})})}).getOr(!1)})},j2=function(e,n,a){if(e.selection.isCollapsed()&&rf(e)){var i=Ge.fromRangeStart(e.selection.getRng());return QD(e,n,a,i)}return!1},eR=function(e,n){var a=Fl(n,e);return Po(a,Fc).fold(Y(a),function(i){return a.slice(0,i)})},pk=function(e){return Gd(e)===1},EF=function(e,n,a,i){var s=At(d_,n),f=kn(dn(i,s),function(b){return b.dom});if(f.length===0)Gn(n,e,a);else{var g=v_(a.dom,f);n.selection.setRng(g.toRange())}},kF=function(e,n){var a=Z.fromDom(e.getBody()),i=Z.fromDom(e.selection.getStart()),s=dn(eR(a,i),pk);return Yo(s).exists(function(f){var g=Ge.fromRangeStart(e.selection.getRng());return Y4(n,g,f.dom)&&!m_(f)?(EF(n,e,f,s),!0):!1})},zx=function(e,n){return e.selection.isCollapsed()?kF(e,n):!1},bk=function(e,n,a){return e._selectionOverrides.hideFakeCaret(),Gn(e,n,Z.fromDom(a)),!0},AF=function(e,n){var a=n?Od:Dd,i=n?Ki.Forwards:Ki.Backwards,s=Om(i,e.getBody(),e.selection.getRng());return a(s)?bk(e,n,s.getNode(!n)):te.from(Jc(n,s)).filter(function(f){return a(f)&&b1(s,f)}).exists(function(f){return bk(e,n,f.getNode(!n))})},OF=function(e,n){var a=e.selection.getNode();return $n(a)?bk(e,n,a):!1},ys=function(e,n){return e.selection.isCollapsed()?AF(e,n):OF(e,n)},DF=function(e){return Eg(e,function(n){return cs(n.dom)||Ua(n.dom)}).exists(function(n){return cs(n.dom)})},yk=function(e){var n=parseInt(e,10);return isNaN(n)?0:n},tR=function(e,n){var a=e||cl(n)?"margin":"padding",i=Cr(n,"direction")==="rtl"?"-right":"-left";return a+i},RF=function(e,n,a,i,s,f){var g=tR(a,Z.fromDom(f));if(n==="outdent"){var b=Math.max(0,yk(f.style[g])-i);e.setStyle(f,g,b?b+s:"")}else{var b=yk(f.style[g])+i+s;e.setStyle(f,g,b)}},BF=function(e,n){return No(n,function(a){var i=tR(aC(e),a),s=Tu(a,i).map(yk).getOr(0),f=e.dom.getContentEditable(a.dom);return f!=="false"&&s>0})},nR=function(e){var n=aR(e);return!e.mode.isReadOnly()&&(n.length>1||BF(e,n))},rR=function(e){return Rs(e)||Kf(e)},ic=function(e){return _a(e).exists(rR)},aR=function(e){return dn(au(e.selection.getSelectedBlocks()),function(n){return!rR(n)&&!ic(n)&&DF(n)})},oR=function(e,n){var a=e.dom,i=e.selection,s=e.formatter,f=Tl(e),g=/[a-z%]+$/i.exec(f)[0],b=parseInt(f,10),C=aC(e),k=iu(e);!e.queryCommandState("InsertUnorderedList")&&!e.queryCommandState("InsertOrderedList")&&k===""&&!a.getParent(i.getNode(),a.isBlock)&&s.apply("div"),Ze(aR(e),function(_){RF(a,n,C,b,g,_.dom)})},wk=function(e,n){if(e.selection.isCollapsed()&&nR(e)){var a=e.dom,i=e.selection.getRng(),s=Ge.fromRangeStart(i),f=a.getParent(i.startContainer,a.isBlock);if(f!==null&&Xm(Z.fromDom(f),s))return oR(e,"outdent"),!0}return!1},Lx=function(e,n){e.getDoc().execCommand(n,!1,null)},_F=function(e,n){if(!wk(e)){if(Cf(e,!1))return;if(Rh(e,!1))return;if(j2(e,n,!1))return;if(wx(e,!1))return;if(b2(e))return;if(Ex(e,!1))return;if(ys(e,!1))return;if(ag(e))return;if(zx(e,!1))return;Lx(e,"Delete"),X4(e)}},MF=function(e,n){if(!Cf(e,!0)){if(Rh(e,!0))return;if(j2(e,n,!0))return;if(wx(e,!0))return;if(b2(e))return;if(Ex(e,!0))return;if(ys(e,!0))return;if(ag(e))return;if(zx(e,!0))return;Lx(e,"ForwardDelete")}},FF=function(e,n){e.addCommand("delete",function(){_F(e,n)}),e.addCommand("forwardDelete",function(){MF(e,n)})},ig=5,PF=400,iR=function(e){return e.touches===void 0||e.touches.length!==1?te.none():te.some(e.touches[0])},NF=function(e,n){var a=Math.abs(e.clientX-n.x),i=Math.abs(e.clientY-n.y);return a>ig||i>ig},IF=function(e){var n=sa(),a=Ru(!1),i=Bb(function(s){e.fire("longpress",pn(pn({},s),{type:"longpress"})),a.set(!0)},PF);e.on("touchstart",function(s){iR(s).each(function(f){i.cancel();var g={x:f.clientX,y:f.clientY,target:s.target};i.throttle(s),a.set(!1),n.set(g)})},!0),e.on("touchmove",function(s){i.cancel(),iR(s).each(function(f){n.on(function(g){NF(f,g)&&(n.clear(),a.set(!1),e.fire("longpresscancel"))})})},!0),e.on("touchend touchcancel",function(s){i.cancel(),s.type!=="touchcancel"&&n.get().filter(function(f){return f.target.isEqualNode(s.target)}).each(function(){a.get()?s.preventDefault():e.fire("tap",pn(pn({},s),{type:"tap"}))})},!0)},q2=function(e,n){return cr(e,n.nodeName)},Ck=function(e,n){return gn(n)?!0:Mn(n)?!q2(e,n)&&!nc(n):!1},uR=function(e,n,a){return an(Pn(Z.fromDom(a),Z.fromDom(n)),function(i){return q2(e,i.dom)})},cR=function(e,n){if(gn(n)){if(n.nodeValue.length===0)return!0;if(/^\s+$/.test(n.nodeValue)&&(!n.nextSibling||q2(e,n.nextSibling)))return!0}return!1},sR=function(e){var n=e.dom,a=e.selection,i=e.schema,s=i.getBlockElements(),f=a.getStart(),g=e.getBody(),b,C,k,_=iu(e);if(!(!f||!Mn(f)||!_)){var M=g.nodeName.toLowerCase();if(!(!i.isValidChild(M,_.toLowerCase())||uR(s,g,f))){var F=a.getRng(),U=F.startContainer,K=F.startOffset,j=F.endContainer,J=F.endOffset,fe=Ml(e);for(f=g.firstChild;f;)if(Ck(s,f)){if(cR(s,f)){C=f,f=f.nextSibling,n.remove(C);continue}b||(b=n.create(_,Kg(e)),f.parentNode.insertBefore(b,f),k=!0),C=f,f=f.nextSibling,b.appendChild(C)}else b=null,f=f.nextSibling;k&&fe&&(F.setStart(U,K),F.setEnd(j,J),a.setRng(F),e.nodeChanged())}}},$F=function(e){iu(e)&&e.on("NodeChange",At(sR,e))},G2=function(e){return ul(Z.fromDom(e.getBody()),"*[data-mce-caret]").map(function(n){return n.dom}).getOrNull()},zF=function(e){e.selection.setRng(e.selection.getRng())},lR=function(e,n){n.hasAttribute("data-mce-caret")&&(im(n),zF(e),e.selection.scrollIntoView(n))},LF=function(e,n){var a=G2(e);if(!!a){if(n.type==="compositionstart"){n.preventDefault(),n.stopPropagation(),lR(e,a);return}Yu(a)&&(lR(e,a),e.undoManager.add())}},_0=function(e){e.on("keyup compositionstart",At(LF,e))},fR=Ua,Hd=function(e,n,a){return UD(n,e,a,wv,vf,fR)},HF=function(e,n,a){var i=function(f){return wv(f)||RS(f)},s=function(f){return vf(f)||BS(f)};return WD(n,e,a,i,s,fR)},Sk=function(e){var n=e.dom.create(iu(e));return(!Ln.ie||Ln.ie>=11)&&(n.innerHTML='<br data-mce-bogus="1">'),n},Hx=function(e,n,a){var i=lo(e.getBody()),s=At(vy,n===1?i.next:i.prev);if(a.collapsed&&dE(e)){var f=e.dom.getParent(a.startContainer,"PRE");if(!f)return;var g=s(Ge.fromRangeStart(a));if(!g){var b=Sk(e);n===1?e.$(f).after(b):e.$(f).before(b),e.selection.select(b,!0),e.selection.collapse()}}},VF=function(e,n){var a=n?Ki.Forwards:Ki.Backwards,i=e.selection.getRng();return Hd(a,e,i).orThunk(function(){return Hx(e,a,i),te.none()})},_h=function(e,n){var a=n?1:-1,i=e.selection.getRng();return HF(a,e,i).orThunk(function(){return Hx(e,a,i),te.none()})},vR=function(e,n){return VF(e,n).exists(function(a){return Ld(e,a),!0})},dR=function(e,n){return _h(e,n).exists(function(a){return Ld(e,a),!0})},mR=function(e,n){var a=n?vf:wv;return jD(e,n,a)},gR=function(e){return rt(["figcaption"],yo(e))},hR=function(e){var n=document.createRange();return n.setStartBefore(e.dom),n.setEndBefore(e.dom),n},pR=function(e,n,a){a?bi(e,n):vg(e,n)},UF=function(e,n){var a=Z.fromTag("br");return pR(e,a,n),hR(a)},WF=function(e,n,a,i){var s=Z.fromTag(a),f=Z.fromTag("br");return I(s,i),bi(s,f),pR(e,s,n),hR(f)},bR=function(e,n,a,i){return n===""?UF(e,i):WF(e,i,n,a)},jF=function(e,n){var a=At(va,n);return Eg(Z.fromDom(e.container()),Fc,a).filter(gR)},Mh=function(e,n,a){return n?cF(e.dom,a):uF(e.dom,a)},qF=function(e,n){var a=Z.fromDom(e.getBody()),i=Ge.fromRangeStart(e.selection.getRng()),s=iu(e),f=Kg(e);return jF(i,a).exists(function(){if(Mh(a,n,i)){var g=bR(a,s,f,n);return e.selection.setRng(g),!0}else return!1})},M0=function(e,n){return e.selection.isCollapsed()?qF(e,n):!1},yR=function(e){return kn(e,function(n){return pn({shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0,action:ut},n)})},xk=function(e,n){return n.keyCode===e.keyCode&&n.shiftKey===e.shiftKey&&n.altKey===e.altKey&&n.ctrlKey===e.ctrlKey&&n.metaKey===e.metaKey},Tk=function(e,n){return vi(yR(e),function(a){return xk(a,n)?[a]:[]})},Lr=function(e){for(var n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];return function(){return e.apply(null,n)}},F0=function(e,n){return ra(Tk(e,n),function(a){return a.action()})},wR=function(e,n){var a=n?Ki.Forwards:Ki.Backwards,i=e.selection.getRng();return UD(e,a,i,Od,Dd,$n).exists(function(s){return Ld(e,s),!0})},Vx=function(e,n){var a=n?1:-1,i=e.selection.getRng();return WD(e,a,i,Od,Dd,$n).exists(function(s){return Ld(e,s),!0})},CR=function(e,n){var a=n?Dd:Od;return jD(e,n,a)},GF=function(e,n){return{left:e.left-n,top:e.top-n,right:e.right+n*2,bottom:e.bottom+n*2,width:e.width+n,height:e.height+n}},KF=function(e,n){return vi(n,function(a){var i=GF(nf(a.getBoundingClientRect()),-1);return[{x:i.left,y:e(i),cell:a},{x:i.right,y:e(i),cell:a}]})},XF=function(e,n,a){return Ur(e,function(i,s){return i.fold(function(){return te.some(s)},function(f){var g=Math.sqrt(Math.abs(f.x-n)+Math.abs(f.y-a)),b=Math.sqrt(Math.abs(s.x-n)+Math.abs(s.y-a));return te.some(b<g?s:f)})},te.none())},Ek=function(e,n,a,i,s){var f=$u(Z.fromDom(a),"td,th,caption").map(function(b){return b.dom}),g=dn(KF(e,f),function(b){return n(b,s)});return XF(g,i,s).map(function(b){return b.cell})},YF=function(e){return e.bottom},JF=function(e){return e.top},ZF=function(e,n){return e.y<n},QF=function(e,n){return e.y>n},eP=At(Ek,YF,ZF),tP=At(Ek,JF,QF),nP=function(e,n){return Ca(n.getClientRects()).bind(function(a){return eP(e,a.left,a.top)}).bind(function(a){return ID(lF(a),n)})},rP=function(e,n){return Yo(n.getClientRects()).bind(function(a){return tP(e,a.left,a.top)}).bind(function(a){return ID(sF(a),n)})},SR=function(e,n,a){return a.breakAt.exists(function(i){return e(n,i).breakAt.isSome()})},aP=function(e){return e.breakType===Ys.Wrap&&e.positions.length===0},xR=function(e){return e.breakType===Ys.Br&&e.positions.length===1},TR=function(e,n,a){var i=e(n,a);return aP(i)||!Ho(a.getNode())&&xR(i)?!SR(e,n,i):i.breakAt.isNone()},oP=At(TR,V2),iP=At(TR,Bh),uP=function(e,n,a){var i=Ge.fromRangeStart(n);return vv(!e,a).exists(function(s){return s.isEqual(i)})},cP=function(e,n,a,i){var s=e.selection.getRng(),f=n?1:-1;return wC()&&uP(n,s,a)?(Id(f,e,a,!n,!1).each(function(g){Ld(e,g)}),!0):!1},sP=function(e,n,a){return nP(n,a).orThunk(function(){return Ca(a.getClientRects()).bind(function(i){return _x(oF(e,Ge.before(n)),i.left)})}).getOr(Ge.before(n))},lP=function(e,n,a){return rP(n,a).orThunk(function(){return Ca(a.getClientRects()).bind(function(i){return _x(iF(e,Ge.after(n)),i.left)})}).getOr(Ge.after(n))},ER=function(e,n){var a=n.getNode(e);return Mn(a)&&a.nodeName==="TABLE"?te.some(a):te.none()},fP=function(e,n,a,i){var s=iu(n);s?n.undoManager.transact(function(){var f=Z.fromTag(s);I(f,Kg(n)),bi(f,Z.fromTag("br")),e?is(Z.fromDom(a),f):pi(Z.fromDom(a),f);var g=n.dom.createRng();g.setStart(f.dom,0),g.setEnd(f.dom,0),Ld(n,g)}):Ld(n,i.toRange())},kR=function(e,n,a){var i=ER(!!n,a),s=n===!1;i.fold(function(){return Ld(e,a.toRange())},function(f){return vv(s,e.getBody()).filter(function(g){return g.isEqual(a)}).fold(function(){return Ld(e,a.toRange())},function(g){return fP(n,e,f,a)})})},vP=function(e,n,a,i){var s=e.selection.getRng(),f=Ge.fromRangeStart(s),g=e.getBody();if(!n&&oP(i,f)){var b=sP(g,a,f);return kR(e,n,b),!0}else if(n&&iP(i,f)){var b=lP(g,a,f);return kR(e,n,b),!0}else return!1},AR=function(e,n,a){return te.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(function(i){return te.from(e.dom.getParent(i,"table")).map(function(s){return a(e,n,s,i)})}).getOr(!1)},OR=function(e,n){return AR(e,n,cP)},kk=function(e,n){return AR(e,n,vP)},dP=function(e,n,a){var i=fn().os;F0([{keyCode:qn.RIGHT,action:Lr(vR,e,!0)},{keyCode:qn.LEFT,action:Lr(vR,e,!1)},{keyCode:qn.UP,action:Lr(dR,e,!1)},{keyCode:qn.DOWN,action:Lr(dR,e,!0)},{keyCode:qn.RIGHT,action:Lr(OR,e,!0)},{keyCode:qn.LEFT,action:Lr(OR,e,!1)},{keyCode:qn.UP,action:Lr(kk,e,!1)},{keyCode:qn.DOWN,action:Lr(kk,e,!0)},{keyCode:qn.RIGHT,action:Lr(wR,e,!0)},{keyCode:qn.LEFT,action:Lr(wR,e,!1)},{keyCode:qn.UP,action:Lr(Vx,e,!1)},{keyCode:qn.DOWN,action:Lr(Vx,e,!0)},{keyCode:qn.RIGHT,action:Lr(Ix,e,n,!0)},{keyCode:qn.LEFT,action:Lr(Ix,e,n,!1)},{keyCode:qn.RIGHT,ctrlKey:!i.isOSX(),altKey:i.isOSX(),action:Lr(xF,e,n)},{keyCode:qn.LEFT,ctrlKey:!i.isOSX(),altKey:i.isOSX(),action:Lr(XD,e,n)},{keyCode:qn.UP,action:Lr(M0,e,!1)},{keyCode:qn.DOWN,action:Lr(M0,e,!0)}],a).each(function(s){a.preventDefault()})},mP=function(e,n){e.on("keydown",function(a){a.isDefaultPrevented()===!1&&dP(e,n,a)})},DR=function(e,n,a){F0([{keyCode:qn.BACKSPACE,action:Lr(wk,e,!1)},{keyCode:qn.BACKSPACE,action:Lr(Cf,e,!1)},{keyCode:qn.DELETE,action:Lr(Cf,e,!0)},{keyCode:qn.BACKSPACE,action:Lr(Rh,e,!1)},{keyCode:qn.DELETE,action:Lr(Rh,e,!0)},{keyCode:qn.BACKSPACE,action:Lr(j2,e,n,!1)},{keyCode:qn.DELETE,action:Lr(j2,e,n,!0)},{keyCode:qn.BACKSPACE,action:Lr(b2,e,!1)},{keyCode:qn.DELETE,action:Lr(b2,e,!0)},{keyCode:qn.BACKSPACE,action:Lr(Ex,e,!1)},{keyCode:qn.DELETE,action:Lr(Ex,e,!0)},{keyCode:qn.BACKSPACE,action:Lr(ys,e,!1)},{keyCode:qn.DELETE,action:Lr(ys,e,!0)},{keyCode:qn.BACKSPACE,action:Lr(ag,e,!1)},{keyCode:qn.DELETE,action:Lr(ag,e,!0)},{keyCode:qn.BACKSPACE,action:Lr(wx,e,!1)},{keyCode:qn.DELETE,action:Lr(wx,e,!0)},{keyCode:qn.BACKSPACE,action:Lr(zx,e,!1)},{keyCode:qn.DELETE,action:Lr(zx,e,!0)}],a).each(function(i){a.preventDefault()})},RR=function(e,n){F0([{keyCode:qn.BACKSPACE,action:Lr(ik,e)},{keyCode:qn.DELETE,action:Lr(ik,e)}],n)},Ux=function(e,n){e.on("keydown",function(a){a.isDefaultPrevented()===!1&&DR(e,n,a)}),e.on("keyup",function(a){a.isDefaultPrevented()===!1&&RR(e,a)})},BR=function(e){for(;e;){if(e.nodeType===1||e.nodeType===3&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}},Fh=function(e,n){var a,i=n,s=e.dom,f=e.schema.getMoveCaretBeforeOnEnterElements();if(!!n){if(/^(LI|DT|DD)$/.test(n.nodeName)){var g=BR(n.firstChild);g&&/^(UL|OL|DL)$/.test(g.nodeName)&&n.insertBefore(s.doc.createTextNode(Ci),n.firstChild)}var b=s.createRng();if(n.normalize(),n.hasChildNodes()){for(var C=new wi(n,n);a=C.current();){if(gn(a)){b.setStart(a,0),b.setEnd(a,0);break}if(f[a.nodeName.toLowerCase()]){b.setStartBefore(a),b.setEndBefore(a);break}i=a,a=C.next()}a||(b.setStart(i,0),b.setEnd(i,0))}else Ho(n)?n.nextSibling&&s.isBlock(n.nextSibling)?(b.setStartBefore(n),b.setEndBefore(n)):(b.setStartAfter(n),b.setEndAfter(n)):(b.setStart(n,0),b.setEnd(n,0));e.selection.setRng(b),V1(e,b)}},Ak=function(e,n){var a=e.getRoot(),i,s;for(i=n;i!==a&&e.getContentEditable(i)!=="false";)e.getContentEditable(i)==="true"&&(s=i),i=i.parentNode;return i!==a?s:a},Wx=function(e){return te.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock))},gP=function(e){return Wx(e).fold(Y(""),function(n){return n.nodeName.toUpperCase()})},_R=function(e){return Wx(e).filter(function(n){return Kf(Z.fromDom(n))}).isSome()},P0=function(e,n){return e.firstChild&&e.firstChild.nodeName===n},MR=function(e){var n;return((n=e.parentNode)===null||n===void 0?void 0:n.firstChild)===e},jx=function(e,n){return e&&e.parentNode&&e.parentNode.nodeName===n},FR=function(e){return e&&/^(OL|UL|LI)$/.test(e.nodeName)},Ok=function(e){return FR(e)&&FR(e.parentNode)},qx=function(e){var n=e.parentNode;return/^(LI|DT|DD)$/.test(n.nodeName)?n:e},Gx=function(e,n,a){for(var i=e[a?"firstChild":"lastChild"];i&&!Mn(i);)i=i[a?"nextSibling":"previousSibling"];return i===n},hP=function(e,n,a,i,s){var f=e.dom,g=e.selection.getRng();if(a!==e.getBody()){Ok(a)&&(s="LI");var b=s?n(s):f.create("BR");if(Gx(a,i,!0)&&Gx(a,i,!1))if(jx(a,"LI")){var C=qx(a);f.insertAfter(b,C),MR(a)?f.remove(C):f.remove(a)}else f.replace(b,a);else if(Gx(a,i,!0))jx(a,"LI")?(f.insertAfter(b,qx(a)),b.appendChild(f.doc.createTextNode(" ")),b.appendChild(a)):a.parentNode.insertBefore(b,a),f.remove(i);else if(Gx(a,i,!1))f.insertAfter(b,qx(a)),f.remove(i);else{a=qx(a);var k=g.cloneRange();k.setStartAfter(i),k.setEndAfter(a);var _=k.extractContents();s==="LI"&&P0(_,"LI")?(b=_.firstChild,f.insertAfter(_,a)):(f.insertAfter(_,a),f.insertAfter(b,a)),f.remove(i)}Fh(e,b)}},pP=function(e){Ze(Fb(Z.fromDom(e),lc),function(n){var a=n.dom;a.nodeValue=sl(a.nodeValue)})},bP=function(e,n){return n&&n.nodeName==="A"&&e.isEmpty(n)},yP=function(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)},Kx=function(e){e.innerHTML='<br data-mce-bogus="1">'},ug=function(e,n){return e.nodeName===n||e.previousSibling&&e.previousSibling.nodeName===n},PR=function(e,n){return n&&e.isBlock(n)&&!/^(TD|TH|CAPTION|FORM)$/.test(n.nodeName)&&!/^(fixed|absolute)/i.test(n.style.position)&&e.getContentEditable(n)!=="true"},Dk=function(e,n,a){var i=a,s=[],f;if(!!i){for(;i=i.firstChild;){if(e.isBlock(i))return;Mn(i)&&!n[i.nodeName.toLowerCase()]&&s.push(i)}for(f=s.length;f--;)i=s[f],(!i.hasChildNodes()||i.firstChild===i.lastChild&&i.firstChild.nodeValue===""||bP(e,i))&&e.remove(i)}},Rk=function(e,n,a){return gn(n)===!1?a:e?a===1&&n.data.charAt(a-1)===Wa?0:a:a===n.data.length-1&&n.data.charAt(a)===Wa?n.data.length:a},NR=function(e){var n=e.cloneRange();return n.setStart(e.startContainer,Rk(!0,e.startContainer,e.startOffset)),n.setEnd(e.endContainer,Rk(!1,e.endContainer,e.endOffset)),n},IR=function(e){do gn(e)&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild;while(e)},Bk=function(e,n){var a=e.getRoot(),i,s;for(i=n;i!==a&&e.getContentEditable(i)!=="false";)e.getContentEditable(i)==="true"&&(s=i),i=i.parentNode;return i!==a?s:a},$R=function(e,n,a){var i=e.dom;te.from(a.style).map(i.parseStyle).each(function(C){var k=Ku(Z.fromDom(n)),_=pn(pn({},k),C);i.setStyles(n,_)});var s=te.from(a.class).map(function(C){return C.split(/\s+/)}),f=te.from(n.className).map(function(C){return dn(C.split(/\s+/),function(k){return k!==""})});xu(s,f,function(C,k){var _=dn(k,function(F){return!rt(C,F)}),M=Xn(Xn([],C),_);i.setAttrib(n,"class",M.join(" "))});var g=["style","class"],b=di(a,function(C,k){return!rt(g,k)});i.setAttribs(n,b)},Ph=function(e,n){var a=iu(e);if(a&&a.toLowerCase()===n.tagName.toLowerCase()){var i=Kg(e);$R(e,n,i)}},zR=function(e,n,a,i,s){var f,g,b,C,k,_,M=n||"P",F=e.dom,U=Bk(F,i);if(g=F.getParent(i,F.isBlock),!g||!PR(F,g)){if(g=g||U,g===e.getBody()||yP(g)?_=g.nodeName.toLowerCase():_=g.parentNode.nodeName.toLowerCase(),!g.hasChildNodes())return f=F.create(M),Ph(e,f),g.appendChild(f),a.setStart(f,0),a.setEnd(f,0),f;for(C=i;C.parentNode!==g;)C=C.parentNode;for(;C&&!F.isBlock(C);)b=C,C=C.previousSibling;if(b&&e.schema.isValidChild(_,M.toLowerCase())){for(f=F.create(M),Ph(e,f),b.parentNode.insertBefore(f,b),C=b;C&&!F.isBlock(C);)k=C.nextSibling,f.appendChild(C),C=k;a.setStart(i,s),a.setEnd(i,s)}}return i},wP=function(e,n){n.normalize();var a=n.lastChild;(!a||/^(left|right)$/gi.test(e.getStyle(a,"float",!0)))&&e.add(n,"br")},CP=function(e,n){var a,i,s,f,g,b,C,k,_,M,F=e.dom,U=e.schema,K=U.getNonEmptyElements(),j=e.selection.getRng(),J=function(Qe){var Tt=i,jn,Yt,lt,Kn=U.getTextInlineElements();if(Qe||k==="TABLE"||k==="HR"?jn=F.create(Qe||_):jn=f.cloneNode(!1),lt=jn,tC(e)===!1)F.setAttrib(jn,"style",null),F.setAttrib(jn,"class",null);else do if(Kn[Tt.nodeName]){if(Ol(Tt)||nc(Tt))continue;Yt=Tt.cloneNode(!1),F.setAttrib(Yt,"id",""),jn.hasChildNodes()?(Yt.appendChild(jn.firstChild),jn.appendChild(Yt)):(lt=Yt,jn.appendChild(Yt))}while((Tt=Tt.parentNode)&&Tt!==Ee);return Ph(e,jn),Kx(lt),jn},fe=function(Qe){var Tt,jn,Yt=Rk(Qe,i,s);if(gn(i)&&(Qe?Yt>0:Yt<i.nodeValue.length))return!1;if(i.parentNode===f&&M&&!Qe||Qe&&Mn(i)&&i===f.firstChild)return!0;if(ug(i,"TABLE")||ug(i,"HR"))return M&&!Qe||!M&&Qe;var lt=new wi(i,f);for(gn(i)&&(Qe&&Yt===0?lt.prev():!Qe&&Yt===i.nodeValue.length&&lt.next());Tt=lt.current();){if(Mn(Tt)){if(!Tt.getAttribute("data-mce-bogus")&&(jn=Tt.nodeName.toLowerCase(),K[jn]&&jn!=="br"))return!1}else if(gn(Tt)&&!Bs(Tt.nodeValue))return!1;Qe?lt.prev():lt.next()}return!0},ve=function(){/^(H[1-6]|PRE|FIGURE)$/.test(k)&&Me!=="HGROUP"?g=J(_):g=J(),aE(e)&&PR(F,C)&&F.isEmpty(f)?g=F.split(C,f):F.insertAfter(g,f),Fh(e,g)};$m(F,j).each(function(Qe){j.setStart(Qe.startContainer,Qe.startOffset),j.setEnd(Qe.endContainer,Qe.endOffset)}),i=j.startContainer,s=j.startOffset,_=iu(e);var ae=!!(n&&n.shiftKey),de=!!(n&&n.ctrlKey);Mn(i)&&i.hasChildNodes()&&(M=s>i.childNodes.length-1,i=i.childNodes[Math.min(s,i.childNodes.length-1)]||i,M&&gn(i)?s=i.nodeValue.length:s=0);var Ee=Bk(F,i);if(!!Ee){(_&&!ae||!_&&ae)&&(i=zR(e,_,j,i,s)),f=F.getParent(i,F.isBlock),C=f?F.getParent(f.parentNode,F.isBlock):null,k=f?f.nodeName.toUpperCase():"";var Me=C?C.nodeName.toUpperCase():"";if(Me==="LI"&&!de&&(f=C,C=C.parentNode,k=Me),/^(LI|DT|DD)$/.test(k)&&F.isEmpty(f)){hP(e,J,C,f,_);return}_&&f===e.getBody()||(_=_||"P",Xf(f)?(g=im(f),F.isEmpty(f)&&Kx(f),Ph(e,g),Fh(e,g)):fe()?ve():fe(!0)?(g=f.parentNode.insertBefore(J(),f),Fh(e,ug(f,"HR")?g:f)):(a=NR(j).cloneRange(),a.setEndAfter(f),b=a.extractContents(),pP(b),IR(b),g=b.firstChild,F.insertAfter(b,f),Dk(F,K,g),wP(F,f),F.isEmpty(f)&&Kx(f),g.normalize(),F.isEmpty(g)?(F.remove(g),ve()):(Ph(e,g),Fh(e,g))),F.setAttrib(g,"id",""),e.fire("NewBlock",{newBlock:g}))}},Xx=function(e,n,a){for(var i=new wi(n,a),s,f=e.getNonEmptyElements();s=i.next();)if(f[s.nodeName.toLowerCase()]||s.length>0)return!0},LR=function(e,n,a){var i=e.dom.createRng();a?(i.setStartBefore(n),i.setEndBefore(n)):(i.setStartAfter(n),i.setEndAfter(n)),e.selection.setRng(i),V1(e,i)},SP=function(e,n){var a=e.selection,i=e.dom,s=a.getRng(),f,g;$m(i,s).each(function(K){s.setStart(K.startContainer,K.startOffset),s.setEnd(K.endContainer,K.endOffset)});var b=s.startOffset,C=s.startContainer;if(C.nodeType===1&&C.hasChildNodes()){var k=b>C.childNodes.length-1;C=C.childNodes[Math.min(b,C.childNodes.length-1)]||C,k&&C.nodeType===3?b=C.nodeValue.length:b=0}var _=i.getParent(C,i.isBlock),M=_?i.getParent(_.parentNode,i.isBlock):null,F=M?M.nodeName.toUpperCase():"",U=!!(n&&n.ctrlKey);F==="LI"&&!U&&(_=M),C&&C.nodeType===3&&b>=C.nodeValue.length&&(Xx(e.schema,C,_)||(f=i.create("br"),s.insertNode(f),s.setStartAfter(f),s.setEndAfter(f),g=!0)),f=i.create("br"),Wg(i,s,f),LR(e,f,g),e.undoManager.add()},xP=function(e,n){var a=Z.fromTag("br");pi(Z.fromDom(n),a),e.undoManager.add()},HR=function(e,n){EP(e.getBody(),n)||is(Z.fromDom(n),Z.fromTag("br"));var a=Z.fromTag("br");is(Z.fromDom(n),a),LR(e,a.dom,!1),e.undoManager.add()},TP=function(e){return Ho(e.getNode())},EP=function(e,n){return TP(Ge.after(n))?!0:Hs(e,Ge.after(n)).map(function(a){return Ho(a.getNode())}).getOr(!1)},es=function(e){return e&&e.nodeName==="A"&&"href"in e},kP=function(e){return e.fold(_t,es,es,_t)},_k=function(e){var n=At(ng,e),a=Ge.fromRangeStart(e.selection.getRng());return kv(n,e.getBody(),a).filter(kP)},VR=function(e,n){n.fold(ut,At(xP,e),At(HR,e),ut)},Yx=function(e,n){var a=_k(e);a.isSome()?a.each(At(VR,e)):SP(e,n)},UR=function(e,n){return Wx(e).filter(function(a){return n.length>0&&Cu(Z.fromDom(a),n)}).isSome()},AP=function(e){return UR(e,sv(e))},WR=function(e){return UR(e,wm(e))},ws=il.generate([{br:[]},{block:[]},{none:[]}]),OP=function(e,n){return WR(e)},Mk=function(e){return function(n,a){var i=iu(n)==="";return i===e}},jR=function(e){return function(n,a){return _R(n)===e}},qR=function(e,n){return function(a,i){var s=gP(a)===e.toUpperCase();return s===n}},Jx=function(e){return qR("pre",e)},DP=function(){return qR("summary",!0)},Zx=function(e){return function(n,a){return eC(n)===e}},RP=function(e,n){return AP(e)},Bi=function(e,n){return n},GR=function(e){var n=iu(e),a=Ak(e.dom,e.selection.getStart());return a&&e.schema.isValidChild(a.nodeName,n||"P")},Js=function(e,n){return function(a,i){var s=Ur(e,function(f,g){return f&&g(a,i)},!0);return s?te.some(n):te.none()}},BP=function(e,n){return Ax([Js([OP],ws.none()),Js([DP()],ws.br()),Js([Jx(!0),Zx(!1),Bi],ws.br()),Js([Jx(!0),Zx(!1)],ws.block()),Js([Jx(!0),Zx(!0),Bi],ws.block()),Js([Jx(!0),Zx(!0)],ws.br()),Js([jR(!0),Bi],ws.br()),Js([jR(!0)],ws.block()),Js([Mk(!0),Bi,GR],ws.block()),Js([Mk(!0)],ws.br()),Js([RP],ws.br()),Js([Mk(!1),Bi],ws.br()),Js([GR],ws.block())],[e,!!(n&&n.shiftKey)]).getOr(ws.none())},uc=function(e,n){BP(e,n).fold(function(){Yx(e,n)},function(){CP(e,n)},ut)},_P=function(e,n){n.isDefaultPrevented()||(n.preventDefault(),b4(e.undoManager),e.undoManager.transact(function(){e.selection.isCollapsed()===!1&&e.execCommand("Delete"),uc(e,n)}))},KR=function(e){e.on("keydown",function(n){n.keyCode===qn.ENTER&&_P(e,n)})},ts=function(e,n,a){F0([{keyCode:qn.END,action:Lr(mR,e,!0)},{keyCode:qn.HOME,action:Lr(mR,e,!1)},{keyCode:qn.END,action:Lr(CR,e,!0)},{keyCode:qn.HOME,action:Lr(CR,e,!1)},{keyCode:qn.END,action:Lr($x,e,!0,n)},{keyCode:qn.HOME,action:Lr($x,e,!1,n)}],a).each(function(i){a.preventDefault()})},MP=function(e,n){e.on("keydown",function(a){a.isDefaultPrevented()===!1&&ts(e,n,a)})},N0=fn().browser,FP=function(e){var n=$p(function(){e.composing||h(e)},0);N0.isIE()&&(e.on("keypress",function(a){n.throttle()}),e.on("remove",function(a){n.cancel()}))},Fk=function(e){FP(e),e.on("input",function(n){n.isComposing===!1&&h(e)})},PP=fn(),NP=function(e,n,a){F0([{keyCode:qn.PAGE_UP,action:Lr($x,e,!1,n)},{keyCode:qn.PAGE_DOWN,action:Lr($x,e,!0,n)}],a)},XR=function(e){return e.stopImmediatePropagation()},YR=function(e){return e.keyCode===qn.PAGE_UP||e.keyCode===qn.PAGE_DOWN},JR=function(e,n,a){a&&!e.get()?n.on("NodeChange",XR,!0):!a&&e.get()&&n.off("NodeChange",XR),e.set(a)},IP=function(e,n){if(!PP.os.isOSX()){var a=Ru(!1);e.on("keydown",function(i){YR(i)&&JR(a,e,!0)}),e.on("keyup",function(i){i.isDefaultPrevented()===!1&&NP(e,n,i),YR(i)&&a.get()&&(JR(a,e,!1),e.nodeChanged())})}},K2=function(e,n){var a=n.container(),i=n.offset();return gn(a)?(a.insertData(i,e),te.some(Ge(a,i+e.length))):p1(n).map(function(s){var f=Z.fromText(e);return n.isAtEnd()?is(s,f):pi(s,f),Ge(f.dom,e.length)})},ZR=At(K2,Ci),$P=At(K2," "),zP=function(e){return function(n){return n.fold(function(a){return Vs(e.dom,Ge.before(a))},function(a){return Pu(a)},function(a){return Us(a)},function(a){return Hs(e.dom,Ge.after(a))})}},LP=function(e,n){return function(a){return i0(e,a)?ZR(n):$P(n)}},HP=function(e){return function(n){return e.selection.setRng(n.toRange()),e.nodeChanged(),!0}},VP=function(e){var n=Ge.fromRangeStart(e.selection.getRng()),a=Z.fromDom(e.getBody());if(e.selection.isCollapsed()){var i=At(ng,e),s=Ge.fromRangeStart(e.selection.getRng());return kv(i,e.getBody(),s).bind(zP(a)).bind(LP(a,n)).exists(HP(e))}else return!1},Pk=function(e,n){F0([{keyCode:qn.SPACEBAR,action:Lr(VP,e)}],n).each(function(a){n.preventDefault()})},QR=function(e){e.on("keydown",function(n){n.isDefaultPrevented()===!1&&Pk(e,n)})},e5=function(e){var n=KD(e);return _0(e),mP(e,n),Ux(e,n),KR(e),QR(e),Fk(e),MP(e,n),IP(e,n),n},t5=function(e){return Md(e)?Ru(null):e5(e)},UP=function(){function e(n){this.lastPath=[],this.editor=n;var a,i=this;"onselectionchange"in n.getDoc()||n.on("NodeChange click mouseup keyup focus",function(s){var f=n.selection.getRng(),g={startContainer:f.startContainer,startOffset:f.startOffset,endContainer:f.endContainer,endOffset:f.endOffset};(s.type==="nodechange"||!hv(g,a))&&n.fire("SelectionChange"),a=g}),n.on("contextmenu",function(){n.fire("SelectionChange")}),n.on("SelectionChange",function(){var s=n.selection.getStart(!0);!s||!Ln.range&&n.selection.isCollapsed()||oh(n)&&!i.isSameElementPath(s)&&n.dom.isChildOf(s,n.getBody())&&n.nodeChanged({selectionChange:!0})}),n.on("mouseup",function(s){!s.isDefaultPrevented()&&oh(n)&&(n.selection.getNode().nodeName==="IMG"?sn.setEditorTimeout(n,function(){n.nodeChanged()}):n.nodeChanged())})}return e.prototype.nodeChanged=function(n){var a=this.editor.selection,i,s,f;this.editor.initialized&&a&&!lC(this.editor)&&!this.editor.mode.isReadOnly()&&(f=this.editor.getBody(),i=a.getStart(!0)||f,(i.ownerDocument!==this.editor.getDoc()||!this.editor.dom.isChildOf(i,f))&&(i=f),s=[],this.editor.dom.getParent(i,function(g){if(g===f)return!0;s.push(g)}),n=n||{},n.element=i,n.parents=s,this.editor.fire("NodeChange",n))},e.prototype.isSameElementPath=function(n){var a,i=this.editor.$(n).parentsUntil(this.editor.getBody()).add(n);if(i.length===this.lastPath.length){for(a=i.length;a>=0&&i[a]===this.lastPath[a];a--);if(a===-1)return this.lastPath=i,!0}return this.lastPath=i,!1},e}(),WP=function(e){e.on("click",function(n){e.dom.getParent(n.target,"details")&&n.preventDefault()})},jP=function(e){e.parser.addNodeFilter("details",function(n){Ze(n,function(a){a.attr("data-mce-open",a.attr("open")),a.attr("open","open")})}),e.serializer.addNodeFilter("details",function(n){Ze(n,function(a){var i=a.attr("data-mce-open");a.attr("open",wn(i)?i:null),a.attr("data-mce-open",null)})})},qP=function(e){WP(e),jP(e)},n5=function(e){return Mn(e)&&Ta(Z.fromDom(e))},GP=function(e){var n=e.selection.getRng(),a=Ge.fromRangeStart(n),i=Ge.fromRangeEnd(n);if(Ge.isElementPosition(a)){var s=a.container();n5(s)&&Pu(s).each(function(f){return n.setStart(f.container(),f.offset())})}if(Ge.isElementPosition(i)){var s=a.container();n5(s)&&Us(s).each(function(g){return n.setEnd(g.container(),g.offset())})}e.selection.setRng(y2(n))},r5=function(e){e.on("click",function(n){n.detail>=3&&GP(e)})},a5=function(e){var n=e.getBoundingClientRect(),a=e.ownerDocument,i=a.documentElement,s=a.defaultView;return{top:n.top+s.pageYOffset-i.clientTop,left:n.left+s.pageXOffset-i.clientLeft}},KP=function(e){return e.inline?a5(e.getBody()):{left:0,top:0}},XP=function(e){var n=e.getBody();return e.inline?{left:n.scrollLeft,top:n.scrollTop}:{left:0,top:0}},YP=function(e){var n=e.getBody(),a=e.getDoc().documentElement,i={left:n.scrollLeft,top:n.scrollTop},s={left:n.scrollLeft||a.scrollLeft,top:n.scrollTop||a.scrollTop};return e.inline?i:s},o5=function(e,n){if(n.target.ownerDocument!==e.getDoc()){var a=a5(e.getContentAreaContainer()),i=YP(e);return{left:n.pageX-a.left+i.left,top:n.pageY-a.top+i.top}}return{left:n.pageX,top:n.pageY}},JP=function(e,n,a){return{pageX:a.left-e.left+n.left,pageY:a.top-e.top+n.top}},ZP=function(e,n){return JP(KP(e),XP(e),o5(e,n))},Qx=Ua,QP=cs,i5=function(e,n){return Qx(n)&&n!==e},eT=function(e,n,a){return n===a||e.dom.isChildOf(n,a)?!1:!Qx(n)},u5=function(e){var n=e.cloneNode(!0);return n.removeAttribute("data-mce-selected"),n},c5=function(e,n,a,i){var s=e.dom,f=n.cloneNode(!0);s.setStyles(f,{width:a,height:i}),s.setAttrib(f,"data-mce-selected",null);var g=s.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return s.setStyles(g,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:a,height:i}),s.setStyles(f,{margin:0,boxSizing:"border-box"}),g.appendChild(f),g},eN=function(e,n){e.parentNode!==n&&n.appendChild(e)},tN=function(e,n,a,i,s,f){var g=0,b=0;e.style.left=n.pageX+"px",e.style.top=n.pageY+"px",n.pageX+a>s&&(g=n.pageX+a-s),n.pageY+i>f&&(b=n.pageY+i-f),e.style.width=a-g+"px",e.style.height=i-b+"px"},tT=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},nN=function(e){return e.button===0},rN=function(e,n){return{pageX:n.pageX-e.relX,pageY:n.pageY+5}},aN=function(e,n){return function(a){if(nN(a)){var i=ra(n.dom.getParents(a.target),XT(Qx,QP)).getOr(null);if(i5(n.getBody(),i)){var s=n.dom.getPos(i),f=n.getBody(),g=n.getDoc().documentElement;e.set({element:i,dragging:!1,screenX:a.screenX,screenY:a.screenY,maxX:(n.inline?f.scrollWidth:g.offsetWidth)-2,maxY:(n.inline?f.scrollHeight:g.offsetHeight)-2,relX:a.pageX-s.x,relY:a.pageY-s.y,width:i.offsetWidth,height:i.offsetHeight,ghost:c5(n,i,i.offsetWidth,i.offsetHeight)})}}}},oN=function(e,n){var a=sn.throttle(function(i,s){n._selectionOverrides.hideFakeCaret(),n.selection.placeCaretAt(i,s)},0);return n.on("remove",a.stop),function(i){return e.on(function(s){var f=Math.max(Math.abs(i.screenX-s.screenX),Math.abs(i.screenY-s.screenY));if(!s.dragging&&f>10){var g=n.fire("dragstart",{target:s.element});if(g.isDefaultPrevented())return;s.dragging=!0,n.focus()}if(s.dragging){var b=rN(s,ZP(n,i));eN(s.ghost,n.getBody()),tN(s.ghost,b,s.width,s.height,s.maxX,s.maxY),a(i.clientX,i.clientY)}})}},Vl=function(e){var n=e.getSel().getRangeAt(0),a=n.startContainer;return a.nodeType===3?a.parentNode:a},s5=function(e,n){return function(a){e.on(function(i){if(i.dragging&&eT(n,Vl(n.selection),i.element)){var s=u5(i.element),f=n.fire("drop",{clientX:a.clientX,clientY:a.clientY});f.isDefaultPrevented()||n.undoManager.transact(function(){tT(i.element),n.insertContent(n.dom.getOuterHTML(s)),n._selectionOverrides.hideFakeCaret()})}}),f5(e)}},l5=function(e,n){return function(){e.on(function(a){a.dragging&&n.fire("dragend")}),f5(e)}},f5=function(e){e.on(function(n){tT(n.ghost)}),e.clear()},iN=function(e){var n=sa(),a=Fa.DOM,i=document,s=aN(n,e),f=oN(n,e),g=s5(n,e),b=l5(n,e);e.on("mousedown",s),e.on("mousemove",f),e.on("mouseup",g),a.bind(i,"mousemove",f),a.bind(i,"mouseup",b),e.on("remove",function(){a.unbind(i,"mousemove",f),a.unbind(i,"mouseup",b)})},uN=function(e){e.on("drop",function(n){var a=typeof n.clientX!="undefined"?e.getDoc().elementFromPoint(n.clientX,n.clientY):null;(Qx(a)||e.dom.getContentEditableParent(a)==="false")&&n.preventDefault()})},cN=function(e){var n=function(s){if(!s.isDefaultPrevented()){var f=s.dataTransfer;f&&(rt(f.types,"Files")||f.files.length>0)&&(s.preventDefault(),s.type==="drop"&&bx(e,"Dropped file type is not supported"))}},a=function(s){kd(e,s.target)&&n(s)},i=function(){var s=Fa.DOM,f=e.dom,g=document,b=e.inline?e.getBody():e.getDoc(),C=["drop","dragover"];Ze(C,function(k){s.bind(g,k,a),f.bind(b,k,n)}),e.on("remove",function(){Ze(C,function(k){s.unbind(g,k,a),f.unbind(b,k,n)})})};e.on("init",function(){sn.setEditorTimeout(e,i,0)})},sN=function(e){iN(e),uN(e),Tm(e)&&cN(e)},lN=function(e){var n=$p(function(){if(!e.removed&&e.getBody().contains(document.activeElement)){var a=e.selection.getRng();if(a.collapsed){var i=$d(e,a,!1);e.selection.setRng(i)}}},0);e.on("focus",function(){n.throttle()}),e.on("blur",function(){n.cancel()})},fN=function(e){e.on("init",function(){e.on("focusin",function(n){var a=n.target;if($n(a)){var i=uh(e.getBody(),a),s=Ua(i)?i:a;e.selection.getNode()!==s&&E0(e,s).each(function(f){return e.selection.setRng(f)})}})})},nT=cs,Nh=Ua,rT=function(e,n){return uh(e.getBody(),n)},v5=function(e){var n=e.selection,a=e.dom,i=a.isBlock,s=e.getBody(),f=zu(e,s,i,function(){return Ml(e)}),g="sel-"+a.uniqueId(),b="data-mce-selected",C,k=function(lt){return a.hasClass(lt,"mce-offscreen-selection")},_=function(lt){return lt!==s&&(Nh(lt)||$n(lt))&&a.isChildOf(lt,s)},M=function(lt){return wv(lt)||vf(lt)||Od(lt)||Dd(lt)},F=function(){var lt=a.get(g);return lt&&lt.getElementsByTagName("*")[0]},U=function(lt){lt&&n.setRng(lt)},K=n.getRng,j=function(lt,Kn,kt,tn){tn===void 0&&(tn=!0);var Et=e.fire("ShowCaret",{target:Kn,direction:lt,before:kt});return Et.isDefaultPrevented()?null:(tn&&n.scrollIntoView(Kn,lt===-1),f.show(kt,Kn))},J=function(lt){lt.hasAttribute("data-mce-caret")&&(im(lt),U(K()),n.scrollIntoView(lt))},fe=function(){e.on("mouseup",function(Et){var zt=K();zt.collapsed&&GO(e,Et.clientX,Et.clientY)&&dD(e,zt,!1).each(U)}),e.on("click",function(Et){var zt=rT(e,Et.target);zt&&(Nh(zt)&&(Et.preventDefault(),e.focus()),nT(zt)&&a.isChildOf(zt,n.getNode())&&Tt())}),e.on("blur NewBlock",Tt),e.on("ResizeWindow FullscreenStateChanged",f.reposition);var lt=function(Et){var zt=lo(Et);if(!Et.firstChild)return!1;var hn=Ge.before(Et.firstChild),ft=zt.next(hn);return ft&&!M(ft)},Kn=function(Et,zt){var hn=a.getParent(Et,i),ft=a.getParent(zt,i);return hn===ft},kt=function(Et,zt){var hn=a.getParent(Et,i),ft=a.getParent(zt,i);return hn&&Et!==ft&&a.isChildOf(hn,ft)&&Nh(rT(e,hn))===!1?!0:hn&&!Kn(hn,ft)&&lt(hn)};e.on("tap",function(Et){var zt=Et.target,hn=rT(e,zt);Nh(hn)?(Et.preventDefault(),E0(e,hn).each(Qe)):_(zt)&&E0(e,zt).each(Qe)},!0),e.on("mousedown",function(Et){var zt=Et.target;if(!(zt!==s&&zt.nodeName!=="HTML"&&!a.isChildOf(zt,s))&&GO(e,Et.clientX,Et.clientY)!==!1){var hn=rT(e,zt);if(hn)Nh(hn)?(Et.preventDefault(),E0(e,hn).each(Qe)):(Tt(),!(nT(hn)&&Et.shiftKey)&&!ch(Et.clientX,Et.clientY,n.getRng())&&(Yt(),n.placeCaretAt(Et.clientX,Et.clientY)));else if(_(zt))E0(e,zt).each(Qe);else if(af(zt)===!1){Tt(),Yt();var ft=Px(s,Et.clientX,Et.clientY);if(ft&&!kt(zt,ft.node)){Et.preventDefault();var cn=j(1,ft.node,ft.before,!1);e.getBody().focus(),U(cn)}}}}),e.on("keypress",function(Et){qn.modifierPressed(Et)||Nh(n.getNode())&&Et.preventDefault()}),e.on("GetSelectionRange",function(Et){var zt=Et.range;if(C){if(!C.parentNode){C=null;return}zt=zt.cloneRange(),zt.selectNode(C),Et.range=zt}}),e.on("SetSelectionRange",function(Et){Et.range=de(Et.range);var zt=Qe(Et.range,Et.forward);zt&&(Et.range=zt)});var tn=function(Et){return Et.id==="mcepastebin"};e.on("AfterSetSelectionRange",function(Et){var zt=Et.range,hn=zt.startContainer.parentNode;!ae(zt)&&!tn(hn)&&Yt(),k(hn)||Tt()}),e.on("copy",function(Et){var zt=Et.clipboardData;if(!Et.isDefaultPrevented()&&Et.clipboardData&&!Ln.ie){var hn=F();hn&&(Et.preventDefault(),zt.clearData(),zt.setData("text/html",hn.outerHTML),zt.setData("text/plain",hn.outerText||hn.innerText))}}),sN(e),lN(e),fN(e)},ve=function(lt){return Ic(lt)||om(lt)||cp(lt)},ae=function(lt){return ve(lt.startContainer)||ve(lt.endContainer)},de=function(lt){var Kn=e.schema.getShortEndedElements(),kt=a.createRng(),tn=lt.startContainer,Et=lt.startOffset,zt=lt.endContainer,hn=lt.endOffset;return cr(Kn,tn.nodeName.toLowerCase())?Et===0?kt.setStartBefore(tn):kt.setStartAfter(tn):kt.setStart(tn,Et),cr(Kn,zt.nodeName.toLowerCase())?hn===0?kt.setEndBefore(zt):kt.setEndAfter(zt):kt.setEnd(zt,hn),kt},Ee=function(lt,Kn,kt){var tn=e.$,Et=ul(Z.fromDom(e.getBody()),"#"+g).fold(function(){return tn([])},function(ft){return tn([ft.dom])});Et.length===0&&(Et=tn('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",g),Et.appendTo(e.getBody()));var zt=a.createRng();Kn===kt&&Ln.ie?(Et.empty().append('<p style="font-size: 0" data-mce-bogus="all">\xA0</p>').append(Kn),zt.setStartAfter(Et[0].firstChild.firstChild),zt.setEndAfter(Kn)):(Et.empty().append(Ci).append(Kn).append(Ci),zt.setStart(Et[0].firstChild,1),zt.setEnd(Et[0].lastChild,0)),Et.css({top:a.getPos(lt,e.getBody()).y}),Et[0].focus();var hn=n.getSel();return hn.removeAllRanges(),hn.addRange(zt),zt},Me=function(lt){var Kn=lt.cloneNode(!0),kt=e.fire("ObjectSelected",{target:lt,targetClone:Kn});if(kt.isDefaultPrevented())return null;var tn=Ee(lt,kt.targetClone,Kn),Et=Z.fromDom(lt);return Ze($u(Z.fromDom(e.getBody()),"*[data-mce-selected]"),function(zt){va(Et,zt)||St(zt,b)}),a.getAttrib(lt,b)||lt.setAttribute(b,"1"),C=lt,Yt(),tn},Qe=function(lt,Kn){if(!lt)return null;if(lt.collapsed){if(!ae(lt)){var kt=Kn?1:-1,tn=Om(kt,s,lt),Et=tn.getNode(!Kn);if(af(Et))return j(kt,Et,Kn?!tn.isAtEnd():!1,!1);var zt=tn.getNode(Kn);if(af(zt))return j(kt,zt,Kn?!1:!tn.isAtEnd(),!1)}return null}var hn=lt.startContainer,ft=lt.startOffset,cn=lt.endOffset;if(hn.nodeType===3&&ft===0&&Nh(hn.parentNode)&&(hn=hn.parentNode,ft=a.nodeIndex(hn),hn=hn.parentNode),hn.nodeType!==1)return null;if(cn===ft+1&&hn===lt.endContainer){var Sr=hn.childNodes[ft];if(_(Sr))return Me(Sr)}return null},Tt=function(){C&&C.removeAttribute(b),ul(Z.fromDom(e.getBody()),"#"+g).each(_o),C=null},jn=function(){f.destroy(),C=null},Yt=function(){f.hide()};return Ln.ceFalse&&!Md(e)&&fe(),{showCaret:j,showBlockCaretContainer:J,hideFakeCaret:Yt,destroy:jn}},vN=function(e){var n=Je.each,a=qn.BACKSPACE,i=qn.DELETE,s=e.dom,f=e.selection,g=e.parser,b=Ln.gecko,C=Ln.ie,k=Ln.webkit,_="data:text/mce-internal,",M=C?"Text":"URL",F=function(st,$e){try{e.getDoc().execCommand(st,!1,$e)}catch(mt){}},U=function(st){return st.isDefaultPrevented()},K=function(st){var $e,mt;st.dataTransfer&&(e.selection.isCollapsed()&&st.target.tagName==="IMG"&&f.select(st.target),$e=e.selection.getContent(),$e.length>0&&(mt=_+escape(e.id)+","+escape($e),st.dataTransfer.setData(M,mt)))},j=function(st){var $e;return st.dataTransfer&&($e=st.dataTransfer.getData(M),$e&&$e.indexOf(_)>=0)?($e=$e.substr(_.length).split(","),{id:unescape($e[0]),html:unescape($e[1])}):null},J=function(st,$e){e.queryCommandSupported("mceInsertClipboardContent")?e.execCommand("mceInsertClipboardContent",!1,{content:st,internal:$e}):e.execCommand("mceInsertContent",!1,st)},fe=function(){var st=function(mt){var We=s.create("body"),yn=mt.cloneContents();return We.appendChild(yn),f.serializer.serialize(We,{format:"html"})},$e=function(mt){var We=st(mt),yn=s.createRng();yn.selectNode(e.getBody());var Lt=st(yn);return We===Lt};e.on("keydown",function(mt){var We=mt.keyCode,yn,Lt;if(!U(mt)&&(We===i||We===a)){if(yn=e.selection.isCollapsed(),Lt=e.getBody(),yn&&!s.isEmpty(Lt)||!yn&&!$e(e.selection.getRng()))return;mt.preventDefault(),e.setContent(""),Lt.firstChild&&s.isBlock(Lt.firstChild)?e.selection.setCursorLocation(Lt.firstChild,0):e.selection.setCursorLocation(Lt,0),e.nodeChanged()}})},ve=function(){e.shortcuts.add("meta+a",null,"SelectAll")},ae=function(){e.inline||s.bind(e.getDoc(),"mousedown mouseup",function(st){var $e;if(st.target===e.getDoc().documentElement)if($e=f.getRng(),e.getBody().focus(),st.type==="mousedown"){if(Ic($e.startContainer))return;f.placeCaretAt(st.clientX,st.clientY)}else f.setRng($e)})},de=function(){e.on("keydown",function(st){if(!U(st)&&st.keyCode===a){if(!e.getBody().getElementsByTagName("hr").length)return;if(f.isCollapsed()&&f.getRng().startOffset===0){var $e=f.getNode(),mt=$e.previousSibling;if($e.nodeName==="HR"){s.remove($e),st.preventDefault();return}mt&&mt.nodeName&&mt.nodeName.toLowerCase()==="hr"&&(s.remove(mt),st.preventDefault())}}})},Ee=function(){Range.prototype.getClientRects||e.on("mousedown",function(st){if(!U(st)&&st.target.nodeName==="HTML"){var $e=e.getBody();$e.blur(),sn.setEditorTimeout(e,function(){$e.focus()})}})},Me=function(){e.on("click",function(st){var $e=st.target;/^(IMG|HR)$/.test($e.nodeName)&&s.getContentEditableParent($e)!=="false"&&(st.preventDefault(),e.selection.select($e),e.nodeChanged()),$e.nodeName==="A"&&s.hasClass($e,"mce-item-anchor")&&(st.preventDefault(),f.select($e))})},Qe=function(){var st=function(){var mt=s.getAttribs(f.getStart().cloneNode(!1));return function(){var We=f.getStart();We!==e.getBody()&&(s.setAttrib(We,"style",null),n(mt,function(yn){We.setAttributeNode(yn.cloneNode(!0))}))}},$e=function(){return!f.isCollapsed()&&s.getParent(f.getStart(),s.isBlock)!==s.getParent(f.getEnd(),s.isBlock)};e.on("keypress",function(mt){var We;if(!U(mt)&&(mt.keyCode===8||mt.keyCode===46)&&$e())return We=st(),e.getDoc().execCommand("delete",!1,null),We(),mt.preventDefault(),!1}),s.bind(e.getDoc(),"cut",function(mt){var We;!U(mt)&&$e()&&(We=st(),sn.setEditorTimeout(e,function(){We()}))})},Tt=function(){e.on("keydown",function(st){if(!U(st)&&st.keyCode===a&&f.isCollapsed()&&f.getRng().startOffset===0){var $e=f.getNode().previousSibling;if($e&&$e.nodeName&&$e.nodeName.toLowerCase()==="table")return st.preventDefault(),!1}})},jn=function(){e.on("keydown",function(st){var $e,mt;if(!(U(st)||st.keyCode!==qn.BACKSPACE)){$e=f.getRng();var We=$e.startContainer,yn=$e.startOffset,Lt=s.getRoot();if(mt=We,!(!$e.collapsed||yn!==0)){for(;mt&&mt.parentNode&&mt.parentNode.firstChild===mt&&mt.parentNode!==Lt;)mt=mt.parentNode;mt.tagName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",null,mt),$e=s.createRng(),$e.setStart(We,0),$e.setEnd(We,0),f.setRng($e))}}})},Yt=function(){var st=function(){F("StyleWithCSS",!1),F("enableInlineTableEditing",!1),Qb(e)||F("enableObjectResizing",!1)};gE(e)||e.on("BeforeExecCommand mousedown",st)},lt=function(){var st=function(){n(s.select("a"),function($e){var mt=$e.parentNode,We=s.getRoot();if(mt.lastChild===$e){for(;mt&&!s.isBlock(mt);){if(mt.parentNode.lastChild!==mt||mt===We)return;mt=mt.parentNode}s.add(mt,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",function($e){($e.type==="setcontent"||$e.command==="mceInsertLink")&&st()})},Kn=function(){iu(e)&&e.on("init",function(){F("DefaultParagraphSeparator",iu(e))})},kt=function(){e.on("keyup focusin mouseup",function(st){qn.modifierPressed(st)||f.normalize()},!0)},tn=function(){e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},Et=function(){e.inline||e.on("keydown",function(){document.activeElement===document.body&&e.getWin().focus()})},zt=function(){e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",function(st){var $e;if(st.target.nodeName==="HTML"){if(Ln.ie>11){e.getBody().focus();return}$e=e.selection.getRng(),e.getBody().focus(),e.selection.setRng($e),e.selection.normalize(),e.nodeChanged()}}))},hn=function(){Ln.mac&&e.on("keydown",function(st){if(qn.metaKeyPressed(st)&&!st.shiftKey&&(st.keyCode===37||st.keyCode===39)){st.preventDefault();var $e=e.selection.getSel();$e.modify("move",st.keyCode===37?"backward":"forward","lineboundary")}})},ft=function(){F("AutoUrlDetect",!1)},cn=function(){e.on("click",function(st){var $e=st.target;do if($e.tagName==="A"){st.preventDefault();return}while($e=$e.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},Sr=function(){e.on("init",function(){e.dom.bind(e.getBody(),"submit",function(st){st.preventDefault()})})},da=function(){g.addNodeFilter("br",function(st){for(var $e=st.length;$e--;)st[$e].attr("class")==="Apple-interchange-newline"&&st[$e].remove()})},Hr=function(){e.on("dragstart",function(st){K(st)}),e.on("drop",function(st){if(!U(st)){var $e=j(st);if($e&&$e.id!==e.id){st.preventDefault();var mt=N1(st.x,st.y,e.getDoc());f.setRng(mt),J($e.html,!0)}}})},jo=ut,Oo=function(){if(!b||e.removed)return!1;var st=e.selection.getSel();return!st||!st.rangeCount||st.rangeCount===0},li=function(){k&&(ae(),Me(),Sr(),ve(),Ln.iOS&&(Et(),zt(),cn())),b&&(Ee(),Yt(),tn(),hn())},Cs=function(){jn(),fe(),Ln.windowsPhone||kt(),k&&(ae(),Me(),Kn(),Sr(),Tt(),da(),Ln.iOS?(Et(),zt(),cn()):ve()),Ln.ie>=11&&(zt(),Tt()),Ln.ie&&(ve(),ft(),Hr()),b&&(de(),Ee(),Qe(),Yt(),lt(),tn(),hn(),Tt())};return Md(e)?li():Cs(),{refreshContentEditable:jo,isHidden:Oo}},Nk=Fa.DOM,dN=function(e,n){var a=Z.fromDom(e.getBody()),i=Gu(ri(a)),s=Z.fromTag("style");E(s,"type","text/css"),bi(s,Z.fromText(n)),bi(i,s),e.on("remove",function(){_o(s)})},mN=function(e){return e.inline?e.getElement().nodeName.toLowerCase():void 0},d5=function(e){return di(e,function(n){return qe(n)===!1})},m5=function(e){var n=e.settings,a=e.editorUpload.blobCache;return d5({allow_conditional_comments:n.allow_conditional_comments,allow_html_data_urls:n.allow_html_data_urls,allow_svg_data_urls:n.allow_svg_data_urls,allow_html_in_named_anchor:n.allow_html_in_named_anchor,allow_script_urls:n.allow_script_urls,allow_unsafe_link_target:n.allow_unsafe_link_target,convert_fonts_to_spans:n.convert_fonts_to_spans,fix_list_elements:n.fix_list_elements,font_size_legacy_values:n.font_size_legacy_values,forced_root_block:n.forced_root_block,forced_root_block_attrs:n.forced_root_block_attrs,padd_empty_with_br:n.padd_empty_with_br,preserve_cdata:n.preserve_cdata,remove_trailing_brs:n.remove_trailing_brs,inline_styles:n.inline_styles,root_name:mN(e),validate:!0,blob_cache:a,document:e.getDoc(),images_dataimg_filter:n.images_dataimg_filter})},Ik=function(e){var n=e.settings;return pn(pn({},m5(e)),d5({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope,element_format:n.element_format,entities:n.entities,entity_encoding:n.entity_encoding,indent:n.indent,indent_after:n.indent_after,indent_before:n.indent_before,block_elements:n.block_elements,boolean_attributes:n.boolean_attributes,custom_elements:n.custom_elements,extended_valid_elements:n.extended_valid_elements,invalid_elements:n.invalid_elements,invalid_styles:n.invalid_styles,move_caret_before_on_enter_elements:n.move_caret_before_on_enter_elements,non_empty_elements:n.non_empty_elements,schema:n.schema,self_closing_elements:n.self_closing_elements,short_ended_elements:n.short_ended_elements,special:n.special,text_block_elements:n.text_block_elements,text_inline_elements:n.text_inline_elements,valid_children:n.valid_children,valid_classes:n.valid_classes,valid_elements:n.valid_elements,valid_styles:n.valid_styles,verify_html:n.verify_html,whitespace_elements:n.whitespace_elements}))},gN=function(e){var n=M4(m5(e),e.schema);return n.addAttributeFilter("src,href,style,tabindex",function(a,i){for(var s=a.length,f,g,b=e.dom,C="data-mce-"+i;s--;)if(f=a[s],g=f.attr(i),g&&!f.attr(C)){if(g.indexOf("data:")===0||g.indexOf("blob:")===0)continue;i==="style"?(g=b.serializeStyle(b.parseStyle(g),f.name),g.length||(g=null),f.attr(C,g),f.attr(i,g)):i==="tabindex"?(f.attr(C,g),f.attr(i,null)):f.attr(C,e.convertURL(g,i,f.name))}}),n.addNodeFilter("script",function(a){for(var i=a.length;i--;){var s=a[i],f=s.attr("type")||"no/type";f.indexOf("mce-")!==0&&s.attr("type","mce-"+f)}}),e.settings.preserve_cdata&&n.addNodeFilter("#cdata",function(a){for(var i=a.length;i--;){var s=a[i];s.type=8,s.name="#comment",s.value="[CDATA["+e.dom.encode(s.value)+"]]"}}),n.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(a){for(var i=a.length,s=e.schema.getNonEmptyElements();i--;){var f=a[i];f.isEmpty(s)&&f.getAll("br").length===0&&(f.append(new Gc("br",1)).shortEnded=!0)}}),n},g5=function(e){e.settings.auto_focus&&sn.setEditorTimeout(e,function(){var n;e.settings.auto_focus===!0?n=e:n=e.editorManager.get(e.settings.auto_focus),n.destroyed||n.focus()},100)},hN=function(e){var n=e.dom.getRoot();!e.inline&&(!oh(e)||e.selection.getStart(!0)===n)&&Pu(n).each(function(a){var i=a.getNode(),s=dc(i)?Pu(i).getOr(a):a;Ln.browser.isIE()?r3(e,s.toRange()):e.selection.setRng(s.toRange())})},pN=function(e){e.bindPendingEventDelegates(),e.initialized=!0,jC(e),e.focus(!0),hN(e),e.nodeChanged({initial:!0}),e.execCallback("init_instance_callback",e),g5(e)},h5=function(e){return e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader},bN=function(e,n,a){var i=[new yi(function(s,f){return h5(e).loadAll(n,s,f)})];return e.inline?i:i.concat([new yi(function(s,f){return e.ui.styleSheetLoader.loadAll(a,s,f)})])},_i=function(e){var n=h5(e),a=oC(e),i=e.contentCSS,s=function(){n.unloadAll(i),e.inline||e.ui.styleSheetLoader.unloadAll(a)},f=function(){e.removed?s():e.on("remove",s)};if(e.contentStyles.length>0){var g="";Je.each(e.contentStyles,function(C){g+=C+`\r
`}),e.dom.addStyle(g)}var b=yi.all(bN(e,i,a)).then(f).catch(f);return e.settings.content_style&&dN(e,e.settings.content_style),b},yN=function(e){var n=e.settings,a=e.getDoc(),i=e.getBody();_l(e),!n.browser_spellcheck&&!n.gecko_spellcheck&&(a.body.spellcheck=!1,Nk.setAttrib(i,"spellcheck","false")),e.quirks=vN(e),WC(e);var s=Zb(e);s!==void 0&&(i.dir=s),n.protect&&e.on("BeforeSetContent",function(f){Je.each(n.protect,function(g){f.content=f.content.replace(g,function(b){return"<!--mce:protected "+escape(b)+"-->"})})}),e.on("SetContent",function(){e.addVisual(e.getBody())}),e.on("compositionstart compositionend",function(f){e.composing=f.type==="compositionstart"})},wN=function(e){Md(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},$k=function(e){e.removed!==!0&&(wN(e),pN(e))},aT=function(e,n){var a=e.settings,i=e.getElement(),s=e.getDoc();a.inline||(e.getElement().style.visibility=e.orgVisibility),!n&&!e.inline&&(s.open(),s.write(e.iframeHTML),s.close()),e.inline&&(Nk.addClass(i,"mce-content-body"),e.contentDocument=s=document,e.contentWindow=window,e.bodyElement=i,e.contentAreaContainer=i);var f=e.getBody();f.disabled=!0,e.readonly=!!a.readonly,e.readonly||(e.inline&&Nk.getStyle(f,"position",!0)==="static"&&(f.style.position="relative"),f.contentEditable=e.getParam("content_editable_state",!0)),f.disabled=!1,e.editorUpload=C6(e),e.schema=Zf(a),e.dom=Fa(s,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,hex_colors:a.force_hex_style_colors,update_styles:!0,root_element:e.inline?e.getBody():null,collect:function(){return e.inline},schema:e.schema,contentCssCors:qi(e),referrerPolicy:nC(e),onSetAttrib:function(C){e.fire("SetAttrib",C)}}),e.parser=gN(e),e.serializer=FO(Ik(e),e),e.selection=bO(e.dom,e.getWin(),e.serializer,e),e.annotator=VC(e),e.formatter=j4(e),e.undoManager=nD(e),e._nodeChangeDispatcher=new UP(e),e._selectionOverrides=v5(e),IF(e),qP(e),Md(e)||r5(e);var g=t5(e);FF(e,g),$F(e),R6(e);var b=cM(e);yN(e),b.fold(function(){_i(e).then(function(){return $k(e)})},function(C){e.setProgressState(!0),_i(e).then(function(){C().then(function(k){e.setProgressState(!1),$k(e)},function(k){e.notificationManager.open({type:"error",text:String(k)}),$k(e)})})})},Ih=Fa.DOM,CN=function(e,n){if(document.domain!==window.location.hostname&&Ln.browser.isIE()){var a=H4("mce");e[a]=function(){aT(e)};var i='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinymce.get("'+e.id+'");document.write(ed.iframeHTML);document.close();ed.'+a+"(true);})()";return Ih.setAttrib(n,"src",i),!0}return!1},p5=function(e,n,a,i){var s=Z.fromTag("iframe");return I(s,i),I(s,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:n}),nd(s,"tox-edit-area__iframe"),s},SN=function(e){var n=rE(e)+"<html><head>";Kb(e)!==e.documentBaseUrl&&(n+='<base href="'+e.documentBaseURI.getURI()+'" />'),n+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';var a=Xb(e),i=Qw(e);return Yb(e)&&(n+='<meta http-equiv="Content-Security-Policy" content="'+Yb(e)+'" />'),n+='</head><body id="'+a+'" class="mce-content-body '+i+'" data-id="'+e.id+'"><br></body></html>',n},xN=function(e,n){var a=e.translate(mC(e)),i=p5(e.id,a,n.height,nE(e)).dom;i.onload=function(){i.onload=null,e.fire("load")};var s=CN(e,i);return e.contentAreaContainer=n.iframeContainer,e.iframeElement=i,e.iframeHTML=SN(e),Ih.add(n.iframeContainer,i),s},TN=function(e,n){var a=xN(e,n);n.editorContainer&&(Ih.get(n.editorContainer).style.display=e.orgDisplay,e.hidden=Ih.isHidden(n.editorContainer)),e.getElement().style.display="none",Ih.setAttrib(e.id,"aria-hidden","true"),a||aT(e)},b5=Fa.DOM,y5=function(e,n,a){var i=bf.get(a),s=bf.urls[a]||e.documentBaseUrl.replace(/\/$/,"");if(a=Je.trim(a),i&&Je.inArray(n,a)===-1){if(Je.each(bf.dependencies(a),function(g){y5(e,n,g)}),e.plugins[a])return;try{var f=new i(e,s,e.$);e.plugins[a]=f,f.init&&(f.init(e,s),n.push(a))}catch(g){Ev(e,a,g)}}},w5=function(e){return e.replace(/^\-/,"")},EN=function(e){var n=[];Je.each(s1(e).split(/[ ,]/),function(a){y5(e,n,w5(a))})},kN=function(e){var n=Je.trim(xl(e)),a=e.ui.registry.getAll().icons,i=pn(pn({},N2.get("default").icons),N2.get(n).icons);ur(i,function(s,f){cr(a,f)||e.ui.registry.addIcon(f,s)})},AN=function(e){var n=Yg(e);if(wn(n)){e.settings.theme=w5(n);var a=La.get(n);e.theme=new a(e,La.urls[n]),e.theme.init&&e.theme.init(e,La.urls[n]||e.documentBaseUrl.replace(/\/$/,""),e.$)}else e.theme={}},ON=function(e){return e.theme.renderUI()},DN=function(e){var n=e.getElement(),a=Yg(e),i=a(e,n);return i.editorContainer.nodeType&&(i.editorContainer.id=i.editorContainer.id||e.id+"_parent"),i.iframeContainer&&i.iframeContainer.nodeType&&(i.iframeContainer.id=i.iframeContainer.id||e.id+"_iframecontainer"),i.height=i.iframeHeight?i.iframeHeight:n.offsetHeight,i},C5=function(e){return{editorContainer:e,iframeContainer:e,api:{}}},RN=function(e){var n=b5.create("div");return b5.insertAfter(n,e),C5(n)},S5=function(e){var n=e.getElement();return e.inline?C5(null):RN(n)},BN=function(e){var n=e.getElement();return e.orgDisplay=n.style.display,wn(Yg(e))?ON(e):bt(Yg(e))?DN(e):S5(e)},_N=function(e,n){var a={show:te.from(n.show).getOr(ut),hide:te.from(n.hide).getOr(ut),disable:te.from(n.disable).getOr(ut),isDisabled:te.from(n.isDisabled).getOr(_t),enable:function(){e.mode.isReadOnly()||te.from(n.enable).map(na)}};e.ui=pn(pn({},e.ui),a)},x5=function(e){e.fire("ScriptsLoaded"),kN(e),AN(e),EN(e);var n=BN(e);_N(e,te.from(n.api).getOr({}));var a={editorContainer:n.editorContainer,iframeContainer:n.iframeContainer};return e.editorContainer=a.editorContainer?a.editorContainer:null,b6(e),e.inline?aT(e):TN(e,a)},$h=Fa.DOM,zk=function(e){return e.charAt(0)==="-"},MN=function(e,n){var a=i1(n),i=rC(n);if(xo.hasCode(a)===!1&&a!=="en"){var s=i!==""?i:n.editorManager.baseURL+"/langs/"+a+".js";e.add(s,ut,void 0,function(){kh(n,s,a)})}},T5=function(e,n,a,i){var s=Yg(n);if(wn(s)){if(!zk(s)&&!cr(La.urls,s)){var f=sC(n);f?La.load(s,n.documentBaseURI.toAbsolute(f)):La.load(s,"themes/"+s+"/theme"+a+".js")}e.loadQueue(function(){La.waitFor(s,i)})}else i()},E5=function(e){return te.from(id(e)).filter(function(n){return n.length>0}).map(function(n){return{url:n,name:te.none()}})},Lk=function(e,n,a){return te.from(n).filter(function(i){return i.length>0&&!N2.has(i)}).map(function(i){return{url:e.editorManager.baseURL+"/icons/"+i+"/icons"+a+".js",name:te.some(i)}})},FN=function(e,n,a){var i=Lk(n,"default",a),s=E5(n).orThunk(function(){return Lk(n,xl(n),"")});Ze(G0([i,s]),function(f){e.add(f.url,ut,void 0,function(){I2(n,f.url,f.name.getOrUndefined())})})},PN=function(e,n){Je.each(hE(e),function(a,i){bf.load(i,a,ut,void 0,function(){Tc(e,a,i)}),e.settings.plugins+=" "+i}),Je.each(s1(e).split(/[ ,]/),function(a){if(a=Je.trim(a),a&&!bf.urls[a])if(zk(a)){a=a.substr(1,a.length);var i=bf.dependencies(a);Je.each(i,function(f){var g={prefix:"plugins/",resource:f,suffix:"/plugin"+n+".js"},b=bf.createUrl(g,f);bf.load(b.resource,b,ut,void 0,function(){Tc(e,b.prefix+b.resource+b.suffix,b.resource)})})}else{var s={prefix:"plugins/",resource:a,suffix:"/plugin"+n+".js"};bf.load(a,s,ut,void 0,function(){Tc(e,s.prefix+s.resource+s.suffix,a)})}})},NN=function(e,n){var a=tf.ScriptLoader;T5(a,e,n,function(){MN(a,e),FN(a,e,n),PN(e,n),a.loadQueue(function(){e.removed||x5(e)},e,function(){e.removed||x5(e)})})},k5=function(e,n){return np.forElement(e,{contentCssCors:fC(n),referrerPolicy:nC(n)})},IN=function(e){var n=e.id;xo.setCode(i1(e));var a=function(){$h.unbind(window,"ready",a),e.render()};if(!qv.Event.domLoaded){$h.bind(window,"ready",a);return}if(!!e.getElement()&&!!Ln.contentEditable){var i=Z.fromDom(e.getElement()),s=xn(i);e.on("remove",function(){Wn(i.dom.attributes,function(g){return St(i,g.name)}),I(i,s)}),e.ui.styleSheetLoader=k5(i,e),ry(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");var f=e.getElement().form||$h.getParent(n,"form");f&&(e.formElement=f,lE(e)&&!bg(e.getElement())&&($h.insertAfter($h.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=function(g){e.fire(g.type,g)},$h.bind(f,"submit reset",e.formEventDelegate),e.on("reset",function(){e.resetContent()}),fE(e)&&!f.submit.nodeType&&!f.submit.length&&!f._mceOldSubmit&&(f._mceOldSubmit=f.submit,f.submit=function(){return e.editorManager.triggerSave(),e.setDirty(!1),f._mceOldSubmit(f)})),e.windowManager=T0(e),e.notificationManager=KO(e),vE(e)&&e.on("GetContent",function(g){g.save&&(g.content=$h.encode(g.content))}),Jg(e)&&e.on("submit",function(){e.initialized&&e.save()}),c1(e)&&(e._beforeUnload=function(){e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),NN(e,e.suffix)}},$N=function(e,n){return Qm(e,n)},A5={"font-size":"size","font-family":"face"},zN=function(e,n,a){var i=function(f){return Tu(f,e).orThunk(function(){return yo(f)==="font"?ua(A5,e).bind(function(g){return oe(f,g)}):te.none()})},s=function(f){return va(Z.fromDom(n),f)};return XS(Z.fromDom(a),function(f){return i(f)},s)},LN=function(e){return e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")},O5=function(e,n){return te.from(Fa.DOM.getStyle(n,e,!0))},D5=function(e){return function(n,a){return te.from(a).map(Z.fromDom).filter(Ft).bind(function(i){return zN(e,n,i.dom).or(O5(e,i.dom))}).getOr("")}},HN=D5("font-size"),VN=Rr(LN,D5("font-family")),R5=function(e){return Pu(e.getBody()).map(function(n){var a=n.container();return gn(a)?a.parentNode:a})},B5=function(e){return te.from(e.selection.getRng()).bind(function(n){var a=e.getBody(),i=n.startContainer===a&&n.startOffset===0;return i?te.none():te.from(e.selection.getStart(!0))})},UN=function(e,n){return B5(e).orThunk(At(R5,e)).map(Z.fromDom).filter(Ft).bind(n)},Hk=function(e,n){return UN(e,me(te.some,n))},_5=function(e,n){if(/^[0-9.]+$/.test(n)){var a=parseInt(n,10);if(a>=1&&a<=7){var i=oE(e),s=Cm(e);return s?s[a-1]||n:i[a-1]||n}else return n}else return n},WN=function(e){var n=e.split(/\s*,\s*/);return kn(n,function(a){return a.indexOf(" ")!==-1&&!(at(a,'"')||at(a,"'"))?"'"+a+"'":a}).join(",")},jN=function(e,n){var a=_5(e,n);e.formatter.toggle("fontname",{value:WN(a)}),e.nodeChanged()},qN=function(e){return Hk(e,function(n){return VN(e.getBody(),n.dom)}).getOr("")},GN=function(e,n){e.formatter.toggle("fontsize",{value:_5(e,n)}),e.nodeChanged()},KN=function(e){return Hk(e,function(n){return HN(e.getBody(),n.dom)}).getOr("")},XN=function(e){return Hk(e,function(n){var a=Z.fromDom(e.getBody()),i=XS(n,function(f){return Tu(f,"line-height")},At(va,a)),s=function(){var f=parseFloat(Cr(n,"line-height")),g=parseFloat(Cr(n,"font-size"));return String(f/g)};return i.getOrThunk(s)}).getOr("")},YN=function(e,n){e.formatter.toggle("lineheight",{value:String(n)}),e.nodeChanged()},oT=function(e){if(typeof e!="string"){var n=Je.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:n}}return{content:e,details:{}}},M5=function(e,n){var a=oT(n);pM(e,a.content,a.details)},X2=Je.each,JN=Je.map,F5=Je.inArray,Vk=function(){function e(n){this.commands={state:{},exec:{},value:{}},this.editor=n,this.setupCommands(n)}return e.prototype.execCommand=function(n,a,i,s){var f,g=!1,b=this;if(!b.editor.removed){if(n.toLowerCase()!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(n)&&(!s||!s.skip_focus)?b.editor.focus():iS(b.editor)),s=b.editor.fire("BeforeExecCommand",{command:n,ui:a,value:i}),s.isDefaultPrevented())return!1;var C=n.toLowerCase();if(f=b.commands.exec[C])return f(C,a,i),b.editor.fire("ExecCommand",{command:n,ui:a,value:i}),!0;if(X2(this.editor.plugins,function(k){if(k.execCommand&&k.execCommand(n,a,i))return b.editor.fire("ExecCommand",{command:n,ui:a,value:i}),g=!0,!1}),g)return g;if(b.editor.theme&&b.editor.theme.execCommand&&b.editor.theme.execCommand(n,a,i))return b.editor.fire("ExecCommand",{command:n,ui:a,value:i}),!0;try{g=b.editor.getDoc().execCommand(n,a,i)}catch(k){}return g?(b.editor.fire("ExecCommand",{command:n,ui:a,value:i}),!0):!1}},e.prototype.queryCommandState=function(n){var a;if(!(this.editor.quirks.isHidden()||this.editor.removed)){if(n=n.toLowerCase(),a=this.commands.state[n])return a(n);try{return this.editor.getDoc().queryCommandState(n)}catch(i){}return!1}},e.prototype.queryCommandValue=function(n){var a;if(!(this.editor.quirks.isHidden()||this.editor.removed)){if(n=n.toLowerCase(),a=this.commands.value[n])return a(n);try{return this.editor.getDoc().queryCommandValue(n)}catch(i){}}},e.prototype.addCommands=function(n,a){a===void 0&&(a="exec");var i=this;X2(n,function(s,f){X2(f.toLowerCase().split(","),function(g){i.commands[a][g]=s})})},e.prototype.addCommand=function(n,a,i){var s=this;n=n.toLowerCase(),this.commands.exec[n]=function(f,g,b,C){return a.call(i||s.editor,g,b,C)}},e.prototype.queryCommandSupported=function(n){if(n=n.toLowerCase(),this.commands.exec[n])return!0;try{return this.editor.getDoc().queryCommandSupported(n)}catch(a){}return!1},e.prototype.addQueryStateHandler=function(n,a,i){var s=this;n=n.toLowerCase(),this.commands.state[n]=function(){return a.call(i||s.editor)}},e.prototype.addQueryValueHandler=function(n,a,i){var s=this;n=n.toLowerCase(),this.commands.value[n]=function(){return a.call(i||s.editor)}},e.prototype.hasCustomCommand=function(n){return n=n.toLowerCase(),!!this.commands.exec[n]},e.prototype.execNativeCommand=function(n,a,i){return a===void 0&&(a=!1),i===void 0&&(i=null),this.editor.getDoc().execCommand(n,a,i)},e.prototype.isFormatMatch=function(n){return this.editor.formatter.match(n)},e.prototype.toggleFormat=function(n,a){this.editor.formatter.toggle(n,a),this.editor.nodeChanged()},e.prototype.storeSelection=function(n){this.selectionBookmark=this.editor.selection.getBookmark(n)},e.prototype.restoreSelection=function(){this.editor.selection.moveToBookmark(this.selectionBookmark)},e.prototype.setupCommands=function(n){var a=this;this.addCommands({"mceResetDesignMode,mceBeginUndoLevel":ut,"mceEndUndoLevel,mceAddUndoLevel":function(){n.undoManager.add()},mceFocus:function(s,f,g){pS(n,g)},"Cut,Copy,Paste":function(s){var f=n.getDoc(),g;try{a.execNativeCommand(s)}catch(C){g=!0}if(s==="paste"&&!f.queryCommandEnabled(s)&&(g=!0),g||!f.queryCommandSupported(s)){var b=n.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");Ln.mac&&(b=b.replace(/Ctrl\+/g,"\u2318+")),n.notificationManager.open({text:b,type:"error"})}},unlink:function(){if(n.selection.isCollapsed()){var s=n.dom.getParent(n.selection.getStart(),"a");s&&n.dom.remove(s,!0);return}n.formatter.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(s){var f=s.substring(7);f==="full"&&(f="justify"),X2("left,center,right,justify".split(","),function(g){f!==g&&n.formatter.remove("align"+g)}),f!=="none"&&a.toggleFormat("align"+f)},"InsertUnorderedList,InsertOrderedList":function(s){var f;a.execNativeCommand(s);var g=n.dom.getParent(n.selection.getNode(),"ol,ul");g&&(f=g.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(f.nodeName)&&(a.storeSelection(),n.dom.split(f,g),a.restoreSelection()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(s){a.toggleFormat(s)},"ForeColor,HiliteColor":function(s,f,g){a.toggleFormat(s,{value:g})},FontName:function(s,f,g){jN(n,g)},FontSize:function(s,f,g){GN(n,g)},LineHeight:function(s,f,g){YN(n,g)},Lang:function(s,f,g){a.toggleFormat(s,{value:g.code,customValue:g.customCode})},RemoveFormat:function(s){n.formatter.remove(s)},mceBlockQuote:function(){a.toggleFormat("blockquote")},FormatBlock:function(s,f,g){return a.toggleFormat(g||"p")},mceCleanup:function(){var s=n.selection.getBookmark();n.setContent(n.getContent()),n.selection.moveToBookmark(s)},mceRemoveNode:function(s,f,g){var b=g||n.selection.getNode();b!==n.getBody()&&(a.storeSelection(),n.dom.remove(b,!0),a.restoreSelection())},mceSelectNodeDepth:function(s,f,g){var b=0;n.dom.getParent(n.selection.getNode(),function(C){if(C.nodeType===1&&b++===g)return n.selection.select(C),!1},n.getBody())},mceSelectNode:function(s,f,g){n.selection.select(g)},mceInsertContent:function(s,f,g){M5(n,g)},mceInsertRawHTML:function(s,f,g){n.selection.setContent("tiny_mce_marker");var b=n.getContent();n.setContent(b.replace(/tiny_mce_marker/g,function(){return g}))},mceInsertNewLine:function(s,f,g){uc(n,g)},mceToggleFormat:function(s,f,g){a.toggleFormat(g)},mceSetContent:function(s,f,g){n.setContent(g)},"Indent,Outdent":function(s){oR(n,s)},mceRepaint:ut,InsertHorizontalRule:function(){n.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){n.hasVisual=!n.hasVisual,n.addVisual()},mceReplaceContent:function(s,f,g){n.execCommand("mceInsertContent",!1,g.replace(/\{\$selection\}/g,n.selection.getContent({format:"text"})))},mceInsertLink:function(s,f,g){typeof g=="string"&&(g={href:g});var b=n.dom.getParent(n.selection.getNode(),"a");g.href=g.href.replace(/ /g,"%20"),(!b||!g.href)&&n.formatter.remove("link"),g.href&&n.formatter.apply("link",g,b)},selectAll:function(){var s=n.dom.getParent(n.selection.getStart(),cs);if(s){var f=n.dom.createRng();f.selectNodeContents(s),n.selection.setRng(f)}},mceNewDocument:function(){n.setContent("")},InsertLineBreak:function(s,f,g){return Yx(n,g),!0}});var i=function(s){return function(){var f=n.selection,g=f.isCollapsed()?[n.dom.getParent(f.getNode(),n.dom.isBlock)]:f.getSelectedBlocks(),b=JN(g,function(C){return!!n.formatter.matchNode(C,s)});return F5(b,!0)!==-1}};a.addCommands({JustifyLeft:i("alignleft"),JustifyCenter:i("aligncenter"),JustifyRight:i("alignright"),JustifyFull:i("alignjustify"),"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(s){return a.isFormatMatch(s)},mceBlockQuote:function(){return a.isFormatMatch("blockquote")},Outdent:function(){return nR(n)},"InsertUnorderedList,InsertOrderedList":function(s){var f=n.dom.getParent(n.selection.getNode(),"ul,ol");return f&&(s==="insertunorderedlist"&&f.tagName==="UL"||s==="insertorderedlist"&&f.tagName==="OL")}},"state"),a.addCommands({Undo:function(){n.undoManager.undo()},Redo:function(){n.undoManager.redo()}}),a.addQueryValueHandler("FontName",function(){return qN(n)},this),a.addQueryValueHandler("FontSize",function(){return KN(n)},this),a.addQueryValueHandler("LineHeight",function(){return XN(n)},this)},e}(),zh="data-mce-contenteditable",ZN=function(e,n,a){Mb(e,n)&&a===!1?$g(e,n):a&&nd(e,n)},Uk=function(e,n,a){try{e.getDoc().execCommand(n,!1,String(a))}catch(i){}},I0=function(e,n){e.dom.contentEditable=n?"true":"false"},QN=function(e){Ze($u(e,'*[contenteditable="true"]'),function(n){E(n,zh,"true"),I0(n,!1)})},Wk=function(e){Ze($u(e,"*["+zh+'="true"]'),function(n){St(n,zh),I0(n,!0)})},e8=function(e){te.from(e.selection.getNode()).each(function(n){n.removeAttribute("data-mce-selected")})},t8=function(e){e.selection.setRng(e.selection.getRng())},n8=function(e,n){var a=Z.fromDom(e.getBody());ZN(a,"mce-content-readonly",n),n?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),e8(e),e.readonly=!0,I0(a,!1),QN(a)):(e.readonly=!1,I0(a,!0),Wk(a),Uk(e,"StyleWithCSS",!1),Uk(e,"enableInlineTableEditing",!1),Uk(e,"enableObjectResizing",!1),gS(e)&&e.focus(),t8(e),e.nodeChanged())},cg=function(e){return e.readonly},P5=function(e){e.parser.addAttributeFilter("contenteditable",function(n){cg(e)&&Ze(n,function(a){a.attr(zh,a.attr("contenteditable")),a.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(zh,function(n){cg(e)&&Ze(n,function(a){a.attr("contenteditable",a.attr(zh))})}),e.serializer.addTempAttr(zh)},r8=function(e){e.serializer?P5(e):e.on("PreInit",function(){P5(e)})},a8=function(e){return e.type==="click"},o8=function(e,n){var a=function(i){return va(i,Z.fromDom(e.getBody()))};return Lv(n,"a",a).bind(function(i){return oe(i,"href")})},i8=function(e,n){if(a8(n)&&!qn.metaKeyPressed(n)){var a=Z.fromDom(n.target);o8(e,a).each(function(i){if(n.preventDefault(),/^#/.test(i)){var s=e.dom.select(i+',[name="'+Be(i,"#")+'"]');s.length&&e.selection.scrollIntoView(s[0],!0)}else window.open(i,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}},Ec=function(e){e.on("ShowCaret",function(n){cg(e)&&n.preventDefault()}),e.on("ObjectSelected",function(n){cg(e)&&n.preventDefault()})},Lh=Je.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," "),jk=function(){function e(n){this.bindings={},this.settings=n||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||_t}return e.isNative=function(n){return!!Lh[n.toLowerCase()]},e.prototype.fire=function(n,a){var i=n.toLowerCase(),s=kw(i,a||{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(s);var f=this.bindings[i];if(f)for(var g=0,b=f.length;g<b;g++){var C=f[g];if(!C.removed){if(C.once&&this.off(i,C.func),s.isImmediatePropagationStopped())return s;if(C.func.call(this.scope,s)===!1)return s.preventDefault(),s}}return s},e.prototype.on=function(n,a,i,s){if(a===!1&&(a=_t),a){var f={func:a,removed:!1};s&&Je.extend(f,s);for(var g=n.toLowerCase().split(" "),b=g.length;b--;){var C=g[b],k=this.bindings[C];k||(k=[],this.toggleEvent(C,!0)),i?k=Xn([f],k):k=Xn(Xn([],k),[f]),this.bindings[C]=k}}return this},e.prototype.off=function(n,a){var i=this;if(n)for(var s=n.toLowerCase().split(" "),f=s.length;f--;){var g=s[f],b=this.bindings[g];if(!g)return ur(this.bindings,function(k,_){i.toggleEvent(_,!1),delete i.bindings[_]}),this;if(b){if(!a)b.length=0;else{var C=ma(b,function(k){return k.func===a});b=C.fail,this.bindings[g]=b,Ze(C.pass,function(k){k.removed=!0})}b.length||(this.toggleEvent(n,!1),delete this.bindings[g])}}else ur(this.bindings,function(k,_){i.toggleEvent(_,!1)}),this.bindings={};return this},e.prototype.once=function(n,a,i){return this.on(n,a,i,{once:!0})},e.prototype.has=function(n){return n=n.toLowerCase(),!(!this.bindings[n]||this.bindings[n].length===0)},e}(),Y2=function(e){return e._eventDispatcher||(e._eventDispatcher=new jk({scope:e,toggleEvent:function(n,a){jk.isNative(n)&&e.toggleNativeEvent&&e.toggleNativeEvent(n,a)}})),e._eventDispatcher},iT={fire:function(e,n,a){var i=this;if(i.removed&&e!=="remove"&&e!=="detach")return n;var s=Y2(i).fire(e,n);if(a!==!1&&i.parent)for(var f=i.parent();f&&!s.isPropagationStopped();)f.fire(e,s,!1),f=f.parent();return s},on:function(e,n,a){return Y2(this).on(e,n,a)},off:function(e,n){return Y2(this).off(e,n)},once:function(e,n){return Y2(this).once(e,n)},hasEventListeners:function(e){return Y2(this).has(e)}},uT=Fa.DOM,Hh,cT=function(e,n){if(n==="selectionchange")return e.getDoc();if(!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(n))return e.getDoc().documentElement;var a=ty(e);return a?(e.eventRoot||(e.eventRoot=uT.select(a)[0]),e.eventRoot):e.getBody()},N5=function(e){return!e.hidden&&!cg(e)},Vh=function(e,n,a){N5(e)?e.fire(n,a):cg(e)&&i8(e,a)},I5=function(e,n){var a;if(e.delegates||(e.delegates={}),!(e.delegates[n]||e.removed)){var i=cT(e,n);if(ty(e)){if(Hh||(Hh={},e.editorManager.on("removeEditor",function(){e.editorManager.activeEditor||Hh&&(ur(Hh,function(s,f){e.dom.unbind(cT(e,f))}),Hh=null)})),Hh[n])return;a=function(s){for(var f=s.target,g=e.editorManager.get(),b=g.length;b--;){var C=g[b].getBody();(C===f||uT.isChildOf(f,C))&&Vh(g[b],n,s)}},Hh[n]=a,uT.bind(i,n,a)}else a=function(s){Vh(e,n,s)},uT.bind(i,n,a),e.delegates[n]=a}},$5=pn(pn({},iT),{bindPendingEventDelegates:function(){var e=this;Je.each(e._pendingNativeEvents,function(n){I5(e,n)})},toggleNativeEvent:function(e,n){var a=this;e==="focus"||e==="blur"||a.removed||(n?a.initialized?I5(a,e):a._pendingNativeEvents?a._pendingNativeEvents.push(e):a._pendingNativeEvents=[e]:a.initialized&&(a.dom.unbind(cT(a,e),e,a.delegates[e]),delete a.delegates[e]))},unbindAllNativeEvents:function(){var e=this,n=e.getBody(),a=e.dom;e.delegates&&(ur(e.delegates,function(i,s){e.dom.unbind(cT(e,s),s,i)}),delete e.delegates),!e.inline&&n&&a&&(n.onload=null,a.unbind(e.getWin()),a.unbind(e.getDoc())),a&&(a.unbind(n),a.unbind(e.getContainer()))}}),u8=["design","readonly"],Ul=function(e,n,a,i){var s=a[n.get()],f=a[i];try{f.activate()}catch(g){console.error("problem while activating editor mode "+i+":",g);return}s.deactivate(),s.editorReadOnly!==f.editorReadOnly&&n8(e,f.editorReadOnly),n.set(i),By(e,i)},c8=function(e,n,a,i){if(i!==a.get()){if(!cr(n,i))throw new Error("Editor mode '"+i+"' is invalid");e.initialized?Ul(e,a,n,i):e.on("init",function(){return Ul(e,a,n,i)})}},s8=function(e,n,a){var i;if(rt(u8,n))throw new Error("Cannot override default mode "+n);return pn(pn({},e),(i={},i[n]=pn(pn({},a),{deactivate:function(){try{a.deactivate()}catch(s){console.error("problem while deactivating editor mode "+n+":",s)}}}),i))},z5=function(e){var n=Ru("design"),a=Ru({design:{activate:ut,deactivate:ut,editorReadOnly:!1},readonly:{activate:ut,deactivate:ut,editorReadOnly:!0}});return r8(e),Ec(e),{isReadOnly:function(){return cg(e)},set:function(i){return c8(e,a.get(),n,i)},get:function(){return n.get()},register:function(i,s){a.set(s8(a.get(),i,s))}}},qk=Je.each,sT=Je.explode,L5={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},lT=Je.makeMap("alt,ctrl,shift,meta,access"),l8=function(e){var n,a={};qk(sT(e.toLowerCase(),"+"),function(s){s in lT?a[s]=!0:/^[0-9]{2,}$/.test(s)?a.keyCode=parseInt(s,10):(a.charCode=s.charCodeAt(0),a.keyCode=L5[s]||s.toUpperCase().charCodeAt(0))});var i=[a.keyCode];for(n in lT)a[n]?i.push(n):a[n]=!1;return a.id=i.join(","),a.access&&(a.alt=!0,Ln.mac?a.ctrl=!0:a.shift=!0),a.meta&&(Ln.mac?a.meta=!0:(a.ctrl=!0,a.meta=!1)),a},H5=function(){function e(n){this.shortcuts={},this.pendingPatterns=[],this.editor=n;var a=this;n.on("keyup keypress keydown",function(i){(a.hasModifier(i)||a.isFunctionKey(i))&&!i.isDefaultPrevented()&&(qk(a.shortcuts,function(s){if(a.matchShortcut(i,s))return a.pendingPatterns=s.subpatterns.slice(0),i.type==="keydown"&&a.executeShortcutAction(s),!0}),a.matchShortcut(i,a.pendingPatterns[0])&&(a.pendingPatterns.length===1&&i.type==="keydown"&&a.executeShortcutAction(a.pendingPatterns[0]),a.pendingPatterns.shift()))})}return e.prototype.add=function(n,a,i,s){var f=this,g=f.normalizeCommandFunc(i);return qk(sT(Je.trim(n)),function(b){var C=f.createShortcut(b,a,g,s);f.shortcuts[C.id]=C}),!0},e.prototype.remove=function(n){var a=this.createShortcut(n);return this.shortcuts[a.id]?(delete this.shortcuts[a.id],!0):!1},e.prototype.normalizeCommandFunc=function(n){var a=this,i=n;return typeof i=="string"?function(){a.editor.execCommand(i,!1,null)}:Je.isArray(i)?function(){a.editor.execCommand(i[0],i[1],i[2])}:i},e.prototype.createShortcut=function(n,a,i,s){var f=Je.map(sT(n,">"),l8);return f[f.length-1]=Je.extend(f[f.length-1],{func:i,scope:s||this.editor}),Je.extend(f[0],{desc:this.editor.translate(a),subpatterns:f.slice(1)})},e.prototype.hasModifier=function(n){return n.altKey||n.ctrlKey||n.metaKey},e.prototype.isFunctionKey=function(n){return n.type==="keydown"&&n.keyCode>=112&&n.keyCode<=123},e.prototype.matchShortcut=function(n,a){return!a||a.ctrl!==n.ctrlKey||a.meta!==n.metaKey||a.alt!==n.altKey||a.shift!==n.shiftKey?!1:n.keyCode===a.keyCode||n.charCode&&n.charCode===a.charCode?(n.preventDefault(),!0):!1},e.prototype.executeShortcutAction=function(n){return n.func?n.func.call(n.scope):null},e}(),f8=function(){var e={},n={},a={},i={},s={},f={},g={},b=function(k,_){return function(M,F){return k[M.toLowerCase()]=pn(pn({},F),{type:_})}},C=function(k,_){return i[k.toLowerCase()]=_};return{addButton:b(e,"button"),addGroupToolbarButton:b(e,"grouptoolbarbutton"),addToggleButton:b(e,"togglebutton"),addMenuButton:b(e,"menubutton"),addSplitButton:b(e,"splitbutton"),addMenuItem:b(n,"menuitem"),addNestedMenuItem:b(n,"nestedmenuitem"),addToggleMenuItem:b(n,"togglemenuitem"),addAutocompleter:b(a,"autocompleter"),addContextMenu:b(s,"contextmenu"),addContextToolbar:b(f,"contexttoolbar"),addContextForm:b(f,"contextform"),addSidebar:b(g,"sidebar"),addIcon:C,getAll:function(){return{buttons:e,menuItems:n,icons:i,popups:a,contextMenus:s,contextToolbars:f,sidebars:g}}}},v8=function(){var e=f8();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,getAll:e.getAll}},V5=Je.each,U5=Je.trim,W5="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),d8={ftp:21,http:80,https:443,mailto:25},sg=function(){function e(n,a){n=U5(n),this.settings=a||{};var i=this.settings.base_uri,s=this;if(/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n)){s.source=n;return}var f=n.indexOf("//")===0;if(n.indexOf("/")===0&&!f&&(n=(i&&i.protocol||"http")+"://mce_host"+n),!/^[\w\-]*:?\/\//.test(n)){var g=this.settings.base_uri?this.settings.base_uri.path:new e(document.location.href).directory;if(this.settings.base_uri&&this.settings.base_uri.protocol=="")n="//mce_host"+s.toAbsPath(g,n);else{var b=/([^#?]*)([#?]?.*)/.exec(n);n=(i&&i.protocol||"http")+"://mce_host"+s.toAbsPath(g,b[1])+b[2]}}n=n.replace(/@@/g,"(mce_at)");var C=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n);V5(W5,function(k,_){var M=C[_];M&&(M=M.replace(/\(mce_at\)/g,"@@")),s[k]=M}),i&&(s.protocol||(s.protocol=i.protocol),s.userInfo||(s.userInfo=i.userInfo),!s.port&&s.host==="mce_host"&&(s.port=i.port),(!s.host||s.host==="mce_host")&&(s.host=i.host),s.source=""),f&&(s.protocol="")}return e.parseDataUri=function(n){var a,i=decodeURIComponent(n).split(","),s=/data:([^;]+)/.exec(i[0]);return s&&(a=s[1]),{type:a,data:i[1]}},e.getDocumentBaseUrl=function(n){var a;return n.protocol.indexOf("http")!==0&&n.protocol!=="file:"?a=n.href:a=n.protocol+"//"+n.host+n.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(a)&&(a=a.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(a)||(a+="/")),a},e.prototype.setPath=function(n){var a=/^(.*?)\/?(\w+)?$/.exec(n);this.path=a[0],this.directory=a[1],this.file=a[2],this.source="",this.getURI()},e.prototype.toRelative=function(n){var a;if(n==="./")return n;var i=new e(n,{base_uri:this});if(i.host!=="mce_host"&&this.host!==i.host&&i.host||this.port!==i.port||this.protocol!==i.protocol&&i.protocol!=="")return i.getURI();var s=this.getURI(),f=i.getURI();return s===f||s.charAt(s.length-1)==="/"&&s.substr(0,s.length-1)===f?s:(a=this.toRelPath(this.path,i.path),i.query&&(a+="?"+i.query),i.anchor&&(a+="#"+i.anchor),a)},e.prototype.toAbsolute=function(n,a){var i=new e(n,{base_uri:this});return i.getURI(a&&this.isSameOrigin(i))},e.prototype.isSameOrigin=function(n){if(this.host==n.host&&this.protocol==n.protocol){if(this.port==n.port)return!0;var a=d8[this.protocol];if(a&&(this.port||a)==(n.port||a))return!0}return!1},e.prototype.toRelPath=function(n,a){var i=0,s="",f,g,b=n.substring(0,n.lastIndexOf("/")).split("/"),C=a.split("/");if(b.length>=C.length){for(f=0,g=b.length;f<g;f++)if(f>=C.length||b[f]!==C[f]){i=f+1;break}}if(b.length<C.length){for(f=0,g=C.length;f<g;f++)if(f>=b.length||b[f]!==C[f]){i=f+1;break}}if(i===1)return a;for(f=0,g=b.length-(i-1);f<g;f++)s+="../";for(f=i-1,g=C.length;f<g;f++)f!==i-1?s+="/"+C[f]:s+=C[f];return s},e.prototype.toAbsPath=function(n,a){var i,s=0,f=[],g,b=/\/$/.test(a)?"/":"",C=n.split("/"),k=a.split("/");for(V5(C,function(_){_&&f.push(_)}),C=f,i=k.length-1,f=[];i>=0;i--)if(!(k[i].length===0||k[i]===".")){if(k[i]===".."){s++;continue}if(s>0){s--;continue}f.push(k[i])}return i=C.length-s,i<=0?g=Ga(f).join("/"):g=C.slice(0,i).join("/")+"/"+Ga(f).join("/"),g.indexOf("/")!==0&&(g="/"+g),b&&g.lastIndexOf("/")!==g.length-1&&(g+=b),g},e.prototype.getURI=function(n){n===void 0&&(n=!1);var a;return(!this.source||n)&&(a="",n||(this.protocol?a+=this.protocol+"://":a+="//",this.userInfo&&(a+=this.userInfo+"@"),this.host&&(a+=this.host),this.port&&(a+=":"+this.port)),this.path&&(a+=this.path),this.query&&(a+="?"+this.query),this.anchor&&(a+="#"+this.anchor),this.source=a),this.source},e}(),Uh=Fa.DOM,j5=Je.extend,m8=Je.each,q5=Je.resolve,G5=Ln.ie,$0=function(){function e(n,a,i){var s=this;this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.editorManager=i,this.documentBaseUrl=i.documentBaseURL,j5(this,$5),this.settings=P2(this,n,this.documentBaseUrl,i.defaultSettings,a),this.settings.suffix&&(i.suffix=this.settings.suffix),this.suffix=i.suffix,this.settings.base_url&&i._setBaseUrl(this.settings.base_url),this.baseUri=i.baseURI,this.settings.referrer_policy&&(tf.ScriptLoader._setReferrerPolicy(this.settings.referrer_policy),Fa.DOM.styleSheetLoader._setReferrerPolicy(this.settings.referrer_policy)),Ei.languageLoad=this.settings.language_load,Ei.baseURL=i.baseURL,this.id=n,this.setDirty(!1),this.documentBaseURI=new sg(this.settings.document_base_url,{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=!!this.settings.inline,this.shortcuts=new H5(this),this.editorCommands=new Vk(this),this.settings.cache_suffix&&(Ln.cacheSuffix=this.settings.cache_suffix.replace(/^[\?\&]+/,"")),this.ui={registry:v8(),styleSheetLoader:void 0,show:ut,hide:ut,enable:ut,disable:ut,isDisabled:_t};var f=this,g=z5(f);this.mode=g,this.setMode=g.set,i.fire("SetupEditor",{editor:this}),this.execCallback("setup",this),this.$=vr.overrideDefaults(function(){return{context:s.inline?s.getBody():s.getDoc(),element:s.getBody()}})}return e.prototype.render=function(){IN(this)},e.prototype.focus=function(n){this.execCommand("mceFocus",!1,n)},e.prototype.hasFocus=function(){return Ml(this)},e.prototype.execCallback=function(n){for(var a=[],i=1;i<arguments.length;i++)a[i-1]=arguments[i];var s=this,f=s.settings[n],g;if(!!f)return s.callbackLookup&&(g=s.callbackLookup[n])&&(f=g.func,g=g.scope),typeof f=="string"&&(g=f.replace(/\.\w+$/,""),g=g?q5(g):0,f=q5(f),s.callbackLookup=s.callbackLookup||{},s.callbackLookup[n]={func:f,scope:g}),f.apply(g||s,a)},e.prototype.translate=function(n){return xo.translate(n)},e.prototype.getParam=function(n,a,i){return u6(this,n,a,i)},e.prototype.hasPlugin=function(n,a){var i=rt(s1(this).split(/[ ,]/),n);return i?a?bf.get(n)!==void 0:!0:!1},e.prototype.nodeChanged=function(n){this._nodeChangeDispatcher.nodeChanged(n)},e.prototype.addCommand=function(n,a,i){this.editorCommands.addCommand(n,a,i)},e.prototype.addQueryStateHandler=function(n,a,i){this.editorCommands.addQueryStateHandler(n,a,i)},e.prototype.addQueryValueHandler=function(n,a,i){this.editorCommands.addQueryValueHandler(n,a,i)},e.prototype.addShortcut=function(n,a,i,s){this.shortcuts.add(n,a,i,s)},e.prototype.execCommand=function(n,a,i,s){return this.editorCommands.execCommand(n,a,i,s)},e.prototype.queryCommandState=function(n){return this.editorCommands.queryCommandState(n)},e.prototype.queryCommandValue=function(n){return this.editorCommands.queryCommandValue(n)},e.prototype.queryCommandSupported=function(n){return this.editorCommands.queryCommandSupported(n)},e.prototype.show=function(){var n=this;n.hidden&&(n.hidden=!1,n.inline?n.getBody().contentEditable="true":(Uh.show(n.getContainer()),Uh.hide(n.id)),n.load(),n.fire("show"))},e.prototype.hide=function(){var n=this,a=n.getDoc();n.hidden||(G5&&a&&!n.inline&&a.execCommand("SelectAll"),n.save(),n.inline?(n.getBody().contentEditable="false",n===n.editorManager.focusedEditor&&(n.editorManager.focusedEditor=null)):(Uh.hide(n.getContainer()),Uh.setStyle(n.id,"display",n.orgDisplay)),n.hidden=!0,n.fire("hide"))},e.prototype.isHidden=function(){return!!this.hidden},e.prototype.setProgressState=function(n,a){this.fire("ProgressState",{state:n,time:a})},e.prototype.load=function(n){var a=this,i=a.getElement(),s;if(a.removed)return"";if(i){n=n||{},n.load=!0;var f=bg(i)?i.value:i.innerHTML;return s=a.setContent(f,n),n.element=i,n.no_events||a.fire("LoadContent",n),n.element=i=null,s}},e.prototype.save=function(n){var a=this,i=a.getElement(),s,f;if(!(!i||!a.initialized||a.removed))return n=n||{},n.save=!0,n.element=i,s=n.content=a.getContent(n),n.no_events||a.fire("SaveContent",n),n.format==="raw"&&a.fire("RawSaveContent",n),s=n.content,bg(i)?i.value=s:((n.is_removing||!a.inline)&&(i.innerHTML=s),(f=Uh.getParent(a.id,"form"))&&m8(f.elements,function(g){if(g.name===a.id)return g.value=s,!1})),n.element=i=null,n.set_dirty!==!1&&a.setDirty(!1),s},e.prototype.setContent=function(n,a){return F4(this,n,a)},e.prototype.getContent=function(n){return HM(this,n)},e.prototype.insertContent=function(n,a){a&&(n=j5({content:n},a)),this.execCommand("mceInsertContent",!1,n)},e.prototype.resetContent=function(n){n===void 0?F4(this,this.startContent,{format:"raw"}):F4(this,n),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()},e.prototype.isDirty=function(){return!this.isNotDirty},e.prototype.setDirty=function(n){var a=!this.isNotDirty;this.isNotDirty=!n,n&&n!==a&&this.fire("dirty")},e.prototype.getContainer=function(){var n=this;return n.container||(n.container=Uh.get(n.editorContainer||n.id+"_parent")),n.container},e.prototype.getContentAreaContainer=function(){return this.contentAreaContainer},e.prototype.getElement=function(){return this.targetElm||(this.targetElm=Uh.get(this.id)),this.targetElm},e.prototype.getWin=function(){var n=this,a;return n.contentWindow||(a=n.iframeElement,a&&(n.contentWindow=a.contentWindow)),n.contentWindow},e.prototype.getDoc=function(){var n=this,a;return n.contentDocument||(a=n.getWin(),a&&(n.contentDocument=a.document)),n.contentDocument},e.prototype.getBody=function(){var n=this.getDoc();return this.bodyElement||(n?n.body:null)},e.prototype.convertURL=function(n,a,i){var s=this,f=s.settings;return f.urlconverter_callback?s.execCallback("urlconverter_callback",n,i,!0,a):!f.convert_urls||i&&i.nodeName==="LINK"||n.indexOf("file:")===0||n.length===0?n:f.relative_urls?s.documentBaseURI.toRelative(n):(n=s.documentBaseURI.toAbsolute(n,f.remove_script_host),n)},e.prototype.addVisual=function(n){$N(this,n)},e.prototype.remove=function(){WM(this)},e.prototype.destroy=function(n){jM(this,n)},e.prototype.uploadImages=function(n){return this.editorUpload.uploadImages(n)},e.prototype._scanForImages=function(){return this.editorUpload.scanForImages()},e.prototype.addButton=function(){throw new Error("editor.addButton has been removed in tinymce 5x, use editor.ui.registry.addButton or editor.ui.registry.addToggleButton or editor.ui.registry.addSplitButton instead")},e.prototype.addSidebar=function(){throw new Error("editor.addSidebar has been removed in tinymce 5x, use editor.ui.registry.addSidebar instead")},e.prototype.addMenuItem=function(){throw new Error("editor.addMenuItem has been removed in tinymce 5x, use editor.ui.registry.addMenuItem instead")},e.prototype.addContextToolbar=function(){throw new Error("editor.addContextToolbar has been removed in tinymce 5x, use editor.ui.registry.addContextToolbar instead")},e}(),Zs=Fa.DOM,g8=Je.explode,Ov=Je.each,Gk=Je.extend,K5=0,X5=!1,fT,lg=[],kc=[],h8=function(e){return e!=="length"},Y5=function(e){var n=e.type;Ov(Dv.get(),function(a){switch(n){case"scroll":a.fire("ScrollWindow",e);break;case"resize":a.fire("ResizeWindow",e);break}})},J5=function(e){e!==X5&&(e?vr(window).on("resize scroll",Y5):vr(window).off("resize scroll",Y5),X5=e)},Z5=function(e){var n=kc;delete lg[e.id];for(var a=0;a<lg.length;a++)if(lg[a]===e){lg.splice(a,1);break}return kc=dn(kc,function(i){return e!==i}),Dv.activeEditor===e&&(Dv.activeEditor=kc.length>0?kc[0]:null),Dv.focusedEditor===e&&(Dv.focusedEditor=null),n.length!==kc.length},p8=function(e){return e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(Z5(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0,e=null),e},Vu=document.compatMode!=="CSS1Compat",Dv=pn(pn({},iT),{baseURI:null,baseURL:null,defaultSettings:{},documentBaseURL:null,suffix:null,$:vr,majorVersion:"5",minorVersion:"9.2",releaseDate:"2021-09-08",editors:lg,i18n:xo,activeEditor:null,focusedEditor:null,settings:{},setup:function(){var e=this,n,a,i="";a=sg.getDocumentBaseUrl(document.location),/^[^:]+:\/\/\/?[^\/]+\//.test(a)&&(a=a.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(a)||(a+="/"));var s=window.tinymce||window.tinyMCEPreInit;if(s)n=s.base||s.baseURL,i=s.suffix;else{for(var f=document.getElementsByTagName("script"),g=0;g<f.length;g++){var b=f[g].src||"";if(b!==""){var C=b.substring(b.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(b)){C.indexOf(".min")!==-1&&(i=".min"),n=b.substring(0,b.lastIndexOf("/"));break}}}if(!n&&document.currentScript){var b=document.currentScript.src;b.indexOf(".min")!==-1&&(i=".min"),n=b.substring(0,b.lastIndexOf("/"))}}e.baseURL=new sg(a).toAbsolute(n),e.documentBaseURL=a,e.baseURI=new sg(e.baseURL),e.suffix=i,K1(e)},overrideDefaults:function(e){var n=e.base_url;n&&this._setBaseUrl(n);var a=e.suffix;e.suffix&&(this.suffix=a),this.defaultSettings=e;var i=e.plugin_base_urls;i!==void 0&&ur(i,function(s,f){Ei.PluginManager.urls[f]=s})},init:function(e){var n=this,a,i=Je.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),s=function(M,F){return M.inline&&F.tagName.toLowerCase()in i},f=function(M){var F=M.id;return F||(F=ua(M,"name").filter(function(U){return!Zs.get(U)}).getOrThunk(Zs.uniqueId),M.setAttribute("id",F)),F},g=function(M){var F=e[M];if(!!F)return F.apply(n,[])},b=function(M,F){return F.constructor===RegExp?F.test(M.className):Zs.hasClass(M,F)},C=function(M){var F=[];if(Ln.browser.isIE()&&Ln.browser.version.major<11)return tg("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/"),[];if(Vu)return tg("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[];if(M.types)return Ov(M.types,function(K){F=F.concat(Zs.select(K.selector))}),F;if(M.selector)return Zs.select(M.selector);if(M.target)return[M.target];switch(M.mode){case"exact":var U=M.elements||"";U.length>0&&Ov(g8(U),function(K){var j=Zs.get(K);j?F.push(j):Ov(document.forms,function(J){Ov(J.elements,function(fe){fe.name===K&&(K="mce_editor_"+K5++,Zs.setAttrib(fe,"id",K),F.push(fe))})})});break;case"textareas":case"specific_textareas":Ov(Zs.select("textarea"),function(K){M.editor_deselector&&b(K,M.editor_deselector)||(!M.editor_selector||b(K,M.editor_selector))&&F.push(K)});break}return F},k=function(M){a=M},_=function(){var M=0,F=[],U,K=function(j,J,fe){var ve=new $0(j,J,n);F.push(ve),ve.on("init",function(){++M===U.length&&k(F)}),ve.targetElm=ve.targetElm||fe,ve.render()};if(Zs.unbind(window,"ready",_),g("onpageload"),U=vr.unique(C(e)),e.types){Ov(e.types,function(j){Je.each(U,function(J){return Zs.is(J,j.selector)?(K(f(J),Gk({},e,j),J),!1):!0})});return}Je.each(U,function(j){p8(n.get(j.id))}),U=Je.grep(U,function(j){return!n.get(j.id)}),U.length===0?k([]):Ov(U,function(j){s(e,j)?tg("Could not initialize inline editor on invalid inline target element",j):K(f(j),e,j)})};return n.settings=e,Zs.bind(window,"ready",_),new yi(function(M){a?M(a):k=function(F){M(F)}})},get:function(e){return arguments.length===0?kc.slice(0):wn(e)?ra(kc,function(n){return n.id===e}).getOr(null):rn(e)&&kc[e]?kc[e]:null},add:function(e){var n=this,a=lg[e.id];return a===e||(n.get(e.id)===null&&(h8(e.id)&&(lg[e.id]=e),lg.push(e),kc.push(e)),J5(!0),n.activeEditor=e,n.fire("AddEditor",{editor:e}),fT||(fT=function(i){var s=n.fire("BeforeUnload");if(s.returnValue)return i.preventDefault(),i.returnValue=s.returnValue,s.returnValue},window.addEventListener("beforeunload",fT))),e},createEditor:function(e,n){return this.add(new $0(e,n,this))},remove:function(e){var n=this,a,i;if(!e){for(a=kc.length-1;a>=0;a--)n.remove(kc[a]);return}if(wn(e)){Ov(Zs.select(e),function(s){i=n.get(s.id),i&&n.remove(i)});return}return i=e,re(n.get(i.id))?null:(Z5(i)&&n.fire("RemoveEditor",{editor:i}),kc.length===0&&window.removeEventListener("beforeunload",fT),i.remove(),J5(kc.length>0),i)},execCommand:function(e,n,a){var i=this,s=i.get(a);switch(e){case"mceAddEditor":return i.get(a)||new $0(a,i.settings,i).render(),!0;case"mceRemoveEditor":return s&&s.remove(),!0;case"mceToggleEditor":return s?(s.isHidden()?s.show():s.hide(),!0):(i.execCommand("mceAddEditor",!1,a),!0)}return i.activeEditor?i.activeEditor.execCommand(e,n,a):!1},triggerSave:function(){Ov(kc,function(e){e.save()})},addI18n:function(e,n){xo.add(e,n)},translate:function(e){return xo.translate(e)},setActive:function(e){var n=this.activeEditor;this.activeEditor!==e&&(n&&n.fire("deactivate",{relatedTarget:e}),e.fire("activate",{relatedTarget:n})),this.activeEditor=e},_setBaseUrl:function(e){this.baseURL=new sg(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new sg(this.baseURL)}});Dv.setup();var xf=Math.min,Wh=Math.max,J2=Math.round,Q5=function(e,n,a){var i=n.x,s=n.y,f=e.w,g=e.h,b=n.w,C=n.h,k=(a||"").split("");return k[0]==="b"&&(s+=C),k[1]==="r"&&(i+=b),k[0]==="c"&&(s+=J2(C/2)),k[1]==="c"&&(i+=J2(b/2)),k[3]==="b"&&(s-=g),k[4]==="r"&&(i-=f),k[3]==="c"&&(s-=J2(g/2)),k[4]==="c"&&(i-=J2(f/2)),z0(i,s,f,g)},Kk=function(e,n,a,i){var s,f;for(f=0;f<i.length;f++)if(s=Q5(e,n,i[f]),s.x>=a.x&&s.x+s.w<=a.w+a.x&&s.y>=a.y&&s.y+s.h<=a.h+a.y)return i[f];return null},Xk=function(e,n,a){return z0(e.x-n,e.y-a,e.w+n*2,e.h+a*2)},eB=function(e,n){var a=Wh(e.x,n.x),i=Wh(e.y,n.y),s=xf(e.x+e.w,n.x+n.w),f=xf(e.y+e.h,n.y+n.h);return s-a<0||f-i<0?null:z0(a,i,s-a,f-i)},tB=function(e,n,a){var i=e.x,s=e.y,f=e.x+e.w,g=e.y+e.h,b=n.x+n.w,C=n.y+n.h,k=Wh(0,n.x-i),_=Wh(0,n.y-s),M=Wh(0,f-b),F=Wh(0,g-C);return i+=k,s+=_,a&&(f+=k,g+=_,i-=M,s-=F),f-=M,g-=F,z0(i,s,f-i,g-s)},z0=function(e,n,a,i){return{x:e,y:n,w:a,h:i}},b8=function(e){return z0(e.left,e.top,e.width,e.height)},y8={inflate:Xk,relativePosition:Q5,findBestRelativePosition:Kk,intersect:eB,clamp:tB,create:z0,fromClientRect:b8},w8=function(e,n,a){a===void 0&&(a=1e3);var i=!1,s=null,f=function(k){return function(){for(var _=[],M=0;M<arguments.length;M++)_[M]=arguments[M];i||(i=!0,s!==null&&(clearTimeout(s),s=null),k.apply(null,_))}},g=f(e),b=f(n),C=function(){for(var k=[],_=0;_<arguments.length;_++)k[_]=arguments[_];!i&&s===null&&(s=setTimeout(function(){return b.apply(null,k)},a))};return{start:C,resolve:g,reject:b}},C8=function(){var e={},n={},a=function(s,f){var g='Script at URL "'+f+'" failed to load',b='Script at URL "'+f+"\" did not call `tinymce.Resource.add('"+s+"', data)` within 1 second";if(e[s]!==void 0)return e[s];var C=new yi(function(k,_){var M=w8(k,_);n[s]=M.resolve,tf.ScriptLoader.loadScript(f,function(){return M.start(b)},function(){return M.reject(g)})});return e[s]=C,C},i=function(s,f){n[s]!==void 0&&(n[s](f),delete n[s]),e[s]=yi.resolve(f)};return{load:a,add:i}},nB=C8(),vT=Je.each,S8=Je.extend,rB,Yk,aB=function(){};aB.extend=rB=function(e){var n=this,a=n.prototype,i=function(){var b,C,k,_=this;if(!Yk&&(_.init&&_.init.apply(_,arguments),C=_.Mixins,C))for(b=C.length;b--;)k=C[b],k.init&&k.init.apply(_,arguments)},s=function(){return this},f=function(b,C){return function(){var k=this,_=k._super;k._super=a[b];var M=C.apply(k,arguments);return k._super=_,M}};Yk=!0;var g=new n;return Yk=!1,e.Mixins&&(vT(e.Mixins,function(b){for(var C in b)C!=="init"&&(e[C]=b[C])}),a.Mixins&&(e.Mixins=a.Mixins.concat(e.Mixins))),e.Methods&&vT(e.Methods.split(","),function(b){e[b]=s}),e.Properties&&vT(e.Properties.split(","),function(b){var C="_"+b;e[b]=function(k){var _=this;return k!==void 0?(_[C]=k,_):_[C]}}),e.Statics&&vT(e.Statics,function(b,C){i[C]=b}),e.Defaults&&a.Defaults&&(e.Defaults=S8({},a.Defaults,e.Defaults)),ur(e,function(b,C){typeof b=="function"&&a[C]?g[C]=f(C,b):g[C]=b}),i.prototype=g,i.constructor=i,i.extend=rB,i};var dT=Math.min,Z2=Math.max,jh=Math.round,x8=function(e){var n={},a=0,i=0,s=0,f=function(M,F,U){var K,j,J;K=0,j=0,J=0,M=M/255,F=F/255,U=U/255;var fe=dT(M,dT(F,U)),ve=Z2(M,Z2(F,U));if(fe===ve)return J=fe,{h:0,s:0,v:J*100};var ae=M===fe?F-U:U===fe?M-F:U-M;return K=M===fe?3:U===fe?1:5,K=60*(K-ae/(ve-fe)),j=(ve-fe)/ve,J=ve,{h:jh(K),s:jh(j*100),v:jh(J*100)}},g=function(M,F,U){if(M=(parseInt(M,10)||0)%360,F=parseInt(F,10)/100,U=parseInt(U,10)/100,F=Z2(0,dT(F,1)),U=Z2(0,dT(U,1)),F===0){a=i=s=jh(255*U);return}var K=M/60,j=U*F,J=j*(1-Math.abs(K%2-1)),fe=U-j;switch(Math.floor(K)){case 0:a=j,i=J,s=0;break;case 1:a=J,i=j,s=0;break;case 2:a=0,i=j,s=J;break;case 3:a=0,i=J,s=j;break;case 4:a=J,i=0,s=j;break;case 5:a=j,i=0,s=J;break;default:a=i=s=0}a=jh(255*(a+fe)),i=jh(255*(i+fe)),s=jh(255*(s+fe))},b=function(){var M=function(F){return F=parseInt(F,10).toString(16),F.length>1?F:"0"+F};return"#"+M(a)+M(i)+M(s)},C=function(){return{r:a,g:i,b:s}},k=function(){return f(a,i,s)},_=function(M){var F;return typeof M=="object"?"r"in M?(a=M.r,i=M.g,s=M.b):"v"in M&&g(M.h,M.s,M.v):(F=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(M))?(a=parseInt(F[1],10),i=parseInt(F[2],10),s=parseInt(F[3],10)):(F=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(M))?(a=parseInt(F[1],16),i=parseInt(F[2],16),s=parseInt(F[3],16)):(F=/#([0-F])([0-F])([0-F])/gi.exec(M))&&(a=parseInt(F[1]+F[1],16),i=parseInt(F[2]+F[2],16),s=parseInt(F[3]+F[3],16)),a=a<0?0:a>255?255:a,i=i<0?0:i>255?255:i,s=s<0?0:s>255?255:s,n};return e&&_(e),n.toRgb=C,n.toHsv=k,n.toHex=b,n.parse=_,n},T8=function(e){var n=JSON.stringify(e);return wn(n)?n.replace(/[\u0080-\uFFFF]/g,function(a){var i=a.charCodeAt(0).toString(16);return"\\u"+"0000".substring(i.length)+i}):n},Q2={serialize:T8,parse:function(e){try{return JSON.parse(e)}catch(n){}}},ew={callbacks:{},count:0,send:function(e){var n=this,a=Fa.DOM,i=e.count!==void 0?e.count:n.count,s="tinymce_jsonp_"+i;n.callbacks[i]=function(f){a.remove(s),delete n.callbacks[i],e.callback(f)},a.add(a.doc.body,"script",{id:s,src:e.url,type:"text/javascript"}),n.count++}},Tf=pn(pn({},iT),{send:function(e){var n,a=0,i=function(){!e.async||n.readyState===4||a++>1e4?(e.success&&a<1e4&&n.status===200?e.success.call(e.success_scope,""+n.responseText,n,e):e.error&&e.error.call(e.error_scope,a>1e4?"TIMED_OUT":"GENERAL",n,e),n=null):sn.setTimeout(i,10)};if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=e.async!==!1,e.data=e.data||"",Tf.fire("beforeInitialize",{settings:e}),n=new XMLHttpRequest,n.overrideMimeType&&n.overrideMimeType(e.content_type),n.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.crossDomain&&(n.withCredentials=!0),e.content_type&&n.setRequestHeader("Content-Type",e.content_type),e.requestheaders&&Je.each(e.requestheaders,function(s){n.setRequestHeader(s.key,s.value)}),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n=Tf.fire("beforeSend",{xhr:n,settings:e}).xhr,n.send(e.data),!e.async)return i();sn.setTimeout(i,10)}}),qh=Je.extend,Jk=function(){function e(n){this.settings=qh({},n),this.count=0}return e.sendRPC=function(n){return new e().send(n)},e.prototype.send=function(n){var a=n.error,i=n.success,s=qh(this.settings,n);s.success=function(f,g){f=Q2.parse(f),typeof f=="undefined"&&(f={error:"JSON Parse error."}),f.error?a.call(s.error_scope||s.scope,f.error,g):i.call(s.success_scope||s.scope,f.result)},s.error=function(f,g){a&&a.call(s.error_scope||s.scope,f,g)},s.data=Q2.serialize({id:n.id||"c"+this.count++,method:n.method,params:n.params}),s.content_type="application/json",Tf.send(s)},e}(),Zk=function(){return function(){var e={},n=[],a={getItem:function(i){var s=e[i];return s||null},setItem:function(i,s){n.push(i),e[i]=String(s)},key:function(i){return n[i]},removeItem:function(i){n=n.filter(function(s){return s===i}),delete e[i]},clear:function(){n=[],e={}},length:0};return Object.defineProperty(a,"length",{get:function(){return n.length},configurable:!1,enumerable:!1}),a}()},L0;try{var mT="__storage_test__";L0=window.localStorage,L0.setItem(mT,mT),L0.removeItem(mT)}catch(e){L0=Zk()}var E8=L0,oB={geom:{Rect:y8},util:{Promise:yi,Delay:sn,Tools:Je,VK:qn,URI:sg,Class:aB,EventDispatcher:jk,Observable:iT,I18n:xo,XHR:Tf,JSON:Q2,JSONRequest:Jk,JSONP:ew,LocalStorage:E8,Color:x8,ImageUploader:ZO},dom:{EventUtils:qv,Sizzle:Ea,DomQuery:vr,TreeWalker:wi,TextSeeker:Wp,DOMUtils:Fa,ScriptLoader:tf,RangeUtils:dh,Serializer:FO,StyleSheetLoader:Mc,ControlSelection:fh,BookmarkManager:yd,Selection:bO,Event:qv.Event},html:{Styles:pp,Entities:Wv,Node:Gc,Schema:Zf,SaxParser:Ad,DomParser:M4,Writer:bs,Serializer:Gm},Env:Ln,AddOnManager:Ei,Annotator:VC,Formatter:j4,UndoManager:nD,EditorCommands:Vk,WindowManager:T0,NotificationManager:KO,EditorObservable:$5,Shortcuts:H5,Editor:$0,FocusManager:Gy,EditorManager:Dv,DOM:Fa.DOM,ScriptLoader:tf.ScriptLoader,PluginManager:bf,ThemeManager:La,IconManager:N2,Resource:nB,trim:Je.trim,isArray:Je.isArray,is:Je.is,toArray:Je.toArray,makeMap:Je.makeMap,each:Je.each,map:Je.map,grep:Je.grep,inArray:Je.inArray,extend:Je.extend,create:Je.create,walk:Je.walk,createNS:Je.createNS,resolve:Je.resolve,explode:Je.explode,_addCacheSuffix:Je._addCacheSuffix,isOpera:Ln.opera,isWebKit:Ln.webkit,isIE:Ln.ie,isGecko:Ln.gecko,isMac:Ln.mac},Qk=Je.extend(Dv,oB),k8=function(e){try{Nt.exports=e}catch(n){}},A8=function(e){window.tinymce=e,window.tinyMCE=e};A8(Qk),k8(Qk)})()})(y$);var jU=y$.exports,qU=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],GU=function(Nt){return qU.map(function(on){return on.toLowerCase()}).indexOf(Nt.toLowerCase())!==-1},KU=function(Nt,on,vn){Object.keys(on).filter(GU).forEach(function(or){var Ut=on[or];typeof Ut=="function"&&(or==="onInit"?Ut(Nt,vn):vn.on(or.substring(2),function(Vn){return Ut(Vn,vn)}))})},XU=function(Nt,on,vn,or){var Ut=Nt.modelEvents?Nt.modelEvents:null,Vn=Array.isArray(Ut)?Ut.join(" "):Ut;AB(or,function(Sn,An){vn&&typeof Sn=="string"&&Sn!==An&&Sn!==vn.getContent({format:Nt.outputFormat})&&vn.setContent(Sn)}),vn.on(Vn||"change input undo redo",function(){on.emit("update:modelValue",vn.getContent({format:Nt.outputFormat}))})},YU=function(Nt,on,vn,or,Ut,Vn){or.setContent(Vn()),vn.attrs["onUpdate:modelValue"]&&XU(on,vn,or,Ut),KU(Nt,vn.attrs,or)},w$=0,C$=function(Nt){var on=Date.now(),vn=Math.floor(Math.random()*1e9);return w$++,Nt+"_"+vn+w$+String(on)},JU=function(Nt){return Nt!==null&&Nt.tagName.toLowerCase()==="textarea"},S$=function(Nt){return typeof Nt=="undefined"||Nt===""?[]:Array.isArray(Nt)?Nt:Nt.split(" ")},ZU=function(Nt,on){return S$(Nt).concat(S$(on))},QU=function(Nt){return Nt==null},x$=function(){return{listeners:[],scriptId:C$("tiny-script"),scriptLoaded:!1}},eW=function(){var Nt=x$(),on=function(Ut,Vn,Sn,An){var jt=Vn.createElement("script");jt.referrerPolicy="origin",jt.type="application/javascript",jt.id=Ut,jt.src=Sn;var ia=function(){jt.removeEventListener("load",ia),An()};jt.addEventListener("load",ia),Vn.head&&Vn.head.appendChild(jt)},vn=function(Ut,Vn,Sn){Nt.scriptLoaded?Sn():(Nt.listeners.push(Sn),Ut.getElementById(Nt.scriptId)||on(Nt.scriptId,Ut,Vn,function(){Nt.listeners.forEach(function(An){return An()}),Nt.scriptLoaded=!0}))},or=function(){Nt=x$()};return{load:vn,reinitialize:or}},tW=eW(),nW=function(){return typeof window!="undefined"?window:global},sA=function(){var Nt=nW();return Nt&&Nt.tinymce?Nt.tinymce:null},rW={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(Nt){return Nt==="html"||Nt==="text"}}},OB=function(){return OB=Object.assign||function(Nt){for(var on,vn=1,or=arguments.length;vn<or;vn++){on=arguments[vn];for(var Ut in on)Object.prototype.hasOwnProperty.call(on,Ut)&&(Nt[Ut]=on[Ut])}return Nt},OB.apply(this,arguments)},aW=function(Nt,on,vn,or){return Nt(or||"div",{id:on,ref:vn})},oW=function(Nt,on,vn){return Nt("textarea",{id:on,visibility:"hidden",ref:vn})},iW=NU({props:rW,setup:function(Nt,on){var vn=IU(Nt),or=vn.disabled,Ut=vn.modelValue,Vn=CI(null),Sn=null,An=Nt.id||C$("tiny-vue"),jt=Nt.init&&Nt.init.inline||Nt.inline,ia=!!on.attrs["onUpdate:modelValue"],Fr=!0,un=Nt.initialValue?Nt.initialValue:"",br="",mr=function(He){return ia?function(){return(Ut==null?void 0:Ut.value)?Ut.value:""}:function(){return He?un:br}},it=function(){var He=mr(Fr),wn=OB(OB({},Nt.init),{readonly:Nt.disabled,selector:"#"+An,plugins:ZU(Nt.init&&Nt.init.plugins,Nt.plugins),toolbar:Nt.toolbar||Nt.init&&Nt.init.toolbar,inline:jt,setup:function(wt){Sn=wt,wt.on("init",function(Un){return YU(Un,Nt,on,wt,Ut,He)}),Nt.init&&typeof Nt.init.setup=="function"&&Nt.init.setup(wt)}});JU(Vn.value)&&(Vn.value.style.visibility=""),sA().init(wn),Fr=!1};return AB(or,function(He){Sn!==null&&Sn.setMode(He?"readonly":"design")}),d$(function(){if(sA()!==null)it();else if(Vn.value&&Vn.value.ownerDocument){var He=Nt.cloudChannel?Nt.cloudChannel:"5",wn=Nt.apiKey?Nt.apiKey:"no-api-key",wt=QU(Nt.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/"+wn+"/tinymce/"+He+"/tinymce.min.js":Nt.tinymceScriptSrc;tW.load(Vn.value.ownerDocument,wt,it)}}),$U(function(){sA()!==null&&sA().remove(Sn)}),jt||(zU(function(){Fr||it()}),LU(function(){var He;ia||(br=Sn.getContent()),(He=sA())===null||He===void 0||He.remove(Sn)})),function(){return jt?aW(m$,An,Vn,Nt.tagName):oW(m$,An,Vn)}}});(function(){var Nt=function(t){var r=typeof t;return t===null?"null":r==="object"&&(Array.prototype.isPrototypeOf(t)||t.constructor&&t.constructor.name==="Array")?"array":r==="object"&&(String.prototype.isPrototypeOf(t)||t.constructor&&t.constructor.name==="String")?"string":r},on=function(t){return function(r){return Nt(r)===t}},vn=function(t){return function(r){return typeof r===t}},or=function(t){return function(r){return t===r}},Ut=on("string"),Vn=on("object"),Sn=on("array"),An=or(null),jt=vn("boolean"),ia=or(void 0),Fr=function(t){return t==null},un=function(t){return!Fr(t)},br=vn("function"),mr=vn("number"),it=function(t,r){if(Sn(t)){for(var o=0,c=t.length;o<c;++o)if(!r(t[o]))return!1;return!0}return!1},He=function(){},wn=function(t){return function(){return t()}},wt=function(t,r){return function(){for(var o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];return t(r.apply(null,o))}},Un=function(t,r){return function(o){return t(r(o))}},re=function(t){return function(){return t}},Te=function(t){return t},qe=function(t,r){return t===r};function gt(t){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return function(){for(var c=[],v=0;v<arguments.length;v++)c[v]=arguments[v];var m=r.concat(c);return t.apply(null,m)}}var pt=function(t){return function(r){return!t(r)}},bt=function(t){return function(){throw new Error(t)}},rn=re(!1),ut=re(!0),Rr=tinymce.util.Tools.resolve("tinymce.ThemeManager"),me=function(){return me=Object.assign||function(r){for(var o,c=1,v=arguments.length;c<v;c++){o=arguments[c];for(var m in o)Object.prototype.hasOwnProperty.call(o,m)&&(r[m]=o[m])}return r},me.apply(this,arguments)};function Y(t,r){var o={};for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&r.indexOf(c)<0&&(o[c]=t[c]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var v=0,c=Object.getOwnPropertySymbols(t);v<c.length;v++)r.indexOf(c[v])<0&&Object.prototype.propertyIsEnumerable.call(t,c[v])&&(o[c[v]]=t[c[v]]);return o}function Dn(t,r,o){if(o||arguments.length===2)for(var c=0,v=r.length,m;c<v;c++)(m||!(c in r))&&(m||(m=Array.prototype.slice.call(r,0,c)),m[c]=r[c]);return t.concat(m||Array.prototype.slice.call(r))}var Aa=function(){return At},At=function(){var t=function(c){return c()},r=Te,o={fold:function(c,v){return c()},isSome:rn,isNone:ut,getOr:r,getOrThunk:t,getOrDie:function(c){throw new Error(c||"error: getOrDie called on none.")},getOrNull:re(null),getOrUndefined:re(void 0),or:r,orThunk:t,map:Aa,each:He,bind:Aa,exists:rn,forall:ut,filter:function(){return Aa()},toArray:function(){return[]},toString:re("none()")};return o}(),Oa=function(t){var r=re(t),o=function(){return v},c=function(m){return m(t)},v={fold:function(m,p){return p(t)},isSome:ut,isNone:rn,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:o,orThunk:o,map:function(m){return Oa(m(t))},each:function(m){m(t)},bind:c,exists:c,forall:c,filter:function(m){return m(t)?v:At},toArray:function(){return[t]},toString:function(){return"some("+t+")"}};return v},Nn=function(t){return t==null?At:Oa(t)},D={some:Oa,none:Aa,from:Nn},na=Array.prototype.slice,_t=Array.prototype.indexOf,Kt=Array.prototype.push,Ro=function(t,r){return _t.call(t,r)},Go=function(t,r){var o=Ro(t,r);return o===-1?D.none():D.some(o)},ir=function(t,r){return Ro(t,r)>-1},la=function(t,r){for(var o=0,c=t.length;o<c;o++){var v=t[o];if(r(v,o))return!0}return!1},te=function(t,r){for(var o=[],c=0;c<t;c++)o.push(r(c));return o},qa=function(t,r){for(var o=[],c=0;c<t.length;c+=r){var v=na.call(t,c,c+r);o.push(v)}return o},yt=function(t,r){for(var o=t.length,c=new Array(o),v=0;v<o;v++){var m=t[v];c[v]=r(m,v)}return c},Jt=function(t,r){for(var o=0,c=t.length;o<c;o++){var v=t[o];r(v,o)}},It=function(t,r){for(var o=t.length-1;o>=0;o--){var c=t[o];r(c,o)}},$t=function(t,r){for(var o=[],c=[],v=0,m=t.length;v<m;v++){var p=t[v],w=r(p,v)?o:c;w.push(p)}return{pass:o,fail:c}},rt=function(t,r){for(var o=[],c=0,v=t.length;c<v;c++){var m=t[c];r(m,c)&&o.push(m)}return o},an=function(t,r,o){return It(t,function(c,v){o=r(o,c,v)}),o},kn=function(t,r,o){return Jt(t,function(c,v){o=r(o,c,v)}),o},Ze=function(t,r,o){for(var c=0,v=t.length;c<v;c++){var m=t[c];if(r(m,c))return D.some(m);if(o(m,c))break}return D.none()},Wn=function(t,r){return Ze(t,r,rn)},ma=function(t,r){for(var o=0,c=t.length;o<c;o++){var v=t[o];if(r(v,o))return D.some(o)}return D.none()},dn=function(t){for(var r=[],o=0,c=t.length;o<c;++o){if(!Sn(t[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+t);Kt.apply(r,t[o])}return r},qr=function(t,r){return dn(yt(t,r))},Ur=function(t,r){for(var o=0,c=t.length;o<c;++o){var v=t[o];if(r(v,o)!==!0)return!1}return!0},On=function(t){var r=na.call(t,0);return r.reverse(),r},ra=function(t,r){return rt(t,function(o){return!ir(r,o)})},Po=function(t,r){for(var o={},c=0,v=t.length;c<v;c++){var m=t[c];o[String(m)]=r(m,c)}return o},Ko=function(t){return[t]},vi=function(t,r){var o=na.call(t,0);return o.sort(r),o},No=function(t,r){return r>=0&&r<t.length?D.some(t[r]):D.none()},Ga=function(t){return No(t,0)},Ka=function(t){return No(t,t.length-1)},Xo=br(Array.from)?Array.from:function(t){return na.call(t)},Ba=function(t,r){for(var o=0;o<t.length;o++){var c=r(t[o],o);if(c.isSome())return c}return D.none()},vo=function(t){var r=function(O){return vo(t)},o=function(O){return vo(t)},c=function(O){return vo(O(t))},v=function(O){return vo(t)},m=function(O){O(t)},p=function(O){return O(t)},w=function(O,N){return N(t)},S=function(O){return O(t)},T=function(O){return O(t)},R=function(){return D.some(t)};return{isValue:ut,isError:rn,getOr:re(t),getOrThunk:re(t),getOrDie:re(t),or:r,orThunk:o,fold:w,map:c,mapError:v,each:m,bind:p,exists:S,forall:T,toOptional:R}},Ca=function(t){var r=function(T){return T()},o=function(){return bt(String(t))()},c=Te,v=function(T){return T()},m=function(T){return Ca(t)},p=function(T){return Ca(T(t))},w=function(T){return Ca(t)},S=function(T,R){return T(t)};return{isValue:rn,isError:ut,getOr:Te,getOrThunk:r,getOrDie:o,or:c,orThunk:v,fold:S,map:m,mapError:p,each:He,bind:w,exists:rn,forall:ut,toOptional:D.none}},Yo=function(t,r){return t.fold(function(){return Ca(r)},vo)},mn={value:vo,error:Ca,fromOption:Yo},Yr;(function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"})(Yr||(Yr={}));var mo=function(t,r,o){return t.stype===Yr.Error?r(t.serror):o(t.svalue)},ti=function(t){var r=[],o=[];return Jt(t,function(c){mo(c,function(v){return o.push(v)},function(v){return r.push(v)})}),{values:r,errors:o}},ur=function(t,r){return t.stype===Yr.Error?{stype:Yr.Error,serror:r(t.serror)}:t},eo=function(t,r){return t.stype===Yr.Value?{stype:Yr.Value,svalue:r(t.svalue)}:t},Jo=function(t,r){return t.stype===Yr.Value?r(t.svalue):t},Qi=function(t,r){return t.stype===Yr.Error?r(t.serror):t},Io=function(t){return{stype:Yr.Value,svalue:t}},Zo=function(t){return{stype:Yr.Error,serror:t}},di=function(t){return mo(t,mn.error,mn.value)},Fi=function(t){return t.fold(Zo,Io)},Br={fromResult:Fi,toResult:di,svalue:Io,partition:ti,serror:Zo,bind:Jo,bindError:Qi,map:eo,mapError:ur,fold:mo},ua=function(t,r,o,c){return{tag:"field",key:t,newKey:r,presence:o,prop:c}},cr=function(t,r){return{tag:"custom",newKey:t,instantiator:r}},to=function(t,r,o){switch(t.tag){case"field":return r(t.key,t.newKey,t.presence,t.prop);case"custom":return o(t.newKey,t.instantiator)}},$r=Object.keys,go=Object.hasOwnProperty,Sa=function(t,r){for(var o=$r(t),c=0,v=o.length;c<v;c++){var m=o[c],p=t[m];r(p,m)}},Gr=function(t,r){return $o(t,function(o,c){return{k:c,v:r(o,c)}})},$o=function(t,r){var o={};return Sa(t,function(c,v){var m=r(c,v);o[m.k]=m.v}),o},To=function(t){return function(r,o){t[o]=r}},zo=function(t,r,o,c){var v={};return Sa(t,function(m,p){(r(m,p)?o:c)(m,p)}),v},mi=function(t,r){var o={};return zo(t,r,To(o),He),o},pa=function(t,r){var o=[];return Sa(t,function(c,v){o.push(r(c,v))}),o},Ha=function(t,r){for(var o=$r(t),c=0,v=o.length;c<v;c++){var m=o[c],p=t[m];if(r(p,m,t))return D.some(p)}return D.none()},pn=function(t){return pa(t,Te)},Cn=function(t,r){return Xn(t,r)?D.from(t[r]):D.none()},Xn=function(t,r){return go.call(t,r)},Na=function(t,r){return Xn(t,r)&&t[r]!==void 0&&t[r]!==null},yu=function(t,r){return r},gi=function(t,r){var o=Vn(t)&&Vn(r);return o?gr(t,r):r},Pi=function(t){return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];if(r.length===0)throw new Error("Can't merge zero objects");for(var c={},v=0;v<r.length;v++){var m=r[v];for(var p in m)Xn(m,p)&&(c[p]=t(c[p],m[p]))}return c}},gr=Pi(gi),hi=Pi(yu),Xa=function(t){var r=!1,o;return function(){for(var c=[],v=0;v<arguments.length;v++)c[v]=arguments[v];return r||(r=!0,o=t.apply(null,c)),o}},ee=function(){return{tag:"required",process:{}}},we=function(t){return{tag:"defaultedThunk",process:t}},Oe=function(t){return we(re(t))},Fe=function(){return{tag:"option",process:{}}},Dt=function(t){return{tag:"mergeWithThunk",process:t}},G=function(t){return Dt(re(t))},le=function(t,r){return t.length>0?Br.svalue(gr(r,hi.apply(void 0,t))):Br.svalue(r)},Be=function(t){return wt(Br.serror,dn)(t)},Le=function(t,r){var o=Br.partition(t);return o.errors.length>0?Be(o.errors):le(o.values,r)},at=function(t){var r=Br.partition(t);return r.errors.length>0?Be(r.errors):Br.svalue(r.values)},Rt={consolidateObj:Le,consolidateArr:at},Zt=function(t){return Vn(t)&&$r(t).length>100?" removed due to size":JSON.stringify(t,null,2)},Rn=function(t){var r=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:re("... (only showing first ten failures)")}]):t;return yt(r,function(o){return"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo()})},Yn=function(t,r){return Br.serror([{path:t,getErrorInfo:r}])},sr=function(t,r,o){return Yn(t,function(){return'Could not find valid *required* value for "'+r+'" in '+Zt(o)})},Wr=function(t,r){return Yn(t,function(){return'Choice schema did not contain choice key: "'+r+'"'})},Da=function(t,r,o){return Yn(t,function(){return'The chosen schema: "'+o+'" did not exist in branches: '+Zt(r)})},et=function(t,r){return Yn(t,function(){return"There are unsupported fields: ["+r.join(", ")+"] specified"})},Jr=function(t,r){return Yn(t,re(r))},Jn=function(t){var r=function(c,v){return Br.bindError(t(v),function(m){return Jr(c,m)})},o=re("val");return{extract:r,toString:o}},Ar=Jn(Br.svalue),io=function(t,r,o,c){return Cn(r,o).fold(function(){return sr(t,o,r)},c)},wr=function(t,r,o,c){var v=Cn(t,r).getOrThunk(function(){return o(t)});return c(v)},sc=function(t,r,o){return o(Cn(t,r))},su=function(t,r,o,c){var v=Cn(t,r).map(function(m){return m===!0?o(t):m});return c(v)},lu=function(t,r,o,c,v){var m=function(w){return v.extract(r.concat([c]),w)},p=function(w){return w.fold(function(){return Br.svalue(D.none())},function(S){var T=v.extract(r.concat([c]),S);return Br.map(T,D.some)})};switch(t.tag){case"required":return io(r,o,c,m);case"defaultedThunk":return wr(o,c,t.process,m);case"option":return sc(o,c,p);case"defaultedOptionThunk":return su(o,c,t.process,p);case"mergeWithThunk":return wr(o,c,re({}),function(w){var S=gr(t.process(o),w);return m(S)})}},ni=function(t,r,o){for(var c={},v=[],m=0,p=o;m<p.length;m++){var w=p[m];to(w,function(S,T,R,O){var N=lu(R,t,r,S,O);Br.fold(N,function(L){v.push.apply(v,L)},function(L){c[T]=L})},function(S,T){c[S]=T(r)})}return v.length>0?Br.serror(v):Br.svalue(c)},ie=function(t){var r=function(c,v){return t().extract(c,v)},o=function(){return t().toString()};return{extract:r,toString:o}},Se=function(t){return $r(mi(t,un))},Ne=function(t){var r=De(t),o=an(t,function(v,m){return to(m,function(p){var w;return gr(v,(w={},w[p]=!0,w))},re(v))},{}),c=function(v,m){var p=jt(m)?[]:Se(m),w=rt(p,function(S){return!Na(o,S)});return w.length===0?r.extract(v,m):et(v,w)};return{extract:c,toString:r.toString}},De=function(t){var r=function(c,v){return ni(c,v,t)},o=function(){var c=yt(t,function(v){return to(v,function(m,p,w,S){return m+" -> "+S.toString()},function(m,p){return"state("+m+")"})});return`obj{
`+c.join(`
`)+"}"};return{extract:r,toString:o}},z=function(t){var r=function(c,v){var m=yt(v,function(p,w){return t.extract(c.concat(["["+w+"]"]),p)});return Rt.consolidateArr(m)},o=function(){return"array("+t.toString()+")"};return{extract:r,toString:o}},ce=function(t){var r=function(c,v){for(var m=[],p=0,w=t;p<w.length;p++){var S=w[p],T=S.extract(c,v);if(T.stype===Yr.Value)return T;m.push(T)}return Rt.consolidateArr(m)},o=function(){return"oneOf("+yt(t,function(c){return c.toString()}).join(", ")+")"};return{extract:r,toString:o}},ke=function(t,r){var o=function(m,p){return z(Jn(t)).extract(m,p)},c=function(m,p){var w=$r(p),S=o(m,w);return Br.bind(S,function(T){var R=yt(T,function(O){return ua(O,O,ee(),r)});return De(R).extract(m,p)})},v=function(){return"setOf("+r.toString()+")"};return{extract:c,toString:v}},Ue=function(t,r){var o=Xa(r),c=function(m,p){return o().extract(m,p)},v=function(){return o().toString()};return{extract:c,toString:v}},Gt=wt(z,De),Mt=re(Ar),Xt=function(t,r){return Jn(function(o){var c=typeof o;return t(o)?Br.svalue(o):Br.serror("Expected type: "+r+" but got: "+c)})},$=Xt(mr,"number"),ue=Xt(Ut,"string"),Ce=Xt(jt,"boolean"),ze=Xt(br,"function"),Re=function(t){if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(function(r){return Re(t[r])});default:return!1}},xt=Jn(function(t){return Re(t)?Br.svalue(t):Br.serror("Expected value to be acceptable for sending via postMessage")}),en=function(t,r,o,c){var v=Cn(o,c);return v.fold(function(){return Da(t,o,c)},function(m){return m.extract(t.concat(["branch: "+c]),r)})},fn=function(t,r){var o=function(v,m){var p=Cn(m,t);return p.fold(function(){return Wr(v,t)},function(w){return en(v,m,r,w)})},c=function(){return"chooseOn("+t+"). Possible values: "+$r(r)};return{extract:o,toString:c}},tr=function(){return z(Ar)},ga=function(t){return Jn(function(r){return t(r).fold(Br.serror,Br.svalue)})},fa=function(t,r){return ke(function(o){return Br.fromResult(t(o))},r)},Va=function(t,r,o){var c=r.extract([t],o);return Br.mapError(c,function(v){return{input:o,errors:v}})},Pr=function(t,r,o){return Br.toResult(Va(t,r,o))},ba=function(t){return t.fold(function(r){throw new Error(ju(r))},Te)},Ia=function(t,r,o){return ba(Pr(t,r,o))},ju=function(t){return`Errors: 
`+Rn(t.errors).join(`
`)+`

Input object: `+Zt(t.input)},Ln=function(t,r){return fn(t,Gr(r,De))},_f=function(t,r){return Ue(t,r)},hr=ua,ho=cr,ql=function(t){return ga(function(r){return ir(t,r)?mn.value(r):mn.error('Unsupported value: "'+r+'", choose one of "'+t.join(", ")+'".')})},nt=function(t){return hr(t,t,ee(),Mt())},po=function(t,r){return hr(t,t,ee(),r)},rs=function(t){return po(t,$)},In=function(t){return po(t,ue)},Mf=function(t,r){return hr(t,t,ee(),ql(r))},wu=function(t){return po(t,Ce)},Eo=function(t){return po(t,ze)},Mv=function(t,r){return hr(t,t,Fe(),Jn(function(o){return Br.serror("The field: "+t+" is forbidden. "+r)}))},Je=function(t,r){return hr(t,t,ee(),De(r))},as=function(t,r){return hr(t,t,ee(),Gt(r))},B=function(t,r){return hr(t,t,ee(),z(r))},W=function(t){return hr(t,t,Fe(),Mt())},se=function(t,r){return hr(t,t,Fe(),r)},Ie=function(t){return se(t,$)},Z=function(t){return se(t,ue)},Zn=function(t){return se(t,ze)},ca=function(t,r){return se(t,z(r))},$a=function(t,r){return se(t,De(r))},Oc=function(t,r){return se(t,Ne(r))},xe=function(t,r){return hr(t,t,Oe(r),Mt())},bo=function(t,r,o){return hr(t,t,Oe(r),o)},Dc=function(t,r){return bo(t,r,$)},el=function(t,r){return bo(t,r,ue)},Cu=function(t,r,o){return bo(t,r,ql(o))},uo=function(t,r){return bo(t,r,Ce)},aa=function(t,r){return bo(t,r,ze)},Rc=function(t,r){return bo(t,r,xt)},va=function(t,r,o){return bo(t,r,z(o))},Fv=function(t,r,o){return bo(t,r,De(o))},Bn=function(t){var r=t,o=function(){return r},c=function(v){r=v};return{get:o,set:c}},os=function(t,r){var o=r||document,c=o.createElement("div");if(c.innerHTML=t,!c.hasChildNodes()||c.childNodes.length>1)throw console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return eu(c.childNodes[0])},yo=function(t,r){var o=r||document,c=o.createElement(t);return eu(c)},Ff=function(t,r){var o=r||document,c=o.createTextNode(t);return eu(c)},eu=function(t){if(t==null)throw new Error("Node cannot be null or undefined");return{dom:t}},Yh=function(t,r,o){return D.from(t.dom.elementFromPoint(r,o)).map(eu)},Ft={fromHtml:os,fromTag:yo,fromText:Ff,fromDom:eu,fromPoint:Yh},lc=function(t,r,o,c){var v=t.isiOS()&&/ipad/i.test(o)===!0,m=t.isiOS()&&!v,p=t.isiOS()||t.isAndroid(),w=p||c("(pointer:coarse)"),S=v||!m&&p&&c("(min-device-width:768px)"),T=m||p&&!S,R=r.isSafari()&&t.isiOS()&&/safari/i.test(o)===!1,O=!T&&!S&&!R;return{isiPad:re(v),isiPhone:re(m),isTablet:re(S),isPhone:re(T),isTouch:re(w),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:re(R),isDesktop:re(O)}},W0=function(t,r){for(var o=0;o<t.length;o++){var c=t[o];if(c.test(r))return c}},j0=function(t,r){var o=W0(t,r);if(!o)return{major:0,minor:0};var c=function(v){return Number(r.replace(o,"$"+v))};return fc(c(1),c(2))},Gl=function(t,r){var o=String(r).toLowerCase();return t.length===0?Kl():j0(t,o)},Kl=function(){return fc(0,0)},fc=function(t,r){return{major:t,minor:r}},Bo={nu:fc,detect:Gl,unknown:Kl},Pf=function(t,r){return Ba(r.brands,function(o){var c=o.brand.toLowerCase();return Wn(t,function(v){var m;return c===((m=v.brand)===null||m===void 0?void 0:m.toLowerCase())}).map(function(v){return{current:v.name,version:Bo.nu(parseInt(o.version,10),0)}})})},_a=function(t,r){var o=String(r).toLowerCase();return Wn(t,function(c){return c.search(o)})},Pv=function(t,r){return _a(t,r).map(function(o){var c=Bo.detect(o.versionRegexes,r);return{current:o.name,version:c}})},tl=function(t,r){return _a(t,r).map(function(o){var c=Bo.detect(o.versionRegexes,r);return{current:o.name,version:c}})},qu=function(t,r){return t+r},Ya=function(t,r){return t.substring(r)},Wd=function(t,r,o){return r===""||t.length>=r.length&&t.substr(o,o+r.length)===r},jd=function(t,r){return qd(t,r)?Ya(t,r.length):t},Su=function(t,r){return Es(t,r)?t:qu(t,r)},Lo=function(t,r){return t.indexOf(r)!==-1},qd=function(t,r){return Wd(t,r,0)},Es=function(t,r){return Wd(t,r,t.length-r.length)},Gd=function(t){return function(r){return r.replace(t,"")}},Bc=Gd(/^\s+|\s+$/g),ks=function(t){return t.length>0},Nf=function(t){return!ks(t)},ko=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ri=function(t){return function(r){return Lo(r,t)}},Gu=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(t){return Lo(t,"edge/")&&Lo(t,"chrome")&&Lo(t,"safari")&&Lo(t,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ko],search:function(t){return Lo(t,"chrome")&&!Lo(t,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(t){return Lo(t,"msie")||Lo(t,"trident")}},{name:"Opera",versionRegexes:[ko,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ri("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ri("firefox")},{name:"Safari",versionRegexes:[ko,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(t){return(Lo(t,"safari")||Lo(t,"mobile/"))&&Lo(t,"applewebkit")}}],Jh=[{name:"Windows",search:ri("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(t){return Lo(t,"iphone")||Lo(t,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ri("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:ri("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ri("linux"),versionRegexes:[]},{name:"Solaris",search:ri("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ri("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ri("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],vc={browsers:re(Gu),oses:re(Jh)},As="Edge",Nv="Chrome",pi="IE",is="Opera",vg="Firefox",bi="Safari",If=function(){return $f({current:void 0,version:Bo.unknown()})},$f=function(t){var r=t.current,o=t.version,c=function(v){return function(){return r===v}};return{current:r,version:o,isEdge:c(As),isChrome:c(Nv),isIE:c(pi),isOpera:c(is),isFirefox:c(vg),isSafari:c(bi)}},Xl={unknown:If,nu:$f,edge:re(As),chrome:re(Nv),ie:re(pi),opera:re(is),firefox:re(vg),safari:re(bi)},Yl="Windows",_o="iOS",Iv="Android",nl="Linux",Os="OSX",us="Solaris",co="FreeBSD",rl="ChromeOS",dg=function(){return $v({current:void 0,version:Bo.unknown()})},$v=function(t){var r=t.current,o=t.version,c=function(v){return function(){return r===v}};return{current:r,version:o,isWindows:c(Yl),isiOS:c(_o),isAndroid:c(Iv),isOSX:c(Os),isLinux:c(nl),isSolaris:c(us),isFreeBSD:c(co),isChromeOS:c(rl)}},Kd={unknown:dg,nu:$v,windows:re(Yl),ios:re(_o),android:re(Iv),linux:re(nl),osx:re(Os),solaris:re(us),freebsd:re(co),chromeos:re(rl)},Xd=function(t,r,o){var c=vc.browsers(),v=vc.oses(),m=r.bind(function(S){return Pf(c,S)}).orThunk(function(){return Pv(c,t)}).fold(Xl.unknown,Xl.nu),p=tl(v,t).fold(Kd.unknown,Kd.nu),w=lc(p,m,t,o);return{browser:m,os:p,deviceType:w}},mg={detect:Xd},gg=function(t){return window.matchMedia(t).matches},hg=Xa(function(){return mg.detect(navigator.userAgent,D.from(navigator.userAgentData),gg)}),Ni=function(){return hg()},zf=function(t,r,o){return(t.compareDocumentPosition(r)&o)!=0},Yd=function(t,r){return zf(t,r,Node.DOCUMENT_POSITION_CONTAINED_BY)},Mn=9,so=11,Ii=1,ai=3,Jd=function(t,r){var o=t.dom;if(o.nodeType!==Ii)return!1;var c=o;if(c.matches!==void 0)return c.matches(r);if(c.msMatchesSelector!==void 0)return c.msMatchesSelector(r);if(c.webkitMatchesSelector!==void 0)return c.webkitMatchesSelector(r);if(c.mozMatchesSelector!==void 0)return c.mozMatchesSelector(r);throw new Error("Browser lacks native selectors")},_c=function(t){return t.nodeType!==Ii&&t.nodeType!==Mn&&t.nodeType!==so||t.childElementCount===0},pg=function(t,r){var o=r===void 0?document:r.dom;return _c(o)?[]:yt(o.querySelectorAll(t),Ft.fromDom)},dc=function(t,r){var o=r===void 0?document:r.dom;return _c(o)?D.none():D.from(o.querySelector(t)).map(Ft.fromDom)},Ja=function(t,r){return t.dom===r.dom},bg=function(t,r){var o=t.dom,c=r.dom;return o===c?!1:o.contains(c)},gn=function(t,r){return Yd(t.dom,r.dom)},Jl=function(t,r){return Ni().browser.isIE()?gn(t,r):bg(t,r)},yg=function(t){if(!Sn(t))throw new Error("cases must be an array");if(t.length===0)throw new Error("there must be at least one case");var r=[],o={};return Jt(t,function(c,v){var m=$r(c);if(m.length!==1)throw new Error("one and only one name per case");var p=m[0],w=c[p];if(o[p]!==void 0)throw new Error("duplicate key detected:"+p);if(p==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Sn(w))throw new Error("case arguments must be an array");r.push(p),o[p]=function(){for(var S=[],T=0;T<arguments.length;T++)S[T]=arguments[T];var R=S.length;if(R!==w.length)throw new Error("Wrong number of arguments to case "+p+". Expected "+w.length+" ("+w+"), got "+R);var O=function(N){var L=$r(N);if(r.length!==L.length)throw new Error("Wrong number of arguments to match. Expected: "+r.join(",")+`
Actual: `+L.join(","));var q=Ur(r,function(X){return ir(L,X)});if(!q)throw new Error("Not all branches were specified when using match. Specified: "+L.join(", ")+`
Required: `+r.join(", "));return N[p].apply(null,S)};return{fold:function(){for(var N=[],L=0;L<arguments.length;L++)N[L]=arguments[L];if(N.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+N.length);var q=N[v];return q.apply(null,S)},match:O,log:function(N){console.log(N,{constructors:r,constructor:p,params:S})}}}}),o},fu={generate:yg};fu.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);var Ho=function(t){var r=[],o=[];return Jt(t,function(c){c.fold(function(v){r.push(v)},function(v){o.push(v)})}),{errors:r,values:o}},q0=function(t,r){var o={};return Sa(t,function(c,v){ir(r,v)||(o[v]=c)}),o},cs=function(t,r){var o;return o={},o[t]=r,o},Ua=function(t){var r={};return Jt(t,function(o){r[o.key]=o.value}),r},wg=function(t,r){return q0(t,r)},$n=function(t,r){return cs(t,r)},ss=function(t){return Ua(t)},G0=function(t,r){return t.length===0?mn.value(r):mn.value(gr(r,hi.apply(void 0,t)))},xu=function(t){return mn.error(dn(t))},K0=function(t,r){var o=Ho(t);return o.errors.length>0?xu(o.errors):G0(o.values,r)},Cg=function(t){return br(t)?t:rn},zv=function(t,r,o){for(var c=t.dom,v=Cg(o);c.parentNode;){c=c.parentNode;var m=Ft.fromDom(c),p=r(m);if(p.isSome())return p;if(v(m))break}return D.none()},Zd=function(t,r,o){var c=r(t),v=Cg(o);return c.orThunk(function(){return v(t)?D.none():zv(t,r,v)})},E=function(t,r){return Ja(t.element,r.event.target)},I={can:ut,abort:rn,run:He},H=function(t){if(!Na(t,"can")&&!Na(t,"abort")&&!Na(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return me(me({},I),t)},oe=function(t,r){return function(){for(var o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];return kn(t,function(v,m){return v&&r(m).apply(void 0,o)},!0)}},Ae=function(t,r){return function(){for(var o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];return kn(t,function(v,m){return v||r(m).apply(void 0,o)},!1)}},St=function(t){return br(t)?{can:ut,abort:rn,run:t}:t},xn=function(t){var r=oe(t,function(v){return v.can}),o=Ae(t,function(v){return v.abort}),c=function(){for(var v=[],m=0;m<arguments.length;m++)v[m]=arguments[m];Jt(t,function(p){p.run.apply(void 0,v)})};return{can:r,abort:o,run:c}},_n=re,Tr=_n("touchstart"),Cr=_n("touchmove"),fr=_n("touchend"),Tu=_n("touchcancel"),Ku=_n("mousedown"),Zh=_n("mousemove"),X0=_n("mouseout"),ls=_n("mouseup"),al=_n("mouseover"),Qo=_n("focusin"),xT=_n("focusout"),Sg=_n("keydown"),Qh=_n("keyup"),ol=_n("input"),Lf=_n("change"),xg=_n("click"),TT=_n("transitioncancel"),Hf=_n("transitionend"),Qd=_n("transitionstart"),ET=_n("selectstart"),Mo=function(t){return re("alloy."+t)},iw={tap:Mo("tap")},Vf=Mo("focus"),Y0=Mo("blur.post"),Uf=Mo("paste.post"),Ds=Mo("receive"),Xu=Mo("execute"),Wf=Mo("focus.item"),Tg=iw.tap,il=Mo("longpress"),jf=Mo("sandbox.close"),em=Mo("typeahead.cancel"),qf=Mo("system.init"),Eg=Mo("system.touchmove"),kT=Mo("system.touchend"),J0=Mo("system.scroll"),Gf=Mo("system.resize"),ul=Mo("system.attached"),Lv=Mo("system.detached"),mc=Mo("system.dismissRequested"),yi=Mo("system.repositionRequested"),tm=Mo("focusmanager.shifted"),Z0=Mo("slotcontainer.visibility"),ep=Mo("change.tab"),Q0=Mo("dismiss.tab"),uw=Mo("highlight"),eb=Mo("dehighlight"),zr=function(t,r){np(t,t.element,r,{})},sn=function(t,r,o){np(t,t.element,r,o)},Mc=function(t){zr(t,Xu())},tp=function(t,r,o){np(t,r,o,{})},np=function(t,r,o,c){var v=me({target:r},c);t.getSystem().triggerEvent(o,r,v)},wi=function(t,r,o,c){t.getSystem().triggerEvent(o,r,c.event)},xa=function(t){return ss(t)},tb=function(t,r){return{key:t,value:H({abort:r})}},fs=function(t,r){return{key:t,value:H({can:r})}},rp=function(t){return{key:t,value:H({run:function(r,o){o.event.prevent()}})}},ot=function(t,r){return{key:t,value:H({run:r})}},ap=function(t,r,o){return{key:t,value:H({run:function(c,v){r.apply(void 0,[c,v].concat(o))}})}},cw=function(t){return function(r){return ot(t,r)}},op=function(t){return function(r){return{key:t,value:H({run:function(o,c){E(o,c)&&r(o,c)}})}}},Zl=function(t,r){return ot(t,function(o,c){o.getSystem().getByUid(r).each(function(v){wi(v,v.element,t,c)})})},nm=function(t,r,o){var c=r.partUids[o];return Zl(t,c)},Fc=function(t,r){return ot(t,function(o,c){var v=c.event,m=o.getSystem().getByDom(v.target).getOrThunk(function(){var p=Zd(v.target,function(w){return o.getSystem().getByDom(w).toOptional()},rn);return p.getOr(o)});r(o,m,c)})},cl=function(t){return ot(t,function(r,o){o.cut()})},ip=function(t){return ot(t,function(r,o){o.stop()})},vs=function(t,r){return op(t)(r)},Ta=op(ul()),Rs=op(Lv()),Kf=op(qf()),Pc=cw(Xu());typeof window!="undefined"||Function("return this;")();var Nc=function(t){var r=t.dom.nodeName;return r.toLowerCase()},kg=function(t){return t.dom.nodeType},Ag=function(t){return function(r){return kg(r)===t}},gc=Ag(Ii),Ci=Ag(ai),sw=Ag(Mn),lw=Ag(so),Wa=function(t){return Ft.fromDom(t.dom.ownerDocument)},Hv=function(t){return sw(t)?t:Wa(t)},sl=function(t){return Ft.fromDom(Hv(t).dom.documentElement)},rm=function(t){return Ft.fromDom(Hv(t).dom.defaultView)},Si=function(t){return D.from(t.dom.parentNode).map(Ft.fromDom)},Xf=function(t){return Si(t)},Vv=function(t){return D.from(t.dom.offsetParent).map(Ft.fromDom)},Ic=function(t){return D.from(t.dom.nextSibling).map(Ft.fromDom)},Yu=function(t){return yt(t.dom.childNodes,Ft.fromDom)},am=function(t,r){var o=t.dom.childNodes;return D.from(o[r]).map(Ft.fromDom)},nb=function(t){return am(t,0)},up=function(t,r){return{element:t,offset:r}},fw=function(t,r){var o=Yu(t);return o.length>0&&r<o.length?up(o[r],0):up(t,r)},rb=function(t){return lw(t)&&un(t.dom.host)},om=br(Element.prototype.attachShadow)&&br(Node.prototype.getRootNode),cp=re(om),$i=om?function(t){return Ft.fromDom(t.dom.getRootNode())}:Hv,im=function(t){return rb(t)?t:Ft.fromDom(Hv(t).dom.body)},vw=function(t){return ab(t).isSome()},ab=function(t){var r=$i(t);return rb(r)?D.some(r):D.none()},ob=function(t){return Ft.fromDom(t.dom.host)},sp=function(t){if(cp()&&un(t.target)){var r=Ft.fromDom(t.target);if(gc(r)&&ib(r)&&t.composed&&t.composedPath){var o=t.composedPath();if(o)return Ga(o)}}return D.from(t.target)},ib=function(t){return un(t.dom.shadowRoot)},lp=function(t,r){var o=Si(t);o.each(function(c){c.dom.insertBefore(r.dom,t.dom)})},ub=function(t,r){var o=Ic(t);o.fold(function(){var c=Si(t);c.each(function(v){Ju(v,r)})},function(c){lp(c,r)})},dw=function(t,r){var o=nb(t);o.fold(function(){Ju(t,r)},function(c){t.dom.insertBefore(r.dom,c.dom)})},Ju=function(t,r){t.dom.appendChild(r.dom)},ll=function(t,r,o){am(t,o).fold(function(){Ju(t,r)},function(c){lp(c,r)})},AT=function(t,r){Jt(r,function(o){lp(t,o)})},fp=function(t,r){Jt(r,function(o){Ju(t,o)})},cb=function(t){t.dom.textContent="",Jt(Yu(t),function(r){Yf(r)})},Yf=function(t){var r=t.dom;r.parentNode!==null&&r.parentNode.removeChild(r)},Uv=function(t){var r=Yu(t);r.length>0&&AT(t,r),Yf(t)},Og=function(t,r){var o=r||document,c=o.createElement("div");return c.innerHTML=t,Yu(Ft.fromDom(c))},sb=function(t){return t.dom.innerHTML},Bs=function(t,r){var o=Wa(t),c=o.dom,v=Ft.fromDom(c.createDocumentFragment()),m=Og(r,c);fp(v,m),cb(t),Ju(t,v)},OT=function(t){var r=Ft.fromTag("div"),o=Ft.fromDom(t.dom.cloneNode(!0));return Ju(r,o),sb(r)},mw=function(t,r,o){if(Ut(o)||jt(o)||mr(o))t.setAttribute(r,o+"");else throw console.error("Invalid call to Attribute.set. Key ",r,":: Value ",o,":: Element ",t),new Error("Attribute value was not simple")},kr=function(t,r,o){mw(t.dom,r,o)},Dg=function(t,r){var o=t.dom;Sa(r,function(c,v){mw(o,v,c)})},Eu=function(t,r){var o=t.dom.getAttribute(r);return o===null?void 0:o},$c=function(t,r){return D.from(Eu(t,r))},gw=function(t,r){var o=t.dom;return o&&o.hasAttribute?o.hasAttribute(r):!1},zi=function(t,r){t.dom.removeAttribute(r)},Zu=function(t,r){return Ft.fromDom(t.dom.cloneNode(r))},DT=function(t){return Zu(t,!1)},hw=function(t){if(rb(t))return"#shadow-root";var r=DT(t);return OT(r)},Jf=function(t){return hw(t)},pw=function(t,r,o){return Ja(r,t.element)&&!Ja(r,o)},bw=xa([fs(Vf(),function(t,r){var o=r.event,c=o.originator,v=o.target;return pw(t,c,v)?(console.warn(Vf()+` did not get interpreted by the desired target. 
Originator: `+Jf(c)+`
Target: `+Jf(v)+`
Check the `+Vf()+" event handlers"),!1):!0})]),yw=Object.freeze({__proto__:null,events:bw}),ww=0,bn=function(t){var r=new Date,o=r.getTime(),c=Math.floor(Math.random()*1e9);return ww++,t+"_"+c+ww+String(o)},RT=re("alloy-id-"),Rg=re("data-alloy-id"),vp=RT(),dp=Rg(),lb=function(t,r){var o=bn(vp+t);return mp(r,o),o},mp=function(t,r){Object.defineProperty(t.dom,dp,{value:r,writable:!0})},_s=function(t){var r=gc(t)?t.dom[dp]:null;return D.from(r)},um=function(t){return bn(t)},fb=Te,cm=function(t){var r=function(v){return"The component must be in a context to execute: "+v+(t?`
`+Jf(t().element)+" is not in context.":"")},o=function(v){return function(){throw new Error(r(v))}},c=function(v){return function(){console.warn(r(v))}};return{debugInfo:re("fake"),triggerEvent:c("triggerEvent"),triggerFocus:c("triggerFocus"),triggerEscape:c("triggerEscape"),broadcast:c("broadcast"),broadcastOn:c("broadcastOn"),broadcastEvent:c("broadcastEvent"),build:o("build"),addToWorld:o("addToWorld"),removeFromWorld:o("removeFromWorld"),addToGui:o("addToGui"),removeFromGui:o("removeFromGui"),getByUid:o("getByUid"),getByDom:o("getByDom"),isConnected:rn}},vb=cm(),Cw=function(t,r,o){var c=o.toString(),v=c.indexOf(")")+1,m=c.indexOf("("),p=c.substring(m+1,v-1).split(/,\s*/);return t.toFunctionAnnotation=function(){return{name:r,parameters:fl(p.slice(0,1).concat(p.slice(3)))}},t},fl=function(t){return yt(t,function(r){return Es(r,"/*")?r.substring(0,r.length-"/*".length):r})},Bg=function(t,r){var o=t.toString(),c=o.indexOf(")")+1,v=o.indexOf("("),m=o.substring(v+1,c-1).split(/,\s*/);return t.toFunctionAnnotation=function(){return{name:r,parameters:fl(m)}},t},gp=function(t,r){var o=r.toString(),c=o.indexOf(")")+1,v=o.indexOf("("),m=o.substring(v+1,c-1).split(/,\s*/);return t.toFunctionAnnotation=function(){return{name:"OVERRIDE",parameters:fl(m.slice(1))}},t},hp=bn("alloy-premade"),Sw=function(t){return $n(hp,t)},Wv=function(t){return Cn(t,hp)},Iu=function(t){return gp(function(r){for(var o=[],c=1;c<arguments.length;c++)o[c-1]=arguments[c];return t.apply(void 0,Dn([r.getApis(),r],o))},t)},Ms={init:function(){return tu({readState:re("No State required")})}},tu=function(t){return t},ku=function(t,r){var o=yt(r,function(v){return $a(v.name(),[nt("config"),xe("state",Ms)])}),c=Pr("component.behaviours",De(o),t.behaviours).fold(function(v){throw new Error(ju(v)+`
Complete spec:
`+JSON.stringify(t,null,2))},Te);return{list:r,data:Gr(c,function(v){var m=v.map(function(p){return{config:p.config,state:p.state.init(p.config)}});return re(m)})}},db=function(t){return t.list},xw=function(t){return t.data},Tw=function(t,r){var o={};return Sa(t,function(c,v){Sa(c,function(m,p){var w=Cn(o,p).getOr([]);o[p]=w.concat([r(v,m)])})}),o},Za=function(t){return{classes:ia(t.classes)?[]:t.classes,attributes:ia(t.attributes)?{}:t.attributes,styles:ia(t.styles)?{}:t.styles}},BT=function(t,r){return me(me({},t),{attributes:me(me({},t.attributes),r.attributes),styles:me(me({},t.styles),r.styles),classes:t.classes.concat(r.classes)})},vl=function(t,r,o,c){var v=me({},r);Jt(o,function(R){v[R.name()]=R.exhibit(t,c)});var m=Tw(v,function(R,O){return{name:R,modification:O}}),p=function(R){return an(R,function(O,N){return me(me({},N.modification),O)},{})},w=an(m.classes,function(R,O){return O.modification.concat(R)},[]),S=p(m.attributes),T=p(m.styles);return Za({classes:w,attributes:S,styles:T})},Zf=function(t,r,o,c){try{var v=vi(o,function(m,p){var w=m[r],S=p[r],T=c.indexOf(w),R=c.indexOf(S);if(T===-1)throw new Error("The ordering for "+t+" does not have an entry for "+w+`.
Order specified: `+JSON.stringify(c,null,2));if(R===-1)throw new Error("The ordering for "+t+" does not have an entry for "+S+`.
Order specified: `+JSON.stringify(c,null,2));return T<R?-1:R<T?1:0});return mn.value(v)}catch(m){return mn.error([m])}},Ew=function(t,r){return{handler:t,purpose:r}},pp=function(t,r){return{cHandler:t,purpose:r}},bp=function(t,r){return pp(gt.apply(void 0,[t.handler].concat(r)),t.purpose)},jv=function(t){return t.cHandler},_T=function(t,r){return{name:t,handler:r}},MT=function(t,r){var o={};return Jt(t,function(c){o[c.name()]=c.handlers(r)}),o},mb=function(t,r,o){var c=me(me({},o),MT(r,t));return Tw(c,_T)},kw=function(t,r,o,c){var v=mb(t,o,c);return yp(v,r)},Aw=function(t){var r=St(t);return function(o,c){for(var v=[],m=2;m<arguments.length;m++)v[m-2]=arguments[m];var p=[o,c].concat(v);r.abort.apply(void 0,p)?c.stop():r.can.apply(void 0,p)&&r.run.apply(void 0,p)}},Ow=function(t,r){return mn.error(["The event ("+t+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(yt(r,function(o){return o.name}),null,2)])},gb=function(t,r,o){var c=r[o];return c?Zf("Event: "+o,"name",t,c).map(function(v){var m=yt(v,function(p){return p.handler});return xn(m)}):Ow(o,t)},yp=function(t,r){var o=pa(t,function(c,v){var m=c.length===1?mn.value(c[0].handler):gb(c,r,v);return m.map(function(p){var w=Aw(p),S=c.length>1?rt(r[v],function(T){return la(c,function(R){return R.name===T})}).join(" > "):c[0].name;return $n(v,Ew(w,S))})});return K0(o,{})},Fs,ds="alloy.base.behaviour",hb=De([hr("dom","dom",ee(),De([nt("tag"),xe("styles",{}),xe("classes",[]),xe("attributes",{}),W("value"),W("innerHtml")])),nt("components"),nt("uid"),xe("events",{}),xe("apis",{}),hr("eventOrder","eventOrder",G((Fs={},Fs[Xu()]=["disabling",ds,"toggling","typeaheadevents"],Fs[Vf()]=[ds,"focusing","keying"],Fs[qf()]=[ds,"disabling","toggling","representing"],Fs[ol()]=[ds,"representing","streaming","invalidating"],Fs[Lv()]=[ds,"representing","item-events","tooltipping"],Fs[Ku()]=["focusing",ds,"item-type-events"],Fs[Tr()]=["focusing",ds,"item-type-events"],Fs[al()]=["item-type-events","tooltipping"],Fs[Ds()]=["receiving","reflecting","tooltipping"],Fs)),Mt()),W("domModification")]),qv=function(t){return Pr("custom.definition",hb,t)},Li=function(t){return me(me({},t.dom),{uid:t.uid,domChildren:yt(t.components,function(r){return r.element})})},Ra=function(t){return t.domModification.fold(function(){return Za({})},Za)},wp=function(t){return t.events},dl=function(t,r){var o=Eu(t,r);return o===void 0||o===""?[]:o.split(" ")},sm=function(t,r,o){var c=dl(t,r),v=c.concat([o]);return kr(t,r,v.join(" ")),!0},Cp=function(t,r,o){var c=rt(dl(t,r),function(v){return v!==o});return c.length>0?kr(t,r,c.join(" ")):zi(t,r),!1},zc=function(t){return t.dom.classList!==void 0},Sp=function(t){return dl(t,"class")},Au=function(t,r){return sm(t,"class",r)},ms=function(t,r){return Cp(t,"class",r)},no=function(t,r){zc(t)?t.dom.classList.add(r):Au(t,r)},hc=function(t){var r=zc(t)?t.dom.classList:Sp(t);r.length===0&&zi(t,"class")},wo=function(t,r){if(zc(t)){var o=t.dom.classList;o.remove(r)}else ms(t,r);hc(t)},Co=function(t,r){return zc(t)&&t.dom.classList.contains(r)},Lc=function(t,r){Jt(r,function(o){no(t,o)})},vu=function(t,r){Jt(r,function(o){wo(t,o)})},FT=function(t,r){return Ur(r,function(o){return Co(t,o)})},pc=function(t,r,o){return o===void 0&&(o=qe),t.exists(function(c){return o(c,r)})},xi=function(t,r,o){return o===void 0&&(o=qe),lm(t,r,o).getOr(t.isNone()&&r.isNone())},Ou=function(t){for(var r=[],o=function(v){r.push(v)},c=0;c<t.length;c++)t[c].each(o);return r},ml=function(t){for(var r=[],o=0;o<t.length;o++){var c=t[o];if(c.isSome())r.push(c.getOrDie());else return D.none()}return D.some(r)},lm=function(t,r,o){return t.isSome()&&r.isSome()?D.some(o(t.getOrDie(),r.getOrDie())):D.none()},Dw=function(t,r,o,c){return t.isSome()&&r.isSome()&&o.isSome()?D.some(c(t.getOrDie(),r.getOrDie(),o.getOrDie())):D.none()},xp=function(t,r){return t!=null?D.some(r(t)):D.none()},_g=function(t,r){return t?D.some(r):D.none()},Gv=function(t){return t.style!==void 0&&br(t.style.getPropertyValue)},Hi=function(t){var r=Ci(t)?t.dom.parentNode:t.dom;if(r==null||r.ownerDocument===null)return!1;var o=r.ownerDocument;return ab(Ft.fromDom(r)).fold(function(){return o.body.contains(r)},Un(Hi,ob))},gl=function(){return Mg(Ft.fromDom(document))},Mg=function(t){var r=t.dom.body;if(r==null)throw new Error("Body is not available yet");return Ft.fromDom(r)},hl=function(t,r,o){if(!Ut(o))throw console.error("Invalid call to CSS.set. Property ",r,":: Value ",o,":: Element ",t),new Error("CSS value must be a string: "+o);Gv(t)&&t.style.setProperty(r,o)},Rw=function(t,r){Gv(t)&&t.style.removeProperty(r)},yr=function(t,r,o){var c=t.dom;hl(c,r,o)},bc=function(t,r){var o=t.dom;Sa(r,function(c,v){hl(o,v,c)})},Kv=function(t,r){var o=t.dom;Sa(r,function(c,v){c.fold(function(){Rw(o,v)},function(m){hl(o,v,m)})})},oi=function(t,r){var o=t.dom,c=window.getComputedStyle(o),v=c.getPropertyValue(r);return v===""&&!Hi(t)?fm(o,r):v},fm=function(t,r){return Gv(t)?t.style.getPropertyValue(r):""},Zr=function(t,r){var o=t.dom,c=fm(o,r);return D.from(c).filter(function(v){return v.length>0})},Xv=function(t){var r={},o=t.dom;if(Gv(o))for(var c=0;c<o.style.length;c++){var v=o.style.item(c);r[v]=o.style[v]}return r},pb=function(t,r,o){var c=Ft.fromTag(t);yr(c,r,o);var v=Zr(c,r);return v.isSome()},Ma=function(t,r){var o=t.dom;Rw(o,r),pc($c(t,"style").map(Bc),"")&&zi(t,"style")},Ql=function(t){return t.dom.offsetWidth},Qf=function(t){return t.dom.value},pl=function(t,r){if(r===void 0)throw new Error("Value.set was undefined");t.dom.value=r},PT=function(t){var r=Ft.fromTag(t.tag);Dg(r,t.attributes),Lc(r,t.classes),bc(r,t.styles),t.innerHtml.each(function(c){return Bs(r,c)});var o=t.domChildren;if(fp(r,o),t.value.each(function(c){pl(r,c)}),!t.uid)debugger;return mp(r,t.uid),r},NT=function(t){var r=Cn(t,"behaviours").getOr({}),o=rt($r(r),function(c){return r[c]!==void 0});return yt(o,function(c){return r[c].me})},Bw=function(t,r){return ku(t,r)},Tp=function(t){var r=NT(t);return Bw(t,r)},IT=function(t,r,o){var c=Li(t),v=Ra(t),m={"alloy.base.modification":v},p=r.length>0?vl(o,m,r,c):v;return BT(c,p)},$T=function(t,r,o){var c={"alloy.base.behaviour":wp(t)};return kw(o,t.eventOrder,r,c).getOrDie()},bb=function(t){var r=function(){return ye},o=Bn(vb),c=ba(qv(t)),v=Tp(t),m=db(v),p=xw(v),w=IT(c,m,p),S=PT(w),T=$T(c,m,p),R=Bn(c.components),O=function(he){o.set(he)},N=function(){o.set(cm(r))},L=function(){var he=Yu(S),Ve=qr(he,function(_e){return o.get().getByDom(_e).fold(function(){return[]},Ko)});R.set(Ve)},q=function(he){var Ve=p,_e=br(Ve[he.name()])?Ve[he.name()]:function(){throw new Error("Could not find "+he.name()+" in "+JSON.stringify(t,null,2))};return _e()},X=function(he){return br(p[he.name()])},ge=function(){return c.apis},ne=function(he){return p[he]().map(function(Ve){return Ve.state.readState()}).getOr("not enabled")},ye={uid:t.uid,getSystem:o.get,config:q,hasConfigured:X,spec:t,readState:ne,getApis:ge,connect:O,disconnect:N,element:S,syncComponents:L,components:R.get,events:T};return ye},zT=function(t){var r=Cn(t,"components").getOr([]);return yt(r,nu)},yb=function(t){var r=fb(t),o=r.events,c=Y(r,["events"]),v=zT(c),m=me(me({},c),{events:me(me({},yw),o),components:v});return mn.value(bb(m))},bl=function(t){var r=Ft.fromText(t);return Ps({element:r})},Ps=function(t){var r=Ia("external.component",Ne([nt("element"),W("uid")]),t),o=Bn(cm()),c=function(w){o.set(w)},v=function(){o.set(cm(function(){return p}))},m=r.uid.getOrThunk(function(){return um("external")});mp(r.element,m);var p={uid:m,getSystem:o.get,config:D.none,hasConfigured:rn,connect:c,disconnect:v,getApis:function(){return{}},element:r.element,spec:t,readState:re("No state"),syncComponents:He,components:re([]),events:{}};return Sw(p)},ev=um,Ea=function(t){return Xn(t,"uid")},nu=function(t){return Wv(t).getOrThunk(function(){var r=Ea(t)?t:me({uid:ev("")},t);return yb(r).getOrDie()})},So=Sw,Ep=function(t,r){var o=function(w,S){if(!mr(S)&&!S.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+S);var T=w.dom;Gv(T)&&(T.style[t]=S+"px")},c=function(w){var S=r(w);if(S<=0||S===null){var T=oi(w,t);return parseFloat(T)||0}return S},v=c,m=function(w,S){return kn(S,function(T,R){var O=oi(w,R),N=O===void 0?0:parseInt(O,10);return isNaN(N)?T:T+N},0)},p=function(w,S,T){var R=m(w,T),O=S>R?S-R:0;return O};return{set:o,get:c,getOuter:v,aggregate:m,max:p}},kp=Ep("height",function(t){var r=t.dom;return Hi(t)?r.getBoundingClientRect().height:r.offsetHeight}),Ti=function(t){return kp.get(t)},Hc=function(t){return kp.getOuter(t)},Ap=function(t,r){var o=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],c=kp.max(t,r,o);yr(t,"max-height",c+"px")},Fg=function(t,r){var o=function(c,v){return Fg(t+c,r+v)};return{left:t,top:r,translate:o}},Qa=Fg,wb=function(t){var r=t.getBoundingClientRect();return Qa(r.left,r.top)},vm=function(t,r){return t!==void 0?t:r!==void 0?r:0},yl=function(t){var r=t.dom.ownerDocument,o=r.body,c=r.defaultView,v=r.documentElement;if(o===t.dom)return Qa(o.offsetLeft,o.offsetTop);var m=vm(c==null?void 0:c.pageYOffset,v.scrollTop),p=vm(c==null?void 0:c.pageXOffset,v.scrollLeft),w=vm(v.clientTop,o.clientTop),S=vm(v.clientLeft,o.clientLeft);return wl(t).translate(p-S,m-w)},wl=function(t){var r=t.dom,o=r.ownerDocument,c=o.body;return c===r?Qa(c.offsetLeft,c.offsetTop):Hi(t)?wb(r):Qa(0,0)},Yv=Ep("width",function(t){return t.dom.offsetWidth}),Cb=function(t,r){return Yv.set(t,r)},ii=function(t){return Yv.get(t)},dm=function(t){return Yv.getOuter(t)},Sb=function(t,r){var o=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],c=Yv.max(t,r,o);yr(t,"max-width",c+"px")},LT=function(t,r,o,c,v,m,p){return{target:t,x:r,y:o,stop:c,prevent:v,kill:m,raw:p}},_w=function(t){var r=Ft.fromDom(sp(t).getOr(t.target)),o=function(){return t.stopPropagation()},c=function(){return t.preventDefault()},v=wt(c,o);return LT(r,t.clientX,t.clientY,o,c,v,t)},mm=function(t,r){return function(o){t(o)&&r(_w(o))}},Op=function(t,r,o,c,v){var m=mm(o,c);return t.dom.addEventListener(r,m,v),{unbind:gt(HT,t,r,m,v)}},Pg=function(t,r,o,c){return Op(t,r,o,c,!1)},xb=function(t,r,o,c){return Op(t,r,o,c,!0)},HT=function(t,r,o,c){t.dom.removeEventListener(r,o,c)},Ns=function(t){var r=t!==void 0?t.dom:document,o=r.body.scrollLeft||r.documentElement.scrollLeft,c=r.body.scrollTop||r.documentElement.scrollTop;return Qa(o,c)},Jv=function(t,r,o){var c=o!==void 0?o.dom:document,v=c.defaultView;v&&v.scrollTo(t,r)},Mw=function(t){var r=t===void 0?window:t;return D.from(r.visualViewport)},Tb=function(t,r,o,c){return{x:t,y:r,width:o,height:c,right:t+o,bottom:r+c}},Eb=function(t){var r=t===void 0?window:t,o=r.document,c=Ns(Ft.fromDom(o));return Mw(r).fold(function(){var v=r.document.documentElement,m=v.clientWidth,p=v.clientHeight;return Tb(c.left,c.top,m,p)},function(v){return Tb(Math.max(v.pageLeft,c.left),Math.max(v.pageTop,c.top),v.width,v.height)})},kb=function(t,r){var o=t.view(r);return o.fold(re([]),function(c){var v=t.owner(c),m=kb(t,v);return[c].concat(m)})},Fw=function(t,r){var o=r.owner(t),c=kb(r,o);return D.some(c)},Pw=function(t){var r,o=t.dom===document?D.none():D.from((r=t.dom.defaultView)===null||r===void 0?void 0:r.frameElement);return o.map(Ft.fromDom)},Dp=function(t){return Wa(t)},Ab=Object.freeze({__proto__:null,view:Pw,owner:Dp}),Du=function(t){var r=Ft.fromDom(document),o=Ns(r),c=Fw(t,Ab);return c.fold(gt(yl,t),function(v){var m=wl(t),p=an(v,function(w,S){var T=wl(S);return{left:w.left+T.left,top:w.top+T.top}},{left:0,top:0});return Qa(p.left+m.left+o.left,p.top+m.top+o.top)})},gs=function(t,r,o){return{point:t,width:r,height:o}},Zv=function(t,r,o,c){return{x:t,y:r,width:o,height:c}},du=function(t,r,o,c){return{x:t,y:r,width:o,height:c,right:t+o,bottom:r+c}},Ao=function(t){var r=yl(t),o=dm(t),c=Hc(t);return du(r.left,r.top,o,c)},tv=function(t){var r=Du(t),o=dm(t),c=Hc(t);return du(r.left,r.top,o,c)},Is=function(){return Eb(window)};function Ob(t,r,o,c,v){return t(o,c)?D.some(o):br(v)&&v(o)?D.none():r(o,c,v)}var Rp=function(t,r,o){for(var c=t.dom,v=br(o)?o:rn;c.parentNode;){c=c.parentNode;var m=Ft.fromDom(c);if(r(m))return D.some(m);if(v(m))break}return D.none()},Db=function(t,r,o){var c=function(v,m){return m(v)};return Ob(c,Rp,t,r,o)},vr=function(t,r){var o=function(v){return r(Ft.fromDom(v))},c=Wn(t.dom.childNodes,o);return c.map(Ft.fromDom)},Ng=function(t,r){var o=function(c){for(var v=0;v<c.childNodes.length;v++){var m=Ft.fromDom(c.childNodes[v]);if(r(m))return D.some(m);var p=o(c.childNodes[v]);if(p.isSome())return p}return D.none()};return o(t.dom)},Nw=function(t,r,o){return Db(t,r,o).isSome()},nv=function(t,r,o){return Rp(t,function(c){return Jd(c,r)},o)},VT=function(t,r){return vr(t,function(o){return Jd(o,r)})},ru=function(t,r){return dc(r,t)},hs=function(t,r,o){var c=function(v,m){return Jd(v,m)};return Ob(c,nv,t,r,o)},gm=function(t){var r=Db(t,function(o){if(!gc(o))return!1;var c=Eu(o,"id");return c!==void 0&&c.indexOf("aria-owns")>-1});return r.bind(function(o){var c=Eu(o,"id"),v=$i(o);return ru(v,'[aria-owns="'+c+'"]')})},Fa=function(){var t=bn("aria-owns"),r=function(c){kr(c,"aria-owns",t)},o=function(c){zi(c,"aria-owns")};return{id:t,link:r,unlink:o}},UT=function(t,r){return gm(r).exists(function(o){return ef(t,o)})},ef=function(t,r){return Nw(r,function(o){return Ja(o,t.element)},rn)||UT(t,r)},Iw="unknown",Qv;(function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.LOGGING=2]="LOGGING"})(Qv||(Qv={}));var Bp=Bn({}),_p=function(t,r){var o=[],c=new Date().getTime();return{logEventCut:function(v,m,p){o.push({outcome:"cut",target:m,purpose:p})},logEventStopped:function(v,m,p){o.push({outcome:"stopped",target:m,purpose:p})},logNoParent:function(v,m,p){o.push({outcome:"no-parent",target:m,purpose:p})},logEventNoHandlers:function(v,m){o.push({outcome:"no-handlers-left",target:m})},logEventResponse:function(v,m,p){o.push({outcome:"response",purpose:p,target:m})},write:function(){var v=new Date().getTime();ir(["mousemove","mouseover","mouseout",qf()],t)||console.log(t,{event:t,time:v-c,target:r.dom,sequence:yt(o,function(m){return ir(["cut","stopped","response"],m.outcome)?"{"+m.purpose+"} "+m.outcome+" at ("+Jf(m.target)+")":m.outcome})})}}},$w=function(t,r,o){var c=Cn(Bp.get(),t).orThunk(function(){var p=$r(Bp.get());return Ba(p,function(w){return t.indexOf(w)>-1?D.some(Bp.get()[w]):D.none()})}).getOr(Qv.NORMAL);switch(c){case Qv.NORMAL:return o(td());case Qv.LOGGING:{var v=_p(t,r),m=o(v);return v.write(),m}case Qv.STOP:return!0}},tf=["alloy/data/Fields","alloy/debugging/Debugging"],Ru=function(){var t=new Error;if(t.stack!==void 0){var r=t.stack.split(`
`);return Wn(r,function(o){return o.indexOf("alloy")>0&&!la(tf,function(c){return o.indexOf(c)>-1})}).getOr(Iw)}else return Iw},hm={logEventCut:He,logEventStopped:He,logNoParent:He,logEventNoHandlers:He,logEventResponse:He,write:He},ed=function(t,r,o){return $w(t,r,o)},td=re(hm),Mp=re([nt("menu"),nt("selectedMenu")]),Fp=re([nt("item"),nt("selectedItem")]);re(De(Fp().concat(Mp())));var Pp=re(De(Fp())),WT=Je("initSize",[nt("numColumns"),nt("numRows")]),jT=function(){return po("markers",Pp())},Np=function(){return Je("markers",[nt("backgroundMenu")].concat(Mp()).concat(Fp()))},Qu=function(t){return Je("markers",yt(t,nt))},Ip=function(t,r,o){return Ru(),hr(r,r,o,ga(function(c){return mn.value(function(){for(var v=[],m=0;m<arguments.length;m++)v[m]=arguments[m];return c.apply(void 0,v)})}))},Kr=function(t){return Ip("onHandler",t,Oe(He))},xo=function(t){return Ip("onKeyboardHandler",t,Oe(D.none))},Ei=function(t){return Ip("onHandler",t,ee())},Rb=function(t){return Ip("onKeyboardHandler",t,ee())},sa=function(t,r){return ho(t,re(r))},$p=function(t){return ho(t,Te)},Bb=re(WT),ui=function(t,r,o,c,v,m,p,w){return w===void 0&&(w=!1),{x:t,y:r,bubble:o,direction:c,placement:v,restriction:m,label:p+"-"+v,alwaysFit:w}},rv=fu.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),qT=function(t,r,o,c,v,m,p,w,S){return t.fold(r,o,c,v,m,p,w,S)},zp=function(t,r,o,c){return t.fold(r,r,c,c,r,c,o,o)},GT=function(t,r,o,c){return t.fold(r,c,r,c,o,o,r,c)},Ig=rv.southeast,pm=rv.southwest,nd=rv.northeast,_b=rv.northwest,$g=rv.south,Mb=rv.north,Fb=rv.east,$u=rv.west,av=function(t,r,o,c){var v=t+r;return v>c?o:v<o?c:v},Bu=function(t,r,o){return Math.min(Math.max(t,r),o)},zg=function(t,r){switch(r){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}},ci=function(t,r){return Po(["left","right","top","bottom"],function(o){return Cn(r,o).map(function(c){return zg(t,c)})})},zw=function(t,r,o){var c=function(S,T){return r[S].map(function(R){var O=S==="top"||S==="bottom",N=O?o.top:o.left,L=S==="left"||S==="top"?Math.max:Math.min,q=L(R,T)+N;return O?Bu(q,t.y,t.bottom):Bu(q,t.x,t.right)}).getOr(T)},v=c("left",t.x),m=c("top",t.y),p=c("right",t.right),w=c("bottom",t.bottom);return du(v,m,p-v,w-m)},ov="layout",Lw=function(t){return t.x},Lp=function(t,r){return t.x+t.width/2-r.width/2},Pb=function(t,r){return t.x+t.width-r.width},Nb=function(t,r){return t.y-r.height},Hp=function(t){return t.y+t.height},Ib=function(t,r){return t.y+t.height/2-r.height/2},Vp=function(t){return t.x+t.width},Hw=function(t,r){return t.x-r.width},au=function(t,r,o){return ui(Lw(t),Hp(t),o.southeast(),Ig(),"southeast",ci(t,{left:1,top:3}),ov)},ou=function(t,r,o){return ui(Pb(t,r),Hp(t),o.southwest(),pm(),"southwest",ci(t,{right:0,top:3}),ov)},_u=function(t,r,o){return ui(Lw(t),Nb(t,r),o.northeast(),nd(),"northeast",ci(t,{left:1,bottom:2}),ov)},Mu=function(t,r,o){return ui(Pb(t,r),Nb(t,r),o.northwest(),_b(),"northwest",ci(t,{right:0,bottom:2}),ov)},Vi=function(t,r,o){return ui(Lp(t,r),Nb(t,r),o.north(),Mb(),"north",ci(t,{bottom:2}),ov)},Ui=function(t,r,o){return ui(Lp(t,r),Hp(t),o.south(),$g(),"south",ci(t,{top:3}),ov)},Up=function(t,r,o){return ui(Vp(t),Ib(t,r),o.east(),Fb(),"east",ci(t,{left:0}),ov)},Wp=function(t,r,o){return ui(Hw(t,r),Ib(t,r),o.west(),$u(),"west",ci(t,{right:1}),ov)},iv=function(){return[au,ou,_u,Mu,Ui,Vi,Up,Wp]},nf=function(){return[ou,au,Mu,_u,Ui,Vi,Up,Wp]},$b=function(){return[_u,Mu,au,ou,Vi,Ui]},Vw=function(){return[Mu,_u,ou,au,Vi,Ui]},jp=function(){return[au,ou,_u,Mu,Ui,Vi]},uv=function(){return[ou,au,Mu,_u,Ui,Vi]},ec=function(t,r){return r.universal?t:rt(t,function(o){return ir(r.channels,o)})},Lg=function(t){return xa([ot(Ds(),function(r,o){var c=t.channels,v=$r(c),m=o,p=ec(v,m);Jt(p,function(w){var S=c[w],T=S.schema,R=Ia("channel["+w+`] data
Receiver: `+Jf(r.element),T,m.data);S.onReceive(r,R)})})])},ki=Object.freeze({__proto__:null,events:Lg}),qp=[po("channels",fa(mn.value,Ne([Ei("onReceive"),xe("schema",Mt())])))],cv=function(t,r,o){return Pc(function(c){o(c,t,r)})},Hg=function(t,r,o){return Kf(function(c,v){o(c,t,r)})},KT=function(t,r,o,c,v,m){var p=Ne(t),w=$a(r,[Oc("config",t)]);return Gp(p,w,r,o,c,v,m)},Uw=function(t,r,o,c,v,m){var p=t,w=$a(r,[se("config",t)]);return Gp(p,w,r,o,c,v,m)},XT=function(t,r,o){var c=function(v){for(var m=[],p=1;p<arguments.length;p++)m[p-1]=arguments[p];var w=[v].concat(m);return v.config({name:re(t)}).fold(function(){throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+o)},function(S){var T=Array.prototype.slice.call(w,1);return r.apply(void 0,[v,S.config,S.state].concat(T))})};return Cw(c,o,r)},YT=function(t){return{key:t,value:void 0}},Gp=function(t,r,o,c,v,m,p){var w=function(O){return Na(O,o)?O[o]():D.none()},S=Gr(v,function(O,N){return XT(o,O,N)}),T=Gr(m,function(O,N){return Bg(O,N)}),R=me(me(me({},T),S),{revoke:gt(YT,o),config:function(O){var N=Ia(o+"-config",t,O);return{key:o,value:{config:N,me:R,configAsRaw:Xa(function(){return Ia(o+"-config",t,O)}),initialConfig:O,state:p}}},schema:re(r),exhibit:function(O,N){return lm(w(O),Cn(c,"exhibit"),function(L,q){return q(N,L.config,L.state)}).getOrThunk(function(){return Za({})})},name:re(o),handlers:function(O){return w(O).map(function(N){var L=Cn(c,"events").getOr(function(){return{}});return L(N.config,N.state)}).getOr({})}});return R},Pt=function(t){return ss(t)},zb=Ne([nt("fields"),nt("name"),xe("active",{}),xe("apis",{}),xe("state",Ms),xe("extra",{})]),si=function(t){var r=Ia("Creating behaviour: "+t.name,zb,t);return KT(r.fields,r.name,r.active,r.apis,r.extra,r.state)},rd=Ne([nt("branchKey"),nt("branches"),nt("name"),xe("active",{}),xe("apis",{}),xe("state",Ms),xe("extra",{})]),Kp=function(t){var r=Ia("Creating behaviour: "+t.name,rd,t);return Uw(Ln(r.branchKey,r.branches),r.name,r.active,r.apis,r.extra,r.state)},ad=re(void 0),yc=si({fields:qp,name:"receiving",active:ki}),Ww=function(t,r){return Za({classes:[],styles:r.useFixed()?{}:{position:"relative"}})},bm=Object.freeze({__proto__:null,exhibit:Ww}),Vg=function(){return Ft.fromDom(document)},Fu=function(t){return t.dom.focus()},jw=function(t){return t.dom.blur()},Xp=function(t){var r=$i(t).dom;return t.dom===r.activeElement},tc=function(t){return t===void 0&&(t=Vg()),D.from(t.dom.activeElement).map(Ft.fromDom)},Vc=function(t){return tc($i(t)).filter(function(r){return t.dom.contains(r.dom)})},Lb=function(t,r){var o=$i(r),c=tc(o).bind(function(m){var p=function(w){return Ja(m,w)};return p(r)?D.some(r):Ng(r,p)}),v=t(r);return c.each(function(m){tc(o).filter(function(p){return Ja(p,m)}).fold(function(){Fu(m)},He)}),v},Wi=function(t,r,o,c,v){var m=function(p){return p+"px"};return{position:t,left:r.map(m),top:o.map(m),right:c.map(m),bottom:v.map(m)}},Cl=function(t){return me(me({},t),{position:D.some(t.position)})},ym=function(t,r){Kv(t,Cl(r))},Ge=fu.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),Ug=function(t,r,o,c,v,m){var p=r.rect,w=p.x-o,S=p.y-c,T=p.width,R=p.height,O=v-(w+T),N=m-(S+R),L=D.some(w),q=D.some(S),X=D.some(O),ge=D.some(N),ne=D.none();return qT(r.direction,function(){return Wi(t,L,q,ne,ne)},function(){return Wi(t,ne,q,X,ne)},function(){return Wi(t,L,ne,ne,ge)},function(){return Wi(t,ne,ne,X,ge)},function(){return Wi(t,L,q,ne,ne)},function(){return Wi(t,L,ne,ne,ge)},function(){return Wi(t,L,q,ne,ne)},function(){return Wi(t,ne,q,X,ne)})},qw=function(t,r){return t.fold(function(){var o=r.rect;return Wi("absolute",D.some(o.x),D.some(o.y),D.none(),D.none())},function(o,c,v,m){return Ug("absolute",r,o,c,v,m)},function(o,c,v,m){return Ug("fixed",r,o,c,v,m)})},Yp=function(t,r){var o=gt(Du,r),c=t.fold(o,o,function(){var p=Ns();return Du(r).translate(-p.left,-p.top)}),v=dm(r),m=Hc(r);return du(c.left,c.top,v,m)},Wg=function(t,r){return r.fold(function(){return t.fold(Is,Is,du)},function(o){return t.fold(o,o,function(){var c=o(),v=Uc(t,c.x,c.y);return du(v.left,v.top,c.width,c.height)})})},Uc=function(t,r,o){var c=Qa(r,o),v=function(){var m=Ns();return c.translate(-m.left,-m.top)};return t.fold(re(c),re(c),v)},Hb=function(t,r,o,c){return t.fold(r,o,c)};Ge.none;var Vb=Ge.relative,Gw=Ge.fixed,Jp=function(t,r){return{anchorBox:t,origin:r}},Kw=function(t,r){return Jp(t,r)},od="data-alloy-placement",Zp=function(t,r){kr(t,od,r)},Ub=function(t){return $c(t,od)},JT=function(t){return zi(t,od)},jg=fu.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),qg=function(t,r){var o=r.x,c=r.y,v=r.right,m=r.bottom,p=t.x,w=t.y,S=t.right,T=t.bottom,R=t.width,O=t.height,N=p>=o&&p<=v,L=w>=c&&w<=m,q=N&&L,X=S<=v&&S>=o,ge=T<=m&&T>=c,ne=X&&ge,ye=Math.min(R,p>=o?v-p:S-o),he=Math.min(O,w>=c?m-w:T-c);return{originInBounds:q,sizeInBounds:ne,visibleW:ye,visibleH:he}},Wb=function(t,r){var o=r.x,c=r.y,v=r.right,m=r.bottom,p=t.x,w=t.y,S=t.width,T=t.height,R=Math.max(o,v-S),O=Math.max(c,m-T),N=Bu(p,o,R),L=Bu(w,c,O),q=Math.min(N+S,v)-N,X=Math.min(L+T,m)-L;return du(N,L,q,X)},jb=function(t,r,o){var c=re(r.bottom-o.y),v=re(o.bottom-r.y),m=zp(t,v,v,c),p=re(r.right-o.x),w=re(o.right-r.x),S=GT(t,w,w,p);return{maxWidth:S,maxHeight:m}},Qp=function(t,r,o,c){var v=t.bubble,m=v.offset,p=zw(c,t.restriction,m),w=t.x+m.left,S=t.y+m.top,T=du(w,S,r,o),R=qg(T,p),O=R.originInBounds,N=R.sizeInBounds,L=R.visibleW,q=R.visibleH,X=O&&N,ge=X?T:Wb(T,p),ne=ge.width>0&&ge.height>0,ye=jb(t.direction,ge,c),he=ye.maxWidth,Ve=ye.maxHeight,_e={rect:ge,maxHeight:Ve,maxWidth:he,direction:t.direction,placement:t.placement,classes:{on:v.classesOn,off:v.classesOff},layout:t.label,testY:S};return X||t.alwaysFit?jg.fit(_e):jg.nofit(_e,L,q,ne)},ZT=function(t,r,o,c,v,m){var p=c.width,w=c.height,S=function(R,O,N,L,q){var X=R(o,c,v,t,m),ge=Qp(X,p,w,m);return ge.fold(re(ge),function(ne,ye,he,Ve){var _e=q===Ve?he>L||ye>N:!q&&Ve;return _e?ge:jg.nofit(O,N,L,q)})},T=kn(r,function(R,O){var N=gt(S,O);return R.fold(re(R),N)},jg.nofit({rect:o,maxHeight:c.height,maxWidth:c.width,direction:Ig(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:o.y},-1,-1,!1));return T.fold(Te,Te)},e1=function(t){var r=Bn(D.none()),o=function(){return r.get().each(t)},c=function(){o(),r.set(D.none())},v=function(){return r.get().isSome()},m=function(){return r.get()},p=function(w){o(),r.set(D.some(w))};return{clear:c,isSet:v,get:m,set:p}},QT=function(){return e1(function(t){return t.destroy()})},Sl=function(){return e1(function(t){return t.unbind()})},ro=function(){var t=e1(He),r=function(o){return t.get().each(o)};return me(me({},t),{on:r})},qb=ut,ji=function(t,r,o){return Pg(t,r,qb,o)},Gg=function(t,r,o){return xb(t,r,qb,o)},t1=_w,Gb=["top","bottom","right","left"],n1="data-alloy-transition-timer",Xw=function(t,r){return FT(t,r.classes)},Yw=function(t,r,o){return o.exists(function(c){var v=t.mode;return v==="all"?!0:c[v]!==r[v]})},eE=function(t,r){var o=function(c){return parseFloat(c).toPrecision(3)};return Ha(r,function(c,v){var m=t[v].map(o),p=c.map(o);return!xi(m,p)}).isSome()},Jw=function(t){var r=function(m){var p=oi(t,m),w=Ut(p)?p.split(/\s*,\s*/):[];return rt(w,ks)},o=function(m){if(Ut(m)&&/^[\d.]+/.test(m)){var p=parseFloat(m);return Es(m,"ms")?p:p*1e3}else return 0},c=r("transition-delay"),v=r("transition-duration");return kn(v,function(m,p,w){var S=o(c[w])+o(p);return Math.max(m,S)},0)},tE=function(t,r){var o=Sl(),c=Sl(),v,m=function(R){var O,N=(O=R.raw.pseudoElement)!==null&&O!==void 0?O:"";return Ja(R.target,t)&&Nf(N)&&ir(Gb,R.raw.propertyName)},p=function(R){if(Fr(R)||m(R)){o.clear(),c.clear();var O=R==null?void 0:R.raw.type;(Fr(O)||O===Hf())&&(clearTimeout(v),zi(t,n1),vu(t,r.classes))}},w=function(){o.set(ji(t,Hf(),p)),c.set(ji(t,TT(),p))};if("ontransitionstart"in t.dom)var S=ji(t,Qd(),function(R){m(R)&&(S.unbind(),w())});else w();var T=Jw(t);requestAnimationFrame(function(){v=setTimeout(p,T+17),kr(t,n1,v)})},Zw=function(t,r){Lc(t,r.classes),$c(t,n1).each(function(o){clearTimeout(parseInt(o,10)),zi(t,n1)}),tE(t,r)},r1=function(t,r,o,c,v,m){var p=Yw(c,v,m);if(p||Xw(t,c)){yr(t,"position",o.position);var w=Yp(r,t),S=qw(r,me(me({},v),{rect:w})),T=Po(Gb,function(R){return S[R]});eE(o,T)&&(Kv(t,T),p&&Zw(t,c),Ql(t))}else vu(t,c.classes)},nE=function(t){return{width:dm(t),height:Hc(t)}},rE=function(t,r,o,c){Ma(r,"max-height"),Ma(r,"max-width");var v=nE(r);return ZT(r,c.preference,t,v,o,c.bounds)},Kb=function(t,r){var o=r.classes;vu(t,o.off),Lc(t,o.on)},Xb=function(t,r,o){var c=o.maxHeightFunction;c(t,r.maxHeight)},Qw=function(t,r,o){var c=o.maxWidthFunction;c(t,r.maxWidth)},Yb=function(t,r,o){var c=qw(o.origin,r);o.transition.each(function(v){r1(t,o.origin,c,v,r,o.lastPlacement)}),ym(t,c)},eC=function(t,r){Zp(t,r.placement)},iu=function(t,r){Ap(t,Math.floor(r))},Kg=re(function(t,r){iu(t,r),bc(t,{"overflow-x":"hidden","overflow-y":"auto"})}),sv=re(function(t,r){iu(t,r)}),wm=function(t,r,o){return t[r]===void 0?o:t[r]},tC=function(t,r,o,c,v,m,p,w){var S=wm(p,"maxHeightFunction",Kg()),T=wm(p,"maxWidthFunction",He),R=t.anchorBox,O=t.origin,N={bounds:Wg(O,m),origin:O,preference:c,maxHeightFunction:S,maxWidthFunction:T,lastPlacement:v,transition:w};return aE(R,r,o,N)},aE=function(t,r,o,c){var v=rE(t,r,o,c);return Yb(r,v,c),eC(r,v),Kb(r,v),Xb(r,v,c),Qw(r,v,c),{layout:v.layout,placement:v.placement}},oE=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],Cm=function(t,r,o,c){c===void 0&&(c=1);var v=t*c,m=r*c,p=function(S){return Cn(o,S).getOr([])},w=function(S,T,R){var O=ra(oE,R);return{offset:Qa(S,T),classesOn:qr(R,p),classesOff:qr(O,p)}};return{southeast:function(){return w(-t,r,["top","alignLeft"])},southwest:function(){return w(t,r,["top","alignRight"])},south:function(){return w(-t/2,r,["top","alignCentre"])},northeast:function(){return w(-t,-r,["bottom","alignLeft"])},northwest:function(){return w(t,-r,["bottom","alignRight"])},north:function(){return w(-t/2,-r,["bottom","alignCentre"])},east:function(){return w(t,-r/2,["valignCentre","left"])},west:function(){return w(-t,-r/2,["valignCentre","right"])},insetNortheast:function(){return w(v,m,["top","alignLeft","inset"])},insetNorthwest:function(){return w(-v,m,["top","alignRight","inset"])},insetNorth:function(){return w(-v/2,m,["top","alignCentre","inset"])},insetSoutheast:function(){return w(v,-m,["bottom","alignLeft","inset"])},insetSouthwest:function(){return w(-v,-m,["bottom","alignRight","inset"])},insetSouth:function(){return w(-v/2,-m,["bottom","alignCentre","inset"])},insetEast:function(){return w(-v,-m/2,["valignCentre","right","inset"])},insetWest:function(){return w(v,-m/2,["valignCentre","left","inset"])}}},a1=function(){return Cm(0,0,{})},Xg=Te,o1=function(t,r){return function(o){return iE(o)==="rtl"?r:t}},iE=function(t){return oi(t,"direction")==="rtl"?"rtl":"ltr"},xl;(function(t){t.TopToBottom="toptobottom",t.BottomToTop="bottomtotop"})(xl||(xl={}));var id="data-alloy-vertical-dir",uE=function(t){return Nw(t,function(r){return gc(r)&&Eu(r,"data-alloy-vertical-dir")===xl.BottomToTop})},$s=function(){return $a("layouts",[nt("onLtr"),nt("onRtl"),W("onBottomLtr"),W("onBottomRtl")])},Sm=function(t,r,o,c,v,m,p){var w=p.map(uE).getOr(!1),S=r.layouts.map(function(L){return L.onLtr(t)}),T=r.layouts.map(function(L){return L.onRtl(t)}),R=w?r.layouts.bind(function(L){return L.onBottomLtr.map(function(q){return q(t)})}).or(S).getOr(v):S.getOr(o),O=w?r.layouts.bind(function(L){return L.onBottomRtl.map(function(q){return q(t)})}).or(T).getOr(m):T.getOr(c),N=o1(R,O);return N(t)},Jb=function(t,r,o){var c=r.hotspot,v=Yp(o,c.element),m=Sm(t.element,r,jp(),uv(),$b(),Vw(),D.some(r.hotspot.element));return D.some(Xg({anchorBox:v,bubble:r.bubble.getOr(a1()),overrides:r.overrides,layouts:m,placer:D.none()}))},qi=[nt("hotspot"),W("bubble"),xe("overrides",{}),$s(),sa("placement",Jb)],nC=function(t,r,o){var c=Uc(o,r.x,r.y),v=du(c.left,c.top,r.width,r.height),m=Sm(t.element,r,iv(),nf(),iv(),nf(),D.none());return D.some(Xg({anchorBox:v,bubble:r.bubble,overrides:r.overrides,layouts:m,placer:D.none()}))},i1=[nt("x"),nt("y"),xe("height",0),xe("width",0),xe("bubble",a1()),xe("overrides",{}),$s(),sa("placement",nC)],rC=fu.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),aC=function(t){return t.fold(Te,function(r,o,c){return r.translate(-o,-c)})},Tl=function(t){return t.fold(Te,Te)},El=function(t){return kn(t,function(r,o){return r.translate(o.left,o.top)},Qa(0,0))},oC=function(t){var r=yt(t,aC);return El(r)},Zb=function(t){var r=yt(t,Tl);return El(r)},iC=rC.screen,Qb=rC.absolute,cE=function(t,r,o){var c=rm(o.root).dom,v=function(m){var p=Wa(m),w=Wa(t.element);return Ja(p,w)};return D.from(c.frameElement).map(Ft.fromDom).filter(v).map(yl)},ey=function(t,r,o){var c=Wa(t.element),v=Ns(c),m=cE(t,r,o).getOr(v);return Qb(m,v.left,v.top)},ty=function(t,r,o,c){var v=iC(Qa(t,r));return D.some(gs(v,o,c))},uC=function(t,r,o,c,v){return t.map(function(m){var p=[r,m.point],w=Hb(c,function(){return Zb(p)},function(){return Zb(p)},function(){return oC(p)}),S=Zv(w.left,w.top,m.width,m.height),T=o.showAbove?$b():jp(),R=o.showAbove?Vw():uv(),O=Sm(v,o,T,R,T,R,D.none());return Xg({anchorBox:S,bubble:o.bubble.getOr(a1()),overrides:o.overrides,layouts:O,placer:D.none()})})},Yg=function(t,r,o){var c=ey(t,o,r);return r.node.filter(Hi).bind(function(v){var m=v.dom.getBoundingClientRect(),p=ty(m.left,m.top,m.width,m.height),w=r.node.getOr(t.element);return uC(p,c,r,o,w)})},xm=[nt("node"),nt("root"),W("bubble"),$s(),xe("overrides",{}),xe("showAbove",!1),sa("placement",Yg)],rf="\uFEFF",sE="\xA0",cC=function(t,r,o,c){return{start:t,soffset:r,finish:o,foffset:c}},ny={create:cC},u1=fu.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),sC=function(t,r,o,c){return t.fold(r,o,c)},ry=function(t){return t.fold(Te,Te,Te)},lE=u1.before,fE=u1.on,vE=u1.after,Jg={before:lE,on:fE,after:vE,cata:sC,getStart:ry},c1=fu.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),dE=function(t){return c1.exact(t.start,t.soffset,t.finish,t.foffset)},mE=function(t){return t.match({domRange:function(r){return Ft.fromDom(r.startContainer)},relative:function(r,o){return Jg.getStart(r)},exact:function(r,o,c,v){return r}})},lC=c1.domRange,gE=c1.relative,fC=c1.exact,s1=function(t){var r=mE(t);return rm(r)},hE=ny.create,Tm={domRange:lC,relative:gE,exact:fC,exactFromRange:dE,getWin:s1,range:hE},pE=function(t,r){r.fold(function(o){t.setStartBefore(o.dom)},function(o,c){t.setStart(o.dom,c)},function(o){t.setStartAfter(o.dom)})},vC=function(t,r){r.fold(function(o){t.setEndBefore(o.dom)},function(o,c){t.setEnd(o.dom,c)},function(o){t.setEndAfter(o.dom)})},dC=function(t,r,o){var c=t.document.createRange();return pE(c,r),vC(c,o),c},mC=function(t,r,o,c,v){var m=t.document.createRange();return m.setStart(r.dom,o),m.setEnd(c.dom,v),m},ay=function(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}},l1=function(t){var r=t.getClientRects(),o=r.length>0?r[0]:t.getBoundingClientRect();return o.width>0||o.height>0?D.some(o).map(ay):D.none()},oy=function(t){var r=t.getBoundingClientRect();return r.width>0||r.height>0?D.some(r).map(ay):D.none()},ud=fu.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),f1=function(t,r,o){return r(Ft.fromDom(o.startContainer),o.startOffset,Ft.fromDom(o.endContainer),o.endOffset)},gC=function(t,r){return r.match({domRange:function(o){return{ltr:re(o),rtl:D.none}},relative:function(o,c){return{ltr:Xa(function(){return dC(t,o,c)}),rtl:Xa(function(){return D.some(dC(t,c,o))})}},exact:function(o,c,v,m){return{ltr:Xa(function(){return mC(t,o,c,v,m)}),rtl:Xa(function(){return D.some(mC(t,v,m,o,c))})}}})},hC=function(t,r){var o=r.ltr();if(o.collapsed){var c=r.rtl().filter(function(v){return v.collapsed===!1});return c.map(function(v){return ud.rtl(Ft.fromDom(v.endContainer),v.endOffset,Ft.fromDom(v.startContainer),v.startOffset)}).getOrThunk(function(){return f1(t,ud.ltr,o)})}else return f1(t,ud.ltr,o)},Em=function(t,r){var o=gC(t,r);return hC(t,o)},iy=function(t,r){var o=Em(t,r);return o.match({ltr:function(c,v,m,p){var w=t.document.createRange();return w.setStart(c.dom,v),w.setEnd(m.dom,p),w},rtl:function(c,v,m,p){var w=t.document.createRange();return w.setStart(m.dom,p),w.setEnd(c.dom,v),w}})};ud.ltr,ud.rtl;var pC=function(t,r){var o=function(m){if(!t(m))throw new Error("Can only get "+r+" value of a "+r+" node");return c(m).getOr("")},c=function(m){return t(m)?D.from(m.dom.nodeValue):D.none()},v=function(m,p){if(!t(m))throw new Error("Can only set raw "+r+" value of a "+r+" node");m.dom.nodeValue=p};return{get:o,getOption:c,set:v}},uy=pC(Ci,"text"),cd=function(t){return uy.get(t)},v1=function(t){return uy.getOption(t)},bE=function(t){return Nc(t)==="img"?1:v1(t).fold(function(){return Yu(t).length},function(r){return r.length})},bC=function(t){return v1(t).filter(function(r){return r.trim().length!==0||r.indexOf(sE)>-1}).isSome()},yE=["img","br"],Gi=function(t){var r=bC(t);return r||ir(yE,Nc(t))},yC=function(t){return wE(t,Gi)},wE=function(t,r){var o=function(c){for(var v=Yu(c),m=v.length-1;m>=0;m--){var p=v[m];if(r(p))return D.some(p);var w=o(p);if(w.isSome())return w}return D.none()};return o(t)},zu=function(t,r){return pg(r,t)},wC=function(t,r,o,c){var v=Wa(t),m=v.dom.createRange();return m.setStart(t.dom,r),m.setEnd(o.dom,c),m},sd=function(t,r,o,c){var v=wC(t,r,o,c),m=Ja(t,o)&&r===c;return v.collapsed&&!m},af=function(t){return D.from(t.getSelection())},d1=function(t){if(t.rangeCount>0){var r=t.getRangeAt(0),o=t.getRangeAt(t.rangeCount-1);return D.some(ny.create(Ft.fromDom(r.startContainer),r.startOffset,Ft.fromDom(o.endContainer),o.endOffset))}else return D.none()},CE=function(t){if(t.anchorNode===null||t.focusNode===null)return d1(t);var r=Ft.fromDom(t.anchorNode),o=Ft.fromDom(t.focusNode);return sd(r,t.anchorOffset,o,t.focusOffset)?D.some(ny.create(r,t.anchorOffset,o,t.focusOffset)):d1(t)},SE=function(t){return af(t).filter(function(r){return r.rangeCount>0}).bind(CE)},m1=function(t,r){var o=iy(t,r);return l1(o)},cy=function(t,r){var o=iy(t,r);return oy(o)},lv=function(t,r){return{element:t,offset:r}},xE=function(t,r){var o=Yu(t);if(o.length===0)return lv(t,r);if(r<o.length)return lv(o[r],0);var c=o[o.length-1],v=Ci(c)?cd(c).length:Yu(c).length;return lv(c,v)},ld=function(t,r){return Ci(t)?lv(t,r):xE(t,r)},ei=function(t,r){var o=r.getSelection.getOrThunk(function(){return function(){return SE(t)}});return o().map(function(c){var v=ld(c.start,c.soffset),m=ld(c.finish,c.foffset);return Tm.range(v.element,v.offset,m.element,m.offset)})},fd=function(t,r,o){var c=rm(r.root).dom,v=ey(t,o,r),m=ei(c,r).bind(function(S){var T=cy(c,Tm.exactFromRange(S)).orThunk(function(){var R=Ft.fromText(rf);lp(S.start,R);var O=m1(c,Tm.exact(R,0,R,1));return Yf(R),O});return T.bind(function(R){return ty(R.left,R.top,R.width,R.height)})}),p=ei(c,r).bind(function(S){return gc(S.start)?D.some(S.start):Xf(S.start)}),w=p.getOr(t.element);return uC(m,v,r,o,w)},km=[W("getSelection"),nt("root"),W("bubble"),$s(),xe("overrides",{}),xe("showAbove",!1),sa("placement",fd)],zs="link-layout",Ls=function(t){return t.x+t.width},g1=function(t,r){return t.x-r.width},sy=function(t,r){return t.y-r.height+t.height},CC=function(t){return t.y},ly=function(t,r,o){return ui(Ls(t),CC(t),o.southeast(),Ig(),"southeast",ci(t,{left:0,top:2}),zs)},Am=function(t,r,o){return ui(g1(t,r),CC(t),o.southwest(),pm(),"southwest",ci(t,{right:1,top:2}),zs)},fv=function(t,r,o){return ui(Ls(t),sy(t,r),o.northeast(),nd(),"northeast",ci(t,{left:0,bottom:3}),zs)},h1=function(t,r,o){return ui(g1(t,r),sy(t,r),o.northwest(),_b(),"northwest",ci(t,{right:1,bottom:3}),zs)},fy=function(){return[ly,Am,fv,h1]},Om=function(){return[Am,ly,h1,fv]},p1=function(t,r,o){var c=Yp(o,r.item.element),v=Sm(t.element,r,fy(),Om(),fy(),Om(),D.none());return D.some(Xg({anchorBox:c,bubble:a1(),overrides:r.overrides,layouts:v,placer:D.none()}))},TE=[nt("item"),$s(),xe("overrides",{}),sa("placement",p1)],vy=Ln("type",{selection:km,node:xm,hotspot:qi,submenu:TE,makeshift:i1}),b1=[B("classes",ue),Cu("mode","all",["all","layout","placement"])],Ki=[xe("useFixed",rn),W("getBounds")],y1=[po("anchor",vy),$a("transition",b1)],kl=function(){var t=document.documentElement;return Gw(0,0,t.clientWidth,t.clientHeight)},SC=function(t){var r=yl(t.element),o=t.element.dom.getBoundingClientRect();return Vb(r.left,r.top,o.width,o.height)},dy=function(t,r,o,c,v,m,p){var w=Kw(o.anchorBox,r);return tC(w,v.element,o.bubble,o.layouts,m,c,o.overrides,p)},Dm=function(t,r,o,c,v){my(t,r,o,c,v,D.none())},my=function(t,r,o,c,v,m){var p=m.map(Ao);return Zg(t,r,o,c,v,p)},Zg=function(t,r,o,c,v,m){var p=Ia("placement.info",De(y1),v),w=p.anchor,S=c.element,T=o.get(c.uid);Lb(function(){yr(S,"position","fixed");var R=Zr(S,"visibility");yr(S,"visibility","hidden");var O=r.useFixed()?kl():SC(t),N=w.placement,L=m.map(re).or(r.getBounds);N(t,w,O).each(function(q){var X=q.placer.getOr(dy),ge=X(t,O,q,L,c,T,p.transition);o.set(c.uid,ge)}),R.fold(function(){Ma(S,"visibility")},function(q){yr(S,"visibility",q)}),Zr(S,"left").isNone()&&Zr(S,"top").isNone()&&Zr(S,"right").isNone()&&Zr(S,"bottom").isNone()&&pc(Zr(S,"position"),"fixed")&&Ma(S,"position")},S)},EE=function(t,r,o){return r.useFixed()?"fixed":"absolute"},w1=function(t,r,o,c){var v=c.element;Jt(["position","left","right","top","bottom"],function(m){return Ma(v,m)}),JT(v),o.clear(c.uid)},C1=Object.freeze({__proto__:null,position:Dm,positionWithin:my,positionWithinBounds:Zg,getMode:EE,reset:w1}),xC=function(){var t={},r=function(v,m){t[v]=m},o=function(v){return Cn(t,v)},c=function(v){un(v)?delete t[v]:t={}};return tu({readState:function(){return t},clear:c,set:r,get:o})},S1=Object.freeze({__proto__:null,init:xC}),lo=si({fields:Ki,name:"positioning",active:bm,apis:C1,state:S1}),Qg=function(t){zr(t,Lv());var r=t.components();Jt(r,Qg)},x1=function(t){var r=t.components();Jt(r,x1),zr(t,ul())},T1=function(t,r){Ju(t.element,r.element)},TC=function(t){Jt(t.components(),function(r){return Yf(r.element)}),cb(t.element),t.syncComponents()},gy=function(t,r){var o=t.components();TC(t);var c=ra(o,r);Jt(c,function(v){Qg(v),t.getSystem().removeFromWorld(v)}),Jt(r,function(v){v.getSystem().isConnected()?T1(t,v):(t.getSystem().addToWorld(v),T1(t,v),Hi(t.element)&&x1(v)),t.syncComponents()})},vd=function(t,r){EC(t,r,Ju)},EC=function(t,r,o){t.getSystem().addToWorld(r),o(t.element,r.element),Hi(t.element)&&x1(r),t.syncComponents()},wc=function(t){Qg(t),Yf(t.element),t.getSystem().removeFromWorld(t)},Al=function(t){var r=Si(t.element).bind(function(o){return t.getSystem().getByDom(o).toOptional()});wc(t),r.each(function(o){o.syncComponents()})},hy=function(t){var r=t.components();Jt(r,wc),cb(t.element),t.syncComponents()},vv=function(t,r){Vs(t,r,Ju)},Hs=function(t,r){Vs(t,r,ub)},Vs=function(t,r,o){o(t,r.element);var c=Yu(r.element);Jt(c,function(v){r.getByDom(v).each(x1)})},Pu=function(t){var r=Yu(t.element);Jt(r,function(o){t.getByDom(o).each(Qg)}),Yf(t.element)},Us=function(t,r,o,c){o.get().each(function(p){hy(t)});var v=r.getAttachPoint(t);vd(v,t);var m=t.getSystem().build(c);return vd(t,m),o.set(m),m},py=function(t,r,o,c){var v=Us(t,r,o,c);return r.onOpen(t,v),v},Ol=function(t,r,o,c){return o.get().map(function(){return Us(t,r,o,c)})},dd=function(t,r,o,c,v){RC(t,r),py(t,r,o,c),v(),_C(t,r)},kC=function(t,r,o){o.get().each(function(c){hy(t),Al(t),r.onClose(t,c),o.clear()})},AC=function(t,r,o){return o.isOpen()},kE=function(t,r,o,c){return AC(t,r,o)&&o.get().exists(function(v){return r.isPartOf(t,v,c)})},AE=function(t,r,o){return o.get()},OC=function(t,r,o,c){Zr(t.element,r).fold(function(){zi(t.element,o)},function(v){kr(t.element,o,v)}),yr(t.element,r,c)},DC=function(t,r,o){$c(t.element,o).fold(function(){return Ma(t.element,r)},function(c){return yr(t.element,r,c)})},RC=function(t,r,o){var c=r.getAttachPoint(t);yr(t.element,"position",lo.getMode(c)),OC(t,"visibility",r.cloakVisibilityAttr,"hidden")},BC=function(t){return la(["top","left","right","bottom"],function(r){return Zr(t,r).isSome()})},_C=function(t,r,o){BC(t.element)||Ma(t.element,"position"),DC(t,"visibility",r.cloakVisibilityAttr)},OE=Object.freeze({__proto__:null,cloak:RC,decloak:_C,open:py,openWhileCloaked:dd,close:kC,isOpen:AC,isPartOf:kE,getState:AE,setContent:Ol}),MC=function(t,r){return xa([ot(jf(),function(o,c){kC(o,t,r)})])},FC=Object.freeze({__proto__:null,events:MC}),by=[Kr("onOpen"),Kr("onClose"),nt("isPartOf"),nt("getAttachPoint"),xe("cloakVisibilityAttr","data-precloak-visibility")],PC=function(){var t=ro(),r=re("not-implemented");return tu({readState:r,isOpen:t.isSet,clear:t.clear,set:t.set,get:t.get})},DE=Object.freeze({__proto__:null,init:PC}),Or=si({fields:by,name:"sandboxing",active:FC,apis:OE,state:DE}),md=re("dismiss.popups"),Rm=re("reposition.popups"),yy=re("mouse.released"),RE=Ne([xe("isExtraPart",rn),$a("fireEventInstead",[xe("event",mc())])]),nc=function(t){var r,o=Ia("Dismissal",RE,t);return r={},r[md()]={schema:Ne([nt("target")]),onReceive:function(c,v){if(Or.isOpen(c)){var m=Or.isPartOf(c,v.target)||o.isExtraPart(c,v.target);m||o.fireEventInstead.fold(function(){return Or.close(c)},function(p){return zr(c,p.event)})}}},r},BE=Ne([$a("fireEventInstead",[xe("event",yi())]),Eo("doReposition")]),gd=function(t){var r,o=Ia("Reposition",BE,t);return r={},r[Rm()]={onReceive:function(c){Or.isOpen(c)&&o.fireEventInstead.fold(function(){return o.doReposition(c)},function(v){return zr(c,v.event)})}},r},of=function(t,r,o){r.store.manager.onLoad(t,r,o)},eh=function(t,r,o){r.store.manager.onUnload(t,r,o)},th=function(t,r,o,c){r.store.manager.setValue(t,r,o,c)},NC=function(t,r,o){return r.store.manager.getValue(t,r,o)},IC=function(t,r,o){return o},wy=Object.freeze({__proto__:null,onLoad:of,onUnload:eh,setValue:th,getValue:NC,getState:IC}),E1=function(t,r){var o=t.resetOnDom?[Ta(function(c,v){of(c,t,r)}),Rs(function(c,v){eh(c,t,r)})]:[Hg(t,r,of)];return xa(o)},Bm=Object.freeze({__proto__:null,events:E1}),k1=function(){var t=Bn(null),r=function(){return{mode:"memory",value:t.get()}},o=function(){return t.get()===null},c=function(){t.set(null)};return tu({set:t.set,get:t.get,isNotSet:o,clear:c,readState:r})},_E=function(){var t=He;return tu({readState:t})},Dl=function(){var t=Bn({}),r=Bn({}),o=function(){return{mode:"dataset",dataByValue:t.get(),dataByText:r.get()}},c=function(){t.set({}),r.set({})},v=function(p){return Cn(t.get(),p).orThunk(function(){return Cn(r.get(),p)})},m=function(p){var w=t.get(),S=r.get(),T={},R={};Jt(p,function(O){T[O.value]=O,Cn(O,"meta").each(function(N){Cn(N,"text").each(function(L){R[L]=O})})}),t.set(me(me({},w),T)),r.set(me(me({},S),R))};return tu({readState:o,lookup:v,update:m,clear:c})},A1=function(t){return t.store.manager.state(t)},_m=Object.freeze({__proto__:null,memory:k1,dataset:Dl,manual:_E,init:A1}),hd=function(t,r,o,c){var v=r.store;o.update([c]),v.setValue(t,c),r.onSetValue(t,c)},$C=function(t,r,o){var c=r.store,v=c.getDataKey(t);return o.lookup(v).getOrThunk(function(){return c.getFallbackEntry(v)})},Mm=function(t,r,o){var c=r.store;c.initialValue.each(function(v){hd(t,r,o,v)})},ME=function(t,r,o){o.clear()},Cy=[W("initialValue"),nt("getFallbackEntry"),nt("getDataKey"),nt("setValue"),sa("manager",{setValue:hd,getValue:$C,onLoad:Mm,onUnload:ME,state:Dl})],Rl=function(t,r,o){return r.store.getValue(t)},Cc=function(t,r,o,c){r.store.setValue(t,c),r.onSetValue(t,c)},Xi=function(t,r,o){r.store.initialValue.each(function(c){r.store.setValue(t,c)})},FE=[nt("getValue"),xe("setValue",He),W("initialValue"),sa("manager",{setValue:Cc,getValue:Rl,onLoad:Xi,onUnload:He,state:Ms.init})],Sy=function(t,r,o,c){o.set(c),r.onSetValue(t,c)},Fm=function(t,r,o){return o.get()},O1=function(t,r,o){r.store.initialValue.each(function(c){o.isNotSet()&&o.set(c)})},xy=function(t,r,o){o.clear()},PE=[W("initialValue"),sa("manager",{setValue:Sy,getValue:Fm,onLoad:O1,onUnload:xy,state:k1})],NE=[bo("store",{mode:"memory"},Ln("mode",{memory:PE,manual:FE,dataset:Cy})),Kr("onSetValue"),xe("resetOnDom",!1)],Vt=si({fields:NE,name:"representing",active:Bm,apis:wy,extra:{setValueFrom:function(t,r){var o=Vt.getValue(r);Vt.setValue(t,o)}},state:_m}),Vo=function(t,r){return Fv(t,{},yt(r,function(o){return Mv(o.name(),"Cannot configure "+o.name()+" for "+t)}).concat([ho("dump",Te)]))},D1=function(t){return t.dump},Ai=function(t,r){return me(me({},t.dump),Pt(r))},Sc={field:Vo,augment:Ai,get:D1},Ty="placeholder",pd=fu.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),R1=function(t){return Xn(t,"uiType")},Pm=function(t,r,o,c){return t.exists(function(v){return v!==o.owner})?pd.single(!0,re(o)):Cn(c,o.name).fold(function(){throw new Error("Unknown placeholder component: "+o.name+`
Known: [`+$r(c)+`]
Namespace: `+t.getOr("none")+`
Spec: `+JSON.stringify(o,null,2))},function(v){return v.replace()})},Nm=function(t,r,o,c){return R1(o)&&o.uiType===Ty?Pm(t,r,o,c):pd.single(!1,re(o))},Wc=function(t,r,o,c){var v=Nm(t,r,o,c);return v.fold(function(m,p){var w=R1(o)?p(r,o.config,o.validated):p(r),S=Cn(w,"components").getOr([]),T=qr(S,function(R){return Wc(t,r,R,c)});return[me(me({},w),{components:T})]},function(m,p){if(R1(o)){var w=p(r,o.config,o.validated),S=o.validated.preprocess.getOr(Te);return S(w)}else return p(r)})},Bl=function(t,r,o,c){return qr(o,function(v){return Wc(t,r,v,c)})},bd=function(t,r){var o=!1,c=function(){return o},v=function(){if(o)throw new Error("Trying to use the same placeholder more than once: "+t);return o=!0,r},m=function(){return r.fold(function(p,w){return p},function(p,w){return p})};return{name:re(t),required:m,used:c,replace:v}},nh=function(t,r,o,c){var v=Gr(c,function(p,w){return bd(w,p)}),m=Bl(t,r,o,v);return Sa(v,function(p){if(p.used()===!1&&p.required())throw new Error("Placeholder: "+p.name()+` was not found in components list
Namespace: `+t.getOr("none")+`
Components: `+JSON.stringify(r.components,null,2))}),m},rh=pd.single,zC=pd.multiple,Ey=re(Ty),ah=fu.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),uf=xe("factory",{sketch:Te}),dv=xe("schema",[]),Im=nt("name"),B1=hr("pname","pname",we(function(t){return"<alloy."+bn(t.name)+">"}),Mt()),mv=ho("schema",function(){return[W("preprocess")]}),cf=xe("defaults",re({})),gv=xe("overrides",re({})),_1=De([uf,dv,Im,B1,cf,gv]),oh=De([uf,dv,Im,cf,gv]),ih=De([uf,dv,Im,B1,cf,gv]),ky=De([uf,mv,Im,nt("unit"),B1,cf,gv]),LC=function(t){return t.fold(D.some,D.none,D.some,D.some)},HC=function(t){var r=function(o){return o.name};return t.fold(r,r,r,r)},Ay=function(t){return t.fold(Te,Te,Te,Te)},M1=function(t,r){return function(o){var c=Ia("Converting part type",r,o);return t(c)}},uu=M1(ah.required,_1),jc=M1(ah.external,oh),ps=M1(ah.optional,ih),F1=M1(ah.group,ky),Oy=re("entirety"),VC=Object.freeze({__proto__:null,required:uu,external:jc,optional:ps,group:F1,asNamedPart:LC,name:HC,asCommon:Ay,original:Oy}),yd=function(t,r,o,c){return gr(r.defaults(t,o,c),o,{uid:t.partUids[r.name]},r.overrides(t,o,c))},uh=function(t,r,o){var c={},v={};return Jt(o,function(m){m.fold(function(p){c[p.pname]=rh(!0,function(w,S,T){return p.factory.sketch(yd(w,p,S,T))})},function(p){var w=r.parts[p.name];v[p.name]=re(p.factory.sketch(yd(r,p,w[Oy()]),w))},function(p){c[p.pname]=rh(!1,function(w,S,T){return p.factory.sketch(yd(w,p,S,T))})},function(p){c[p.pname]=zC(!0,function(w,S,T){var R=w[p.name];return yt(R,function(O){return p.factory.sketch(gr(p.defaults(w,O,T),O,p.overrides(w,O)))})})})}),{internals:re(c),externals:re(v)}},ch=function(t,r){var o={};return Jt(r,function(c){LC(c).each(function(v){var m=IE(t,v.pname);o[v.name]=function(p){var w=Ia("Part: "+v.name+" in "+t,De(v.schema),p);return me(me({},m),{config:p,validated:w})}})}),o},IE=function(t,r){return{uiType:Ey(),owner:t,name:r}},Dy=function(t,r,o){return{uiType:Ey(),owner:t,name:r,config:o,validated:{}}},UC=function(t){return qr(t,function(r){return r.fold(D.none,D.some,D.none,D.none).map(function(o){return Je(o.name,o.schema.concat([$p(Oy())]))}).toArray()})},Ry=function(t){return yt(t,HC)},By=function(t,r,o){return uh(t,r,o)},_y=function(t,r,o){return nh(D.some(t),r,r.components,o)},ya=function(t,r,o){var c=r.partUids[o];return t.getSystem().getByUid(c).toOptional()},_l=function(t,r,o){return ya(t,r,o).getOrDie("Could not find part: "+o)},WC=function(t,r,o){var c={},v=r.partUids,m=t.getSystem();return Jt(o,function(p){c[p]=re(m.getByUid(v[p]))}),c},jC=function(t,r){var o=t.getSystem();return Gr(r.partUids,function(c,v){return re(o.getByUid(c))})},qC=function(t){return $r(t.partUids)},P1=function(t,r,o){var c={},v=r.partUids,m=t.getSystem();return Jt(o,function(p){c[p]=re(m.getByUid(v[p]).getOrDie())}),c},sh=function(t,r){var o=Ry(r);return ss(yt(o,function(c){return{key:c,value:t+"-"+c}}))},lh=function(t){return hr("partUids","partUids",Dt(function(r){return sh(r.uid,t)}),Mt())},qn=Object.freeze({__proto__:null,generate:ch,generateOne:Dy,schemas:UC,names:Ry,substitutes:By,components:_y,defaultUids:sh,defaultUidsSchema:lh,getAllParts:jC,getAllPartNames:qC,getPart:ya,getPartOrDie:_l,getParts:WC,getPartsOrDie:P1}),GC=function(t,r){var o=t.length>0?[Je("parts",t)]:[];return o.concat([nt("uid"),xe("dom",{}),xe("components",[]),$p("originalSpec"),xe("debug.sketcher",{})]).concat(r)},fh=function(t,r,o,c,v){var m=GC(c,v);return Ia(t+" [SpecSchema]",Ne(m.concat(r)),o)},$E=function(t,r,o,c){var v=KC(c),m=fh(t,r,v,[],[]);return o(m,v)},My=function(t,r,o,c,v){var m=KC(v),p=UC(o),w=lh(o),S=fh(t,r,m,p,[w]),T=By(t,S,o),R=_y(t,S,T.internals());return c(S,R,m,T.externals())},zE=function(t){return Xn(t,"uid")},KC=function(t){return zE(t)?t:me(me({},t),{uid:um("uid")})},N1=function(t){return t.uid!==void 0},hv=Ne([nt("name"),nt("factory"),nt("configFields"),xe("apis",{}),xe("extraApis",{})]),LE=Ne([nt("name"),nt("factory"),nt("configFields"),nt("partFields"),xe("apis",{}),xe("extraApis",{})]),xc=function(t){var r=Ia("Sketcher for "+t.name,hv,t),o=function(m){return $E(r.name,r.configFields,r.factory,m)},c=Gr(r.apis,Iu),v=Gr(r.extraApis,function(m,p){return Bg(m,p)});return me(me({name:r.name,configFields:r.configFields,sketch:o},c),v)},mu=function(t){var r=Ia("Sketcher for "+t.name,LE,t),o=function(p){return My(r.name,r.configFields,r.partFields,r.factory,p)},c=ch(r.name,r.partFields),v=Gr(r.apis,Iu),m=Gr(r.extraApis,function(p,w){return Bg(p,w)});return me(me({name:r.name,partFields:r.partFields,configFields:r.configFields,sketch:o,parts:c},v),m)},pv=function(t){return Nc(t)==="input"&&Eu(t,"type")!=="radio"||Nc(t)==="textarea"},vh=function(t,r,o){return r.find(t)},Fy=Object.freeze({__proto__:null,getCurrent:vh}),Py=[nt("find")],Dr=si({fields:Py,name:"composing",apis:Fy}),HE=["input","button","textarea","select"],I1=function(t,r,o){var c=r.disabled()?cu:wd;c(t,r)},bv=function(t,r){return r.useNative===!0&&ir(HE,Nc(t.element))},$m=function(t){return gw(t.element,"disabled")},$1=function(t){kr(t.element,"disabled","disabled")},z1=function(t){zi(t.element,"disabled")},dh=function(t){return Eu(t.element,"aria-disabled")==="true"},VE=function(t){kr(t.element,"aria-disabled","true")},UE=function(t){kr(t.element,"aria-disabled","false")},cu=function(t,r,o){r.disableClass.each(function(v){no(t.element,v)});var c=bv(t,r)?$1:VE;c(t),r.onDisabled(t)},wd=function(t,r,o){r.disableClass.each(function(v){wo(t.element,v)});var c=bv(t,r)?z1:UE;c(t),r.onEnabled(t)},XC=function(t,r){return bv(t,r)?$m(t):dh(t)},WE=function(t,r,o,c){var v=c?cu:wd;v(t,r)},jE=Object.freeze({__proto__:null,enable:wd,disable:cu,isDisabled:XC,onLoad:I1,set:WE}),qE=function(t,r){return Za({classes:r.disabled()?r.disableClass.toArray():[]})},GE=function(t,r){return xa([tb(Xu(),function(o,c){return XC(o,t)}),Hg(t,r,I1)])},Ny=Object.freeze({__proto__:null,exhibit:qE,events:GE}),KE=[aa("disabled",rn),xe("useNative",!0),W("disableClass"),Kr("onDisabled"),Kr("onEnabled")],Tn=si({fields:KE,name:"disabling",active:Ny,apis:jE}),YC=function(t,r,o,c){var v=zu(t.element,"."+r.highlightClass);Jt(v,function(m){la(c,function(p){return p.element===m})||(wo(m,r.highlightClass),t.getSystem().getByDom(m).each(function(p){r.onDehighlight(t,p),zr(p,eb())}))})},JC=function(t,r,o){return YC(t,r,o,[])},XE=function(t,r,o,c){$y(t,r,o,c)&&(wo(c.element,r.highlightClass),r.onDehighlight(t,c),zr(c,eb()))},mh=function(t,r,o,c){YC(t,r,o,[c]),$y(t,r,o,c)||(no(c.element,r.highlightClass),r.onHighlight(t,c),zr(c,uw()))},ZC=function(t,r,o){Ly(t,r).each(function(c){mh(t,r,o,c)})},Iy=function(t,r,o){Hy(t,r).each(function(c){mh(t,r,o,c)})},L1=function(t,r,o,c){zy(t,r,o,c).fold(function(v){throw v},function(v){mh(t,r,o,v)})},QC=function(t,r,o,c){var v=Uy(t,r),m=Wn(v,c);m.each(function(p){mh(t,r,o,p)})},$y=function(t,r,o,c){return Co(c.element,r.highlightClass)},Cd=function(t,r,o){return ru(t.element,"."+r.highlightClass).bind(function(c){return t.getSystem().getByDom(c).toOptional()})},zy=function(t,r,o,c){var v=zu(t.element,"."+r.itemClass);return D.from(v[c]).fold(function(){return mn.error(new Error("No element found with index "+c))},t.getSystem().getByDom)},Ly=function(t,r,o){return ru(t.element,"."+r.itemClass).bind(function(c){return t.getSystem().getByDom(c).toOptional()})},Hy=function(t,r,o){var c=zu(t.element,"."+r.itemClass),v=c.length>0?D.some(c[c.length-1]):D.none();return v.bind(function(m){return t.getSystem().getByDom(m).toOptional()})},H1=function(t,r,o,c){var v=zu(t.element,"."+r.itemClass),m=ma(v,function(p){return Co(p,r.highlightClass)});return m.bind(function(p){var w=av(p,c,0,v.length-1);return t.getSystem().getByDom(v[w]).toOptional()})},Vy=function(t,r,o){return H1(t,r,o,-1)},YE=function(t,r,o){return H1(t,r,o,1)},Uy=function(t,r,o){var c=zu(t.element,"."+r.itemClass);return Ou(yt(c,function(v){return t.getSystem().getByDom(v).toOptional()}))},JE=Object.freeze({__proto__:null,dehighlightAll:JC,dehighlight:XE,highlight:mh,highlightFirst:ZC,highlightLast:Iy,highlightAt:L1,highlightBy:QC,isHighlighted:$y,getHighlighted:Cd,getFirst:Ly,getLast:Hy,getPrevious:Vy,getNext:YE,getCandidates:Uy}),V1=[nt("highlightClass"),nt("itemClass"),Kr("onHighlight"),Kr("onDehighlight")],Qr=si({fields:V1,name:"highlighting",apis:JE}),eS=[8],sf=[9],qc=[13],U1=[27],Lu=[32],gh=[37],Sd=[38],W1=[39],zm=[40],ZE=function(t,r,o){var c=On(t.slice(0,r)),v=On(t.slice(r+1));return Wn(c.concat(v),o)},QE=function(t,r,o){var c=On(t.slice(0,r));return Wn(c,o)},e3=function(t,r,o){var c=t.slice(0,r),v=t.slice(r+1);return Wn(v.concat(c),o)},t3=function(t,r,o){var c=t.slice(r+1);return Wn(c,o)},Er=function(t){return function(r){var o=r.raw;return ir(t,o.which)}},Ws=function(t){return function(r){return Ur(t,function(o){return o(r)})}},lf=function(t){var r=t.raw;return r.shiftKey===!0},tS=function(t){var r=t.raw;return r.ctrlKey===!0},xd=pt(lf),Nr=function(t,r){return{matches:t,classification:r}},n3=function(t,r){var o=Wn(t,function(c){return c.matches(r)});return o.map(function(c){return c.classification})},nS=function(t,r,o){var c=r.exists(function(v){return o.exists(function(m){return Ja(m,v)})});c||sn(t,tm(),{prevFocus:r,newFocus:o})},yv=function(){var t=function(o){return Vc(o.element)},r=function(o,c){var v=t(o);o.getSystem().triggerFocus(c,o.element);var m=t(o);nS(o,v,m)};return{get:t,set:r}},Wy=function(){var t=function(o){return Qr.getHighlighted(o).map(function(c){return c.element})},r=function(o,c){var v=t(o);o.getSystem().getByDom(c).fold(He,function(p){Qr.highlight(o,p)});var m=t(o);nS(o,v,m)};return{get:t,set:r}},Td;(function(t){t.OnFocusMode="onFocus",t.OnEnterOrSpaceMode="onEnterOrSpace",t.OnApiMode="onApi"})(Td||(Td={}));var Ed=function(t,r,o,c,v){var m=function(){return t.concat([xe("focusManager",yv()),bo("focusInside","onFocus",ga(function(T){return ir(["onFocus","onEnterOrSpace","onApi"],T)?mn.value(T):mn.error("Invalid value for focusInside")})),sa("handler",S),sa("state",r),sa("sendFocusIn",v)])},p=function(T,R,O,N,L){var q=O(T,R,N,L);return n3(q,R.event).bind(function(X){return X(T,R,N,L)})},w=function(T,R){var O=T.focusInside!==Td.OnFocusMode?D.none():v(T).map(function(q){return ot(Vf(),function(X,ge){q(X,T,R),ge.stop()})}),N=function(q,X){var ge=Er(Lu.concat(qc))(X.event);T.focusInside===Td.OnEnterOrSpaceMode&&ge&&E(q,X)&&v(T).each(function(ne){ne(q,T,R),X.stop()})},L=[ot(Sg(),function(q,X){p(q,X,o,T,R).fold(function(){N(q,X)},function(ge){X.stop()})}),ot(Qh(),function(q,X){p(q,X,c,T,R).each(function(ge){X.stop()})})];return xa(O.toArray().concat(L))},S={schema:m,processKey:p,toEvents:w};return S},j1=function(t){var r=[W("onEscape"),W("onEnter"),xe("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),xe("firstTabstop",0),xe("useTabstopAt",ut),W("visibilitySelector")].concat([t]),o=function(X,ge){var ne=X.visibilitySelector.bind(function(ye){return hs(ge,ye)}).getOr(ge);return Ti(ne)>0},c=function(X,ge){var ne=zu(X.element,ge.selector),ye=rt(ne,function(he){return o(ge,he)});return D.from(ye[ge.firstTabstop])},v=function(X,ge){return ge.focusManager.get(X).bind(function(ne){return hs(ne,ge.selector)})},m=function(X,ge){return o(X,ge)&&X.useTabstopAt(ge)},p=function(X,ge,ne){c(X,ge).each(function(ye){ge.focusManager.set(X,ye)})},w=function(X,ge,ne,ye,he){return he(ge,ne,function(Ve){return m(ye,Ve)}).fold(function(){return ye.cyclic?D.some(!0):D.none()},function(Ve){return ye.focusManager.set(X,Ve),D.some(!0)})},S=function(X,ge,ne,ye){var he=zu(X.element,ne.selector);return v(X,ne).bind(function(Ve){var _e=ma(he,gt(Ja,Ve));return _e.bind(function(Ke){return w(X,he,Ke,ne,ye)})})},T=function(X,ge,ne){var ye=ne.cyclic?ZE:QE;return S(X,ge,ne,ye)},R=function(X,ge,ne){var ye=ne.cyclic?e3:t3;return S(X,ge,ne,ye)},O=function(X,ge,ne){return ne.onEnter.bind(function(ye){return ye(X,ge)})},N=function(X,ge,ne){return ne.onEscape.bind(function(ye){return ye(X,ge)})},L=re([Nr(Ws([lf,Er(sf)]),T),Nr(Er(sf),R),Nr(Er(U1),N),Nr(Ws([xd,Er(qc)]),O)]),q=re([]);return Ed(r,Ms.init,L,q,function(){return D.some(p)})},q1=j1(ho("cyclic",rn)),jy=j1(ho("cyclic",ut)),rS=function(t,r,o){return tp(t,o,Xu()),D.some(!0)},Lm=function(t,r,o){var c=pv(o)&&Er(Lu)(r.event);return c?D.none():rS(t,r,o)},Hm=function(t,r){return D.some(!0)},aS=[xe("execute",Lm),xe("useSpace",!1),xe("useEnter",!0),xe("useControlEnter",!1),xe("useDown",!1)],oS=function(t,r,o){return o.execute(t,r,t.element)},hh=function(t,r,o,c){var v=o.useSpace&&!pv(t.element)?Lu:[],m=o.useEnter?qc:[],p=o.useDown?zm:[],w=v.concat(m).concat(p);return[Nr(Er(w),oS)].concat(o.useControlEnter?[Nr(Ws([tS,Er(qc)]),oS)]:[])},r3=function(t,r,o,c){return o.useSpace&&!pv(t.element)?[Nr(Er(Lu),Hm)]:[]},qy=Ed(aS,Ms.init,hh,r3,function(){return D.none()}),iS=function(){var t=ro(),r=function(v,m){t.set({numRows:v,numColumns:m})},o=function(){return t.get().map(function(v){return v.numRows})},c=function(){return t.get().map(function(v){return v.numColumns})};return tu({readState:function(){return t.get().map(function(v){return{numRows:String(v.numRows),numColumns:String(v.numColumns)}}).getOr({numRows:"?",numColumns:"?"})},setGridSize:r,getNumRows:o,getNumColumns:c})},a3=function(t){return t.state(t)},Gy=Object.freeze({__proto__:null,flatgrid:iS,init:a3}),uS=function(t){return function(r,o,c,v){var m=t(r.element);return cS(m,r,o,c,v)}},Ky=function(t,r){var o=o1(t,r);return uS(o)},G1=function(t,r){var o=o1(r,t);return uS(o)},Xy=function(t){return function(r,o,c,v){return cS(t,r,o,c,v)}},cS=function(t,r,o,c,v){var m=c.focusManager.get(r).bind(function(p){return t(r.element,p,c,v)});return m.map(function(p){return c.focusManager.set(r,p),!0})},sS=Xy,js=Xy,Vm=Xy,lS=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0},Yy=function(t){return!lS(t.dom)},kd=function(t,r){return ma(t,r).map(function(o){return{index:o,candidates:t}})},fS=function(t,r,o){var c=function(p){return Ja(p,r)},v=zu(t,o),m=rt(v,Yy);return kd(m,c)},Jy=function(t,r){return ma(t,function(o){return Ja(r,o)})},vS=function(t,r,o,c){var v=Math.floor(r/o),m=r%o;return c(v,m).bind(function(p){var w=p.row*o+p.column;return w>=0&&w<t.length?D.some(t[w]):D.none()})},K1=function(t,r,o,c,v){return vS(t,r,c,function(m,p){var w=m===o-1,S=w?t.length-m*c:c,T=av(p,v,0,S-1);return D.some({row:m,column:T})})},Zy=function(t,r,o,c,v){return vS(t,r,c,function(m,p){var w=av(m,v,0,o-1),S=w===o-1,T=S?t.length-w*c:c,R=Bu(p,0,T-1);return D.some({row:w,column:R})})},Um=function(t,r,o,c){return K1(t,r,o,c,1)},ph=function(t,r,o,c){return K1(t,r,o,c,-1)},dS=function(t,r,o,c){return Zy(t,r,o,c,-1)},X1=function(t,r,o,c){return Zy(t,r,o,c,1)},o3=[nt("selector"),xe("execute",Lm),xo("onEscape"),xe("captureTab",!1),Bb()],i3=function(t,r,o){ru(t.element,r.selector).each(function(c){r.focusManager.set(t,c)})},mS=function(t,r){return r.focusManager.get(t).bind(function(o){return hs(o,r.selector)})},Qy=function(t,r,o,c){return mS(t,o).bind(function(v){return o.execute(t,r,v)})},Ml=function(t){return function(r,o,c,v){return fS(r,o,c.selector).bind(function(m){return t(m.candidates,m.index,v.getNumRows().getOr(c.initSize.numRows),v.getNumColumns().getOr(c.initSize.numColumns))})}},gS=function(t,r,o){return o.captureTab?D.some(!0):D.none()},hS=function(t,r,o){return o.onEscape(t,r)},Y1=Ml(ph),pS=Ml(Um),e2=Ml(dS),t2=Ml(X1),bh=re([Nr(Er(gh),Ky(Y1,pS)),Nr(Er(W1),G1(Y1,pS)),Nr(Er(Sd),sS(e2)),Nr(Er(zm),js(t2)),Nr(Ws([lf,Er(sf)]),gS),Nr(Ws([xd,Er(sf)]),gS),Nr(Er(U1),hS),Nr(Er(Lu.concat(qc)),Qy)]),n2=re([Nr(Er(Lu),Hm)]),bS=Ed(o3,iS,bh,n2,function(){return D.some(i3)}),J1=function(t,r,o,c){var v=function(p){return Nc(p)==="button"&&Eu(p,"disabled")==="disabled"},m=function(p,w,S){var T=av(w,c,0,S.length-1);return T===p?D.none():v(S[T])?m(p,T,S):D.from(S[T])};return fS(t,o,r).bind(function(p){var w=p.index,S=p.candidates;return m(w,w,S)})},u3=[nt("selector"),xe("getInitial",D.none),xe("execute",Lm),xo("onEscape"),xe("executeOnMove",!1),xe("allowVertical",!0)],r2=function(t,r){return r.focusManager.get(t).bind(function(o){return hs(o,r.selector)})},Wm=function(t,r,o){return r2(t,o).bind(function(c){return o.execute(t,r,c)})},Z1=function(t,r,o){r.getInitial(t).orThunk(function(){return ru(t.element,r.selector)}).each(function(c){r.focusManager.set(t,c)})},yS=function(t,r,o){return J1(t,o.selector,r,-1)},a2=function(t,r,o){return J1(t,o.selector,r,1)},Gc=function(t){return function(r,o,c,v){return t(r,o,c,v).bind(function(){return c.executeOnMove?Wm(r,o,c):D.some(!0)})}},jm=function(t,r,o){return o.onEscape(t,r)},o2=function(t,r,o,c){var v=gh.concat(o.allowVertical?Sd:[]),m=W1.concat(o.allowVertical?zm:[]);return[Nr(Er(v),Gc(Ky(yS,a2))),Nr(Er(m),Gc(G1(yS,a2))),Nr(Er(qc),Wm),Nr(Er(Lu),Wm),Nr(Er(U1),jm)]},c3=re([Nr(Er(Lu),Hm)]),s3=Ed(u3,Ms.init,o2,c3,function(){return D.some(Z1)}),qm=function(t,r,o){return D.from(t[r]).bind(function(c){return D.from(c[o]).map(function(v){return{rowIndex:r,columnIndex:o,cell:v}})})},Q1=function(t,r,o,c){var v=t[r],m=v.length,p=av(o,c,0,m-1);return qm(t,r,p)},wS=function(t,r,o,c){var v=av(o,c,0,t.length-1),m=t[v].length,p=Bu(r,0,m-1);return qm(t,v,p)},CS=function(t,r,o,c){var v=t[r],m=v.length,p=Bu(o+c,0,m-1);return qm(t,r,p)},e0=function(t,r,o,c){var v=Bu(o+c,0,t.length-1),m=t[v].length,p=Bu(r,0,m-1);return qm(t,v,p)},l3=function(t,r,o){return Q1(t,r,o,1)},i2=function(t,r,o){return Q1(t,r,o,-1)},t0=function(t,r,o){return wS(t,o,r,-1)},Ad=function(t,r,o){return wS(t,o,r,1)},SS=function(t,r,o){return CS(t,r,o,-1)},xS=function(t,r,o){return CS(t,r,o,1)},f3=function(t,r,o){return e0(t,o,r,-1)},v3=function(t,r,o){return e0(t,o,r,1)},n0=[Je("selectors",[nt("row"),nt("cell")]),xe("cycles",!0),xe("previousSelector",D.none),xe("execute",Lm)],TS=function(t,r,o){var c=r.previousSelector(t).orThunk(function(){var v=r.selectors;return ru(t.element,v.cell)});c.each(function(v){r.focusManager.set(t,v)})},ES=function(t,r,o){return Vc(t.element).bind(function(c){return o.execute(t,r,c)})},kS=function(t,r){return yt(t,function(o){return zu(o,r.selectors.cell)})},Kc=function(t,r){return function(o,c,v){var m=v.cycles?t:r;return hs(c,v.selectors.row).bind(function(p){var w=zu(p,v.selectors.cell);return Jy(w,c).bind(function(S){var T=zu(o,v.selectors.row);return Jy(T,p).bind(function(R){var O=kS(T,v);return m(O,R,S).map(function(N){return N.cell})})})})}},u2=Kc(i2,SS),bs=Kc(l3,xS),Gm=Kc(t0,f3),c2=Kc(Ad,v3),AS=re([Nr(Er(gh),Ky(u2,bs)),Nr(Er(W1),G1(u2,bs)),Nr(Er(Sd),sS(Gm)),Nr(Er(zm),js(c2)),Nr(Er(Lu.concat(qc)),ES)]),s2=re([Nr(Er(Lu),Hm)]),d3=Ed(n0,Ms.init,AS,s2,function(){return D.some(TS)}),m3=[nt("selector"),xe("execute",Lm),xe("moveOnTab",!1)],OS=function(t,r,o){return o.focusManager.get(t).bind(function(c){return o.execute(t,r,c)})},g3=function(t,r,o){ru(t.element,r.selector).each(function(c){r.focusManager.set(t,c)})},yh=function(t,r,o){return J1(t,o.selector,r,-1)},r0=function(t,r,o){return J1(t,o.selector,r,1)},l2=function(t,r,o,c){return o.moveOnTab?Vm(yh)(t,r,o,c):D.none()},h3=function(t,r,o,c){return o.moveOnTab?Vm(r0)(t,r,o,c):D.none()},ff=re([Nr(Er(Sd),Vm(yh)),Nr(Er(zm),Vm(r0)),Nr(Ws([lf,Er(sf)]),l2),Nr(Ws([xd,Er(sf)]),h3),Nr(Er(qc),OS),Nr(Er(Lu),OS)]),Km=re([Nr(Er(Lu),Hm)]),DS=Ed(m3,Ms.init,ff,Km,function(){return D.some(g3)}),p3=[xo("onSpace"),xo("onEnter"),xo("onShiftEnter"),xo("onLeft"),xo("onRight"),xo("onTab"),xo("onShiftTab"),xo("onUp"),xo("onDown"),xo("onEscape"),xe("stopSpaceKeyup",!1),W("focusIn")],f2=function(t,r,o){return[Nr(Er(Lu),o.onSpace),Nr(Ws([xd,Er(qc)]),o.onEnter),Nr(Ws([lf,Er(qc)]),o.onShiftEnter),Nr(Ws([lf,Er(sf)]),o.onShiftTab),Nr(Ws([xd,Er(sf)]),o.onTab),Nr(Er(Sd),o.onUp),Nr(Er(zm),o.onDown),Nr(Er(gh),o.onLeft),Nr(Er(W1),o.onRight),Nr(Er(Lu),o.onSpace),Nr(Er(U1),o.onEscape)]},Od=function(t,r,o){return o.stopSpaceKeyup?[Nr(Er(Lu),Hm)]:[]},Dd=Ed(p3,Ms.init,f2,Od,function(t){return t.focusIn}),RS=q1.schema(),BS=jy.schema(),wv=s3.schema(),vf=bS.schema(),_S=d3.schema(),b3=qy.schema(),Rd=DS.schema(),MS=Dd.schema(),FS=Object.freeze({__proto__:null,acyclic:RS,cyclic:BS,flow:wv,flatgrid:vf,matrix:_S,execution:b3,menu:Rd,special:MS}),y3=function(t){return Na(t,"setGridSize")},Pn=Kp({branchKey:"mode",branches:FS,name:"keying",active:{events:function(t,r){var o=t.handler;return o.toEvents(t,r)}},apis:{focusIn:function(t,r,o){r.sendFocusIn(r).fold(function(){t.getSystem().triggerFocus(t.element,t.element)},function(c){c(t,r,o)})},setGridSize:function(t,r,o,c,v){y3(o)?o.setGridSize(c,v):console.error("Layout does not support setGridSize")}},state:Gy}),Fl=function(t,r,o,c){Lb(function(){var v=yt(c,t.getSystem().build);gy(t,v)},t.element)},Pl=function(t,r,o,c){var v=t.getSystem().build(c);EC(t,v,o)},a0=function(t,r,o,c){Pl(t,r,Ju,c)},wh=function(t,r,o,c){Pl(t,r,dw,c)},Ch=function(t,r,o,c){var v=Xm(t),m=Wn(v,function(p){return Ja(c.element,p.element)});m.each(Al)},Xm=function(t,r){return t.components()},v2=function(t,r,o,c,v){var m=Xm(t);return D.from(m[c]).map(function(p){return Ch(t,r,o,p),v.each(function(w){Pl(t,r,function(S,T){ll(S,T,c)},w)}),p})},w3=function(t,r,o,c,v){var m=Xm(t);return ma(m,c).bind(function(p){return v2(t,r,o,p,v)})},C3=Object.freeze({__proto__:null,append:a0,prepend:wh,remove:Ch,replaceAt:v2,replaceBy:w3,set:Fl,contents:Xm}),nr=si({fields:[],name:"replacing",apis:C3}),df=function(t,r){var o=xa(r);return si({fields:[nt("enabled")],name:t,active:{events:re(o)}})},lr=function(t,r){var o=df(t,r);return{key:t,value:{config:{},me:o,configAsRaw:re({}),initialConfig:{},state:Ms}}},o0=function(t,r){r.ignore||(Fu(t.element),r.onFocus(t))},S3=function(t,r){r.ignore||jw(t.element)},x3=function(t){return Xp(t.element)},PS=Object.freeze({__proto__:null,focus:o0,blur:S3,isFocused:x3}),NS=function(t,r){var o=r.ignore?{}:{attributes:{tabindex:"-1"}};return Za(o)},IS=function(t){return xa([ot(Vf(),function(r,o){o0(r,t),o.stop()})].concat(t.stopMousedown?[ot(Ku(),function(r,o){o.event.prevent()})]:[]))},$S=Object.freeze({__proto__:null,exhibit:NS,events:IS}),T3=[Kr("onFocus"),xe("stopMousedown",!1),xe("ignore",!1)],Qn=si({fields:T3,name:"focusing",active:$S,apis:PS}),E3=function(t){var r=function(){var o=Bn(t),c=function(){return o.get()},v=function(w){return o.set(w)},m=function(){return o.set(t)},p=function(){return o.get()};return{get:c,set:v,clear:m,readState:p}};return{init:r}},zS=function(t,r,o){var c=r.aria;c.update(t,c,o.get())},LS=function(t,r,o){r.toggleClass.each(function(c){o.get()?no(t.element,c):wo(t.element,c)})},i0=function(t,r,o){Ym(t,r,o,!o.get())},Sh=function(t,r,o){o.set(!0),LS(t,r,o),zS(t,r,o)},HS=function(t,r,o){o.set(!1),LS(t,r,o),zS(t,r,o)},Ym=function(t,r,o,c){var v=c?Sh:HS;v(t,r,o)},VS=function(t,r,o){return o.get()},d2=function(t,r,o){Ym(t,r,o,r.selected)},k3=Object.freeze({__proto__:null,onLoad:d2,toggle:i0,isOn:VS,on:Sh,off:HS,set:Ym}),A3=function(){return Za({})},O3=function(t,r){var o=cv(t,r,i0),c=Hg(t,r,d2);return xa(dn([t.toggleOnExecute?[o]:[],[c]]))},u=Object.freeze({__proto__:null,exhibit:A3,events:O3}),l=function(t,r,o){kr(t.element,"aria-pressed",o),r.syncWithExpanded&&y(t,r,o)},d=function(t,r,o){kr(t.element,"aria-selected",o)},h=function(t,r,o){kr(t.element,"aria-checked",o)},y=function(t,r,o){kr(t.element,"aria-expanded",o)},x=[xe("selected",!1),W("toggleClass"),xe("toggleOnExecute",!0),bo("aria",{mode:"none"},Ln("mode",{pressed:[xe("syncWithExpanded",!1),sa("update",l)],checked:[sa("update",h)],expanded:[sa("update",y)],selected:[sa("update",d)],none:[sa("update",He)]}))],A=si({fields:x,name:"toggling",active:u,apis:k3,state:E3(!1)}),P=function(){var t=function(r,o){o.stop(),Mc(r)};return[ot(xg(),t),ot(Tg(),t),cl(Tr()),cl(Ku())]},V=function(t){var r=function(o){return Pc(function(c,v){o(c),v.stop()})};return xa(dn([t.map(r).toArray(),P()]))},Q="alloy.item-hover",pe="alloy.item-focus",Xe=function(t){(Vc(t.element).isNone()||Qn.isFocused(t))&&(Qn.isFocused(t)||Qn.focus(t),sn(t,Q,{item:t}))},ht=function(t){sn(t,pe,{item:t})},tt=re(Q),Ye=re(pe),qt=function(t){return{dom:t.dom,domModification:me(me({},t.domModification),{attributes:me(me(me({role:t.toggling.isSome()?"menuitemcheckbox":"menuitem"},t.domModification.attributes),{"aria-haspopup":t.hasSubmenu}),t.hasSubmenu?{"aria-expanded":!1}:{})}),behaviours:Sc.augment(t.itemBehaviours,[t.toggling.fold(A.revoke,function(r){return A.config(me({aria:{mode:"checked"}},r))}),Qn.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:function(r){ht(r)}}),Pn.config({mode:"execution"}),Vt.config({store:{mode:"memory",initialValue:t.data}}),lr("item-type-events",Dn(Dn([],P()),[ot(al(),Xe),ot(Wf(),Qn.focus)]))]),components:t.components,eventOrder:t.eventOrder}},Wt=[nt("data"),nt("components"),nt("dom"),xe("hasSubmenu",!1),W("toggling"),Sc.field("itemBehaviours",[A,Qn,Pn,Vt]),xe("ignoreFocus",!1),xe("domModification",{}),sa("builder",qt),xe("eventOrder",{})],rr=function(t){return{dom:t.dom,components:t.components,events:xa([ip(Wf())])}},oa=[nt("dom"),nt("components"),sa("builder",rr)],Fn=re("item-widget"),er=re([uu({name:"widget",overrides:function(t){return{behaviours:Pt([Vt.config({store:{mode:"manual",getValue:function(r){return t.data},setValue:He}})])}}})]),_r=function(t){var r=By(Fn(),t,er()),o=_y(Fn(),t,r.internals()),c=function(m){return ya(m,t,"widget").map(function(p){return Pn.focusIn(p),p})},v=function(m,p){return pv(p.event.target)?D.none():function(){return t.autofocus&&p.setSource(m.element),D.none()}()};return{dom:t.dom,components:o,domModification:t.domModification,events:xa([Pc(function(m,p){c(m).each(function(w){p.stop()})}),ot(al(),Xe),ot(Wf(),function(m,p){t.autofocus?c(m):Qn.focus(m)})]),behaviours:Sc.augment(t.widgetBehaviours,[Vt.config({store:{mode:"memory",initialValue:t.data}}),Qn.config({ignore:t.ignoreFocus,onFocus:function(m){ht(m)}}),Pn.config({mode:"special",focusIn:t.autofocus?function(m){c(m)}:ad(),onLeft:v,onRight:v,onEscape:function(m,p){return!Qn.isFocused(m)&&!t.autofocus?(Qn.focus(m),D.some(!0)):(t.autofocus&&p.setSource(m.element),D.none())}})])}},Ir=[nt("uid"),nt("data"),nt("components"),nt("dom"),xe("autofocus",!1),xe("ignoreFocus",!1),Sc.field("widgetBehaviours",[Vt,Qn,Pn]),xe("domModification",{}),lh(er()),sa("builder",_r)],Oi=Ln("type",{widget:Ir,item:Wt,separator:oa}),gu=function(t,r){return{mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:r.initSize.numColumns,numRows:r.initSize.numRows},focusManager:t.focusManager}},rc=function(t,r){return{mode:"matrix",selectors:{row:r.rowSelector,cell:"."+t.markers.item},focusManager:t.focusManager}},jr=function(t,r){return{mode:"menu",selector:"."+t.markers.item,moveOnTab:r.moveOnTab,focusManager:t.focusManager}},Gn=re([F1({factory:{sketch:function(t){var r=Ia("menu.spec item",Oi,t);return r.builder(r)}},name:"items",unit:"item",defaults:function(t,r){return Xn(r,"uid")?r:me(me({},r),{uid:um("item")})},overrides:function(t,r){return{type:r.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}}}})]),Mr=re([nt("value"),nt("items"),nt("dom"),nt("components"),xe("eventOrder",{}),Vo("menuBehaviours",[Qr,Vt,Dr,Pn]),bo("movement",{mode:"menu",moveOnTab:!0},Ln("mode",{grid:[Bb(),sa("config",gu)],matrix:[sa("config",rc),nt("rowSelector")],menu:[xe("moveOnTab",!0),sa("config",jr)]})),jT(),xe("fakeFocus",!1),xe("focusManager",yv()),Kr("onHighlight")]),ka=re("alloy.menu-focus"),fo=function(t,r,o,c){return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Ai(t.menuBehaviours,[Qr.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight}),Vt.config({store:{mode:"memory",initialValue:t.value}}),Dr.config({find:D.some}),Pn.config(t.movement.config(t,t.movement))]),events:xa([ot(Ye(),function(v,m){var p=m.event;v.getSystem().getByDom(p.target).each(function(w){Qr.highlight(v,w),m.stop(),sn(v,ka(),{menu:v,item:w})})}),ot(tt(),function(v,m){var p=m.event.item;Qr.highlight(v,p)})]),components:r,eventOrder:t.eventOrder,domModification:{attributes:{role:"menu"}}}},hu=mu({name:"Menu",configFields:Mr(),partFields:Gn(),factory:fo}),qs=function(t){return $o(t,function(r,o){return{k:r,v:o}})},Gs=function(t,r,o,c){return Cn(o,c).bind(function(v){return Cn(t,v).bind(function(m){var p=Gs(t,r,o,m);return D.some([m].concat(p))})}).getOr([])},Di=function(t,r){var o={};Sa(t,function(p,w){Jt(p,function(S){o[S]=w})});var c=r,v=qs(r),m=Gr(v,function(p,w){return[w].concat(Gs(o,c,v,w))});return Gr(o,function(p){return Cn(m,p).getOr([p])})},u0=function(){var t=Bn({}),r=Bn({}),o=Bn({}),c=ro(),v=Bn({}),m=function(){t.set({}),r.set({}),o.set({}),c.clear()},p=function(){return c.get().isNone()},w=function(_e,Ke){var Pe;r.set(me(me({},r.get()),(Pe={},Pe[_e]={type:"prepared",menu:Ke},Pe)))},S=function(_e,Ke,Pe,ct){c.set(_e),t.set(Pe),r.set(Ke),v.set(ct);var Bt=Di(ct,Pe);o.set(Bt)},T=function(_e){return Ha(t.get(),function(Ke,Pe){return Ke===_e})},R=function(_e,Ke,Pe){return X(_e).bind(function(ct){return T(_e).bind(function(Bt){return Ke(Bt).map(function(Qt){return{triggeredMenu:ct,triggeringItem:Qt,triggeringPath:Pe}})})})},O=function(_e,Ke){var Pe=rt(ne(_e).toArray(),function(ct){return X(ct).isSome()});return Cn(o.get(),_e).bind(function(ct){var Bt=On(Pe.concat(ct)),Qt=qr(Bt,function(vt,dt){return R(vt,Ke,Bt.slice(0,dt+1)).fold(function(){return pc(c.get(),vt)?[]:[D.none()]},function(ln){return[D.some(ln)]})});return ml(Qt)})},N=function(_e){return Cn(t.get(),_e).map(function(Ke){var Pe=Cn(o.get(),_e).getOr([]);return[Ke].concat(Pe)})},L=function(_e){return Cn(o.get(),_e).bind(function(Ke){return Ke.length>1?D.some(Ke.slice(1)):D.none()})},q=function(_e){return Cn(o.get(),_e)},X=function(_e){return ge(_e).bind(Bd)},ge=function(_e){return Cn(r.get(),_e)},ne=function(_e){return Cn(t.get(),_e)},ye=function(_e){var Ke=v.get();return ra($r(Ke),_e)},he=function(){return c.get().bind(X)},Ve=function(){return r.get()};return{setMenuBuilt:w,setContents:S,expand:N,refresh:q,collapse:L,lookupMenu:ge,lookupItem:ne,otherMenus:ye,getPrimary:he,getMenus:Ve,clear:m,isClear:p,getTriggeringPath:O}},Bd=function(t){return t.type==="prepared"?D.some(t.menu):D.none()},Nl={init:u0,extractPreparedMenu:Bd},Ks=function(t,r){var o=ro(),c=function(Ct,En,zn){return Gr(zn,function(Vr,wa){var Do=function(){return hu.sketch(me(me({},Vr),{value:wa,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:t.onHighlight,focusManager:t.fakeFocus?Wy():yv()}))};return wa===En?{type:"prepared",menu:Ct.getSystem().build(Do())}:{type:"notbuilt",nbMenu:Do}})},v=Nl.init(),m=function(Ct){var En=c(Ct,t.data.primary,t.data.menus),zn=S();return v.setContents(t.data.primary,En,t.data.expansions,zn),v.getPrimary()},p=function(Ct){return Vt.getValue(Ct).value},w=function(Ct,En,zn){return Ba(En,function(Vr){if(!Vr.getSystem().isConnected())return D.none();var wa=Qr.getCandidates(Vr);return Wn(wa,function(Do){return p(Do)===zn})})},S=function(Ct){return Gr(t.data.menus,function(En,zn){return qr(En.items,function(Vr){return Vr.type==="separator"?[]:[Vr.data.value]})})},T=function(Ct,En){Qr.highlight(Ct,En),Qr.getHighlighted(En).orThunk(function(){return Qr.getFirst(En)}).each(function(zn){tp(Ct,zn.element,Wf())})},R=function(Ct,En){return Ou(yt(En,function(zn){return Ct.lookupMenu(zn).bind(function(Vr){return Vr.type==="prepared"?D.some(Vr.menu):D.none()})}))},O=function(Ct,En,zn){var Vr=R(En,En.otherMenus(zn));Jt(Vr,function(wa){vu(wa.element,[t.markers.backgroundMenu]),t.stayInDom||nr.remove(Ct,wa)})},N=function(Ct){return o.get().getOrThunk(function(){var En={},zn=zu(Ct.element,"."+t.markers.item),Vr=rt(zn,function(wa){return Eu(wa,"aria-haspopup")==="true"});return Jt(Vr,function(wa){Ct.getSystem().getByDom(wa).each(function(Do){var Rf=p(Do);En[Rf]=Do})}),o.set(En),En})},L=function(Ct,En){var zn=N(Ct);Sa(zn,function(Vr,wa){var Do=ir(En,wa);kr(Vr.element,"aria-expanded",Do)})},q=function(Ct,En,zn){return D.from(zn[0]).bind(function(Vr){return En.lookupMenu(Vr).bind(function(wa){if(wa.type==="notbuilt")return D.none();var Do=wa.menu,Rf=R(En,zn.slice(1));return Jt(Rf,function(jl){no(jl.element,t.markers.backgroundMenu)}),Hi(Do.element)||nr.append(Ct,So(Do)),vu(Do.element,[t.markers.backgroundMenu]),T(Ct,Do),O(Ct,En,zn),D.some(Do)})})},X;(function(Ct){Ct[Ct.HighlightSubmenu=0]="HighlightSubmenu",Ct[Ct.HighlightParent=1]="HighlightParent"})(X||(X={}));var ge=function(Ct,En,zn){if(zn.type==="notbuilt"){var Vr=Ct.getSystem().build(zn.nbMenu());return v.setMenuBuilt(En,Vr),Vr}else return zn.menu},ne=function(Ct,En,zn){if(zn===void 0&&(zn=X.HighlightSubmenu),En.hasConfigured(Tn)&&Tn.isDisabled(En))return D.some(En);var Vr=p(En);return v.expand(Vr).bind(function(wa){return L(Ct,wa),D.from(wa[0]).bind(function(Do){return v.lookupMenu(Do).bind(function(Rf){var jl=ge(Ct,Do,Rf);return Hi(jl.element)||nr.append(Ct,So(jl)),t.onOpenSubmenu(Ct,En,jl,On(wa)),zn===X.HighlightSubmenu?(Qr.highlightFirst(jl),q(Ct,v,wa)):(Qr.dehighlightAll(jl),D.some(En))})})})},ye=function(Ct,En){var zn=p(En);return v.collapse(zn).bind(function(Vr){return L(Ct,Vr),q(Ct,v,Vr).map(function(wa){return t.onCollapseMenu(Ct,En,wa),wa})})},he=function(Ct,En){var zn=p(En);return v.refresh(zn).bind(function(Vr){return L(Ct,Vr),q(Ct,v,Vr)})},Ve=function(Ct,En){return pv(En.element)?D.none():ne(Ct,En,X.HighlightSubmenu)},_e=function(Ct,En){return pv(En.element)?D.none():ye(Ct,En)},Ke=function(Ct,En){return ye(Ct,En).orThunk(function(){return t.onEscape(Ct,En).map(function(){return Ct})})},Pe=function(Ct){return function(En,zn){return hs(zn.getSource(),"."+t.markers.item).bind(function(Vr){return En.getSystem().getByDom(Vr).toOptional().bind(function(wa){return Ct(En,wa).map(ut)})})}},ct=xa([ot(ka(),function(Ct,En){var zn=En.event.item;v.lookupItem(p(zn)).each(function(){var Vr=En.event.menu;Qr.highlight(Ct,Vr);var wa=p(En.event.item);v.refresh(wa).each(function(Do){return O(Ct,v,Do)})})}),Pc(function(Ct,En){var zn=En.event.target;Ct.getSystem().getByDom(zn).each(function(Vr){var wa=p(Vr);wa.indexOf("collapse-item")===0&&ye(Ct,Vr),ne(Ct,Vr,X.HighlightSubmenu).fold(function(){t.onExecute(Ct,Vr)},He)})}),Ta(function(Ct,En){m(Ct).each(function(zn){nr.append(Ct,So(zn)),t.onOpenMenu(Ct,zn),t.highlightImmediately&&T(Ct,zn)})})].concat(t.navigateOnHover?[ot(tt(),function(Ct,En){var zn=En.event.item;he(Ct,zn),ne(Ct,zn,X.HighlightParent),t.onHover(Ct,zn)})]:[])),Bt=function(Ct){return Qr.getHighlighted(Ct).bind(Qr.getHighlighted)},Qt=function(Ct){Bt(Ct).each(function(En){ye(Ct,En)})},vt=function(Ct){v.getPrimary().each(function(En){T(Ct,En)})},dt=function(Ct){return D.from(Ct.components()[0]).filter(function(En){return Eu(En.element,"role")==="menu"})},ln=function(Ct){var En=v.getPrimary().bind(function(zn){return Bt(Ct).bind(function(Vr){var wa=p(Vr),Do=pn(v.getMenus()),Rf=Ou(yt(Do,Nl.extractPreparedMenu));return v.getTriggeringPath(wa,function(jl){return w(Ct,Rf,jl)})}).map(function(Vr){return{primary:zn,triggeringPath:Vr}})});En.fold(function(){dt(Ct).each(function(zn){t.onRepositionMenu(Ct,zn,[])})},function(zn){var Vr=zn.primary,wa=zn.triggeringPath;t.onRepositionMenu(Ct,Vr,wa)})},Hn={collapseMenu:Qt,highlightPrimary:vt,repositionMenus:ln};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Ai(t.tmenuBehaviours,[Pn.config({mode:"special",onRight:Pe(Ve),onLeft:Pe(_e),onEscape:Pe(Ke),focusIn:function(Ct,En){v.getPrimary().each(function(zn){tp(Ct,zn.element,Wf())})}}),Qr.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),Dr.config({find:function(Ct){return Qr.getHighlighted(Ct)}}),nr.config({})]),eventOrder:t.eventOrder,apis:Hn,events:ct}},mf=re("collapse-item"),D3=function(t,r,o){return{primary:t,menus:r,expansions:o}},xh=function(t,r){return{primary:t,menus:$n(t,r),expansions:{}}},US=function(t){return{value:bn(mf()),meta:{text:t}}},Cv=xc({name:"TieredMenu",configFields:[Rb("onExecute"),Rb("onEscape"),Ei("onOpenMenu"),Ei("onOpenSubmenu"),Kr("onRepositionMenu"),Kr("onCollapseMenu"),xe("highlightImmediately",!0),Je("data",[nt("primary"),nt("menus"),nt("expansions")]),xe("fakeFocus",!1),Kr("onHighlight"),Kr("onHover"),Np(),nt("dom"),xe("navigateOnHover",!0),xe("stayInDom",!1),Vo("tmenuBehaviours",[Pn,Qr,Dr,nr]),xe("eventOrder",{})],apis:{collapseMenu:function(t,r){t.collapseMenu(r)},highlightPrimary:function(t,r){t.highlightPrimary(r)},repositionMenus:function(t,r){t.repositionMenus(r)}},factory:Ks,extraApis:{tieredData:D3,singleData:xh,collapseItem:US}}),m2=function(t,r,o,c,v){var m=function(){return t.lazySink(r)},p=c.type==="horizontal"?{layouts:{onLtr:function(){return jp()},onRtl:function(){return uv()}}}:{},w=function(T){return T.length===2},S=function(T){return w(T)?p:{}};return Cv.sketch({dom:{tag:"div"},data:c.data,markers:c.menu.markers,highlightImmediately:c.menu.highlightImmediately,onEscape:function(){return Or.close(r),t.onEscape.map(function(T){return T(r)}),D.some(!0)},onExecute:function(){return D.some(!0)},onOpenMenu:function(T,R){lo.positionWithinBounds(m().getOrDie(),R,o,v())},onOpenSubmenu:function(T,R,O,N){var L=m().getOrDie();lo.position(L,O,{anchor:me({type:"submenu",item:R},S(N))})},onRepositionMenu:function(T,R,O){var N=m().getOrDie();lo.positionWithinBounds(N,R,o,v()),Jt(O,function(L){var q=S(L.triggeringPath);lo.position(N,L.triggeredMenu,{anchor:me({type:"submenu",item:L.triggeringItem},q)})})}})},R3=function(t,r){var o=function(L,q){var X=t.getRelated(L);return X.exists(function(ge){return ef(ge,q)})},c=function(L,q){Or.setContent(L,q)},v=function(L,q,X){m(L,q,X,D.none())},m=function(L,q,X,ge){p(L,q,X,function(){return ge.map(function(ne){return Ao(ne)})})},p=function(L,q,X,ge){var ne=t.lazySink(L).getOrDie();Or.openWhileCloaked(L,q,function(){return lo.positionWithinBounds(ne,L,X,ge())}),Vt.setValue(L,D.some({mode:"position",config:X,getBounds:ge}))},w=function(L,q,X){S(L,q,X,D.none)},S=function(L,q,X,ge){var ne=m2(t,L,q,X,ge);Or.open(L,ne),Vt.setValue(L,D.some({mode:"menu",menu:ne}))},T=function(L){Or.isOpen(L)&&(Vt.setValue(L,D.none()),Or.close(L))},R=function(L){return Or.getState(L)},O=function(L){Or.isOpen(L)&&Vt.getValue(L).each(function(q){switch(q.mode){case"menu":Or.getState(L).each(Cv.repositionMenus);break;case"position":var X=t.lazySink(L).getOrDie();lo.positionWithinBounds(X,L,q.config,q.getBounds());break}})},N={setContent:c,showAt:v,showWithin:m,showWithinBounds:p,showMenuAt:w,showMenuWithinBounds:S,hide:T,getContent:R,reposition:O,isOpen:Or.isOpen};return{uid:t.uid,dom:t.dom,behaviours:Ai(t.inlineBehaviours,[Or.config({isPartOf:function(L,q,X){return ef(q,X)||o(L,X)},getAttachPoint:function(L){return t.lazySink(L).getOrDie()},onOpen:function(L){t.onShow(L)},onClose:function(L){t.onHide(L)}}),Vt.config({store:{mode:"memory",initialValue:D.none()}}),yc.config({channels:me(me({},nc(me({isExtraPart:r.isExtraPart},t.fireDismissalEventInstead.map(function(L){return{fireEventInstead:{event:L.event}}}).getOr({})))),gd(me(me({},t.fireRepositionEventInstead.map(function(L){return{fireEventInstead:{event:L.event}}}).getOr({})),{doReposition:O})))})]),eventOrder:t.eventOrder,apis:N}},za=xc({name:"InlineView",configFields:[nt("lazySink"),Kr("onShow"),Kr("onHide"),Zn("onEscape"),Vo("inlineBehaviours",[Or,Vt,yc]),$a("fireDismissalEventInstead",[xe("event",mc())]),$a("fireRepositionEventInstead",[xe("event",yi())]),xe("getRelated",D.none),xe("isExtraPart",rn),xe("eventOrder",D.none)],factory:R3,apis:{showAt:function(t,r,o,c){t.showAt(r,o,c)},showWithin:function(t,r,o,c,v){t.showWithin(r,o,c,v)},showWithinBounds:function(t,r,o,c,v){t.showWithinBounds(r,o,c,v)},showMenuAt:function(t,r,o,c){t.showMenuAt(r,o,c)},showMenuWithinBounds:function(t,r,o,c,v){t.showMenuWithinBounds(r,o,c,v)},hide:function(t,r){t.hide(r)},isOpen:function(t,r){return t.isOpen(r)},getContent:function(t,r){return t.getContent(r)},setContent:function(t,r,o){t.setContent(r,o)},reposition:function(t,r){t.reposition(r)}}}),Sv="layout-inset",_d=function(t){return t.x},lA=function(t,r){return t.x+t.width/2-r.width/2},WS=function(t,r){return t.x+t.width-r.width},jS=function(t){return t.y},B3=function(t,r){return t.y+t.height-r.height},fA=function(t,r){return t.y+t.height/2-r.height/2},g2=function(t,r,o){return ui(WS(t,r),B3(t,r),o.insetSouthwest(),_b(),"southwest",ci(t,{right:0,bottom:3}),Sv)},h2=function(t,r,o){return ui(_d(t),B3(t,r),o.insetSoutheast(),nd(),"southeast",ci(t,{left:1,bottom:3}),Sv)},p2=function(t,r,o){return ui(WS(t,r),jS(t),o.insetNorthwest(),pm(),"northwest",ci(t,{right:0,top:2}),Sv)},c0=function(t,r,o){return ui(_d(t),jS(t),o.insetNortheast(),Ig(),"northeast",ci(t,{left:1,top:2}),Sv)},gf=function(t,r,o){return ui(lA(t,r),jS(t),o.insetNorth(),$g(),"north",ci(t,{top:2}),Sv)},s0=function(t,r,o){return ui(lA(t,r),B3(t,r),o.insetSouth(),Mb(),"south",ci(t,{bottom:3}),Sv)},vA=function(t,r,o){return ui(WS(t,r),fA(t,r),o.insetEast(),$u(),"east",ci(t,{right:0}),Sv)},dA=function(t,r,o){return ui(_d(t),fA(t,r),o.insetWest(),Fb(),"west",ci(t,{left:1}),Sv)},DB=function(t){switch(t){case"north":return gf;case"northeast":return c0;case"northwest":return p2;case"south":return s0;case"southeast":return h2;case"southwest":return g2;case"east":return vA;case"west":return dA}},_3=function(t,r,o,c,v){var m=Ub(c).map(DB).getOr(gf);return m(t,r,o,c,v)},M3=function(t){switch(t){case"north":return s0;case"northeast":return h2;case"northwest":return g2;case"south":return gf;case"southeast":return c0;case"southwest":return p2;case"east":return dA;case"west":return vA}},RB=function(t,r,o,c,v){var m=Ub(c).map(M3).getOr(gf);return m(t,r,o,c,v)},Il=tinymce.util.Tools.resolve("tinymce.util.Delay"),BB=function(t){var r=V(t.action),o=t.dom.tag,c=function(m){return Cn(t.dom,"attributes").bind(function(p){return Cn(p,m)})},v=function(){if(o==="button"){var m=c("type").getOr("button"),p=c("role").map(function(S){return{role:S}}).getOr({});return me({type:m},p)}else{var w=c("role").getOr("button");return{role:w}}};return{uid:t.uid,dom:t.dom,components:t.components,events:r,behaviours:Sc.augment(t.buttonBehaviours,[Qn.config({}),Pn.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:v()},eventOrder:t.eventOrder}},ac=xc({name:"Button",factory:BB,configFields:[xe("uid",void 0),nt("dom"),xe("components",[]),Sc.field("buttonBehaviours",[Qn,Pn]),W("action"),W("role"),xe("eventOrder",{})]}),ea=function(t){var r=N1(t)&&Na(t,"uid")?t.uid:um("memento"),o=function(m){return m.getSystem().getByUid(r).getOrDie()},c=function(m){return m.getSystem().getByUid(r).toOptional()},v=function(){return me(me({},t),{uid:r})};return{get:o,getOpt:c,asSpec:v}},hf=tinymce.util.Tools.resolve("tinymce.util.I18n"),_B={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},mA="temporary-placeholder",qS=function(t){return function(){return Cn(t,mA).getOr("!not found!")}},F3=function(t,r){var o=t.toLowerCase();if(hf.isRtl()){var c=Su(o,"-rtl");return Xn(r,c)?c:o}else return o},gA=function(t,r){return Cn(r,F3(t,r))},b2=function(t,r){var o=r();return gA(t,o).getOrThunk(qS(o))},MB=function(t,r,o){var c=r();return gA(t,c).or(o).getOrThunk(qS(c))},FB=function(t){return hf.isRtl()?Xn(_B,t):!1},y2=function(){return lr("add-focusable",[Ta(function(t){VT(t.element,"svg").each(function(r){return kr(r,"focusable","false")})})])},hA=function(t,r,o,c){var v,m,p=FB(r)?["tox-icon--flip"]:[],w=Cn(o,F3(r,o)).or(c).getOrThunk(qS(o));return{dom:{tag:t.tag,attributes:(v=t.attributes)!==null&&v!==void 0?v:{},classes:t.classes.concat(p),innerHtml:w},behaviours:Pt(Dn(Dn([],(m=t.behaviours)!==null&&m!==void 0?m:[]),[y2()]))}},pf=function(t,r,o,c){return c===void 0&&(c=D.none()),hA(r,t,o(),c)},PB=function(t,r,o){var c=o(),v=Wn(t,function(m){return Xn(c,F3(m,c))});return hA(r,v.getOr(mA),c,D.none())},NB={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},IB=function(t){var r=ea({dom:{tag:"p",innerHtml:t.translationProvider(t.text)},behaviours:Pt([nr.config({})])}),o=function(L){return{dom:{tag:"div",classes:["tox-bar"],attributes:{style:"width: "+L+"%"}}}},c=function(L){return{dom:{tag:"div",classes:["tox-text"],innerHtml:L+"%"}}},v=ea({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[o(0)]},c(0)],behaviours:Pt([nr.config({})])}),m=function(L,q){L.getSystem().isConnected()&&v.getOpt(L).each(function(X){nr.set(X,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[o(q)]},c(q)])})},p=function(L,q){if(L.getSystem().isConnected()){var X=r.get(L);nr.set(X,[bl(q)])}},w={updateProgress:m,updateText:p},S=dn([t.icon.toArray(),t.level.toArray(),t.level.bind(function(L){return D.from(NB[L])}).toArray()]),T=ea(ac.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[pf("close",{tag:"div",classes:["tox-icon"],attributes:{"aria-label":t.translationProvider("Close")}},t.iconProvider)],action:function(L){t.onAction(L)}})),R=PB(S,{tag:"div",classes:["tox-notification__icon"]},t.iconProvider),O={dom:{tag:"div",classes:["tox-notification__body"]},components:[r.asSpec()],behaviours:Pt([nr.config({})])},N=[R,O];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert"},classes:t.level.map(function(L){return["tox-notification","tox-notification--in","tox-notification--"+L]}).getOr(["tox-notification","tox-notification--in"])},behaviours:Pt([Qn.config({}),lr("notification-events",[ot(Qo(),function(L){T.getOpt(L).each(Qn.focus)})])]),components:N.concat(t.progress?[v.asSpec()]:[]).concat(t.closeButton?[T.asSpec()]:[]),apis:w}},P3=xc({name:"Notification",factory:IB,configFields:[W("level"),nt("progress"),nt("icon"),nt("onAction"),nt("text"),nt("iconProvider"),nt("translationProvider"),uo("closeButton",!0)],apis:{updateProgress:function(t,r,o){t.updateProgress(r,o)},updateText:function(t,r,o){t.updateText(r,o)}}});function $B(t,r,o){var c=r.backstage.shared,v=function(O){switch(O){case"bc-bc":return s0;case"tc-tc":return gf;case"tc-bc":return Vi;case"bc-tc":default:return Ui}},m=function(O){Jt(O,function(N){return N.moveTo(0,0)})},p=function(O){O.length>0&&(Ga(O).each(function(N){return N.moveRel(null,"banner")}),Jt(O,function(N,L){L>0&&N.moveRel(O[L-1].getEl(),"bc-tc")}))},w=function(O){m(O),p(O)},S=function(O,N){var L=!O.closeButton&&O.timeout&&(O.timeout>0||O.timeout<0),q=function(){N(),za.hide(ge)},X=nu(P3.sketch({text:O.text,level:ir(["success","error","warning","warn","info"],O.type)?O.type:void 0,progress:O.progressBar===!0,icon:D.from(O.icon),closeButton:!L,onAction:q,iconProvider:c.providers.icons,translationProvider:c.providers.translate})),ge=nu(za.sketch(me({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:c.getSink,fireDismissalEventInstead:{}},c.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}})));return o.add(ge),O.timeout>0&&Il.setTimeout(function(){q()},O.timeout),{close:q,moveTo:function(ne,ye){za.showAt(ge,So(X),{anchor:{type:"makeshift",x:ne,y:ye}})},moveRel:function(ne,ye){if(ye!=="banner"){var he=v(ye),Ve={type:"node",root:gl(),node:D.some(Ft.fromDom(ne)),layouts:{onRtl:function(){return[he]},onLtr:function(){return[he]}}};za.showAt(ge,So(X),{anchor:Ve})}else za.showAt(ge,So(X),{anchor:c.anchors.banner()})},text:function(ne){P3.updateText(X,ne)},settings:O,getEl:function(){return X.element.dom},progressBar:{value:function(ne){P3.updateProgress(X,ne)}}}},T=function(O){O.close()},R=function(O){return O.settings};return{open:S,close:T,reposition:w,getArgs:R}}var zB=function(t,r){var o=null,c=function(){An(o)||(clearTimeout(o),o=null)},v=function(){for(var m=[],p=0;p<arguments.length;p++)m[p]=arguments[p];An(o)&&(o=setTimeout(function(){o=null,t.apply(null,m)},r))};return{cancel:c,throttle:v}},N3=function(t,r){var o=null,c=function(){An(o)||(clearTimeout(o),o=null)},v=function(){for(var m=[],p=0;p<arguments.length;p++)m[p]=arguments[p];c(),o=setTimeout(function(){o=null,t.apply(null,m)},r)};return{cancel:c,throttle:v}},LB=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker"),HB=function(t,r){return t.isBlock(r)||ir(["BR","IMG","HR","INPUT"],r.nodeName)||t.getContentEditable(r)==="false"},pA=function(t,r,o,c,v){var m=LB(t,function(p){return HB(t,p)});return D.from(m.backwards(r,o,c,v))},I3="[data-mce-autocompleter]",VB=function(t,r){return GS(Ft.fromDom(t.selection.getNode())).getOrThunk(function(){var o=Ft.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',t.getDoc());return Ju(o,Ft.fromDom(r.extractContents())),r.insertNode(o.dom),Si(o).each(function(c){return c.dom.normalize()}),yC(o).map(function(c){t.selection.setCursorLocation(c.dom,bE(c))}),o})},GS=function(t){return hs(t,I3)},UB=function(t){return t.collapsed&&t.startContainer.nodeType===3},$3=function(t){return t.toString().replace(/\u00A0/g," ").replace(/\uFEFF/g,"")},bA=function(t){return t!==""&&` \xA0\f
\r	\v`.indexOf(t)!==-1},z3=function(t,r){return t.substring(r.length)},WB=function(t,r,o){var c;for(c=r-1;c>=0;c--){var v=t.charAt(c);if(bA(v))return D.none();if(v===o)break}return D.some(c)},jB=function(t,r,o,c){if(c===void 0&&(c=0),!UB(r))return D.none();var v=function(p,w,S){return WB(S,w,o).getOr(w)},m=t.getParent(r.startContainer,t.isBlock)||t.getRoot();return pA(t,r.startContainer,r.startOffset,v,m).bind(function(p){var w=r.cloneRange();if(w.setStart(p.container,p.offset),w.setEnd(r.endContainer,r.endOffset),w.collapsed)return D.none();var S=$3(w),T=S.lastIndexOf(o);return T!==0||z3(S,o).length<c?D.none():D.some({text:z3(S,o),range:w,triggerChar:o})})},L3=function(t,r,o,c){return c===void 0&&(c=0),GS(Ft.fromDom(r.startContainer)).fold(function(){return jB(t,r,o,c)},function(v){var m=t.createRng();m.selectNode(v.dom);var p=$3(m);return D.some({range:m,text:z3(p,o),triggerChar:o})})},H3=function(t,r){r.on("keypress compositionend",t.onKeypress.throttle),r.on("remove",t.onKeypress.cancel);var o=function(c,v){sn(c,Sg(),{raw:v})};r.on("keydown",function(c){var v=function(){return t.getView().bind(Qr.getHighlighted)};c.which===8&&t.onKeypress.throttle(c),t.isActive()&&(c.which===27&&t.cancelIfNecessary(),t.isMenuOpen()?c.which===13?(v().each(Mc),c.preventDefault()):c.which===40?(v().fold(function(){t.getView().each(Qr.highlightFirst)},function(m){o(m,c)}),c.preventDefault(),c.stopImmediatePropagation()):(c.which===37||c.which===38||c.which===39)&&v().each(function(m){o(m,c),c.preventDefault(),c.stopImmediatePropagation()}):(c.which===13||c.which===38||c.which===40)&&t.cancelIfNecessary())}),r.on("NodeChange",function(c){t.isActive()&&!t.isProcessingAction()&&GS(Ft.fromDom(c.element)).isNone()&&t.cancelIfNecessary()})},qB={setup:H3},w2=tinymce.util.Tools.resolve("tinymce.util.Promise"),V3=function(t,r){return{container:t,offset:r}},GB=function(t){return t.nodeType===ai},KB=function(t){return t.nodeType===Ii},yA=function(t){if(GB(t))return V3(t,t.data.length);var r=t.childNodes;return r.length>0?yA(r[r.length-1]):V3(t,r.length)},wA=function(t,r){var o=t.childNodes;return o.length>0&&r<o.length?wA(o[r],0):o.length>0&&KB(t)&&o.length===r?yA(o[o.length-1]):V3(t,r)},XB=function(t,r){return pA(t,r.container,r.offset,function(o,c){return c===0?-1:c},t.getRoot()).filter(function(o){var c=o.container.data.charAt(o.offset-1);return!bA(c)}).isSome()},YB=function(t){return function(r){var o=wA(r.startContainer,r.startOffset);return!XB(t,o)}},JB=function(t,r,o){return Ba(o.triggerChars,function(c){return L3(t,r,c)})},ZB=function(t,r){var o=r(),c=t.selection.getRng();return JB(t.dom,c,o).bind(function(v){return KS(t,r,v)})},KS=function(t,r,o,c){c===void 0&&(c={});var v=r(),m=t.selection.getRng(),p=m.startContainer.nodeValue,w=rt(v.lookupByChar(o.triggerChar),function(T){return o.text.length>=T.minChars&&T.matches.getOrThunk(function(){return YB(t.dom)})(o.range,p,o.text)});if(w.length===0)return D.none();var S=w2.all(yt(w,function(T){var R=T.fetch(o.text,T.maxResults,c);return R.then(function(O){return{matchText:o.text,items:O,columns:T.columns,onAction:T.onAction,highlightOn:T.highlightOn}})}));return D.some({lookupData:S,context:o})},CA=De([In("type"),Z("text")]),QB=function(t){return Pr("separatormenuitem",CA,t)},e_=De([xe("type","autocompleteitem"),xe("active",!1),xe("disabled",!1),xe("meta",{}),In("value"),Z("text"),Z("icon")]),U3=De([In("type"),In("ch"),Dc("minChars",1),xe("columns",1),Dc("maxResults",10),Zn("matches"),Eo("fetch"),Eo("onAction"),va("highlightOn",[],ue)]),t_=function(t){return Pr("Autocompleter.Separator",CA,t)},W3=function(t){return Pr("Autocompleter.Item",e_,t)},n_=function(t){return Pr("Autocompleter",U3,t)},C2=[uo("disabled",!1),Z("tooltip"),Z("icon"),Z("text"),aa("onSetup",function(){return He})],r_=De([In("type"),Eo("onAction")].concat(C2)),SA=function(t){return Pr("toolbarbutton",r_,t)},j3=[uo("active",!1)].concat(C2),xA=De(j3.concat([In("type"),Eo("onAction")])),TA=function(t){return Pr("ToggleButton",xA,t)},XS=[aa("predicate",rn),Cu("scope","node",["node","editor"]),Cu("position","selection",["node","selection","line"])],q3=C2.concat([xe("type","contextformbutton"),xe("primary",!1),Eo("onAction"),ho("original",Te)]),EA=j3.concat([xe("type","contextformbutton"),xe("primary",!1),Eo("onAction"),ho("original",Te)]),G3=C2.concat([xe("type","contextformbutton")]),kA=j3.concat([xe("type","contextformtogglebutton")]),AA=Ln("type",{contextformbutton:q3,contextformtogglebutton:EA}),xv=De([xe("type","contextform"),aa("initValue",re("")),Z("label"),B("commands",AA),se("launch",Ln("type",{contextformbutton:G3,contextformtogglebutton:kA}))].concat(XS)),K3=function(t){return Pr("ContextForm",xv,t)},a_=De([xe("type","contexttoolbar"),In("items")].concat(XS)),o_=function(t){return Pr("ContextToolbar",a_,t)},i_=function(t){var r={};return Jt(t,function(o){r[o]={}}),$r(r)},u_=function(t){var r=t.ui.registry.getAll().popups,o=Gr(r,function(p){return n_(p).fold(function(w){throw new Error(ju(w))},Te)}),c=i_(pa(o,function(p){return p.ch})),v=pn(o),m=function(p){return rt(v,function(w){return w.ch===p})};return{dataset:o,triggerChars:c,lookupByChar:m}},Jm;(function(t){t[t.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",t[t.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(Jm||(Jm={}));var $l=Jm,X3="tox-menu-nav__js",Y3="tox-collection__item",YS="tox-swatch",OA={normal:X3,color:YS},JS="tox-collection__item--enabled",c_="tox-collection__group-heading",ZS="tox-collection__item-icon",S2="tox-collection__item-label",s_="tox-collection__item-accessory",J3="tox-collection__item-caret",DA="tox-collection__item-checkmark",x2="tox-collection__item--active",RA="tox-collection__item-container",l_="tox-collection__item-container--column",BA="tox-collection__item-container--row",f_="tox-collection__item-container--align-right",v_="tox-collection__item-container--align-left",d_="tox-collection__item-container--valign-top",m_="tox-collection__item-container--valign-middle",QS="tox-collection__item-container--valign-bottom",Z3=function(t){return Cn(OA,t).getOr(X3)},_A=function(t){return t==="color"?"tox-swatches":"tox-menu"},Q3=function(t){return{backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:_A(t),tieredMenu:"tox-tiered-menu"}},l0=function(t){var r=Q3(t);return{backgroundMenu:r.backgroundMenu,selectedMenu:r.selectedMenu,menu:r.menu,selectedItem:r.selectedItem,item:Z3(t)}},e4=function(t,r,o){var c=Q3(o);return{tag:"div",classes:dn([[c.menu,"tox-menu-"+r+"-column"],t?[c.hasIcons]:[]])}},t4=[hu.parts.items({})],T2=function(t,r,o){var c=Q3(o),v={tag:"div",classes:dn([[c.tieredMenu]])};return{dom:v,markers:l0(o)}},ex=function(t,r){return function(o){var c=qa(o,r);return yt(c,function(v){return{dom:t,components:v}})}},MA=function(t){return{dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[hu.parts.items({preprocess:t!=="auto"?ex({tag:"div",classes:["tox-swatches__row"]},t):Te})]}]}},g_=function(t){return{dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[hu.parts.items({preprocess:ex({tag:"div",classes:["tox-collection__group"]},t)})]}},tx=function(t,r){var o=[],c=[];return Jt(t,function(v,m){r(v,m)?(c.length>0&&o.push(c),c=[],Xn(v.dom,"innerHtml")&&c.push(v)):c.push(v)}),c.length>0&&o.push(c),yt(o,function(v){return{dom:{tag:"div",classes:["tox-collection__group"]},components:v}})},n4=function(t,r,o){return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[hu.parts.items({preprocess:function(c){return t!=="auto"&&t>1?ex({tag:"div",classes:["tox-collection__group"]},t)(c):tx(c,function(v,m){return r[m].type==="separator"})}})]}},FA=function(t,r){return{dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[hu.parts.items({preprocess:function(o){return tx(o,function(c,v){return t[v].type==="separator"})}})]}},E2=function(t){return la(t,function(r){return"icon"in r&&r.icon!==void 0})},Xs=function(t){return console.error(ju(t)),console.log(t),D.none()},h_=function(t,r,o,c,v){var m=FA(o);return{value:t,dom:m.dom,components:m.components,items:o}},k2=function(t,r,o,c,v){if(v==="color"){var m=MA(c);return{value:t,dom:m.dom,components:m.components,items:o}}if(v==="normal"&&c==="auto"){var m=n4(c,o);return{value:t,dom:m.dom,components:m.components,items:o}}if(v==="normal"&&c===1){var m=n4(1,o);return{value:t,dom:m.dom,components:m.components,items:o}}if(v==="normal"){var m=n4(c,o);return{value:t,dom:m.dom,components:m.components,items:o}}if(v==="listpreview"&&c!=="auto"){var m=g_(c);return{value:t,dom:m.dom,components:m.components,items:o}}return{value:t,dom:e4(r,c,v),components:t4,items:o}},f0=[In("type"),In("src"),Z("alt"),va("classes",[],ue)],p_=De(f0),PA=[In("type"),In("text"),Z("name"),va("classes",["tox-collection__item-label"],ue)],NA=De(PA),r4=ie(function(){return fn("type",{cardimage:p_,cardtext:NA,cardcontainer:a4})}),a4=De([In("type"),el("direction","horizontal"),el("align","left"),el("valign","middle"),B("items",r4)]),Th=[uo("disabled",!1),Z("text"),Z("shortcut"),hr("value","value",we(function(){return bn("menuitem-value")}),Mt()),xe("meta",{})],b_=De([In("type"),Z("label"),B("items",r4),aa("onSetup",function(){return He}),aa("onAction",He)].concat(Th)),y_=function(t){return Pr("cardmenuitem",b_,t)},nx=De([In("type"),uo("active",!1),Z("icon")].concat(Th)),w_=function(t){return Pr("choicemenuitem",nx,t)},o4=[In("type"),In("fancytype"),aa("onAction",He)],v0=[xe("initData",{})].concat(o4),C_=[Fv("initData",{},[uo("allowCustomColors",!0),ca("colors",Mt())])].concat(o4),S_=Ln("fancytype",{inserttable:v0,colorswatch:C_}),x_=function(t){return Pr("fancymenuitem",S_,t)},IA=De([In("type"),aa("onSetup",function(){return He}),aa("onAction",He),Z("icon")].concat(Th)),$A=function(t){return Pr("menuitem",IA,t)},T_=De([In("type"),Eo("getSubmenuItems"),aa("onSetup",function(){return He}),Z("icon")].concat(Th)),E_=function(t){return Pr("nestedmenuitem",T_,t)},k_=De([In("type"),Z("icon"),uo("active",!1),aa("onSetup",function(){return He}),Eo("onAction")].concat(Th)),A_=function(t){return Pr("togglemenuitem",k_,t)},i4=function(t,r,o){var c=zu(t.element,"."+o);if(c.length>0){var v=ma(c,function(m){var p=m.dom.getBoundingClientRect().top,w=c[0].dom.getBoundingClientRect().top;return Math.abs(p-w)>r}).getOr(c.length);return D.some({numColumns:v,numRows:Math.ceil(c.length/v)})}else return D.none()},A2=function(t,r){return Pt([lr(t,r)])},O_=function(t){return A2(bn("unnamed-events"),t)},rx={namedEvents:A2,unnamedEvents:O_},ax=bn("tooltip.exclusive"),d0=bn("tooltip.show"),O2=bn("tooltip.hide"),u4=function(t,r,o){t.getSystem().broadcastOn([ax],{})},zA=function(t,r,o,c){o.getTooltip().each(function(v){v.getSystem().isConnected()&&nr.set(v,c)})},LA=Object.freeze({__proto__:null,hideAllExclusive:u4,setComponents:zA}),HA=function(t,r){var o=function(v){r.getTooltip().each(function(m){Al(m),t.onHide(v,m),r.clearTooltip()}),r.clearTimer()},c=function(v){if(!r.isShowing()){u4(v);var m=t.lazySink(v).getOrDie(),p=v.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:xa(t.mode==="normal"?[ot(al(),function(w){zr(v,d0)}),ot(X0(),function(w){zr(v,O2)})]:[]),behaviours:Pt([nr.config({})])});r.setTooltip(p),vd(m,p),t.onShow(v,p),lo.position(m,p,{anchor:t.anchor(v)})}};return xa(dn([[ot(d0,function(v){r.resetTimer(function(){c(v)},t.delay)}),ot(O2,function(v){r.resetTimer(function(){o(v)},t.delay)}),ot(Ds(),function(v,m){var p=m;p.universal||ir(p.channels,ax)&&o(v)}),Rs(function(v){o(v)})],t.mode==="normal"?[ot(Qo(),function(v){zr(v,d0)}),ot(Y0(),function(v){zr(v,O2)}),ot(al(),function(v){zr(v,d0)}),ot(X0(),function(v){zr(v,O2)})]:[ot(uw(),function(v,m){zr(v,d0)}),ot(eb(),function(v){zr(v,O2)})]]))},D_=Object.freeze({__proto__:null,events:HA}),R_=[nt("lazySink"),nt("tooltipDom"),xe("exclusive",!0),xe("tooltipComponents",[]),xe("delay",300),Cu("mode","normal",["normal","follow-highlight"]),xe("anchor",function(t){return{type:"hotspot",hotspot:t,layouts:{onLtr:re([Ui,Vi,au,_u,ou,Mu]),onRtl:re([Ui,Vi,au,_u,ou,Mu])}}}),Kr("onHide"),Kr("onShow")],B_=function(){var t=ro(),r=ro(),o=function(){t.on(clearTimeout)},c=function(m,p){o(),t.set(setTimeout(m,p))},v=re("not-implemented");return tu({getTooltip:r.get,isShowing:r.isSet,setTooltip:r.set,clearTooltip:r.clear,clearTimer:o,resetTimer:c,readState:v})},__=Object.freeze({__proto__:null,init:B_}),ox=si({fields:R_,name:"tooltipping",active:D_,state:__,apis:LA}),c4=function(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},m0=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),M_=tinymce.util.Tools.resolve("tinymce.EditorManager"),VA=function(t){var r=t.getParam("skin"),o=t.getParam("skin_url");if(r!==!1){var c=r||"oxide";o?o=t.documentBaseURI.toAbsolute(o):o=M_.baseURL+"/skins/ui/"+c}return o},F_=function(t){return t.getParam("readonly",!1,"boolean")},P_=function(t){return t.getParam("skin")===!1},UA=function(t){return t.getParam("height",Math.max(t.getElement().offsetHeight,200))},s4=function(t){return t.getParam("width",m0.DOM.getStyle(t.getElement(),"width"))},l4=function(t){return D.from(t.getParam("min_width")).filter(mr)},f4=function(t){return D.from(t.getParam("min_height")).filter(mr)},v4=function(t){return D.from(t.getParam("max_width")).filter(mr)},WA=function(t){return D.from(t.getParam("max_height")).filter(mr)},N_=function(t){return D.from(t.getParam("style_formats")).filter(Sn)},I_=function(t){return t.getParam("style_formats_merge",!1,"boolean")},$_=function(t){return t.getParam("lineheight_formats","1 1.1 1.2 1.3 1.4 1.5 2","string").split(" ")},z_=function(t){return t.getParam("content_langs",void 0,"array")},L_=function(t){return t.getParam("removed_menuitems","")},d4=function(t){return t.getParam("menubar",!0,"boolean")!==!1},m4=function(t){var r=t.getParam("toolbar",!0),o=r===!0,c=Ut(r),v=Sn(r)&&r.length>0;return!ix(t)&&(v||c||o)},jA=function(t){var r=te(9,function(c){return t.getParam("toolbar"+(c+1),!1,"string")}),o=rt(r,function(c){return typeof c=="string"});return o.length>0?D.some(o):D.none()},ix=function(t){return jA(t).fold(function(){var r=t.getParam("toolbar",[],"string[]");return r.length>0},ut)},Xc;(function(t){t.default="wrap",t.floating="floating",t.sliding="sliding",t.scrolling="scrolling"})(Xc||(Xc={}));var D2=function(t){return t.getParam("toolbar_mode","","string")},Eh;(function(t){t.auto="auto",t.top="top",t.bottom="bottom"})(Eh||(Eh={}));var H_=function(t){return t.getParam("toolbar_groups",{},"object")},qA=function(t){return t.getParam("toolbar_location",Eh.auto,"string")},GA=function(t){return qA(t)===Eh.bottom},V_=function(t){return t.getParam("fixed_toolbar_container","","string")},ux=function(t){return t.getParam("fixed_toolbar_container_target")},KA=function(t){return t.getParam("toolbar_persist",!1,"boolean")},XA=function(t){if(!t.inline)return D.none();var r=V_(t);if(r.length>0)return ru(gl(),r);var o=ux(t);return un(o)?D.some(Ft.fromDom(o)):D.none()},cx=function(t){return t.inline&&XA(t).isSome()},YA=function(t){var r=XA(t);return r.getOrThunk(function(){return im($i(Ft.fromDom(t.getElement())))})},JA=function(t){return t.inline&&!d4(t)&&!m4(t)&&!ix(t)},sx=function(t){var r=t.getParam("toolbar_sticky",!1,"boolean");return(r||t.inline)&&!cx(t)&&!JA(t)},g4=function(t){return t.getParam("toolbar_sticky_offset",0,"number")},ZA=function(t){return t.getParam("draggable_modal",!1,"boolean")},QA=function(t){var r=t.getParam("menu");return r?Gr(r,function(o){return me(me({},o),{items:o.items})}):{}},U_=function(t){return t.getParam("menubar")},eO=function(t){return t.getParam("toolbar",!0)},W_=function(t){return t.getParam("file_picker_callback")},j_=function(t){return t.getParam("file_picker_types")},q_=function(t){return t.getParam("file_browser_callback_types")},G_=function(t){return t.getParam("typeahead_urls")===!1},K_=function(t){return t.getParam("anchor_top","#top")},X_=function(t){return t.getParam("anchor_bottom","#bottom")},Y_=function(t){var r=t.getParam("file_picker_validator_handler",void 0,"function");return r===void 0?t.getParam("filepicker_validator_handler",void 0,"function"):r},h4="silver.readonly",J_=De([wu("readonly")]),g0=function(t,r){var o=t.outerContainer,c=o.element;r&&(t.mothership.broadcastOn([md()],{target:c}),t.uiMothership.broadcastOn([md()],{target:c})),t.mothership.broadcastOn([h4],{readonly:r}),t.uiMothership.broadcastOn([h4],{readonly:r})},lx=function(t,r){t.on("init",function(){t.mode.isReadOnly()&&g0(r,!0)}),t.on("SwitchMode",function(){return g0(r,t.mode.isReadOnly())}),F_(t)&&t.setMode("readonly")},Uo=function(){var t;return yc.config({channels:(t={},t[h4]={schema:J_,onReceive:function(r,o){Tn.set(r,o.readonly)}},t)})},p4=function(t){return Tn.config({disabled:t,disableClass:"tox-collection__item--state-disabled"})},tO=function(t){return Tn.config({disabled:t})},Z_=function(t){return Tn.config({disabled:t,disableClass:"tox-tbtn--disabled"})},Q_=function(t){return Tn.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},Yc={item:p4,button:tO,splitButton:Z_,toolbarButton:Q_},h0=function(t,r){var o=t.getApi(r);return function(c){c(o)}},Zm=function(t,r){return Ta(function(o){var c=h0(t,o);c(function(v){var m=t.onSetup(v);br(m)&&r.set(m)})})},p0=function(t,r){return Rs(function(o){return h0(t,o)(r.get())})},b4,eM=function(t,r){return Pc(function(o,c){h0(t,o)(t.onAction),!t.triggersSubmenu&&r===$l.CLOSE_ON_EXECUTE&&(zr(o,jf()),c.stop())})},tM=(b4={},b4[Xu()]=["disabling","alloy.base.behaviour","toggling","item-events"],b4),b0=Ou,y0=function(t,r,o,c){var v=Bn(He);return{type:"item",dom:r.dom,components:b0(r.optComponents),data:t.data,eventOrder:tM,hasSubmenu:t.triggersSubmenu,itemBehaviours:Pt([lr("item-events",[eM(t,o),Zm(t,v),p0(t,v)]),Yc.item(function(){return t.disabled||c.isDisabled()}),Uo(),nr.config({})].concat(t.itemBehaviours))}},w0=function(t){return{value:t.value,meta:me({text:t.text.getOr("")},t.meta)}},y4=tinymce.util.Tools.resolve("tinymce.Env"),nM=function(t){var r={alt:"&#x2325;",ctrl:"&#x2303;",shift:"&#x21E7;",meta:"&#x2318;",access:"&#x2303;&#x2325;"},o={meta:"Ctrl",access:"Shift+Alt"},c=y4.mac?r:o,v=t.split("+"),m=yt(v,function(p){var w=p.toLowerCase().trim();return Xn(c,w)?c[w]:p});return y4.mac?m.join(""):m.join("+")},w4=function(t,r,o){return o===void 0&&(o=[ZS]),pf(t,{tag:"div",classes:o},r)},nO=function(t){return{dom:{tag:"div",classes:[S2]},components:[bl(hf.translate(t))]}},rO=function(t,r){return{dom:{tag:"div",classes:r,innerHtml:t}}},rM=function(t,r){return{dom:{tag:"div",classes:[S2]},components:[{dom:{tag:t.tag,styles:t.styles},components:[bl(hf.translate(r))]}]}},aM=function(t){return{dom:{tag:"div",classes:[s_],innerHtml:nM(t)}}},C4=function(t){return w4("checkmark",t,[DA])},oM=function(t){return w4("chevron-right",t,[J3])},iM=function(t){return w4("chevron-down",t,[J3])},Md=function(t,r){var o=t.direction==="vertical"?l_:BA,c=t.align==="left"?v_:f_,v=function(){switch(t.valign){case"top":return d_;case"middle":return m_;case"bottom":return QS}};return{dom:{tag:"div",classes:[RA,o,c,v()]},components:r}},uM=function(t,r,o){return{dom:{tag:"img",classes:r,attributes:{src:t,alt:o.getOr("")}}}},cM=function(t,r,o){var c="custom",v="remove",m=t.ariaLabel,p=t.value,w=t.iconContent.map(function(T){return MB(T,r.icons,o)}),S=function(){var T=YS,R=w.getOr(""),O=m.map(function(L){return{title:r.translate(L)}}).getOr({}),N={tag:"div",attributes:O,classes:[T]};return p===c?me(me({},N),{tag:"button",classes:Dn(Dn([],N.classes),["tox-swatches__picker-btn"]),innerHtml:R}):p===v?me(me({},N),{classes:Dn(Dn([],N.classes),["tox-swatch--remove"]),innerHtml:R}):me(me({},N),{attributes:me(me({},N.attributes),{"data-mce-color":p}),styles:{"background-color":p}})};return{dom:S(),optComponents:[]}},fx=function(t){var r=t.map(function(o){return{attributes:{title:hf.translate(o)}}}).getOr({});return me({tag:"div",classes:[X3,Y3]},r)},Yi=function(t,r,o,c){var v={tag:"div",classes:[ZS]},m=function(N){return pf(N,v,r.icons,c)},p=function(){return D.some({dom:v})},w=o?t.iconContent.map(m).orThunk(p):D.none(),S=t.checkMark,T=D.from(t.meta).fold(function(){return nO},function(N){return Xn(N,"style")?gt(rM,N.style):nO}),R=t.htmlContent.fold(function(){return t.textContent.map(T)},function(N){return D.some(rO(N,[S2]))}),O={dom:fx(t.ariaLabel),optComponents:[w,R,t.shortcutContent.map(aM),S,t.caret]};return O},R2=function(t,r,o,c){return c===void 0&&(c=D.none()),t.presets==="color"?cM(t,r,c):Yi(t,r,o,c)},aO=function(t,r){return Cn(t,"tooltipWorker").map(function(o){return[ox.config({lazySink:r.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:function(c){return{type:"submenu",item:c,overrides:{maxHeightFunction:sv}}},mode:"follow-highlight",onShow:function(c,v){o(function(m){ox.setComponents(c,[Ps({element:Ft.fromDom(m)})])})}})]}).getOr([])},sM=function(t){return m0.DOM.encode(t)},oO=function(t,r){var o=hf.translate(t),c=sM(o);if(r.length>0){var v=new RegExp(c4(r),"gi");return c.replace(v,function(m){return'<span class="tox-autocompleter-highlight">'+m+"</span>"})}else return c},lM=function(t,r,o,c,v,m,p,w){w===void 0&&(w=!0);var S=R2({presets:c,textContent:D.none(),htmlContent:o?t.text.map(function(T){return oO(T,r)}):D.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:D.none(),checkMark:D.none(),caret:D.none(),value:t.value},p.providers,w,t.icon);return y0({data:w0(t),disabled:t.disabled,getApi:re({}),onAction:function(T){return v(t.value,t.meta)},onSetup:re(He),triggersSubmenu:!1,itemBehaviours:aO(t.meta,p)},S,m,p.providers)},iO=function(t,r){return yt(t,function(o){switch(o.type){case"cardcontainer":return Md(o,iO(o.items,r));case"cardimage":return uM(o.src,o.classes,o.alt);case"cardtext":var c=o.name.exists(function(m){return ir(r.cardText.highlightOn,m)}),v=c?D.from(r.cardText.matchText).getOr(""):"";return rO(oO(o.text,v),o.classes)}})},fM=function(t,r,o,c){var v=function(p){return{isDisabled:function(){return Tn.isDisabled(p)},setDisabled:function(w){Tn.set(p,w),Jt(zu(p.element,"*"),function(S){p.getSystem().getByDom(S).each(function(T){T.hasConfigured(Tn)&&Tn.set(T,w)})})}}},m={dom:fx(t.label),optComponents:[D.some({dom:{tag:"div",classes:[RA,BA]},components:iO(t.items,c)})]};return y0({data:w0(me({text:D.none()},t)),disabled:t.disabled,getApi:v,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:D.from(c.itemBehaviours).getOr([])},m,r,o.providers)},vM=function(t,r,o,c,v,m,p,w){w===void 0&&(w=!0);var S=function(R){return{setActive:function(O){A.set(R,O)},isActive:function(){return A.isOn(R)},isDisabled:function(){return Tn.isDisabled(R)},setDisabled:function(O){return Tn.set(R,O)}}},T=R2({presets:o,textContent:r?t.text:D.none(),htmlContent:D.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:r?t.shortcut:D.none(),checkMark:r?D.some(C4(p.icons)):D.none(),caret:D.none(),value:t.value},p,w);return gr(y0({data:w0(t),disabled:t.disabled,getApi:S,onAction:function(R){return c(t.value)},onSetup:function(R){return R.setActive(v),He},triggersSubmenu:!1,itemBehaviours:[]},T,m,p),{toggling:{toggleClass:JS,toggleOnExecute:!1,selected:t.active}})},uO=ch(Fn(),er()),cO=function(t){return{value:t}},sO=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,lO=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,fO=function(t){return sO.test(t)||lO.test(t)},dM=function(t){return jd(t,"#").toUpperCase()},mM=function(t){return fO(t)?D.some({value:dM(t)}):D.none()},gM=function(t){var r=t.value.replace(sO,function(o,c,v,m){return c+c+v+v+m+m});return{value:r}},hM=function(t){var r=gM(t),o=lO.exec(r.value);return o===null?["FFFFFF","FF","FF","FF"]:o},S4=function(t){var r=t.toString(16);return(r.length===1?"0"+r:r).toUpperCase()},B2=function(t){var r=S4(t.red)+S4(t.green)+S4(t.blue);return cO(r)},vO=Math.min,dO=Math.max,vx=Math.round,pM=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/,bM=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/,Qm=function(t,r,o,c){return{red:t,green:r,blue:o,alpha:c}},x4=function(t){var r=parseInt(t,10);return r.toString()===t&&r>=0&&r<=255},T4=function(t){var r,o,c,v=(t.hue||0)%360,m=t.saturation/100,p=t.value/100;if(m=dO(0,vO(m,1)),p=dO(0,vO(p,1)),m===0)return r=o=c=vx(255*p),Qm(r,o,c,1);var w=v/60,S=p*m,T=S*(1-Math.abs(w%2-1)),R=p-S;switch(Math.floor(w)){case 0:r=S,o=T,c=0;break;case 1:r=T,o=S,c=0;break;case 2:r=0,o=S,c=T;break;case 3:r=0,o=T,c=S;break;case 4:r=T,o=0,c=S;break;case 5:r=S,o=0,c=T;break;default:r=o=c=0}return r=vx(255*(r+R)),o=vx(255*(o+R)),c=vx(255*(c+R)),Qm(r,o,c,1)},_2=function(t){var r=hM(t),o=parseInt(r[1],16),c=parseInt(r[2],16),v=parseInt(r[3],16);return Qm(o,c,v,1)},mO=function(t,r,o,c){var v=parseInt(t,10),m=parseInt(r,10),p=parseInt(o,10),w=parseFloat(c);return Qm(v,m,p,w)},gO=function(t){if(t==="transparent")return D.some(Qm(0,0,0,0));var r=pM.exec(t);if(r!==null)return D.some(mO(r[1],r[2],r[3],"1"));var o=bM.exec(t);return o!==null?D.some(mO(o[1],o[2],o[3],o[4])):D.none()},E4=function(t){return"rgba("+t.red+","+t.green+","+t.blue+","+t.alpha+")"},hO=Qm(255,0,0,1),yM=function(t){return t.fire("SkinLoaded")},wM=function(t,r){return t.fire("SkinLoadError",r)},CM=function(t){return t.fire("ResizeEditor")},dx=function(t,r){return t.fire("ResizeContent",r)},SM=function(t,r){return t.fire("ScrollContent",r)},pO=function(t,r){return t.fire("TextColorChange",r)},C0=function(t,r,o){return{hue:t,saturation:r,value:o}},k4=function(t){var r=0,o=0,c=0,v=t.red/255,m=t.green/255,p=t.blue/255,w=Math.min(v,Math.min(m,p)),S=Math.max(v,Math.max(m,p));if(w===S)return c=w,C0(0,0,c*100);var T=v===w?m-p:p===w?v-m:p-v;return r=v===w?3:p===w?1:5,r=60*(r-T/(S-w)),o=(S-w)/S,c=S,C0(Math.round(r),Math.round(o*100),Math.round(c*100))},bO=function(t){return k4(_2(t))},yO=function(t){return B2(T4(t))},xM=function(t){return mM(t).orThunk(function(){return gO(t).map(B2)}).getOrThunk(function(){var r=document.createElement("canvas");r.height=1,r.width=1;var o=r.getContext("2d");o.clearRect(0,0,r.width,r.height),o.fillStyle="#FFFFFF",o.fillStyle=t,o.fillRect(0,0,1,1);var c=o.getImageData(0,0,1,1).data,v=c[0],m=c[1],p=c[2],w=c[3];return B2(Qm(v,m,p,w))})},mx=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),wO="tinymce-custom-colors";function TM(t){t===void 0&&(t=10);var r=mx.getItem(wO),o=Ut(r)?JSON.parse(r):[],c=function(S){var T=t-S.length;return T<0?S.slice(0,t):S},v=c(o),m=function(S){Go(v,S).each(p),v.unshift(S),v.length>t&&v.pop(),mx.setItem(wO,JSON.stringify(v))},p=function(S){v.splice(S,1)},w=function(){return v.slice(0)};return{add:m,state:w}}var Ri="choiceitem",A4=[{type:Ri,text:"Light Green",value:"#BFEDD2"},{type:Ri,text:"Light Yellow",value:"#FBEEB8"},{type:Ri,text:"Light Red",value:"#F8CAC6"},{type:Ri,text:"Light Purple",value:"#ECCAFA"},{type:Ri,text:"Light Blue",value:"#C2E0F4"},{type:Ri,text:"Green",value:"#2DC26B"},{type:Ri,text:"Yellow",value:"#F1C40F"},{type:Ri,text:"Red",value:"#E03E2D"},{type:Ri,text:"Purple",value:"#B96AD9"},{type:Ri,text:"Blue",value:"#3598DB"},{type:Ri,text:"Dark Turquoise",value:"#169179"},{type:Ri,text:"Orange",value:"#E67E23"},{type:Ri,text:"Dark Red",value:"#BA372A"},{type:Ri,text:"Dark Purple",value:"#843FA1"},{type:Ri,text:"Dark Blue",value:"#236FA1"},{type:Ri,text:"Light Gray",value:"#ECF0F1"},{type:Ri,text:"Medium Gray",value:"#CED4D9"},{type:Ri,text:"Gray",value:"#95A5A6"},{type:Ri,text:"Dark Gray",value:"#7E8C8D"},{type:Ri,text:"Navy Blue",value:"#34495E"},{type:Ri,text:"Black",value:"#000000"},{type:Ri,text:"White",value:"#ffffff"}],O4=TM(10),EM=function(t){for(var r=[],o=0;o<t.length;o+=2)r.push({text:t[o+1],value:"#"+xM(t[o]).value,type:"choiceitem"});return r},CO=function(t,r){return t.getParam("color_cols",r,"number")},SO=function(t){return t.getParam("custom_colors")!==!1},kM=function(t){return t.getParam("color_map")},M2=function(t){var r=kM(t);return r!==void 0?EM(r):A4},AM=function(){return yt(O4.state(),function(t){return{type:Ri,text:t,value:t}})},xO=function(t){O4.add(t)},OM=function(t,r){var o;return t.dom.getParents(t.selection.getStart(),function(c){var v;(v=c.style[r==="forecolor"?"color":"background-color"])&&(o=o||v)}),o},TO=function(t,r,o){t.undoManager.transact(function(){t.focus(),t.formatter.apply(r,{value:o}),t.nodeChanged()})},DM=function(t,r){t.undoManager.transact(function(){t.focus(),t.formatter.remove(r,{value:null},null,!0),t.nodeChanged()})},EO=function(t){t.addCommand("mceApplyTextcolor",function(r,o){TO(t,r,o)}),t.addCommand("mceRemoveTextcolor",function(r){DM(t,r)})},RM=function(t){return Math.max(5,Math.ceil(Math.sqrt(t)))},S0=function(t){var r=M2(t),o=RM(r.length);return CO(t,o)},kO=function(t){var r="choiceitem",o={type:r,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"},c={type:r,text:"Custom color",icon:"color-picker",value:"custom"};return t?[o,c]:[o]},D4=function(t,r,o,c){if(o==="custom"){var v=B4(t);v(function(m){m.each(function(p){xO(p),t.execCommand("mceApplyTextcolor",r,p),c(p)})},"#000000")}else o==="remove"?(c(""),t.execCommand("mceRemoveTextcolor",r)):(c(o),t.execCommand("mceApplyTextcolor",r,o))},AO=function(t,r){return t.concat(AM().concat(kO(r)))},OO=function(t,r){return function(o){o(AO(t,r))}},DO=function(t,r,o){var c=r==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";t.setIconFill(c,o)},RO=function(t,r,o,c,v){t.ui.registry.addSplitButton(r,{tooltip:c,presets:"color",icon:r==="forecolor"?"text-color":"highlight-bg-color",select:function(m){var p=D.from(OM(t,o));return p.bind(function(w){return gO(w).map(function(S){var T=B2(S).value;return Lo(m.toLowerCase(),T)})}).getOr(!1)},columns:S0(t),fetch:OO(M2(t),SO(t)),onAction:function(m){v.get()!==null&&D4(t,o,v.get(),He)},onItemAction:function(m,p){D4(t,o,p,function(w){v.set(w),pO(t,{name:r,color:w})})},onSetup:function(m){v.get()!==null&&DO(m,r,v.get());var p=function(w){w.name===r&&DO(m,w.name,w.color)};return t.on("TextColorChange",p),function(){t.off("TextColorChange",p)}}})},R4=function(t,r,o,c){t.ui.registry.addNestedMenuItem(r,{text:c,icon:r==="forecolor"?"text-color":"highlight-bg-color",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"colorswatch",onAction:function(v){D4(t,o,v.value,He)}}]}})},B4=function(t){return function(r,o){var c=!1,v=function(w){var S=w.getData(),T=S.colorpicker;c?(r(D.from(T)),w.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",T]))},m=function(w,S){S.name==="hex-valid"&&(c=S.value)},p={colorpicker:o};t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:p,onAction:m,onSubmit:v,onClose:He,onCancel:function(){r(D.none())}})}},BO=function(t){EO(t);var r=Bn(null),o=Bn(null);RO(t,"forecolor","forecolor","Text color",r),RO(t,"backcolor","hilitecolor","Background color",o),R4(t,"forecolor","forecolor","Text color"),R4(t,"backcolor","hilitecolor","Background color")},_4=function(t,r,o,c,v,m,p,w){var S=E2(r),T=v!=="color"?"normal":"color",R=M4(r,o,c,T,m,p,w);return k2(t,S,R,c,v)},M4=function(t,r,o,c,v,m,p){return Ou(yt(t,function(w){return w.type==="choiceitem"?w_(w).fold(Xs,function(S){return D.some(vM(S,o===1,c,r,m(w.value),v,p,E2(t)))}):D.none()}))},gx=function(t,r){var o=l0(r);if(t===1)return{mode:"menu",moveOnTab:!0};if(t==="auto")return{mode:"grid",selector:"."+o.item,initSize:{numColumns:1,numRows:1}};var c=r==="color"?"tox-swatches__row":"tox-collection__group";return{mode:"matrix",rowSelector:"."+c}},BM=function(t,r){return t===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:t==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:r==="color"?".tox-swatches__row":".tox-collection__group",cell:r==="color"?"."+YS:"."+Y3}}},_M=function(t,r){var o=MM(t,r),c=r.colorinput.getColorCols(),v="color",m=_4(bn("menu-value"),o,function(w){t.onAction({value:w})},c,v,$l.CLOSE_ON_EXECUTE,rn,r.shared.providers),p=me(me({},m),{markers:l0(v),movement:gx(c,v)});return{type:"widget",data:{value:bn("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[uO.widget(hu.sketch(p))]}},MM=function(t,r){var o=t.initData.allowCustomColors&&r.colorinput.hasCustomColors();return t.initData.colors.fold(function(){return AO(r.colorinput.getColors(),o)},function(c){return c.concat(kO(o))})},_O=bn("cell-over"),MO=bn("cell-execute"),FM=function(t,r,o){var c,v=function(w){return sn(w,_O,{row:t,col:r})},m=function(w){return sn(w,MO,{row:t,col:r})},p=function(w,S){S.stop(),m(w)};return nu({dom:{tag:"div",attributes:(c={role:"button"},c["aria-labelledby"]=o,c)},behaviours:Pt([lr("insert-table-picker-cell",[ot(al(),Qn.focus),ot(Xu(),m),ot(xg(),p),ot(Tg(),p)]),A.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),Qn.config({onFocus:v})])})},PM=function(t,r,o){for(var c=[],v=0;v<r;v++){for(var m=[],p=0;p<o;p++)m.push(FM(v,p,t));c.push(m)}return c},NM=function(t,r,o,c,v){for(var m=0;m<c;m++)for(var p=0;p<v;p++)A.set(t[m][p],m<=r&&p<=o)},IM=function(t){return qr(t,function(r){return yt(r,So)})},$M=function(t,r){return bl(r+1+"x"+(t+1))},zM=function(t){var r=10,o=10,c=bn("size-label"),v=PM(c,r,o),m=ea({dom:{tag:"span",classes:["tox-insert-table-picker__label"],attributes:{id:c}},components:[bl("0x0")],behaviours:Pt([nr.config({})])});return{type:"widget",data:{value:bn("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[uO.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:IM(v).concat(m.asSpec()),behaviours:Pt([lr("insert-table-picker",[Fc(_O,function(p,w,S){var T=S.event.row,R=S.event.col;NM(v,T,R,r,o),nr.set(m.get(p),[$M(T,R)])}),Fc(MO,function(p,w,S){t.onAction({numRows:S.event.row+1,numColumns:S.event.col+1}),zr(p,jf())})]),Pn.config({initSize:{numRows:r,numColumns:o},mode:"flatgrid",selector:'[role="button"]'})])})]}},FO={inserttable:zM,colorswatch:_M},LM=function(t,r){return Cn(FO,t.fancytype).map(function(o){return o(t,r)})},HM=function(t,r,o,c,v){c===void 0&&(c=!0),v===void 0&&(v=!1);var m=v?iM(o.icons):oM(o.icons),p=function(S){return{isDisabled:function(){return Tn.isDisabled(S)},setDisabled:function(T){return Tn.set(S,T)}}},w=R2({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:D.none(),ariaLabel:t.text,caret:D.some(m),checkMark:D.none(),shortcutContent:t.shortcut},o,c);return y0({data:w0(t),getApi:p,disabled:t.disabled,onAction:He,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},w,r,o)},F4=function(t,r,o,c){c===void 0&&(c=!0);var v=function(p){return{isDisabled:function(){return Tn.isDisabled(p)},setDisabled:function(w){return Tn.set(p,w)}}},m=R2({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:D.none(),ariaLabel:t.text,caret:D.none(),checkMark:D.none(),shortcutContent:t.shortcut},o,c);return y0({data:w0(t),getApi:v,disabled:t.disabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},m,r,o)},hx=function(t){var r=t.text.fold(function(){return{}},function(o){return{innerHtml:o}});return{type:"separator",dom:me({tag:"div",classes:[Y3,c_]},r),components:[]}},VM=function(t,r,o,c){c===void 0&&(c=!0);var v=function(p){return{setActive:function(w){A.set(p,w)},isActive:function(){return A.isOn(p)},isDisabled:function(){return Tn.isDisabled(p)},setDisabled:function(w){return Tn.set(p,w)}}},m=R2({iconContent:t.icon,textContent:t.text,htmlContent:D.none(),ariaLabel:t.text,checkMark:D.some(C4(o.icons)),caret:D.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},o,c);return gr(y0({data:w0(t),disabled:t.disabled,getApi:v,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},m,r,o),{toggling:{toggleClass:JS,toggleOnExecute:!1,selected:t.active}})},px=lM,PO=hx,UM=F4,WM=HM,jM=VM,qM=LM,GM=fM,x0;(function(t){t[t.ContentFocus=0]="ContentFocus",t[t.UiFocus=1]="UiFocus"})(x0||(x0={}));var KM=function(t,r,o,c,v){var m=o.shared.providers,p=function(w){return v?me(me({},w),{shortcut:D.none(),icon:w.text.isSome()?D.none():w.icon}):w};switch(t.type){case"menuitem":return $A(t).fold(Xs,function(w){return D.some(UM(p(w),r,m,c))});case"nestedmenuitem":return E_(t).fold(Xs,function(w){return D.some(WM(p(w),r,m,c,v))});case"togglemenuitem":return A_(t).fold(Xs,function(w){return D.some(jM(p(w),r,m,c))});case"separator":return QB(t).fold(Xs,function(w){return D.some(PO(w))});case"fancymenuitem":return x_(t).fold(Xs,function(w){return qM(p(w),o)});default:return console.error("Unknown item in general menu",t),D.none()}},P4=function(t,r,o,c,v,m,p){var w=c===1,S=!w||E2(t);return Ou(yt(t,function(T){switch(T.type){case"separator":return t_(T).fold(Xs,function(R){return D.some(PO(R))});case"cardmenuitem":return y_(T).fold(Xs,function(R){return D.some(GM(me(me({},R),{onAction:function(O){R.onAction(O),o(R.value,R.meta)}}),v,m,{itemBehaviours:aO(R.meta,m),cardText:{matchText:r,highlightOn:p}}))});case"autocompleteitem":default:return W3(T).fold(Xs,function(R){return D.some(px(R,r,w,"normal",o,v,m,S))})}}))},NO=function(t,r,o,c,v){var m=E2(r),p=Ou(yt(r,function(S){var T=function(O){return v?!Xn(O,"text"):m},R=function(O){return KM(O,o,c,T(O),v)};return S.type==="nestedmenuitem"&&S.getSubmenuItems().length<=0?R(me(me({},S),{disabled:!0})):R(S)})),w=v?h_:k2;return w(t,m,p,1,"normal")},N4=function(t){return Cv.singleData(t.value,t)},XM=function(t,r,o,c){var v=o===x0.ContentFocus?Wy():yv(),m=gx(r,c),p=l0(c);return{dom:t.dom,components:t.components,items:t.items,value:t.value,markers:{selectedItem:p.selectedItem,item:p.item},movement:m,fakeFocus:o===x0.ContentFocus,focusManager:v,menuBehaviours:rx.unnamedEvents(r!=="auto"?[]:[Ta(function(w,S){i4(w,4,p.item).each(function(T){var R=T.numColumns,O=T.numRows;Pn.setGridSize(w,O,R)})})])}},YM=function(t,r){var o=ro(),c=Bn(!1),v=nu(za.sketch({dom:{tag:"div",classes:["tox-autocompleter"]},components:[],fireDismissalEventInstead:{},inlineBehaviours:Pt([lr("dismissAutocompleter",[ot(mc(),function(){return S()})])]),lazySink:r.getSink})),m=function(){return za.isOpen(v)},p=function(){return o.get().isSome()},w=function(){p()&&za.hide(v)},S=function(){if(p()){var ne=o.get().map(function(ye){return ye.element});GS(ne.getOr(Ft.fromDom(t.selection.getNode()))).each(Uv),w(),o.clear(),c.set(!1)}},T=Xa(function(){return u_(t)}),R=function(ne,ye){var he=Ba(ye,function(Ve){return D.from(Ve.columns)}).getOr(1);return qr(ye,function(Ve){var _e=Ve.items;return P4(_e,Ve.matchText,function(Ke,Pe){var ct=t.selection.getRng();L3(t.dom,ct,ne).fold(function(){return console.error("Lost context. Cursor probably moved")},function(Bt){var Qt=Bt.range,vt={hide:function(){S()},reload:function(dt){w(),q(dt)}};c.set(!0),Ve.onAction(vt,Qt,Ke,Pe),c.set(!1)})},he,$l.BUBBLE_TO_SANDBOX,r,Ve.highlightOn)})},O=function(ne){if(!p()){var ye=VB(t,ne.range);o.set({triggerChar:ne.triggerChar,element:ye,matchLength:ne.text.length}),c.set(!1)}},N=function(ne,ye,he,Ve){ne.matchLength=ye.text.length;var _e=Ba(he,function(Ke){return D.from(Ke.columns)}).getOr(1);za.showAt(v,hu.sketch(XM(k2("autocompleter-value",!0,Ve,_e,"normal"),_e,x0.ContentFocus,"normal")),{anchor:{type:"node",root:Ft.fromDom(t.getBody()),node:D.from(ne.element)}}),za.getContent(v).each(Qr.highlightFirst)},L=function(ne){return o.get().map(function(ye){return L3(t.dom,t.selection.getRng(),ye.triggerChar).bind(function(he){return KS(t,T,he,ne)})}).getOrThunk(function(){return ZB(t,T)})},q=function(ne){L(ne).fold(S,function(ye){O(ye.context),ye.lookupData.then(function(he){o.get().map(function(Ve){var _e=ye.context;if(Ve.triggerChar===_e.triggerChar){var Ke=R(_e.triggerChar,he);Ke.length>0?N(Ve,_e,he,Ke):_e.text.length-Ve.matchLength>=10?S():w()}})})})},X=N3(function(ne){ne.which!==27&&q()},50),ge={onKeypress:X,cancelIfNecessary:S,isMenuOpen:m,isActive:p,isProcessingAction:c.get,getView:function(){return za.getContent(v)}};t.hasPlugin("rtc")===!1&&qB.setup(ge,t)},IO={register:YM},Fd=function(t,r,o){return hs(t,r,o).isSome()},$O=function(t,r){var o=null,c=function(){for(var m=[],p=0;p<arguments.length;p++)m[p]=arguments[p];o=setTimeout(function(){t.apply(null,m),o=null},r)},v=function(){o!==null&&(clearTimeout(o),o=null)};return{cancel:v,schedule:c}},zO=5,JM=400,F2=function(t){var r=t.raw;return r.touches===void 0||r.touches.length!==1?D.none():D.some(r.touches[0])},ZM=function(t,r){var o=Math.abs(t.clientX-r.x),c=Math.abs(t.clientY-r.y);return o>zO||c>zO},QM=function(t){var r=ro(),o=Bn(!1),c=$O(function(T){t.triggerEvent(il(),T),o.set(!0)},JM),v=function(T){return F2(T).each(function(R){c.cancel();var O={x:R.clientX,y:R.clientY,target:T.target};c.schedule(T),o.set(!1),r.set(O)}),D.none()},m=function(T){return c.cancel(),F2(T).each(function(R){r.on(function(O){ZM(R,O)&&r.clear()})}),D.none()},p=function(T){c.cancel();var R=function(O){return Ja(O.target,T.target)};return r.get().filter(R).map(function(O){return o.get()?(T.prevent(),!1):t.triggerEvent(Tg(),T)})},w=ss([{key:Tr(),value:v},{key:Cr(),value:m},{key:fr(),value:p}]),S=function(T,R){return Cn(w,R).bind(function(O){return O(T)})};return{fireIfReady:S}},LO=function(t){var r=t.raw;return r.which===eS[0]&&!ir(["input","textarea"],Nc(t.target))&&!Fd(t.target,'[contenteditable="true"]')},HO=function(){return Ni().browser.isFirefox()},e6=Ne([Eo("triggerEvent"),xe("stopBackspace",!0)]),t6=function(t,r){return HO()?Gg(t,"focus",r):ji(t,"focusin",r)},n6=function(t,r){return HO()?Gg(t,"blur",r):ji(t,"focusout",r)},r6=function(t,r){var o=Ia("Getting GUI events settings",e6,r),c=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],v=QM(o),m=yt(c.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),function(L){return ji(t,L,function(q){v.fireIfReady(q,L).each(function(ge){ge&&q.kill()});var X=o.triggerEvent(L,q);X&&q.kill()})}),p=ro(),w=ji(t,"paste",function(L){v.fireIfReady(L,"paste").each(function(X){X&&L.kill()});var q=o.triggerEvent("paste",L);q&&L.kill(),p.set(setTimeout(function(){o.triggerEvent(Uf(),L)},0))}),S=ji(t,"keydown",function(L){var q=o.triggerEvent("keydown",L);q?L.kill():o.stopBackspace===!0&&LO(L)&&L.prevent()}),T=t6(t,function(L){var q=o.triggerEvent("focusin",L);q&&L.kill()}),R=ro(),O=n6(t,function(L){var q=o.triggerEvent("focusout",L);q&&L.kill(),R.set(setTimeout(function(){o.triggerEvent(Y0(),L)},0))}),N=function(){Jt(m,function(L){L.unbind()}),S.unbind(),T.unbind(),O.unbind(),w.unbind(),p.on(clearTimeout),R.on(clearTimeout)};return{unbind:N}},VO=function(t,r){var o=Cn(t,"target").getOr(r);return Bn(o)},a6=function(t,r){var o=Bn(!1),c=Bn(!1),v=function(){o.set(!0)},m=function(){c.set(!0)};return{stop:v,cut:m,isStopped:o.get,isCut:c.get,event:t,setSource:r.set,getSource:r.get}},o6=function(t){var r=Bn(!1),o=function(){r.set(!0)};return{stop:o,cut:He,isStopped:r.get,isCut:rn,event:t,setSource:bt("Cannot set source of a broadcasted event"),getSource:bt("Cannot get source of a broadcasted event")}},P2=fu.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),eg=function(t,r,o,c,v,m){var p=t(r,c),w=a6(o,v);return p.fold(function(){return m.logEventNoHandlers(r,c),P2.complete()},function(S){var T=S.descHandler,R=jv(T);return R(w),w.isStopped()?(m.logEventStopped(r,S.element,T.purpose),P2.stopped()):w.isCut()?(m.logEventCut(r,S.element,T.purpose),P2.complete()):Si(S.element).fold(function(){return m.logNoParent(r,S.element,T.purpose),P2.complete()},function(O){return m.logEventResponse(r,S.element,T.purpose),P2.resume(O)})})},UO=function(t,r,o,c,v,m){return eg(t,r,o,c,v,m).fold(ut,function(p){return UO(t,r,o,p,v,m)},rn)},i6=function(t,r,o,c,v){var m=VO(o,c);return eg(t,r,o,c,m,v)},u6=function(t,r,o){var c=o6(r);return Jt(t,function(v){var m=v.descHandler,p=jv(m);p(c)}),c.isStopped()},c6=function(t,r,o,c){return N2(t,r,o,o.target,c)},N2=function(t,r,o,c,v){var m=VO(o,c);return UO(t,r,o,c,m,v)},WO=function(t,r){return{element:t,descHandler:r}},jO=function(t,r){return{id:t,descHandler:r}},s6=function(){var t={},r=function(p,w,S){Sa(S,function(T,R){var O=t[R]!==void 0?t[R]:{};O[w]=bp(T,p),t[R]=O})},o=function(p,w){return _s(w).fold(function(){return D.none()},function(S){return p.bind(function(T){return Cn(T,S)}).map(function(T){return WO(w,T)})})},c=function(p){return Cn(t,p).map(function(w){return pa(w,function(S,T){return jO(T,S)})}).getOr([])},v=function(p,w,S){var T=Cn(t,w);return Zd(S,function(R){return o(T,R)},p)},m=function(p){Sa(t,function(w,S){Xn(w,p)&&delete w[p]})};return{registerId:r,unregisterId:m,filterByType:c,find:v}},l6=function(){var t=s6(),r={},o=function(T){var R=T.element;return _s(R).getOrThunk(function(){return lb("uid-",T.element)})},c=function(T,R){var O=r[R];if(O===T)m(T);else throw new Error('The tagId "'+R+'" is already used by: '+Jf(O.element)+`
Cannot use it for: `+Jf(T.element)+`
The conflicting element is`+(Hi(O.element)?" ":" not ")+"already in the DOM")},v=function(T){var R=o(T);Na(r,R)&&c(T,R);var O=[T];t.registerId(O,R,T.events),r[R]=T},m=function(T){_s(T.element).each(function(R){delete r[R],t.unregisterId(R)})},p=function(T){return t.filterByType(T)},w=function(T,R,O){return t.find(T,R,O)},S=function(T){return Cn(r,T)};return{find:w,filter:p,register:v,unregister:m,getById:S}},f6=function(t){var r=t.dom,o=r.attributes,c=Y(r,["attributes"]);return{uid:t.uid,dom:me({tag:"div",attributes:me({role:"presentation"},o)},c),components:t.components,behaviours:D1(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},Nu=xc({name:"Container",factory:f6,configFields:[xe("components",[]),Vo("containerBehaviours",[]),xe("events",{}),xe("domModification",{}),xe("eventOrder",{})]}),qO=function(t){var r=function(ne){return Si(t.element).fold(ut,function(ye){return Ja(ne,ye)})},o=l6(),c=function(ne,ye){return o.find(r,ne,ye)},v=r6(t.element,{triggerEvent:function(ne,ye){return ed(ne,ye.target,function(he){return c6(c,ne,ye,he)})}}),m={debugInfo:re("real"),triggerEvent:function(ne,ye,he){ed(ne,ye,function(Ve){return N2(c,ne,he,ye,Ve)})},triggerFocus:function(ne,ye){_s(ne).fold(function(){Fu(ne)},function(he){ed(Vf(),ne,function(Ve){return i6(c,Vf(),{originator:ye,kill:He,prevent:He,target:ne},ne,Ve),!1})})},triggerEscape:function(ne,ye){m.triggerEvent("keydown",ne.element,ye.event)},getByUid:function(ne){return X(ne)},getByDom:function(ne){return ge(ne)},build:nu,addToGui:function(ne){S(ne)},removeFromGui:function(ne){T(ne)},addToWorld:function(ne){p(ne)},removeFromWorld:function(ne){w(ne)},broadcast:function(ne){N(ne)},broadcastOn:function(ne,ye){L(ne,ye)},broadcastEvent:function(ne,ye){q(ne,ye)},isConnected:ut},p=function(ne){ne.connect(m),Ci(ne.element)||(o.register(ne),Jt(ne.components(),p),m.triggerEvent(qf(),ne.element,{target:ne.element}))},w=function(ne){Ci(ne.element)||(Jt(ne.components(),w),o.unregister(ne)),ne.disconnect()},S=function(ne){vd(t,ne)},T=function(ne){Al(ne)},R=function(){v.unbind(),Yf(t.element)},O=function(ne){var ye=o.filter(Ds());Jt(ye,function(he){var Ve=he.descHandler,_e=jv(Ve);_e(ne)})},N=function(ne){O({universal:!0,data:ne})},L=function(ne,ye){O({universal:!1,channels:ne,data:ye})},q=function(ne,ye){var he=o.filter(ne);return u6(he,ye)},X=function(ne){return o.getById(ne).fold(function(){return mn.error(new Error('Could not find component with uid: "'+ne+'" in system.'))},mn.value)},ge=function(ne){var ye=_s(ne).getOr("not found");return X(ye)};return p(t),{root:t,element:t.element,destroy:R,add:S,remove:T,getByUid:X,getByDom:ge,addToWorld:p,removeFromWorld:w,broadcast:N,broadcastOn:L,broadcastEvent:q}},v6=function(t,r){return{dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:yt(t.items,r.interpreter)}},d6=re([xe("prefix","form-field"),Vo("fieldBehaviours",[Dr,Vt])]),GO=re([ps({schema:[nt("dom")],name:"label"}),ps({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}}}},schema:[nt("text")],name:"aria-descriptor"}),uu({factory:{sketch:function(t){var r=wg(t,["factory"]);return t.factory.sketch(r)}},schema:[nt("factory")],name:"field"})]),m6=function(t,r,o,c){var v=Ai(t.fieldBehaviours,[Dr.config({find:function(w){return ya(w,t,"field")}}),Vt.config({store:{mode:"manual",getValue:function(w){return Dr.getCurrent(w).bind(Vt.getValue)},setValue:function(w,S){Dr.getCurrent(w).each(function(T){Vt.setValue(T,S)})}}})]),m=xa([Ta(function(w,S){var T=WC(w,t,["label","field","aria-descriptor"]);T.field().each(function(R){var O=bn(t.prefix);T.label().each(function(N){kr(N.element,"for",O),kr(R.element,"id",O)}),T["aria-descriptor"]().each(function(N){var L=bn(t.prefix);kr(N.element,"id",L),kr(R.element,"aria-describedby",L)})})})]),p={getField:function(w){return ya(w,t,"field")},getLabel:function(w){return ya(w,t,"label")}};return{uid:t.uid,dom:t.dom,components:r,behaviours:v,events:m,apis:p}},Xr=mu({name:"FormField",configFields:d6(),partFields:GO(),factory:m6,apis:{getField:function(t,r){return t.getField(r)},getLabel:function(t,r){return t.getLabel(r)}}}),g6=function(t,r){return Za({attributes:ss([{key:r.tabAttr,value:"true"}])})},KO=Object.freeze({__proto__:null,exhibit:g6}),bf=[xe("tabAttr","data-alloy-tabstop")],La=si({fields:bf,name:"tabstopping",active:KO}),h6=tinymce.util.Tools.resolve("tinymce.html.Entities"),T0=function(t,r,o,c){var v=bx(t,r,o,c);return Xr.sketch(v)},XO=function(t,r){return T0(t,r,[],[])},bx=function(t,r,o,c){return{dom:yx(o),components:t.toArray().concat([r]),fieldBehaviours:Pt(c)}},p6=function(){return yx([])},yx=function(t){return{tag:"div",classes:["tox-form__group"].concat(t)}},Tv=function(t,r){return Xr.parts.label({dom:{tag:"label",classes:["tox-label"],innerHtml:r.translate(t)}})},Tc=bn("form-component-change"),I2=bn("form-close"),kh=bn("form-cancel"),Ev=bn("form-action"),tg=bn("form-submit"),I4=bn("form-block"),$4=bn("form-unblock"),YO=bn("form-tabchange"),z4=bn("form-resize"),b6=function(t,r){var o,c=t.label.map(function(O){return Tv(O,r)}),v=function(O){return function(N,L){hs(L.event.target,"[data-collection-item-value]").each(function(q){O(N,L,q,Eu(q,"data-collection-item-value"))})}},m=function(O,N){var L=yt(N,function(ge){var ne=hf.translate(ge.text),ye=t.columns===1?'<div class="tox-collection__item-label">'+ne+"</div>":"",he='<div class="tox-collection__item-icon">'+ge.icon+"</div>",Ve={_:" "," - ":" ","-":" "},_e=ne.replace(/\_| \- |\-/g,function(Pe){return Ve[Pe]}),Ke=r.isDisabled()?" tox-collection__item--state-disabled":"";return'<div class="tox-collection__item'+Ke+'" tabindex="-1" data-collection-item-value="'+h6.encodeAllRaw(ge.value)+'" title="'+_e+'" aria-label="'+_e+'">'+he+ye+"</div>"}),q=t.columns!=="auto"&&t.columns>1?qa(L,t.columns):[L],X=yt(q,function(ge){return'<div class="tox-collection__group">'+ge.join("")+"</div>"});Bs(O.element,X.join(""))},p=v(function(O,N,L,q){N.stop(),r.isDisabled()||sn(O,Ev,{name:t.name,value:q})}),w=[ot(al(),v(function(O,N,L){Fu(L)})),ot(xg(),p),ot(Tg(),p),ot(Qo(),v(function(O,N,L){ru(O.element,"."+x2).each(function(q){wo(q,x2)}),no(L,x2)})),ot(xT(),v(function(O){ru(O.element,"."+x2).each(function(N){wo(N,x2)})})),Pc(v(function(O,N,L,q){sn(O,Ev,{name:t.name,value:q})}))],S=function(O,N){return yt(zu(O.element,".tox-collection__item"),N)},T=Xr.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(t.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:Te},behaviours:Pt([Tn.config({disabled:r.isDisabled,onDisabled:function(O){S(O,function(N){no(N,"tox-collection__item--state-disabled"),kr(N,"aria-disabled",!0)})},onEnabled:function(O){S(O,function(N){wo(N,"tox-collection__item--state-disabled"),zi(N,"aria-disabled")})}}),Uo(),nr.config({}),Vt.config({store:{mode:"memory",initialValue:[]},onSetValue:function(O,N){m(O,N),t.columns==="auto"&&i4(O,5,"tox-collection__item").each(function(L){var q=L.numRows,X=L.numColumns;Pn.setGridSize(O,q,X)}),zr(O,z4)}}),La.config({}),Pn.config(BM(t.columns,"normal")),lr("collection-events",w)]),eventOrder:(o={},o[Xu()]=["disabling","alloy.base.behaviour","collection-events"],o)}),R=["tox-form__group--collection"];return T0(c,T,R,[])},L4=re([W("data"),xe("inputAttributes",{}),xe("inputStyles",{}),xe("tag","input"),xe("inputClasses",[]),Kr("onSetValue"),xe("styles",{}),xe("eventOrder",{}),Vo("inputBehaviours",[Vt,Qn]),xe("selectOnFocus",!0)]),JO=function(t){return Pt([Qn.config({onFocus:t.selectOnFocus?function(r){var o=r.element,c=Qf(o);o.dom.setSelectionRange(0,c.length)}:He})])},y6=function(t){return me(me({},JO(t)),Ai(t.inputBehaviours,[Vt.config({store:me(me({mode:"manual"},t.data.map(function(r){return{initialValue:r}}).getOr({})),{getValue:function(r){return Qf(r.element)},setValue:function(r,o){var c=Qf(r.element);c!==o&&pl(r.element,o)}}),onSetValue:t.onSetValue})]))},H4=function(t){return{tag:t.tag,attributes:me({type:"text"},t.inputAttributes),styles:t.inputStyles,classes:t.inputClasses}},w6=function(t,r){return{uid:t.uid,dom:H4(t),components:[],behaviours:y6(t),eventOrder:t.eventOrder}},$2=xc({name:"Input",configFields:L4(),factory:w6}),V4={},U4={exports:V4};(function(t,r,o,c){(function(v){if(typeof r=="object"&&typeof o!="undefined")o.exports=v();else if(typeof t=="function"&&t.amd)t([],v);else{var m;typeof window!="undefined"?m=window:typeof kB!="undefined"?m=kB:typeof self!="undefined"?m=self:m=this,m.EphoxContactWrapper=v()}})(function(){return function(){function v(m,p,w){function S(O,N){if(!p[O]){if(!m[O]){var L=typeof c=="function"&&c;if(!N&&L)return L(O,!0);if(T)return T(O,!0);var q=new Error("Cannot find module '"+O+"'");throw q.code="MODULE_NOT_FOUND",q}var X=p[O]={exports:{}};m[O][0].call(X.exports,function(ge){var ne=m[O][1][ge];return S(ne||ge)},X,X.exports,v,m,p,w)}return p[O].exports}for(var T=typeof c=="function"&&c,R=0;R<w.length;R++)S(w[R]);return S}return v}()({1:[function(v,m,p){var w=m.exports={},S,T;function R(){throw new Error("setTimeout has not been defined")}function O(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?S=setTimeout:S=R}catch(Ke){S=R}try{typeof clearTimeout=="function"?T=clearTimeout:T=O}catch(Ke){T=O}})();function N(Ke){if(S===setTimeout)return setTimeout(Ke,0);if((S===R||!S)&&setTimeout)return S=setTimeout,setTimeout(Ke,0);try{return S(Ke,0)}catch(Pe){try{return S.call(null,Ke,0)}catch(ct){return S.call(this,Ke,0)}}}function L(Ke){if(T===clearTimeout)return clearTimeout(Ke);if((T===O||!T)&&clearTimeout)return T=clearTimeout,clearTimeout(Ke);try{return T(Ke)}catch(Pe){try{return T.call(null,Ke)}catch(ct){return T.call(this,Ke)}}}var q=[],X=!1,ge,ne=-1;function ye(){!X||!ge||(X=!1,ge.length?q=ge.concat(q):ne=-1,q.length&&he())}function he(){if(!X){var Ke=N(ye);X=!0;for(var Pe=q.length;Pe;){for(ge=q,q=[];++ne<Pe;)ge&&ge[ne].run();ne=-1,Pe=q.length}ge=null,X=!1,L(Ke)}}w.nextTick=function(Ke){var Pe=new Array(arguments.length-1);if(arguments.length>1)for(var ct=1;ct<arguments.length;ct++)Pe[ct-1]=arguments[ct];q.push(new Ve(Ke,Pe)),q.length===1&&!X&&N(he)};function Ve(Ke,Pe){this.fun=Ke,this.array=Pe}Ve.prototype.run=function(){this.fun.apply(null,this.array)},w.title="browser",w.browser=!0,w.env={},w.argv=[],w.version="",w.versions={};function _e(){}w.on=_e,w.addListener=_e,w.once=_e,w.off=_e,w.removeListener=_e,w.removeAllListeners=_e,w.emit=_e,w.prependListener=_e,w.prependOnceListener=_e,w.listeners=function(Ke){return[]},w.binding=function(Ke){throw new Error("process.binding is not supported")},w.cwd=function(){return"/"},w.chdir=function(Ke){throw new Error("process.chdir is not supported")},w.umask=function(){return 0}},{}],2:[function(v,m,p){(function(w){(function(S){var T=setTimeout;function R(){}function O(he,Ve){return function(){he.apply(Ve,arguments)}}function N(he){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");if(typeof he!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],ye(he,this)}function L(he,Ve){for(;he._state===3;)he=he._value;if(he._state===0){he._deferreds.push(Ve);return}he._handled=!0,N._immediateFn(function(){var _e=he._state===1?Ve.onFulfilled:Ve.onRejected;if(_e===null){(he._state===1?q:X)(Ve.promise,he._value);return}var Ke;try{Ke=_e(he._value)}catch(Pe){X(Ve.promise,Pe);return}q(Ve.promise,Ke)})}function q(he,Ve){try{if(Ve===he)throw new TypeError("A promise cannot be resolved with itself.");if(Ve&&(typeof Ve=="object"||typeof Ve=="function")){var _e=Ve.then;if(Ve instanceof N){he._state=3,he._value=Ve,ge(he);return}else if(typeof _e=="function"){ye(O(_e,Ve),he);return}}he._state=1,he._value=Ve,ge(he)}catch(Ke){X(he,Ke)}}function X(he,Ve){he._state=2,he._value=Ve,ge(he)}function ge(he){he._state===2&&he._deferreds.length===0&&N._immediateFn(function(){he._handled||N._unhandledRejectionFn(he._value)});for(var Ve=0,_e=he._deferreds.length;Ve<_e;Ve++)L(he,he._deferreds[Ve]);he._deferreds=null}function ne(he,Ve,_e){this.onFulfilled=typeof he=="function"?he:null,this.onRejected=typeof Ve=="function"?Ve:null,this.promise=_e}function ye(he,Ve){var _e=!1;try{he(function(Ke){_e||(_e=!0,q(Ve,Ke))},function(Ke){_e||(_e=!0,X(Ve,Ke))})}catch(Ke){if(_e)return;_e=!0,X(Ve,Ke)}}N.prototype.catch=function(he){return this.then(null,he)},N.prototype.then=function(he,Ve){var _e=new this.constructor(R);return L(this,new ne(he,Ve,_e)),_e},N.all=function(he){var Ve=Array.prototype.slice.call(he);return new N(function(_e,Ke){if(Ve.length===0)return _e([]);var Pe=Ve.length;function ct(Qt,vt){try{if(vt&&(typeof vt=="object"||typeof vt=="function")){var dt=vt.then;if(typeof dt=="function"){dt.call(vt,function(ln){ct(Qt,ln)},Ke);return}}Ve[Qt]=vt,--Pe==0&&_e(Ve)}catch(ln){Ke(ln)}}for(var Bt=0;Bt<Ve.length;Bt++)ct(Bt,Ve[Bt])})},N.resolve=function(he){return he&&typeof he=="object"&&he.constructor===N?he:new N(function(Ve){Ve(he)})},N.reject=function(he){return new N(function(Ve,_e){_e(he)})},N.race=function(he){return new N(function(Ve,_e){for(var Ke=0,Pe=he.length;Ke<Pe;Ke++)he[Ke].then(Ve,_e)})},N._immediateFn=typeof w=="function"?function(he){w(he)}:function(he){T(he,0)},N._unhandledRejectionFn=function(Ve){typeof console!="undefined"&&console&&console.warn("Possible Unhandled Promise Rejection:",Ve)},N._setImmediateFn=function(Ve){N._immediateFn=Ve},N._setUnhandledRejectionFn=function(Ve){N._unhandledRejectionFn=Ve},typeof m!="undefined"&&m.exports?m.exports=N:S.Promise||(S.Promise=N)})(this)}).call(this,v("timers").setImmediate)},{timers:3}],3:[function(v,m,p){(function(w,S){var T=v("process/browser.js").nextTick,R=Function.prototype.apply,O=Array.prototype.slice,N={},L=0;p.setTimeout=function(){return new q(R.call(setTimeout,window,arguments),clearTimeout)},p.setInterval=function(){return new q(R.call(setInterval,window,arguments),clearInterval)},p.clearTimeout=p.clearInterval=function(X){X.close()};function q(X,ge){this._id=X,this._clearFn=ge}q.prototype.unref=q.prototype.ref=function(){},q.prototype.close=function(){this._clearFn.call(window,this._id)},p.enroll=function(X,ge){clearTimeout(X._idleTimeoutId),X._idleTimeout=ge},p.unenroll=function(X){clearTimeout(X._idleTimeoutId),X._idleTimeout=-1},p._unrefActive=p.active=function(X){clearTimeout(X._idleTimeoutId);var ge=X._idleTimeout;ge>=0&&(X._idleTimeoutId=setTimeout(function(){X._onTimeout&&X._onTimeout()},ge))},p.setImmediate=typeof w=="function"?w:function(X){var ge=L++,ne=arguments.length<2?!1:O.call(arguments,1);return N[ge]=!0,T(function(){N[ge]&&(ne?X.apply(null,ne):X.call(null),p.clearImmediate(ge))}),ge},p.clearImmediate=typeof S=="function"?S:function(X){delete N[X]}}).call(this,v("timers").setImmediate,v("timers").clearImmediate)},{"process/browser.js":1,timers:3}],4:[function(v,m,p){var w=v("promise-polyfill"),S=function(){return typeof window!="undefined"?window:Function("return this;")()}();m.exports={boltExport:S.Promise||w}},{"promise-polyfill":2}]},{},[4])(4)})})(void 0,V4,U4,void 0);var ZO=U4.exports.boltExport,W4=function(t){var r=D.none(),o=[],c=function(T){return W4(function(R){v(function(O){R(T(O))})})},v=function(T){p()?S(T):o.push(T)},m=function(T){p()||(r=D.some(T),w(o),o=[])},p=function(){return r.isSome()},w=function(T){Jt(T,S)},S=function(T){r.each(function(R){setTimeout(function(){T(R)},0)})};return t(m),{get:v,map:c,isReady:p}},C6=function(t){return W4(function(r){r(t)})},S6={nu:W4,pure:C6},x6=function(t){setTimeout(function(){throw t},0)},Pd=function(t){var r=function(S){t().then(S,x6)},o=function(S){return Pd(function(){return t().then(S)})},c=function(S){return Pd(function(){return t().then(function(T){return S(T).toPromise()})})},v=function(S){return Pd(function(){return t().then(function(){return S.toPromise()})})},m=function(){return S6.nu(r)},p=function(){var S=null;return Pd(function(){return S===null&&(S=t()),S})},w=t;return{map:o,bind:c,anonBind:v,toLazy:m,toCached:p,toPromise:w,get:r}},oc=function(t){return Pd(function(){return new ZO(t)})},QO=function(t){return Pd(function(){return ZO.resolve(t)})},pu={nu:oc,pure:QO},T6=["input","textarea"],eD=function(t){var r=Nc(t);return ir(T6,r)},tD=function(t,r){var o=r.getRoot(t).getOr(t.element);wo(o,r.invalidClass),r.notify.each(function(c){eD(t.element)&&kr(t.element,"aria-invalid",!1),c.getContainer(t).each(function(v){Bs(v,c.validHtml)}),c.onValid(t)})},j4=function(t,r,o,c){var v=r.getRoot(t).getOr(t.element);no(v,r.invalidClass),r.notify.each(function(m){eD(t.element)&&kr(t.element,"aria-invalid",!0),m.getContainer(t).each(function(p){Bs(p,c)}),m.onInvalid(t,c)})},q4=function(t,r,o){return r.validator.fold(function(){return pu.pure(mn.value(!0))},function(c){return c.validate(t)})},G4=function(t,r,o){return r.notify.each(function(c){c.onValidate(t)}),q4(t,r).map(function(c){return t.getSystem().isConnected()?c.fold(function(v){return j4(t,r,o,v),mn.error(v)},function(v){return tD(t,r),mn.value(v)}):mn.error("No longer in system")})},E6=function(t,r){var o=r.getRoot(t).getOr(t.element);return Co(o,r.invalidClass)},nD=Object.freeze({__proto__:null,markValid:tD,markInvalid:j4,query:q4,run:G4,isInvalid:E6}),k6=function(t,r){return t.validator.map(function(o){return xa([ot(o.onEvent,function(c){G4(c,t,r).get(Te)})].concat(o.validateOnLoad?[Ta(function(c){G4(c,t,r).get(He)})]:[]))}).getOr({})},rD=Object.freeze({__proto__:null,events:k6}),aD=[nt("invalidClass"),xe("getRoot",D.none),$a("notify",[xe("aria","alert"),xe("getContainer",D.none),xe("validHtml",""),Kr("onValid"),Kr("onInvalid"),Kr("onValidate")]),$a("validator",[nt("validate"),xe("onEvent","input"),xe("validateOnLoad",!0)])],yf=si({fields:aD,name:"invalidating",active:rD,apis:nD,extra:{validation:function(t){return function(r){var o=Vt.getValue(r);return pu.pure(t(o))}}}}),A6=function(t,r,o,c){return o.getOrCreate(t,r,c)},O6=Object.freeze({__proto__:null,getCoupled:A6}),D6=[po("others",fa(mn.value,Mt()))],R6=function(){var t={},r=function(c,v,m){var p=$r(v.others);if(p)return Cn(t,m).getOrThunk(function(){var w=Cn(v.others,m).getOrDie("No information found for coupled component: "+m),S=w(c),T=c.getSystem().build(S);return t[m]=T,T});throw new Error("Cannot find coupled component: "+m+". Known coupled components: "+JSON.stringify(p,null,2))},o=re({});return tu({readState:o,getOrCreate:r})},B6=Object.freeze({__proto__:null,init:R6}),Wo=si({fields:D6,name:"coupling",apis:O6,state:B6}),ng=re("sink"),oD=re(ps({name:ng(),overrides:re({dom:{tag:"div"},behaviours:Pt([lo.config({useFixed:ut})]),events:xa([cl(Sg()),cl(Ku()),cl(xg())])})})),wf;(function(t){t[t.HighlightFirst=0]="HighlightFirst",t[t.HighlightNone=1]="HighlightNone"})(wf||(wf={}));var Nd=function(t,r){var o=t.getHotspot(r).getOr(r),c="hotspot",v=t.getAnchorOverrides();return t.layouts.fold(function(){return{type:c,hotspot:o,overrides:v}},function(m){return{type:c,hotspot:o,overrides:v,layouts:m}})},_6=function(t,r,o){var c=t.fetch;return c(o).map(r)},M6=function(t,r,o,c,v,m,p){var w=_6(t,r,c),S=uD(c,t);return w.map(function(T){return T.bind(function(R){return D.from(Cv.sketch(me(me({},m.menu()),{uid:um(""),data:R,highlightImmediately:p===wf.HighlightFirst,onOpenMenu:function(O,N){var L=S().getOrDie();lo.position(L,N,{anchor:o}),Or.decloak(v)},onOpenSubmenu:function(O,N,L){var q=S().getOrDie();lo.position(q,L,{anchor:{type:"submenu",item:N}}),Or.decloak(v)},onRepositionMenu:function(O,N,L){var q=S().getOrDie();lo.position(q,N,{anchor:o}),Jt(L,function(X){lo.position(q,X.triggeredMenu,{anchor:{type:"submenu",item:X.triggeringItem}})})},onEscape:function(){return Qn.focus(c),Or.close(v),D.some(!0)}})))})})},Jc=function(t,r,o,c,v,m,p){var w=Nd(t,o),S=M6(t,r,w,o,c,v,p);return S.map(function(T){return T.fold(function(){Or.isOpen(c)&&Or.close(c)},function(R){Or.cloak(c),Or.open(c,R),m(c)}),c})},iD=function(t,r,o,c,v,m,p){return Or.close(c),pu.pure(c)},Ah=function(t,r,o,c,v,m){var p=Wo.getCoupled(o,"sandbox"),w=Or.isOpen(p),S=w?iD:Jc;return S(t,r,o,p,c,v,m)},F6=function(t,r,o){var c=Dr.getCurrent(r).getOr(r),v=ii(t.element);o?yr(c.element,"min-width",v+"px"):Cb(c.element,v)},uD=function(t,r){return t.getSystem().getByUid(r.uid+"-"+ng()).map(function(o){return function(){return mn.value(o)}}).getOrThunk(function(){return r.lazySink.fold(function(){return function(){return mn.error(new Error("No internal sink is specified, nor could an external sink be found"))}},function(o){return function(){return o(t)}})})},z2=function(t){Or.getState(t).each(function(r){Cv.repositionMenus(r)})},K4=function(t,r,o){var c=Fa(),v=function(w,S){var T=Nd(t,r);c.link(r.element),t.matchWidth&&F6(T.hotspot,S,t.useMinWidth),t.onOpen(T,w,S),o!==void 0&&o.onOpen!==void 0&&o.onOpen(w,S)},m=function(w,S){c.unlink(r.element),o!==void 0&&o.onClose!==void 0&&o.onClose(w,S)},p=uD(r,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:c.id,role:"listbox"}},behaviours:Sc.augment(t.sandboxBehaviours,[Vt.config({store:{mode:"memory",initialValue:r}}),Or.config({onOpen:v,onClose:m,isPartOf:function(w,S,T){return ef(S,T)||ef(r,T)},getAttachPoint:function(){return p().getOrDie()}}),Dr.config({find:function(w){return Or.getState(w).bind(function(S){return Dr.getCurrent(S)})}}),yc.config({channels:me(me({},nc({isExtraPart:rn})),gd({doReposition:z2}))})])}},X4=function(t){var r=Wo.getCoupled(t,"sandbox");z2(r)},Y4=function(){return[xe("sandboxClasses",[]),Sc.field("sandboxBehaviours",[Dr,yc,Or,Vt])]},P6=re([nt("dom"),nt("fetch"),Kr("onOpen"),xo("onExecute"),xe("getHotspot",D.some),xe("getAnchorOverrides",re({})),$s(),Vo("dropdownBehaviours",[A,Wo,Pn,Qn]),nt("toggleClass"),xe("eventOrder",{}),W("lazySink"),xe("matchWidth",!1),xe("useMinWidth",!1),W("role")].concat(Y4())),N6=re([jc({schema:[Np()],name:"menu",defaults:function(t){return{onExecute:t.onExecute}}}),oD()]),J4=function(t,r,o,c){var v,m=function(R){return Cn(t.dom,"attributes").bind(function(O){return Cn(O,R)})},p=function(R){Or.getState(R).each(function(O){Cv.highlightPrimary(O)})},w=function(R){var O=p;Ah(t,Te,R,c,O,wf.HighlightFirst).get(He)},S={expand:function(R){A.isOn(R)||Ah(t,Te,R,c,He,wf.HighlightNone).get(He)},open:function(R){A.isOn(R)||Ah(t,Te,R,c,He,wf.HighlightFirst).get(He)},isOpen:A.isOn,close:function(R){A.isOn(R)&&Ah(t,Te,R,c,He,wf.HighlightFirst).get(He)},repositionMenus:function(R){A.isOn(R)&&X4(R)}},T=function(R,O){return Mc(R),D.some(!0)};return{uid:t.uid,dom:t.dom,components:r,behaviours:Ai(t.dropdownBehaviours,[A.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),Wo.config({others:{sandbox:function(R){return K4(t,R,{onOpen:function(){return A.on(R)},onClose:function(){return A.off(R)}})}}}),Pn.config({mode:"special",onSpace:T,onEnter:T,onDown:function(R,O){if(zl.isOpen(R)){var N=Wo.getCoupled(R,"sandbox");p(N)}else zl.open(R);return D.some(!0)},onEscape:function(R,O){return zl.isOpen(R)?(zl.close(R),D.some(!0)):D.none()}}),Qn.config({})]),events:V(D.some(w)),eventOrder:me(me({},t.eventOrder),(v={},v[Xu()]=["disabling","toggling","alloy.base.behaviour"],v)),apis:S,domModification:{attributes:me(me({"aria-haspopup":"true"},t.role.fold(function(){return{}},function(R){return{role:R}})),t.dom.tag==="button"?{type:m("type").getOr("button")}:{})}}},zl=mu({name:"Dropdown",configFields:P6(),partFields:N6(),factory:J4,apis:{open:function(t,r){return t.open(r)},expand:function(t,r){return t.expand(r)},close:function(t,r){return t.close(r)},isOpen:function(t,r){return t.isOpen(r)},repositionMenus:function(t,r){return t.repositionMenus(r)}}}),I6=function(){return Za({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})},$6=function(){return xa([tb(ET(),ut)])},z6=Object.freeze({__proto__:null,events:$6,exhibit:I6}),L2=si({fields:[],name:"unselecting",active:z6}),L6=function(t,r){return zl.sketch({dom:t.dom,components:t.components,toggleClass:"mce-active",dropdownBehaviours:Pt([Yc.button(r.providers.isDisabled),Uo(),L2.config({}),La.config({})]),layouts:t.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:r.getSink,fetch:function(o){return pu.nu(function(c){return t.fetch(c)}).map(function(c){return D.from(N4(gr(_4(bn("menu-value"),c,function(v){t.onItemAction(o,v)},t.columns,t.presets,$l.CLOSE_ON_EXECUTE,rn,r.providers),{movement:gx(t.columns,t.presets)})))})},parts:{menu:T2(!1,1,t.presets)}})},cD=bn("color-input-change"),Z4=bn("color-swatch-change"),Q4=bn("color-picker-cancel"),H6=function(t,r,o){var c=Xr.parts.field({factory:$2,inputClasses:["tox-textfield"],onSetValue:function(S){return yf.run(S).get(He)},inputBehaviours:Pt([Tn.config({disabled:r.providers.isDisabled}),Uo(),La.config({}),yf.config({invalidClass:"tox-textbox-field-invalid",getRoot:function(S){return Si(S.element)},notify:{onValid:function(S){var T=Vt.getValue(S);sn(S,cD,{color:T})}},validator:{validateOnLoad:!1,validate:function(S){var T=Vt.getValue(S);if(T.length===0)return pu.pure(mn.value(!0));var R=Ft.fromTag("span");yr(R,"background-color",T);var O=Zr(R,"background-color").fold(function(){return mn.error("blah")},function(N){return mn.value(T)});return pu.pure(O)}}})]),selectOnFocus:!1}),v=t.label.map(function(S){return Tv(S,r.providers)}),m=function(S,T){sn(S,Z4,{value:T})},p=function(S,T){w.getOpt(S).each(function(R){T==="custom"?o.colorPicker(function(O){O.fold(function(){return zr(R,Q4)},function(N){m(R,N),xO(N)})},"#ffffff"):T==="remove"?m(R,""):m(R,T)})},w=ea(L6({dom:{tag:"span",attributes:{"aria-label":r.providers.translate("Color swatch")}},layouts:{onRtl:function(){return[ou,au,Ui]},onLtr:function(){return[au,ou,Ui]}},components:[],fetch:OO(o.getColors(),o.hasCustomColors()),columns:o.getColorCols(),presets:"color",onItemAction:p},r));return Xr.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:v.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[c,w.asSpec()]}]),fieldBehaviours:Pt([lr("form-field-events",[ot(cD,function(S,T){w.getOpt(S).each(function(R){yr(R.element,"background-color",T.event.color)}),sn(S,Tc,{name:t.name})}),ot(Z4,function(S,T){Xr.getField(S).each(function(R){Vt.setValue(R,T.event.value),Dr.getCurrent(S).each(Qn.focus)})}),ot(Q4,function(S,T){Xr.getField(S).each(function(R){Dr.getCurrent(S).each(Qn.focus)})})])])})},V6=ps({schema:[nt("dom")],name:"label"}),rg=function(t){return ps({name:""+t+"-edge",overrides:function(r){var o=r.model.manager.edgeActions[t];return o.fold(function(){return{}},function(c){return{events:xa([ap(Tr(),function(v,m,p){return c(v,p)},[r]),ap(Ku(),function(v,m,p){return c(v,p)},[r]),ap(Zh(),function(v,m,p){p.mouseIsDown.get()&&c(v,p)},[r])])}})}})},U6=rg("top-left"),W6=rg("top"),sD=rg("top-right"),lD=rg("right"),fD=rg("bottom-right"),wx=rg("bottom"),j6=rg("bottom-left"),vD=rg("left"),q6=uu({name:"thumb",defaults:re({dom:{styles:{position:"absolute"}}}),overrides:function(t){return{events:xa([nm(Tr(),t,"spectrum"),nm(Cr(),t,"spectrum"),nm(fr(),t,"spectrum"),nm(Ku(),t,"spectrum"),nm(Zh(),t,"spectrum"),nm(ls(),t,"spectrum")])}}}),G6=uu({schema:[ho("mouseIsDown",function(){return Bn(!1)})],name:"spectrum",overrides:function(t){var r=t.model,o=r.manager,c=function(v,m){return o.getValueFromEvent(m).map(function(p){return o.setValueFrom(v,t,p)})};return{behaviours:Pt([Pn.config({mode:"special",onLeft:function(v){return o.onLeft(v,t)},onRight:function(v){return o.onRight(v,t)},onUp:function(v){return o.onUp(v,t)},onDown:function(v){return o.onDown(v,t)}}),Qn.config({})]),events:xa([ot(Tr(),c),ot(Cr(),c),ot(Ku(),c),ot(Zh(),function(v,m){t.mouseIsDown.get()&&c(v,m)})])}}}),K6=[V6,vD,lD,W6,wx,U6,sD,j6,fD,q6,G6],X6="slider.change.value",ag=re(X6),Y6=function(t){return t.type.indexOf("touch")!==-1},ek=function(t){var r=t.event.raw;if(Y6(r)){var o=r;return o.touches!==void 0&&o.touches.length===1?D.some(o.touches[0]).map(function(v){return Qa(v.clientX,v.clientY)}):D.none()}else{var c=r;return c.clientX!==void 0?D.some(c).map(function(v){return Qa(v.clientX,v.clientY)}):D.none()}},Id="top",J6="right",E0="bottom",dD="left",$d=function(t){return t.model.minX},Oh=function(t){return t.model.minY},Cx=function(t){return t.model.minX-1},Sx=function(t){return t.model.minY-1},og=function(t){return t.model.maxX},Dh=function(t){return t.model.maxY},Rh=function(t){return t.model.maxX+1},xx=function(t){return t.model.maxY+1},Zc=function(t,r,o){return r(t)-o(t)},tk=function(t){return Zc(t,og,$d)},nk=function(t){return Zc(t,Dh,Oh)},rk=function(t){return tk(t)/2},ak=function(t){return nk(t)/2},k0=function(t){return t.stepSize},mD=function(t){return t.snapToGrid},gD=function(t){return t.snapStart},hD=function(t){return t.rounded},Tx=function(t,r){return t[r+"-edge"]!==void 0},pD=function(t){return Tx(t,dD)},bD=function(t){return Tx(t,J6)},ok=function(t){return Tx(t,Id)},yD=function(t){return Tx(t,E0)},zd=function(t){return t.model.value.get()},wD=function(t){return{x:t}},ik=function(t){return{y:t}},Cf=function(t,r){return{x:t,y:r}},Ll=function(t,r){sn(t,ag(),{value:r})},Ex=function(t,r){Ll(t,Cf(Cx(r),Sx(r)))},A0=function(t,r){Ll(t,ik(Sx(r)))},CD=function(t,r){Ll(t,Cf(rk(r),Sx(r)))},SD=function(t,r){Ll(t,Cf(Rh(r),Sx(r)))},xD=function(t,r){Ll(t,wD(Rh(r)))},Z6=function(t,r){Ll(t,Cf(Rh(r),ak(r)))},Q6=function(t,r){Ll(t,Cf(Rh(r),xx(r)))},kx=function(t,r){Ll(t,ik(xx(r)))},eF=function(t,r){Ll(t,Cf(rk(r),xx(r)))},tF=function(t,r){Ll(t,Cf(Cx(r),xx(r)))},TD=function(t,r){Ll(t,wD(Cx(r)))},ED=function(t,r){Ll(t,Cf(Cx(r),ak(r)))},H2=function(t,r,o,c){return t<r?t:t>o?o:t===r?r-1:Math.max(r,t-c)},Ax=function(t,r,o,c){return t>o?t:t<r?r:t===o?o+1:Math.min(o,t+c)},Hu=function(t,r,o){return Math.max(r,Math.min(o,t))},kD=function(t,r,o,c,v){return v.fold(function(){var m=t-r,p=Math.round(m/c)*c;return Hu(r+p,r-1,o+1)},function(m){var p=(t-m)%c,w=Math.round(p/c),S=Math.floor((t-m)/c),T=Math.floor((o-m)/c),R=Math.min(T,S+w),O=m+R*c;return Math.max(m,O)})},nF=function(t,r,o){return Math.min(o,Math.max(t,r))-r},AD=function(t){var r=t.min,o=t.max,c=t.range,v=t.value,m=t.step,p=t.snap,w=t.snapStart,S=t.rounded,T=t.hasMinEdge,R=t.hasMaxEdge,O=t.minBound,N=t.maxBound,L=t.screenRange,q=T?r-1:r,X=R?o+1:o;if(v<O)return q;if(v>N)return X;var ge=nF(v,O,N),ne=Hu(ge/L*c+r,q,X);return p&&ne>=r&&ne<=o?kD(ne,r,o,m,w):S?Math.round(ne):ne},uk=function(t){var r=t.min,o=t.max,c=t.range,v=t.value,m=t.hasMinEdge,p=t.hasMaxEdge,w=t.maxBound,S=t.maxOffset,T=t.centerMinEdge,R=t.centerMaxEdge;return v<r?m?0:T:v>o?p?w:R:(v-r)/c*S},ck="top",OD="right",DD="bottom",Ox="left",kv="width",sk="height",Sf=function(t){return t.element.dom.getBoundingClientRect()},Qc=function(t,r){return t[r]},O0=function(t){var r=Sf(t);return Qc(r,Ox)},RD=function(t){var r=Sf(t);return Qc(r,OD)},Dx=function(t){var r=Sf(t);return Qc(r,ck)},BD=function(t){var r=Sf(t);return Qc(r,DD)},_D=function(t){var r=Sf(t);return Qc(r,kv)},MD=function(t){var r=Sf(t);return Qc(r,sk)},Rx=function(t,r,o){return(t+r)/2-o},FD=function(t,r){var o=Sf(t),c=Sf(r),v=Qc(o,Ox),m=Qc(o,OD),p=Qc(c,Ox);return Rx(v,m,p)},lk=function(t,r){var o=Sf(t),c=Sf(r),v=Qc(o,ck),m=Qc(o,DD),p=Qc(c,ck);return Rx(v,m,p)},Bx=function(t,r){sn(t,ag(),{value:r})},Ys=function(t){return{x:t}},D0=function(t,r,o){var c={min:$d(r),max:og(r),range:tk(r),value:o,step:k0(r),snap:mD(r),snapStart:gD(r),rounded:hD(r),hasMinEdge:pD(r),hasMaxEdge:bD(r),minBound:O0(t),maxBound:RD(t),screenRange:_D(t)};return AD(c)},rF=function(t,r,o){var c=D0(t,r,o),v=Ys(c);return Bx(t,v),c},aF=function(t,r){var o=$d(r);Bx(t,Ys(o))},PD=function(t,r){var o=og(r);Bx(t,Ys(o))},ND=function(t,r,o){var c=t>0?Ax:H2,v=c(zd(o).x,$d(o),og(o),k0(o));return Bx(r,Ys(v)),D.some(v)},_x=function(t){return function(r,o){return ND(t,r,o).map(ut)}},ID=function(t){var r=ek(t);return r.map(function(o){return o.left})},V2=function(t,r,o,c,v){var m=0,p=_D(t),w=c.bind(function(R){return D.some(FD(R,t))}).getOr(m),S=v.bind(function(R){return D.some(FD(R,t))}).getOr(p),T={min:$d(r),max:og(r),range:tk(r),value:o,hasMinEdge:pD(r),hasMaxEdge:bD(r),minBound:O0(t),minOffset:m,maxBound:RD(t),maxOffset:p,centerMinEdge:w,centerMaxEdge:S};return uk(T)},Bh=function(t,r,o,c,v,m){var p=V2(r,m,o,c,v);return O0(r)-O0(t)+p},oF=function(t,r,o,c){var v=zd(o),m=Bh(t,c.getSpectrum(t),v.x,c.getLeftEdge(t),c.getRightEdge(t),o),p=ii(r.element)/2;yr(r.element,"left",m-p+"px")},iF=_x(-1),uF=_x(1),cF=D.none,sF=D.none,lF={"top-left":D.none(),top:D.none(),"top-right":D.none(),right:D.some(xD),"bottom-right":D.none(),bottom:D.none(),"bottom-left":D.none(),left:D.some(TD)},fF=Object.freeze({__proto__:null,setValueFrom:rF,setToMin:aF,setToMax:PD,findValueOfOffset:D0,getValueFromEvent:ID,findPositionOfValue:Bh,setPositionFromValue:oF,onLeft:iF,onRight:uF,onUp:cF,onDown:sF,edgeActions:lF}),R0=function(t,r){sn(t,ag(),{value:r})},Av=function(t){return{y:t}},fk=function(t,r,o){var c={min:Oh(r),max:Dh(r),range:nk(r),value:o,step:k0(r),snap:mD(r),snapStart:gD(r),rounded:hD(r),hasMinEdge:ok(r),hasMaxEdge:yD(r),minBound:Dx(t),maxBound:BD(t),screenRange:MD(t)};return AD(c)},$D=function(t,r,o){var c=fk(t,r,o),v=Av(c);return R0(t,v),c},vF=function(t,r){var o=Oh(r);R0(t,Av(o))},dF=function(t,r){var o=Dh(r);R0(t,Av(o))},mF=function(t,r,o){var c=t>0?Ax:H2,v=c(zd(o).y,Oh(o),Dh(o),k0(o));return R0(r,Av(v)),D.some(v)},zD=function(t){return function(r,o){return mF(t,r,o).map(ut)}},gF=function(t){var r=ek(t);return r.map(function(o){return o.top})},LD=function(t,r,o,c,v){var m=0,p=MD(t),w=c.bind(function(R){return D.some(lk(R,t))}).getOr(m),S=v.bind(function(R){return D.some(lk(R,t))}).getOr(p),T={min:Oh(r),max:Dh(r),range:nk(r),value:o,hasMinEdge:ok(r),hasMaxEdge:yD(r),minBound:Dx(t),minOffset:m,maxBound:BD(t),maxOffset:p,centerMinEdge:w,centerMaxEdge:S};return uk(T)},U2=function(t,r,o,c,v,m){var p=LD(r,m,o,c,v);return Dx(r)-Dx(t)+p},hF=function(t,r,o,c){var v=zd(o),m=U2(t,c.getSpectrum(t),v.y,c.getTopEdge(t),c.getBottomEdge(t),o),p=Ti(r.element)/2;yr(r.element,"top",m-p+"px")},HD=D.none,vk=D.none,dk=zD(-1),VD=zD(1),pF={"top-left":D.none(),top:D.some(A0),"top-right":D.none(),right:D.none(),"bottom-right":D.none(),bottom:D.some(kx),"bottom-left":D.none(),left:D.none()},Mx=Object.freeze({__proto__:null,setValueFrom:$D,setToMin:vF,setToMax:dF,findValueOfOffset:fk,getValueFromEvent:gF,findPositionOfValue:U2,setPositionFromValue:hF,onLeft:HD,onRight:vk,onUp:dk,onDown:VD,edgeActions:pF}),W2=function(t,r){sn(t,ag(),{value:r})},Fx=function(t,r){return{x:t,y:r}},bF=function(t,r,o){var c=D0(t,r,o.left),v=fk(t,r,o.top),m=Fx(c,v);return W2(t,m),m},yF=function(t,r,o,c){var v=t>0?Ax:H2,m=r?zd(c).x:v(zd(c).x,$d(c),og(c),k0(c)),p=r?v(zd(c).y,Oh(c),Dh(c),k0(c)):zd(c).y;return W2(o,Fx(m,p)),D.some(m)},Px=function(t,r){return function(o,c){return yF(t,r,o,c).map(ut)}},Ld=function(t,r){var o=$d(r),c=Oh(r);W2(t,Fx(o,c))},mk=function(t,r){var o=og(r),c=Dh(r);W2(t,Fx(o,c))},UD=function(t){return ek(t)},WD=function(t,r,o,c){var v=zd(o),m=Bh(t,c.getSpectrum(t),v.x,c.getLeftEdge(t),c.getRightEdge(t),o),p=U2(t,c.getSpectrum(t),v.y,c.getTopEdge(t),c.getBottomEdge(t),o),w=ii(r.element)/2,S=Ti(r.element)/2;yr(r.element,"left",m-w+"px"),yr(r.element,"top",p-S+"px")},gk=Px(-1,!1),jD=Px(1,!1),Nx=Px(-1,!0),qD=Px(1,!0),GD={"top-left":D.some(Ex),top:D.some(CD),"top-right":D.some(SD),right:D.some(Z6),"bottom-right":D.some(Q6),bottom:D.some(eF),"bottom-left":D.some(tF),left:D.some(ED)},wF=Object.freeze({__proto__:null,setValueFrom:bF,setToMin:Ld,setToMax:mk,getValueFromEvent:UD,setPositionFromValue:WD,onLeft:gk,onRight:jD,onUp:Nx,onDown:qD,edgeActions:GD}),CF=[xe("stepSize",1),xe("onChange",He),xe("onChoose",He),xe("onInit",He),xe("onDragStart",He),xe("onDragEnd",He),xe("snapToGrid",!1),xe("rounded",!0),W("snapStart"),po("model",Ln("mode",{x:[xe("minX",0),xe("maxX",100),ho("value",function(t){return Bn(t.mode.minX)}),nt("getInitialValue"),sa("manager",fF)],y:[xe("minY",0),xe("maxY",100),ho("value",function(t){return Bn(t.mode.minY)}),nt("getInitialValue"),sa("manager",Mx)],xy:[xe("minX",0),xe("maxX",100),xe("minY",0),xe("maxY",100),ho("value",function(t){return Bn({x:t.mode.minX,y:t.mode.minY})}),nt("getInitialValue"),sa("manager",wF)]})),Vo("sliderBehaviours",[Pn,Vt]),ho("mouseIsDown",function(){return Bn(!1)})],SF=function(t,r,o,c){var v,m=function(_e){return _l(_e,t,"thumb")},p=function(_e){return _l(_e,t,"spectrum")},w=function(_e){return ya(_e,t,"left-edge")},S=function(_e){return ya(_e,t,"right-edge")},T=function(_e){return ya(_e,t,"top-edge")},R=function(_e){return ya(_e,t,"bottom-edge")},O=t.model,N=O.manager,L=function(_e,Ke){N.setPositionFromValue(_e,Ke,t,{getLeftEdge:w,getRightEdge:S,getTopEdge:T,getBottomEdge:R,getSpectrum:p})},q=function(_e,Ke){O.value.set(Ke);var Pe=m(_e);L(_e,Pe)},X=function(_e,Ke){q(_e,Ke);var Pe=m(_e);return t.onChange(_e,Pe,Ke),D.some(!0)},ge=function(_e){N.setToMin(_e,t)},ne=function(_e){N.setToMax(_e,t)},ye=function(_e){var Ke=function(){ya(_e,t,"thumb").each(function(ct){var Bt=O.value.get();t.onChoose(_e,ct,Bt)})},Pe=t.mouseIsDown.get();t.mouseIsDown.set(!1),Pe&&Ke()},he=function(_e,Ke){Ke.stop(),t.mouseIsDown.set(!0),t.onDragStart(_e,m(_e))},Ve=function(_e,Ke){Ke.stop(),t.onDragEnd(_e,m(_e)),ye(_e)};return{uid:t.uid,dom:t.dom,components:r,behaviours:Ai(t.sliderBehaviours,[Pn.config({mode:"special",focusIn:function(_e){return ya(_e,t,"spectrum").map(Pn.focusIn).map(ut)}}),Vt.config({store:{mode:"manual",getValue:function(_e){return O.value.get()}}}),yc.config({channels:(v={},v[yy()]={onReceive:ye},v)})]),events:xa([ot(ag(),function(_e,Ke){X(_e,Ke.event.value)}),Ta(function(_e,Ke){var Pe=O.getInitialValue();O.value.set(Pe);var ct=m(_e);L(_e,ct);var Bt=p(_e);t.onInit(_e,ct,Bt,O.value.get())}),ot(Tr(),he),ot(fr(),Ve),ot(Ku(),he),ot(ls(),Ve)]),apis:{resetToMin:ge,resetToMax:ne,setValue:q,refresh:L},domModification:{styles:{position:"relative"}}}},Hl=mu({name:"Slider",configFields:CF,partFields:K6,factory:SF,apis:{setValue:function(t,r,o){t.setValue(r,o)},resetToMin:function(t,r){t.resetToMin(r)},resetToMax:function(t,r){t.resetToMax(r)},refresh:function(t,r){t.refresh(r)}}}),Ix=bn("rgb-hex-update"),hk=bn("slider-update"),KD=bn("palette-update"),xF=function(t,r){var o=Hl.parts.spectrum({dom:{tag:"div",classes:[r("hue-slider-spectrum")],attributes:{role:"presentation"}}}),c=Hl.parts.thumb({dom:{tag:"div",classes:[r("hue-slider-thumb")],attributes:{role:"presentation"}}});return Hl.sketch({dom:{tag:"div",classes:[r("hue-slider")],attributes:{role:"presentation"}},rounded:!1,model:{mode:"y",getInitialValue:re({y:0})},components:[o,c],sliderBehaviours:Pt([Qn.config({})]),onChange:function(v,m,p){sn(v,hk,{value:p})}})},XD="form",$x=[Vo("formBehaviours",[Vt])],YD=function(t){return"<alloy.field."+t+">"},TF=function(t){var r=function(){var m=[],p=function(w,S){return m.push(w),Dy(XD,YD(w),S)};return{field:p,record:re(m)}}(),o=t(r),c=r.record(),v=yt(c,function(m){return uu({name:m,pname:YD(m)})});return My(XD,$x,v,ZD,o)},JD=function(t,r){return t.fold(function(){return mn.error(r)},mn.value)},ZD=function(t,r){return{uid:t.uid,dom:t.dom,components:r,behaviours:Ai(t.formBehaviours,[Vt.config({store:{mode:"manual",getValue:function(o){var c=jC(o,t);return Gr(c,function(v,m){return v().bind(function(p){var w=Dr.getCurrent(p);return JD(w,new Error("Cannot find a current component to extract the value from for form part '"+m+"': "+Jf(p.element)))}).map(Vt.getValue)})},setValue:function(o,c){Sa(c,function(v,m){ya(o,t,m).each(function(p){Dr.getCurrent(p).each(function(w){Vt.setValue(w,v)})})})}}})]),apis:{getField:function(o,c){return ya(o,t,c).bind(Dr.getCurrent)}}}},B0={getField:Iu(function(t,r,o){return t.getField(r,o)}),sketch:TF},QD=bn("valid-input"),j2=bn("invalid-input"),eR=bn("validating-input"),pk="colorcustom.rgb.",EF=function(t,r,o,c){var v=function(N,L){return yf.config({invalidClass:r("invalid"),notify:{onValidate:function(q){sn(q,eR,{type:N})},onValid:function(q){sn(q,QD,{type:N,value:Vt.getValue(q)})},onInvalid:function(q){sn(q,j2,{type:N,value:Vt.getValue(q)})}},validator:{validate:function(q){var X=Vt.getValue(q),ge=L(X)?mn.value(!0):mn.error(t("aria.input.invalid"));return pu.pure(ge)},validateOnLoad:!1}})},m=function(N,L,q,X,ge){var ne=t(pk+"range"),ye=Xr.parts.label({dom:{tag:"label",innerHtml:q,attributes:{"aria-label":X}}}),he=Xr.parts.field({data:ge,factory:$2,inputAttributes:me({type:"text"},L==="hex"?{"aria-live":"polite"}:{}),inputClasses:[r("textfield")],inputBehaviours:Pt([v(L,N),La.config({})]),onSetValue:function(Pe){if(yf.isInvalid(Pe)){var ct=yf.run(Pe);ct.get(He)}}}),Ve=[ye,he],_e=L!=="hex"?[Xr.parts["aria-descriptor"]({text:ne})]:[],Ke=Ve.concat(_e);return{dom:{tag:"div",attributes:{role:"presentation"}},components:Ke}},p=function(N,L){var q=B2(L);return B0.getField(N,"hex").each(function(X){Qn.isFocused(X)||Vt.setValue(N,{hex:q.value})}),q},w=function(N,L){var q=L.red,X=L.green,ge=L.blue;Vt.setValue(N,{red:q,green:X,blue:ge})},S=ea({dom:{tag:"div",classes:[r("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),T=function(N,L){S.getOpt(N).each(function(q){yr(q.element,"background-color","#"+L.value)})},R=function(){var N={red:Bn(D.some(255)),green:Bn(D.some(255)),blue:Bn(D.some(255)),hex:Bn(D.some("ffffff"))},L=function(dt,ln){var Hn=_2(ln);w(dt,Hn),ne(Hn)},q=function(dt){return N[dt].get()},X=function(dt,ln){N[dt].set(ln)},ge=function(){return q("red").bind(function(dt){return q("green").bind(function(ln){return q("blue").map(function(Hn){return Qm(dt,ln,Hn,1)})})})},ne=function(dt){var ln=dt.red,Hn=dt.green,Ct=dt.blue;X("red",D.some(ln)),X("green",D.some(Hn)),X("blue",D.some(Ct))},ye=function(dt,ln){var Hn=ln.event;Hn.type!=="hex"?X(Hn.type,D.none()):c(dt)},he=function(dt,ln){o(dt);var Hn=cO(ln);X("hex",D.some(ln));var Ct=_2(Hn);w(dt,Ct),ne(Ct),sn(dt,Ix,{hex:Hn}),T(dt,Hn)},Ve=function(dt,ln,Hn){var Ct=parseInt(Hn,10);X(ln,D.some(Ct)),ge().each(function(En){var zn=p(dt,En);sn(dt,Ix,{hex:zn}),T(dt,zn)})},_e=function(dt){return dt.type==="hex"},Ke=function(dt,ln){var Hn=ln.event;_e(Hn)?he(dt,Hn.value):Ve(dt,Hn.type,Hn.value)},Pe=function(dt){return{label:t(pk+dt+".label"),description:t(pk+dt+".description")}},ct=Pe("red"),Bt=Pe("green"),Qt=Pe("blue"),vt=Pe("hex");return gr(B0.sketch(function(dt){return{dom:{tag:"form",classes:[r("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[dt.field("red",Xr.sketch(m(x4,"red",ct.label,ct.description,255))),dt.field("green",Xr.sketch(m(x4,"green",Bt.label,Bt.description,255))),dt.field("blue",Xr.sketch(m(x4,"blue",Qt.label,Qt.description,255))),dt.field("hex",Xr.sketch(m(fO,"hex",vt.label,vt.description,"ffffff"))),S.asSpec()],formBehaviours:Pt([yf.config({invalidClass:r("form-invalid")}),lr("rgb-form-events",[ot(QD,Ke),ot(j2,ye),ot(eR,ye)])])}}),{apis:{updateHex:function(dt,ln){Vt.setValue(dt,{hex:ln.value}),L(dt,ln),T(dt,ln)}}})},O=xc({factory:R,name:"RgbForm",configFields:[],apis:{updateHex:function(N,L,q){N.updateHex(L,q)}},extraApis:{}});return O},kF=function(t,r){var o=Hl.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[r("sv-palette-spectrum")]}}),c=Hl.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[r("sv-palette-thumb")],innerHtml:"<div class="+r("sv-palette-inner-thumb")+' role="presentation"></div>'}}),v=function(T,R){var O=T.width,N=T.height,L=T.getContext("2d");if(L!==null){L.fillStyle=R,L.fillRect(0,0,O,N);var q=L.createLinearGradient(0,0,O,0);q.addColorStop(0,"rgba(255,255,255,1)"),q.addColorStop(1,"rgba(255,255,255,0)"),L.fillStyle=q,L.fillRect(0,0,O,N);var X=L.createLinearGradient(0,0,0,N);X.addColorStop(0,"rgba(0,0,0,0)"),X.addColorStop(1,"rgba(0,0,0,1)"),L.fillStyle=X,L.fillRect(0,0,O,N)}},m=function(T,R){var O=T.components()[0].element.dom,N=C0(R,100,100),L=T4(N);v(O,E4(L))},p=function(T,R){var O=k4(_2(R));Hl.setValue(T,{x:O.saturation,y:100-O.value})},w=function(T){var R=re({x:0,y:0}),O=function(q,X,ge){sn(q,KD,{value:ge})},N=function(q,X,ge,ne){v(ge.element.dom,E4(hO))},L=Pt([Dr.config({find:D.some}),Qn.config({})]);return Hl.sketch({dom:{tag:"div",attributes:{role:"presentation"},classes:[r("sv-palette")]},model:{mode:"xy",getInitialValue:R},rounded:!1,components:[o,c],onChange:O,onInit:N,sliderBehaviours:L})},S=xc({factory:w,name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:function(T,R,O){m(R,O)},setThumb:function(T,R,O){p(R,O)}},extraApis:{}});return S},zx=function(t,r){var o=function(v){var m=EF(t,r,v.onValidHex,v.onInvalidHex),p=kF(t,r),w=function(Ke){return(100-Ke)/100*360},S=function(Ke){return 100-Ke/360*100},T={paletteRgba:Bn(hO),paletteHue:Bn(0)},R=ea(xF(t,r)),O=ea(p.sketch({})),N=ea(m.sketch({})),L=function(Ke,Pe,ct){O.getOpt(Ke).each(function(Bt){p.setHue(Bt,ct)})},q=function(Ke,Pe){N.getOpt(Ke).each(function(ct){m.updateHex(ct,Pe)})},X=function(Ke,Pe,ct){R.getOpt(Ke).each(function(Bt){Hl.setValue(Bt,{y:S(ct)})})},ge=function(Ke,Pe){O.getOpt(Ke).each(function(ct){p.setThumb(ct,Pe)})},ne=function(Ke,Pe){var ct=_2(Ke);T.paletteRgba.set(ct),T.paletteHue.set(Pe)},ye=function(Ke,Pe,ct,Bt){ne(Pe,ct),Jt(Bt,function(Qt){Qt(Ke,Pe,ct)})},he=function(){var Ke=[q];return function(Pe,ct){var Bt=ct.event.value,Qt=T.paletteHue.get(),vt=C0(Qt,Bt.x,100-Bt.y),dt=yO(vt);ye(Pe,dt,Qt,Ke)}},Ve=function(){var Ke=[L,q];return function(Pe,ct){var Bt=w(ct.event.value.y),Qt=T.paletteRgba.get(),vt=k4(Qt),dt=C0(Bt,vt.saturation,vt.value),ln=yO(dt);ye(Pe,ln,Bt,Ke)}},_e=function(){var Ke=[L,X,ge];return function(Pe,ct){var Bt=ct.event.hex,Qt=bO(Bt);ye(Pe,Bt,Qt.hue,Ke)}};return{uid:v.uid,dom:v.dom,components:[O.asSpec(),R.asSpec(),N.asSpec()],behaviours:Pt([lr("colour-picker-events",[ot(Ix,_e()),ot(KD,he()),ot(hk,Ve())]),Dr.config({find:function(Ke){return N.getOpt(Ke)}}),Pn.config({mode:"acyclic"})])}},c=xc({name:"ColourPicker",configFields:[nt("dom"),xe("onValidHex",He),xe("onInvalidHex",He)],factory:o});return c},bk=function(){return Dr.config({find:D.some})},AF=function(t){return Dr.config({find:t.getOpt})},OF=function(t){return Dr.config({find:function(r){return am(r.element,t).bind(function(o){return r.getSystem().getByDom(o).toOptional()})}})},ys={self:bk,memento:AF,childAt:OF},DF={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.sb.saturation":"Saturation","colorcustom.sb.brightness":"Brightness","colorcustom.sb.picker":"Saturation and Brightness Picker","colorcustom.sb.palette":"Saturation and Brightness Palette","colorcustom.sb.instructions":"Use arrow keys to select saturation and brightness, on x and y axes","colorcustom.hue.hue":"Hue","colorcustom.hue.slider":"Hue Slider","colorcustom.hue.palette":"Hue Palette","colorcustom.hue.instructions":"Use arrow keys to select a hue","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},yk=function(t){return DF[t]},tR=function(t){return yk(t)},RF=function(t){var r=function(p){return"tox-"+p},o=zx(tR,r),c=function(p){sn(p,Ev,{name:"hex-valid",value:!0})},v=function(p){sn(p,Ev,{name:"hex-valid",value:!1})},m=ea(o.sketch({dom:{tag:"div",classes:[r("color-picker-container")],attributes:{role:"presentation"}},onValidHex:c,onInvalidHex:v}));return{dom:{tag:"div"},components:[m.asSpec()],behaviours:Pt([Vt.config({store:{mode:"manual",getValue:function(p){var w=m.get(p),S=Dr.getCurrent(w),T=S.bind(function(R){var O=Vt.getValue(R);return O.hex});return T.map(function(R){return"#"+R}).getOr("")},setValue:function(p,w){var S=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,T=S.exec(w),R=m.get(p),O=Dr.getCurrent(R);O.fold(function(){console.log("Can not find form")},function(N){Vt.setValue(N,{hex:D.from(T[1]).getOr("")}),B0.getField(N,"hex").each(function(L){zr(L,ol())})})}}}),ys.self()])}},BF=tinymce.util.Tools.resolve("tinymce.Resource"),nR=function(t){return Xn(t,"init")},rR=function(t){var r=ro(),o=ea({dom:{tag:t.tag}}),c=ro();return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:Pt([lr("custom-editor-events",[Ta(function(v){o.getOpt(v).each(function(m){(nR(t)?t.init(m.element.dom):BF.load(t.scriptId,t.scriptUrl).then(function(p){return p(m.element.dom,t.settings)})).then(function(p){c.on(function(w){p.setValue(w)}),c.clear(),r.set(p)})})})]),Vt.config({store:{mode:"manual",getValue:function(){return r.get().fold(function(){return c.get().getOr("")},function(v){return v.getValue()})},setValue:function(v,m){r.get().fold(function(){c.set(m)},function(p){return p.setValue(m)})}}}),ys.self()]),components:[o.asSpec()]}},ic=tinymce.util.Tools.resolve("tinymce.util.Tools"),aR=De([xe("preprocess",Te),xe("postprocess",Te)]),oR=function(t,r){var o=Ia("RepresentingConfigs.memento processors",aR,r);return Vt.config({store:{mode:"manual",getValue:function(c){var v=t.get(c),m=Vt.getValue(v);return o.postprocess(m)},setValue:function(c,v){var m=o.preprocess(v),p=t.get(c);Vt.setValue(p,m)}}})},wk=function(t,r,o){return Vt.config(gr({store:{mode:"manual",getValue:r,setValue:o}},t.map(function(c){return{store:{initialValue:c}}}).getOr({})))},Lx=function(t,r,o){return wk(t,function(c){return r(c.element)},function(c,v){return o(c.element,v)})},_F=function(t){return Lx(t,Qf,pl)},MF=function(t){return Lx(t,sb,Bs)},FF=function(t){return Vt.config({store:{mode:"memory",initialValue:t}})},ig={memento:oR,withElement:Lx,withComp:wk,domValue:_F,domHtml:MF,memory:FF},PF="jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp",iR=function(t,r){var o=ic.explode(r.getSetting("images_file_types",PF,"string")),c=function(v){return la(o,function(m){return Es(v.name.toLowerCase(),"."+m.toLowerCase())})};return rt(Xo(t),c)},NF=function(t,r){var o=function(O,N){N.stop()},c=function(O){return function(N,L){Jt(O,function(q){q(N,L)})}},v=function(O,N){if(!Tn.isDisabled(O)){var L=N.event.raw;p(O,L.dataTransfer.files)}},m=function(O,N){var L=N.event.raw.target;p(O,L.files)},p=function(O,N){Vt.setValue(O,iR(N,r)),sn(O,Tc,{name:t.name})},w=ea({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:Pt([lr("input-file-events",[cl(xg()),cl(Tg())])])}),S=function(O){return{uid:O.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:Pt([ig.memory([]),ys.self(),Tn.config({}),A.config({toggleClass:"dragenter",toggleOnExecute:!1}),lr("dropzone-events",[ot("dragenter",c([o,A.toggle])),ot("dragleave",c([o,A.toggle])),ot("dragover",o),ot("drop",c([o,v])),ot(Lf(),m)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p",innerHtml:r.translate("Drop an image here")}},ac.sketch({dom:{tag:"button",innerHtml:r.translate("Browse for an image"),styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[w.asSpec()],action:function(N){var L=w.get(N);L.element.dom.click()},buttonBehaviours:Pt([La.config({}),Yc.button(r.isDisabled),Uo()])})]}]}},T=t.label.map(function(O){return Tv(O,r)}),R=Xr.parts.field({factory:{sketch:S}});return T0(T,R,["tox-form__group--stretched"],[])},IF=function(t,r){return{dom:{tag:"div",classes:["tox-form__grid","tox-form__grid--"+t.columns+"col"]},components:yt(t.items,r.interpreter)}},q2=bn("alloy-fake-before-tabstop"),Ck=bn("alloy-fake-after-tabstop"),uR=function(t){return{dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:Pt([Qn.config({ignore:!0}),La.config({})])}},cR=function(t){return{dom:{tag:"div",classes:["tox-navobj"]},components:[uR([q2]),t,uR([Ck])],behaviours:Pt([ys.childAt(1)])}},sR=function(t,r){sn(t,Sg(),{raw:{which:9,shiftKey:r}})},$F=function(t,r){var o=r.element;Co(o,q2)?sR(t,!0):Co(o,Ck)&&sR(t,!1)},G2=function(t){return Fd(t,["."+q2,"."+Ck].join(","),rn)},zF=!(Ni().browser.isIE()||Ni().browser.isEdge()),lR=function(t){var r=Bn("");return{getValue:function(o){return r.get()},setValue:function(o,c){if(t)kr(o.element,"srcdoc",c);else{kr(o.element,"src","javascript:''");var v=o.element.dom.contentWindow.document;v.open(),v.write(c),v.close()}r.set(c)}}},LF=function(t,r){var o=zF&&t.sandboxed,c=me(me({},t.label.map(function(S){return{title:S}}).getOr({})),o?{sandbox:"allow-scripts allow-same-origin"}:{}),v=lR(o),m=t.label.map(function(S){return Tv(S,r)}),p=function(S){return cR({uid:S.uid,dom:{tag:"iframe",attributes:c},behaviours:Pt([La.config({}),Qn.config({}),ig.withComp(D.none(),v.getValue,v.setValue)])})},w=Xr.parts.field({factory:{sketch:p}});return T0(m,w,["tox-form__group--stretched"],[])},_0=function(t,r){return HF(document.createElement("canvas"),t,r)},fR=function(t){var r=_0(t.width,t.height),o=Hd(r);return o.drawImage(t,0,0),r},Hd=function(t){return t.getContext("2d")},HF=function(t,r,o){return t.width=r,t.height=o,t},Sk=function(t){return t.naturalWidth||t.width},Hx=function(t){return t.naturalHeight||t.height},VF=function(){var t=function(O){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");if(typeof O!="function")throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],R(O,c(p,this),c(w,this))},r=window,o=t.immediateFn||typeof r.setImmediate=="function"&&r.setImmediate||function(O){return setTimeout(O,1)},c=function(O,N){return function(){for(var L=[],q=0;q<arguments.length;q++)L[q]=arguments[q];return O.apply(N,L)}},v=Array.isArray||function(O){return Object.prototype.toString.call(O)==="[object Array]"};function m(O){var N=this;if(this._state===null){this._deferreds.push(O);return}o(function(){var L=N._state?O.onFulfilled:O.onRejected;if(L===null){(N._state?O.resolve:O.reject)(N._value);return}var q;try{q=L(N._value)}catch(X){O.reject(X);return}O.resolve(q)})}function p(O){try{if(O===this)throw new TypeError("A promise cannot be resolved with itself.");if(O&&(typeof O=="object"||typeof O=="function")){var N=O.then;if(typeof N=="function"){R(c(N,O),c(p,this),c(w,this));return}}this._state=!0,this._value=O,S.call(this)}catch(L){w.call(this,L)}}function w(O){this._state=!1,this._value=O,S.call(this)}function S(){for(var O=0,N=this._deferreds;O<N.length;O++){var L=N[O];m.call(this,L)}this._deferreds=[]}function T(O,N,L,q){this.onFulfilled=typeof O=="function"?O:null,this.onRejected=typeof N=="function"?N:null,this.resolve=L,this.reject=q}var R=function(O,N,L){var q=!1;try{O(function(X){q||(q=!0,N(X))},function(X){q||(q=!0,L(X))})}catch(X){if(q)return;q=!0,L(X)}};return t.prototype.catch=function(O){return this.then(null,O)},t.prototype.then=function(O,N){var L=this;return new t(function(q,X){m.call(L,new T(O,N,q,X))})},t.all=function(){for(var O=[],N=0;N<arguments.length;N++)O[N]=arguments[N];var L=Array.prototype.slice.call(O.length===1&&v(O[0])?O[0]:O);return new t(function(q,X){if(L.length===0)return q([]);for(var ge=L.length,ne=function(he,Ve){try{if(Ve&&(typeof Ve=="object"||typeof Ve=="function")){var _e=Ve.then;if(typeof _e=="function"){_e.call(Ve,function(Ke){ne(he,Ke)},X);return}}L[he]=Ve,--ge==0&&q(L)}catch(Ke){X(Ke)}},ye=0;ye<L.length;ye++)ne(ye,L[ye])})},t.resolve=function(O){return O&&typeof O=="object"&&O.constructor===t?O:new t(function(N){N(O)})},t.reject=function(O){return new t(function(N,L){L(O)})},t.race=function(O){return new t(function(N,L){for(var q=0,X=O;q<X.length;q++){var ge=X[q];ge.then(N,L)}})},t},_h=window.Promise?window.Promise:VF(),vR=function(t){return new _h(function(r,o){var c=URL.createObjectURL(t),v=new Image,m=function(){v.removeEventListener("load",p),v.removeEventListener("error",w)},p=function(){m(),r(v)},w=function(){m(),o("Unable to load data of type "+t.type+": "+c)};v.addEventListener("load",p),v.addEventListener("error",w),v.src=c,v.complete&&setTimeout(p,0)})},dR=function(t){var r=t.split(","),o=/data:([^;]+)/.exec(r[0]);if(!o)return D.none();for(var c=o[1],v=r[1],m=1024,p=atob(v),w=p.length,S=Math.ceil(w/m),T=new Array(S),R=0;R<S;++R){for(var O=R*m,N=Math.min(O+m,w),L=new Array(N-O),q=O,X=0;q<N;++X,++q)L[X]=p[q].charCodeAt(0);T[R]=new Uint8Array(L)}return D.some(new Blob(T,{type:c}))},mR=function(t){return new _h(function(r,o){dR(t).fold(function(){o("uri is not base64: "+t)},r)})},gR=function(t,r,o){return r=r||"image/png",br(HTMLCanvasElement.prototype.toBlob)?new _h(function(c,v){t.toBlob(function(m){m?c(m):v()},r,o)}):mR(t.toDataURL(r,o))},hR=function(t,r,o){return r=r||"image/png",t.toDataURL(r,o)},pR=function(t){return vR(t).then(function(r){WF(r);var o=_0(Sk(r),Hx(r)),c=Hd(o);return c.drawImage(r,0,0),o})},UF=function(t){return new _h(function(r){var o=new FileReader;o.onloadend=function(){r(o.result)},o.readAsDataURL(t)})},WF=function(t){URL.revokeObjectURL(t.src)},bR=function(t,r,o){var c=r.type,v=re(c),m=function(){return _h.resolve(r)},p=re(o),w=function(){return o.split(",")[1]},S=function(N,L){return t.then(function(q){return gR(q,N,L)})},T=function(N,L){return t.then(function(q){return hR(q,N,L)})},R=function(N,L){return T(N,L).then(function(q){return q.split(",")[1]})},O=function(){return t.then(fR)};return{getType:v,toBlob:m,toDataURL:p,toBase64:w,toAdjustedBlob:S,toAdjustedDataURL:T,toAdjustedBase64:R,toCanvas:O}},jF=function(t){return UF(t).then(function(r){return bR(pR(t),t,r)})},Mh=function(t,r){return gR(t,r).then(function(o){return bR(_h.resolve(t),o,t.toDataURL())})},qF=function(t){return jF(t)},M0=function(t,r,o){var c=typeof t=="string"?parseFloat(t):t;return c>o?c=o:c<r&&(c=r),c},yR=function(){return[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1]},xk=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],Tk=function(t,r){for(var o=[],c=new Array(25),v,m=0;m<5;m++){for(var p=0;p<5;p++)o[p]=r[p+m*5];for(var p=0;p<5;p++){v=0;for(var w=0;w<5;w++)v+=t[p+w*5]*o[w];c[p+m*5]=v}}return c},Lr=function(t,r){var o;return r=M0(r,-1,1),r*=100,r<0?o=127+r/100*127:(o=r%1,o===0?o=xk[r]:o=xk[Math.floor(r)]*(1-o)+xk[Math.floor(r)+1]*o,o=o*127+127),Tk(t,[o/127,0,0,0,.5*(127-o),0,o/127,0,0,.5*(127-o),0,0,o/127,0,.5*(127-o),0,0,0,1,0,0,0,0,0,1])},F0=function(t,r){return r=M0(255*r,-255,255),Tk(t,[1,0,0,0,r,0,1,0,0,r,0,0,1,0,r,0,0,0,1,0,0,0,0,0,1])},wR=function(t,r,o,c){return r=M0(r,0,2),o=M0(o,0,2),c=M0(c,0,2),Tk(t,[r,0,0,0,0,0,o,0,0,0,0,0,c,0,0,0,0,0,1,0,0,0,0,0,1])},Vx=function(t,r){return t.toCanvas().then(function(o){return CR(o,t.getType(),r)})},CR=function(t,r,o){var c=Hd(t),v=function(p,w){for(var S,T,R,O,N=p.data,L=w[0],q=w[1],X=w[2],ge=w[3],ne=w[4],ye=w[5],he=w[6],Ve=w[7],_e=w[8],Ke=w[9],Pe=w[10],ct=w[11],Bt=w[12],Qt=w[13],vt=w[14],dt=w[15],ln=w[16],Hn=w[17],Ct=w[18],En=w[19],zn=0;zn<N.length;zn+=4)S=N[zn],T=N[zn+1],R=N[zn+2],O=N[zn+3],N[zn]=S*L+T*q+R*X+O*ge+ne,N[zn+1]=S*ye+T*he+R*Ve+O*_e+Ke,N[zn+2]=S*Pe+T*ct+R*Bt+O*Qt+vt,N[zn+3]=S*dt+T*ln+R*Hn+O*Ct+En;return p},m=v(c.getImageData(0,0,t.width,t.height),o);return c.putImageData(m,0,0),Mh(t,r)},GF=function(t,r){return t.toCanvas().then(function(o){return KF(o,t.getType(),r)})},KF=function(t,r,o){var c=Hd(t),v=function(w,S,T){for(var R=function(ln,Hn,Ct){return ln>Ct?ln=Ct:ln<Hn&&(ln=Hn),ln},O=Math.round(Math.sqrt(T.length)),N=Math.floor(O/2),L=w.data,q=S.data,X=w.width,ge=w.height,ne=0;ne<ge;ne++)for(var ye=0;ye<X;ye++){for(var he=0,Ve=0,_e=0,Ke=0;Ke<O;Ke++)for(var Pe=0;Pe<O;Pe++){var ct=R(ye+Pe-N,0,X-1),Bt=R(ne+Ke-N,0,ge-1),Qt=(Bt*X+ct)*4,vt=T[Ke*O+Pe];he+=L[Qt]*vt,Ve+=L[Qt+1]*vt,_e+=L[Qt+2]*vt}var dt=(ne*X+ye)*4;q[dt]=R(he,0,255),q[dt+1]=R(Ve,0,255),q[dt+2]=R(_e,0,255)}return S},m=c.getImageData(0,0,t.width,t.height),p=c.getImageData(0,0,t.width,t.height);return p=v(m,p,o),c.putImageData(p,0,0),Mh(t,r)},XF=function(t){var r=function(o,c,v){for(var m=Hd(o),p=new Array(256),w=function(R,O){for(var N=R.data,L=0;L<N.length;L+=4)N[L]=O[N[L]],N[L+1]=O[N[L+1]],N[L+2]=O[N[L+2]];return R},S=0;S<p.length;S++)p[S]=t(S,v);var T=w(m.getImageData(0,0,o.width,o.height),p);return m.putImageData(T,0,0),Mh(o,c)};return function(o,c){return o.toCanvas().then(function(v){return r(v,o.getType(),c)})}},Ek=function(t){return function(r,o){return Vx(r,t(yR(),o))}},YF=function(t){return function(r){return Vx(r,t)}},JF=function(t){return function(r){return GF(r,t)}},ZF=YF([-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0,0,0,0,0,1]),QF=Ek(F0),eP=Ek(Lr),tP=function(t,r,o,c){return Vx(t,wR(yR(),r,o,c))},nP=JF([0,-1,0,-1,5,-1,0,-1,0]),rP=XF(function(t,r){return Math.pow(t/255,1-r)*255}),SR=function(t,r,o){var c=Sk(t),v=Hx(t),m=r/c,p=o/v,w=!1;(m<.5||m>2)&&(m=m<.5?.5:2,w=!0),(p<.5||p>2)&&(p=p<.5?.5:2,w=!0);var S=aP(t,m,p);return w?S.then(function(T){return SR(T,r,o)}):S},aP=function(t,r,o){return new _h(function(c){var v=Sk(t),m=Hx(t),p=Math.floor(v*r),w=Math.floor(m*o),S=_0(p,w),T=Hd(S);T.drawImage(t,0,0,v,m,0,0,p,w),c(S)})},xR=function(t,r){r===void 0&&(r=2);var o=Math.pow(10,r),c=Math.round(t*o);return Math.ceil(c/o)},TR=function(t,r){return t.toCanvas().then(function(o){return oP(o,t.getType(),r)})},oP=function(t,r,o){var c=o<0?360+o:o,v=c*Math.PI/180,m=t.width,p=t.height,w=Math.sin(v),S=Math.cos(v),T=xR(Math.abs(m*S)+Math.abs(p*w)),R=xR(Math.abs(m*w)+Math.abs(p*S)),O=_0(T,R),N=Hd(O);return N.translate(T/2,R/2),N.rotate(v),N.drawImage(t,-m/2,-p/2),Mh(O,r)},iP=function(t,r){return t.toCanvas().then(function(o){return uP(o,t.getType(),r)})},uP=function(t,r,o){var c=_0(t.width,t.height),v=Hd(c);return o==="v"?(v.scale(1,-1),v.drawImage(t,0,-c.height)):(v.scale(-1,1),v.drawImage(t,-c.width,0)),Mh(c,r)},cP=function(t,r,o,c,v){return t.toCanvas().then(function(m){return sP(m,t.getType(),r,o,c,v)})},sP=function(t,r,o,c,v,m){var p=_0(v,m),w=Hd(p);return w.drawImage(t,-o,-c),Mh(p,r)},lP=function(t,r,o){return t.toCanvas().then(function(c){return SR(c,r,o).then(function(v){return Mh(v,t.getType())})})},ER=function(t){return ZF(t)},fP=function(t){return nP(t)},kR=function(t,r){return rP(t,r)},vP=function(t,r,o,c){return tP(t,r,o,c)},AR=function(t,r){return QF(t,r)},OR=function(t,r){return eP(t,r)},kk=function(t,r){return iP(t,r)},dP=function(t,r,o,c,v){return cP(t,r,o,c,v)},mP=function(t,r,o){return lP(t,r,o)},DR=function(t,r){return TR(t,r)},RR=function(t,r,o){return pf(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:o},r)},Ux=function(t,r){return RR(t,r,[])},BR=function(t,r){return RR(t,r,[nr.config({})])},Fh=function(t,r,o){return{dom:{tag:"span",innerHtml:o.translate(t),classes:[r+"__select-label"]},behaviours:Pt([nr.config({})])}},Ak,Wx=bn("toolbar.button.execute"),gP=function(t){return Pc(function(r,o){h0(t,r)(function(c){sn(r,Wx,{buttonApi:c}),t.onAction(c)})})},_R=(Ak={},Ak[Xu()]=["disabling","alloy.base.behaviour","toggling","toolbar-button-events"],Ak),P0=bn("update-menu-text"),MR=bn("update-menu-icon"),jx=function(t,r,o){var c=Bn(He),v=t.text.map(function(O){return ea(Fh(O,r,o.providers))}),m=t.icon.map(function(O){return ea(BR(O,o.providers.icons))}),p=function(O,N){var L=Vt.getValue(O);return Qn.focus(L),sn(L,"keydown",{raw:N.event.raw}),zl.close(L),D.some(!0)},w=t.role.fold(function(){return{}},function(O){return{role:O}}),S=t.tooltip.fold(function(){return{}},function(O){var N=o.providers.translate(O);return{title:N,"aria-label":N}}),T=pf("chevron-down",{tag:"div",classes:[r+"__select-chevron"]},o.providers.icons),R=ea(zl.sketch(me(me(me({},t.uid?{uid:t.uid}:{}),w),{dom:{tag:"button",classes:[r,r+"--select"].concat(yt(t.classes,function(O){return r+"--"+O})),attributes:me({},S)},components:b0([m.map(function(O){return O.asSpec()}),v.map(function(O){return O.asSpec()}),D.some(T)]),matchWidth:!0,useMinWidth:!0,dropdownBehaviours:Pt(Dn(Dn([],t.dropdownBehaviours),[Yc.button(function(){return t.disabled||o.providers.isDisabled()}),Uo(),L2.config({}),nr.config({}),lr("dropdown-events",[Zm(t,c),p0(t,c)]),lr("menubutton-update-display-text",[ot(P0,function(O,N){v.bind(function(L){return L.getOpt(O)}).each(function(L){nr.set(L,[bl(o.providers.translate(N.event.text))])})}),ot(MR,function(O,N){m.bind(function(L){return L.getOpt(O)}).each(function(L){nr.set(L,[BR(N.event.icon,o.providers.icons)])})})])])),eventOrder:gr(_R,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"]}),sandboxBehaviours:Pt([Pn.config({mode:"special",onLeft:p,onRight:p})]),lazySink:o.getSink,toggleClass:r+"--active",parts:{menu:T2(!1,t.columns,t.presets)},fetch:function(O){return pu.nu(gt(t.fetch,O))}})));return R.asSpec()},FR=function(t){return Ut(t)},Ok=function(t){return t.type==="separator"},qx=function(t){return Xn(t,"getSubmenuItems")},Gx={type:"separator"},hP=function(t,r){var o=kn(t,function(c,v){return FR(v)?v===""?c:v==="|"?c.length>0&&!Ok(c[c.length-1])?c.concat([Gx]):c:Xn(r,v.toLowerCase())?c.concat([r[v.toLowerCase()]]):c:c.concat([v])},[]);return o.length>0&&Ok(o[o.length-1])&&o.pop(),o},pP=function(t,r){var o=t.getSubmenuItems(),c=Kx(o,r),v=gr(c.menus,$n(t.value,c.items)),m=gr(c.expansions,$n(t.value,t.value));return{item:t,menus:v,expansions:m}},bP=function(t,r){return qx(t)?pP(t,r):{item:t,menus:{},expansions:{}}},yP=function(t){if(Ok(t))return t;var r=Cn(t,"value").getOrThunk(function(){return bn("generated-menu-item")});return gr({value:r},t)},Kx=function(t,r){var o=hP(Ut(t)?t.split(" "):t,r);return an(o,function(c,v){var m=yP(v),p=bP(m,r);return{menus:gr(c.menus,p.menus),items:[p.item].concat(c.items),expansions:gr(c.expansions,p.expansions)}},{menus:{},expansions:{},items:[]})},ug=function(t,r,o,c){var v=bn("primary-menu"),m=Kx(t,o.shared.providers.menuItems());if(m.items.length===0)return D.none();var p=NO(v,m.items,r,o,c),w=Gr(m.menus,function(T,R){return NO(R,T,r,o,!1)}),S=gr(w,$n(v,p));return D.from(Cv.tieredData(v,S,m.expansions))},PR=function(t){return{isDisabled:function(){return Tn.isDisabled(t)},setDisabled:function(r){return Tn.set(t,r)},setActive:function(r){var o=t.element;r?(no(o,"tox-tbtn--enabled"),kr(o,"aria-pressed",!0)):(wo(o,"tox-tbtn--enabled"),zi(o,"aria-pressed"))},isActive:function(){return Co(t.element,"tox-tbtn--enabled")}}},Dk=function(t,r,o,c){return jx({text:t.text,icon:t.icon,tooltip:t.tooltip,role:c,fetch:function(v,m){t.fetch(function(p){m(ug(p,$l.CLOSE_ON_EXECUTE,o,!1))})},onSetup:t.onSetup,getApi:PR,columns:1,presets:"normal",classes:[],dropdownBehaviours:[La.config({})]},r,o.shared)},Rk=function(t,r,o){var c=function(m){return function(p){var w=!p.isActive();p.setActive(w),m.storage.set(w),o.shared.getSink().each(function(S){r().getOpt(S).each(function(T){Fu(T.element),sn(T,Ev,{name:m.name,value:m.storage.get()})})})}},v=function(m){return function(p){p.setActive(m.storage.get())}};return function(m){m(yt(t,function(p){var w=p.text.fold(function(){return{}},function(S){return{text:S}});return me(me({type:p.type,active:!1},w),{onAction:c(p),onSetup:v(p)})}))}},NR=function(t,r,o,c,v,m){o===void 0&&(o=[]);var p=r.fold(function(){return{}},function(T){return{action:T}}),w=me({buttonBehaviours:Pt([Yc.button(function(){return t.disabled||m.isDisabled()}),Uo(),La.config({}),lr("button press",[rp("click"),rp("mousedown")])].concat(o)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]}},p),S=gr(w,{dom:c});return gr(S,{components:v})},IR=function(t,r,o,c){c===void 0&&(c=[]);var v=t.tooltip.map(function(S){return{"aria-label":o.translate(S),title:o.translate(S)}}).getOr({}),m={tag:"button",classes:["tox-tbtn"],attributes:v},p=t.icon.map(function(S){return Ux(S,o.icons)}),w=b0([p]);return NR(t,r,c,m,w,o)},Bk=function(t,r,o,c){c===void 0&&(c=[]);var v=IR(t,D.some(r),o,c);return ac.sketch(v)},$R=function(t,r,o,c,v){c===void 0&&(c=[]),v===void 0&&(v=[]);var m=o.translate(t.text),p=t.icon?t.icon.map(function(O){return Ux(O,o.icons)}):D.none(),w=p.isSome()?b0([p]):[],S=p.isSome()?{}:{innerHtml:m},T=Dn(Dn(Dn(Dn([],!t.primary&&!t.borderless?["tox-button","tox-button--secondary"]:["tox-button"]),p.isSome()?["tox-button--icon"]:[]),t.borderless?["tox-button--naked"]:[]),v),R=me(me({tag:"button",classes:T},S),{attributes:{title:m}});return NR(t,r,c,R,w,o)},Ph=function(t,r,o,c,v){c===void 0&&(c=[]),v===void 0&&(v=[]);var m=$R(t,D.some(r),o,c,v);return ac.sketch(m)},zR=function(t,r){return function(o){r==="custom"?sn(o,Ev,{name:t,value:{}}):r==="submit"?zr(o,tg):r==="cancel"?zr(o,kh):console.error("Unknown button type: ",r)}},wP=function(t,r){return r==="menu"},CP=function(t,r){return r==="custom"||r==="cancel"||r==="submit"},Xx=function(t,r,o){if(wP(t,r)){var c=function(){return p},v=t,m=me(me({},t),{onSetup:function(T){return T.setDisabled(t.disabled),He},fetch:Rk(v.items,c,o)}),p=ea(Dk(m,"tox-tbtn",o,D.none()));return p.asSpec()}else if(CP(t,r)){var w=zR(t.name,r),S=me(me({},t),{borderless:!1});return Ph(S,w,o.shared.providers,[])}else console.error("Unknown footer button type: ",r)},LR=function(t,r){var o=zR(t.name,"custom");return XO(D.none(),Xr.parts.field(me({factory:ac},$R(t,D.some(o),r,[ig.memory(""),ys.self()]))))},SP=re([xe("field1Name","field1"),xe("field2Name","field2"),Ei("onLockedChange"),Qu(["lockClass"]),xe("locked",!1),Sc.field("coupledFieldBehaviours",[Dr,Vt])]),xP=function(t,r,o){return ya(t,r,o).bind(Dr.getCurrent)},HR=function(t,r){return uu({factory:Xr,name:t,overrides:function(o){return{fieldBehaviours:Pt([lr("coupled-input-behaviour",[ot(ol(),function(c){xP(c,o,r).each(function(v){ya(c,o,"lock").each(function(m){A.isOn(m)&&o.onLockedChange(c,v,m)})})})])])}}})},TP=re([HR("field1","field2"),HR("field2","field1"),uu({factory:ac,schema:[nt("dom")],name:"lock",overrides:function(t){return{buttonBehaviours:Pt([A.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])}}})]),EP=function(t,r,o,c){return{uid:t.uid,dom:t.dom,components:r,behaviours:Sc.augment(t.coupledFieldBehaviours,[Dr.config({find:D.some}),Vt.config({store:{mode:"manual",getValue:function(v){var m,p=P1(v,t,["field1","field2"]);return m={},m[t.field1Name]=Vt.getValue(p.field1()),m[t.field2Name]=Vt.getValue(p.field2()),m},setValue:function(v,m){var p=P1(v,t,["field1","field2"]);Na(m,t.field1Name)&&Vt.setValue(p.field1(),m[t.field1Name]),Na(m,t.field2Name)&&Vt.setValue(p.field2(),m[t.field2Name])}}})]),apis:{getField1:function(v){return ya(v,t,"field1")},getField2:function(v){return ya(v,t,"field2")},getLock:function(v){return ya(v,t,"lock")}}}},es=mu({name:"FormCoupledInputs",configFields:SP(),partFields:TP(),factory:EP,apis:{getField1:function(t,r){return t.getField1(r)},getField2:function(t,r){return t.getField2(r)},getLock:function(t,r){return t.getLock(r)}}}),kP=function(t){var r={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},o=function(v){return v in r?r[v]:1},c=t.value.toFixed(o(t.unit));return c.indexOf(".")!==-1&&(c=c.replace(/\.?0*$/,"")),c+t.unit},_k=function(t){var r=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/,o=r.exec(t);if(o!==null){var c=parseFloat(o[1]),v=o[2];return mn.value({value:c,unit:v})}else return mn.error(t)},VR=function(t,r){var o={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},c=function(v){return Xn(o,v)};return t.unit===r?D.some(t.value):c(t.unit)&&c(r)?o[t.unit]===o[r]?D.some(t.value):D.some(t.value/o[t.unit]*o[r]):D.none()},Yx=function(t){return D.none()},UR=function(t,r){return function(o){return VR(o,r).map(function(c){return{value:c*t,unit:r}})}},AP=function(t,r){var o=_k(t).toOptional(),c=_k(r).toOptional();return lm(o,c,function(v,m){return VR(v,m.unit).map(function(p){return m.value/p}).map(function(p){return UR(p,m.unit)}).getOr(Yx)}).getOr(Yx)},WR=function(t,r){var o=Yx,c=bn("ratio-event"),v=function(O){return pf(O,{tag:"span",classes:["tox-icon","tox-lock-icon__"+O]},r.icons)},m=es.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:r.translate(t.label.getOr("Constrain proportions"))}},components:[v("lock"),v("unlock")],buttonBehaviours:Pt([Tn.config({disabled:function(){return t.disabled||r.isDisabled()}}),Uo(),La.config({})])}),p=function(O){return{dom:{tag:"div",classes:["tox-form__group"]},components:O}},w=function(O){return Xr.parts.field({factory:$2,inputClasses:["tox-textfield"],inputBehaviours:Pt([Tn.config({disabled:function(){return t.disabled||r.isDisabled()}}),Uo(),La.config({}),lr("size-input-events",[ot(Qo(),function(N,L){sn(N,c,{isField1:O})}),ot(Lf(),function(N,L){sn(N,Tc,{name:t.name})})])]),selectOnFocus:!1})},S=function(O){return{dom:{tag:"label",classes:["tox-label"],innerHtml:r.translate(O)}}},T=es.parts.field1(p([Xr.parts.label(S("Width")),w(!0)])),R=es.parts.field2(p([Xr.parts.label(S("Height")),w(!1)]));return es.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[T,R,p([S("&nbsp;"),m])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:function(O,N,L){_k(Vt.getValue(O)).each(function(q){o(q).each(function(X){Vt.setValue(N,kP(X))})})},coupledFieldBehaviours:Pt([Tn.config({disabled:function(){return t.disabled||r.isDisabled()},onDisabled:function(O){es.getField1(O).bind(Xr.getField).each(Tn.disable),es.getField2(O).bind(Xr.getField).each(Tn.disable),es.getLock(O).each(Tn.disable)},onEnabled:function(O){es.getField1(O).bind(Xr.getField).each(Tn.enable),es.getField2(O).bind(Xr.getField).each(Tn.enable),es.getLock(O).each(Tn.enable)}}),Uo(),lr("size-input-events2",[ot(c,function(O,N){var L=N.event.isField1,q=L?es.getField1(O):es.getField2(O),X=L?es.getField2(O):es.getField1(O),ge=q.map(Vt.getValue).getOr(""),ne=X.map(Vt.getValue).getOr("");o=AP(ge,ne)})])])})},ws=re(bn("undo")),OP=re(bn("redo")),Mk=re(bn("zoom")),jR=re(bn("back")),qR=re(bn("apply")),Jx=re(bn("swap")),DP=re(bn("transform")),Zx=re(bn("temp-transform")),RP=re(bn("transform-apply")),Bi={undo:ws,redo:OP,zoom:Mk,back:jR,apply:qR,swap:Jx,transform:DP,tempTransform:Zx,transformApply:RP},GR=re("save-state"),Js=re("disable"),BP=re("enable"),uc={formActionEvent:Ev,saveState:GR,disable:Js,enable:BP},_P=function(t,r){var o=function(nn,xr,ha,Fo){return ea(Ph({name:nn,text:nn,disabled:ha,primary:Fo,icon:D.none(),borderless:!1},xr,r))},c=function(nn,xr,ha,Fo){return ea(Bk({name:nn,icon:D.some(nn),tooltip:D.some(xr),disabled:Fo,primary:!1,borderless:!1},ha,r))},v=function(nn,xr){nn.map(function(ha){var Fo=ha.get(xr);Fo.hasConfigured(Tn)&&Tn.disable(Fo)})},m=function(nn,xr){nn.map(function(ha){var Fo=ha.get(xr);Fo.hasConfigured(Tn)&&Tn.enable(Fo)})},p={tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools-edit-panel"]},w=He,S=function(nn,xr,ha){sn(nn,xr,ha)},T=function(nn){return zr(nn,uc.disable())},R=function(nn){return zr(nn,uc.enable())},O=function(nn,xr){T(nn),S(nn,Bi.transform(),{transform:xr}),R(nn)},N=function(nn,xr){T(nn),S(nn,Bi.tempTransform(),{transform:xr}),R(nn)},L=function(nn){return function(){CT.getOpt(nn).each(function(xr){nr.set(xr,[wT])})}},q=function(nn,xr){T(nn),S(nn,Bi.transformApply(),{transform:xr,swap:L(nn)}),R(nn)},X=function(){return o("Back",function(nn){return S(nn,Bi.back(),{swap:L(nn)})},!1,!1)},ge=function(){return ea({dom:{tag:"div",classes:["tox-spacer"]},behaviours:Pt([Tn.config({})])})},ne=function(){return o("Apply",function(nn){return S(nn,Bi.apply(),{swap:L(nn)})},!0,!0)},ye=function(){return function(nn){var xr=t.getRect();return dP(nn,xr.x,xr.y,xr.w,xr.h)}},he=[X(),ge(),o("Apply",function(nn){var xr=ye();q(nn,xr),t.hideCrop()},!1,!0)],Ve=Nu.sketch({dom:p,components:he.map(function(nn){return nn.asSpec()}),containerBehaviours:Pt([lr("image-tools-crop-buttons-events",[ot(uc.disable(),function(nn,xr){v(he,nn)}),ot(uc.enable(),function(nn,xr){m(he,nn)})])])}),_e=ea(WR({name:"size",label:D.none(),constrain:!0,disabled:!1},r)),Ke=function(nn,xr){return function(ha){return mP(ha,nn,xr)}},Pe=[X(),ge(),_e,ge(),o("Apply",function(nn){_e.getOpt(nn).each(function(xr){var ha=Vt.getValue(xr),Fo=parseInt(ha.width,10),xs=parseInt(ha.height,10),Ts=Ke(Fo,xs);q(nn,Ts)})},!1,!0)],ct=Nu.sketch({dom:p,components:Pe.map(function(nn){return nn.asSpec()}),containerBehaviours:Pt([lr("image-tools-resize-buttons-events",[ot(uc.disable(),function(nn,xr){v(Pe,nn)}),ot(uc.enable(),function(nn,xr){m(Pe,nn)})])])}),Bt=function(nn,xr){return function(ha){return nn(ha,xr)}},Qt=Bt(kk,"h"),vt=Bt(kk,"v"),dt=Bt(DR,-90),ln=Bt(DR,90),Hn=function(nn,xr){N(nn,xr)},Ct=[X(),ge(),c("flip-horizontally","Flip horizontally",function(nn){Hn(nn,Qt)},!1),c("flip-vertically","Flip vertically",function(nn){Hn(nn,vt)},!1),c("rotate-left","Rotate counterclockwise",function(nn){Hn(nn,dt)},!1),c("rotate-right","Rotate clockwise",function(nn){Hn(nn,ln)},!1),ge(),ne()],En=Nu.sketch({dom:p,components:Ct.map(function(nn){return nn.asSpec()}),containerBehaviours:Pt([lr("image-tools-fliprotate-buttons-events",[ot(uc.disable(),function(nn,xr){v(Ct,nn)}),ot(uc.enable(),function(nn,xr){m(Ct,nn)})])])}),zn=function(nn,xr,ha,Fo,xs){var Ts=Hl.parts.label({dom:{tag:"label",classes:["tox-label"],innerHtml:r.translate(nn)}}),Bf=Hl.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),ST=Hl.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return ea(Hl.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:ha,maxX:xs,getInitialValue:re({x:Fo})},components:[Ts,Bf,ST],sliderBehaviours:Pt([Qn.config({})]),onChoose:xr}))},Vr=function(nn,xr,ha,Fo,xs){var Ts=function(Bf,ST,yI){var wI=Bt(xr,yI.x/100);O(Bf,wI)};return zn(nn,Ts,ha,Fo,xs)},wa=function(nn,xr,ha,Fo,xs){return[X(),Vr(nn,xr,ha,Fo,xs),ne()]},Do=function(nn,xr,ha,Fo,xs){var Ts=wa(nn,xr,ha,Fo,xs);return Nu.sketch({dom:p,components:Ts.map(function(Bf){return Bf.asSpec()}),containerBehaviours:Pt([lr("image-tools-filter-panel-buttons-events",[ot(uc.disable(),function(Bf,ST){v(Ts,Bf)}),ot(uc.enable(),function(Bf,ST){m(Ts,Bf)})])])})},Rf=[X(),ge(),ne()],jl=Nu.sketch({dom:p,components:Rf.map(function(nn){return nn.asSpec()})}),fI=Do("Brightness",AR,-100,0,100),vI=Do("Contrast",OR,-100,0,100),xB=Do("Gamma",kR,-100,0,100),dI=function(nn,xr,ha){return function(Fo){return vP(Fo,nn,xr,ha)}},iA=function(nn){var xr=function(ha,Fo,xs){var Ts=TB.getOpt(ha),Bf=EB.getOpt(ha),ST=uA.getOpt(ha);Ts.each(function(yI){Bf.each(function(wI){ST.each(function(BU){var _U=Vt.getValue(yI).x/100,MU=Vt.getValue(BU).x/100,FU=Vt.getValue(wI).x/100,PU=dI(_U,MU,FU);O(ha,PU)})})})};return zn(nn,xr,0,100,200)},TB=iA("R"),uA=iA("G"),EB=iA("B"),_v=[X(),TB,uA,EB,ne()],cA=Nu.sketch({dom:p,components:_v.map(function(nn){return nn.asSpec()})}),Ss=function(nn,xr,ha){return function(Fo){var xs=function(){CT.getOpt(Fo).each(function(Ts){nr.set(Ts,[nn]),ha(Ts)})};S(Fo,Bi.swap(),{transform:xr,swap:xs})}},mI=function(nn){t.showCrop()},gI=function(nn){_e.getOpt(nn).each(function(xr){var ha=t.getMeasurements(),Fo=ha.width,xs=ha.height;Vt.setValue(xr,{width:Fo,height:xs})})},hI=D.some(fP),Wu=D.some(ER),U0=[c("crop","Crop",Ss(Ve,D.none(),mI),!1),c("resize","Resize",Ss(ct,D.none(),gI),!1),c("orientation","Orientation",Ss(En,D.none(),w),!1),c("brightness","Brightness",Ss(fI,D.none(),w),!1),c("sharpen","Sharpen",Ss(jl,hI,w),!1),c("contrast","Contrast",Ss(vI,D.none(),w),!1),c("color-levels","Color levels",Ss(cA,D.none(),w),!1),c("gamma","Gamma",Ss(xB,D.none(),w),!1),c("invert","Invert",Ss(jl,Wu,w),!1)],wT=Nu.sketch({dom:p,components:U0.map(function(nn){return nn.asSpec()})}),pI=Nu.sketch({dom:{tag:"div"},components:[wT],containerBehaviours:Pt([nr.config({})])}),CT=ea(pI),bI=function(nn){return CT.getOpt(nn).map(function(xr){var ha=xr.components()[0];return ha.components()[ha.components().length-1]})};return{memContainer:CT,getApplyButton:bI}},KR=tinymce.util.Tools.resolve("tinymce.geom.Rect"),ts=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),MP=tinymce.util.Tools.resolve("tinymce.util.Observable"),N0=tinymce.util.Tools.resolve("tinymce.util.VK"),FP=function(t){var r=Math.max,o=t.documentElement,c=t.body,v=r(o.scrollWidth,c.scrollWidth),m=r(o.clientWidth,c.clientWidth),p=r(o.offsetWidth,c.offsetWidth),w=r(o.scrollHeight,c.scrollHeight),S=r(o.clientHeight,c.clientHeight),T=r(o.offsetHeight,c.offsetHeight);return{width:v<p?m:v,height:w<T?S:w}},Fk=function(t){var r,o;if(t.changedTouches)for(r="screenX screenY pageX pageY clientX clientY".split(" "),o=0;o<r.length;o++)t[r[o]]=t.changedTouches[0][r[o]]};function PP(t,r){var o,c=r.document||document,v,m,p,w=c.getElementById(r.handle||t),S=function(N){var L=FP(c),q;Fk(N),N.preventDefault(),v=N.button;var X=w;m=N.screenX,p=N.screenY,window.getComputedStyle?q=window.getComputedStyle(X,null).getPropertyValue("cursor"):q=X.runtimeStyle.cursor,o=ts("<div></div>").css({position:"absolute",top:0,left:0,width:L.width,height:L.height,zIndex:2147483647,opacity:1e-4,cursor:q}).appendTo(c.body),ts(c).on("mousemove touchmove",T).on("mouseup touchend",R),r.start(N)},T=function(N){if(Fk(N),N.button!==v)return R(N);N.deltaX=N.screenX-m,N.deltaY=N.screenY-p,N.preventDefault(),r.drag(N)},R=function(N){Fk(N),ts(c).off("mousemove touchmove",T).off("mouseup touchend",R),o.remove(),r.stop&&r.stop(N)},O=function(){ts(w).off()};return ts(w).on("mousedown touchstart",S),{destroy:O}}var NP=0,XR=function(t,r,o,c,v){var m,p="tox-",w=p+"crid-"+NP++,S=[{name:"move",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:0,deltaH:0,label:"Crop Mask"},{name:"nw",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:-1,deltaH:-1,label:"Top Left Crop Handle"},{name:"ne",xMul:1,yMul:0,deltaX:0,deltaY:1,deltaW:1,deltaH:-1,label:"Top Right Crop Handle"},{name:"sw",xMul:0,yMul:1,deltaX:1,deltaY:0,deltaW:-1,deltaH:1,label:"Bottom Left Crop Handle"},{name:"se",xMul:1,yMul:1,deltaX:0,deltaY:0,deltaW:1,deltaH:1,label:"Bottom Right Crop Handle"}],T=["top","right","bottom","left"],R=function(Pe,ct){return{x:ct.x+Pe.x,y:ct.y+Pe.y,w:ct.w,h:ct.h}},O=function(Pe,ct){return{x:ct.x-Pe.x,y:ct.y-Pe.y,w:ct.w,h:ct.h}},N=function(){return O(o,t)},L=function(Pe,ct,Bt,Qt){var vt,dt,ln,Hn,Ct;vt=ct.x,dt=ct.y,ln=ct.w,Hn=ct.h,vt+=Bt*Pe.deltaX,dt+=Qt*Pe.deltaY,ln+=Bt*Pe.deltaW,Hn+=Qt*Pe.deltaH,ln<20&&(ln=20),Hn<20&&(Hn=20),Ct=t=KR.clamp({x:vt,y:dt,w:ln,h:Hn},o,Pe.name==="move"),Ct=O(o,Ct),Ke.fire("updateRect",{rect:Ct}),he(Ct)},q=function(){var Pe=function(ct){var Bt;return PP(w,{document:c.ownerDocument,handle:w+"-"+ct.name,start:function(){Bt=t},drag:function(Qt){L(ct,Bt,Qt.deltaX,Qt.deltaY)}})};ts('<div id="'+w+'" class="'+p+'croprect-container" role="grid" aria-dropeffect="execute">').appendTo(c),ic.each(T,function(ct){ts("#"+w,c).append('<div id="'+w+"-"+ct+'"class="'+p+'croprect-block" style="display: none" data-mce-bogus="all">')}),ic.each(S,function(ct){ts("#"+w,c).append('<div id="'+w+"-"+ct.name+'" class="'+p+"croprect-handle "+p+"croprect-handle-"+ct.name+'"style="display: none" data-mce-bogus="all" role="gridcell" tabindex="-1" aria-label="'+ct.label+'" aria-grabbed="false" title="'+ct.label+'">')}),m=ic.map(S,Pe),ge(t),ts(c).on("focusin focusout",function(ct){ts(ct.target).attr("aria-grabbed",ct.type==="focus"?"true":"false")}),ts(c).on("keydown",function(ct){var Bt;ic.each(S,function(vt){if(ct.target.id===w+"-"+vt.name)return Bt=vt,!1});var Qt=function(vt,dt,ln,Hn,Ct){vt.stopPropagation(),vt.preventDefault(),L(Bt,ln,Hn,Ct)};switch(ct.keyCode){case N0.LEFT:Qt(ct,Bt,t,-10,0);break;case N0.RIGHT:Qt(ct,Bt,t,10,0);break;case N0.UP:Qt(ct,Bt,t,0,-10);break;case N0.DOWN:Qt(ct,Bt,t,0,10);break;case N0.ENTER:case N0.SPACEBAR:ct.preventDefault(),v();break}})},X=function(Pe){var ct=ic.map(S,function(Bt){return"#"+w+"-"+Bt.name}).concat(ic.map(T,function(Bt){return"#"+w+"-"+Bt})).join(",");Pe?ts(ct,c).show():ts(ct,c).hide()},ge=function(Pe){var ct=function(Bt,Qt){Qt.h<0&&(Qt.h=0),Qt.w<0&&(Qt.w=0),ts("#"+w+"-"+Bt,c).css({left:Qt.x,top:Qt.y,width:Qt.w,height:Qt.h})};ic.each(S,function(Bt){ts("#"+w+"-"+Bt.name,c).css({left:Pe.w*Bt.xMul+Pe.x,top:Pe.h*Bt.yMul+Pe.y})}),ct("top",{x:r.x,y:r.y,w:r.w,h:Pe.y-r.y}),ct("right",{x:Pe.x+Pe.w,y:Pe.y,w:r.w-Pe.x-Pe.w+r.x,h:Pe.h}),ct("bottom",{x:r.x,y:Pe.y+Pe.h,w:r.w,h:r.h-Pe.y-Pe.h+r.y}),ct("left",{x:r.x,y:Pe.y,w:Pe.x-r.x,h:Pe.h}),ct("move",Pe)},ne=function(Pe){t=Pe,ge(t)},ye=function(Pe){r=Pe,ge(t)},he=function(Pe){ne(R(o,Pe))},Ve=function(Pe){o=Pe,ge(t)},_e=function(){ic.each(m,function(Pe){Pe.destroy()}),m=[]};q();var Ke=ic.extend({toggleVisibility:X,setClampRect:Ve,setRect:ne,getInnerRect:N,setInnerRect:he,setViewPortRect:ye,destroy:_e},MP);return Ke},YR={create:XR},JR=function(t){return new w2(function(r){var o=function(){t.removeEventListener("load",o),r(t)};t.complete?r(t):t.addEventListener("load",o)})},IP=function(t){var r=ea({dom:{tag:"div",classes:["tox-image-tools__image-bg"],attributes:{role:"presentation"}}}),o=Bn(1),c=ro(),v=Bn({x:0,y:0,w:1,h:1}),m=Bn({x:0,y:0,w:1,h:1}),p=function(ge,ne){q.getOpt(ge).each(function(ye){var he=o.get(),Ve=ii(ye.element),_e=Ti(ye.element),Ke=ne.dom.naturalWidth*he,Pe=ne.dom.naturalHeight*he,ct=Math.max(0,Ve/2-Ke/2),Bt=Math.max(0,_e/2-Pe/2),Qt={left:ct.toString()+"px",top:Bt.toString()+"px",width:Ke.toString()+"px",height:Pe.toString()+"px",position:"absolute"};bc(ne,Qt),r.getOpt(ye).each(function(vt){bc(vt.element,Qt)}),c.on(function(vt){var dt=v.get();vt.setRect({x:dt.x*he+ct,y:dt.y*he+Bt,w:dt.w*he,h:dt.h*he}),vt.setClampRect({x:ct,y:Bt,w:Ke,h:Pe}),vt.setViewPortRect({x:0,y:0,w:Ve,h:_e})})})},w=function(ge,ne){q.getOpt(ge).each(function(ye){var he=ii(ye.element),Ve=Ti(ye.element),_e=ne.dom.naturalWidth,Ke=ne.dom.naturalHeight,Pe=Math.min(he/_e,Ve/Ke);Pe>=1?o.set(1):o.set(Pe)})},S=function(ge,ne){var ye=Ft.fromTag("img");return kr(ye,"src",ne),JR(ye.dom).then(function(){ge.getSystem().isConnected()&&q.getOpt(ge).map(function(he){var Ve=Ps({element:ye});nr.replaceAt(he,1,D.some(Ve));var _e=m.get(),Ke={x:0,y:0,w:ye.dom.naturalWidth,h:ye.dom.naturalHeight};m.set(Ke);var Pe=KR.inflate(Ke,-20,-20);v.set(Pe),(_e.w!==Ke.w||_e.h!==Ke.h)&&w(he,ye),p(he,ye)})})},T=function(ge,ne){var ye=o.get(),he=ne>0?Math.min(2,ye+.1):Math.max(.1,ye-.1);o.set(he),q.getOpt(ge).each(function(Ve){var _e=Ve.components()[1].element;p(Ve,_e)})},R=function(){c.on(function(ge){ge.toggleVisibility(!0)})},O=function(){c.on(function(ge){ge.toggleVisibility(!1)})},N=function(){return v.get()},L=Nu.sketch({dom:{tag:"div",classes:["tox-image-tools__image"]},components:[r.asSpec(),{dom:{tag:"img",attributes:{src:t}}},{dom:{tag:"div"},behaviours:Pt([lr("image-panel-crop-events",[Ta(function(ge){q.getOpt(ge).each(function(ne){var ye=ne.element.dom,he=YR.create({x:10,y:10,w:100,h:100},{x:0,y:0,w:200,h:200},{x:0,y:0,w:200,h:200},ye,He);he.toggleVisibility(!1),he.on("updateRect",function(Ve){var _e=Ve.rect,Ke=o.get(),Pe={x:Math.round(_e.x/Ke),y:Math.round(_e.y/Ke),w:Math.round(_e.w/Ke),h:Math.round(_e.h/Ke)};v.set(Pe)}),c.set(he)})})])])}],containerBehaviours:Pt([nr.config({}),lr("image-panel-events",[Ta(function(ge){S(ge,t)})])])}),q=ea(L),X=function(){var ge=m.get();return{width:ge.w,height:ge.h}};return{memContainer:q,updateSrc:S,zoom:T,showCrop:R,hideCrop:O,getRect:N,getMeasurements:X}},K2=function(t,r,o,c,v){return Bk({name:t,icon:D.some(r),disabled:o,tooltip:D.some(t),primary:!1,borderless:!1},c,v)},ZR=function(t,r){r?Tn.enable(t):Tn.disable(t)},$P=function(t){var r=function(m,p,w){o.getOpt(m).each(function(S){ZR(S,p)}),c.getOpt(m).each(function(S){ZR(S,w)})},o=ea(K2("Undo","undo",!0,function(m){sn(m,Bi.undo(),{direction:1})},t)),c=ea(K2("Redo","redo",!0,function(m){sn(m,Bi.redo(),{direction:1})},t)),v=Nu.sketch({dom:{tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools__sidebar"]},components:[o.asSpec(),c.asSpec(),K2("Zoom in","zoom-in",!1,function(m){sn(m,Bi.zoom(),{direction:1})},t),K2("Zoom out","zoom-out",!1,function(m){sn(m,Bi.zoom(),{direction:-1})},t)]});return{container:v,updateButtonUndoStates:r}};function zP(){var t=[],r=-1,o=function(w){var S=t.splice(++r);return t.push(w),{state:w,removed:S}},c=function(){if(m())return t[--r]},v=function(){if(p())return t[++r]},m=function(){return r>0},p=function(){return r!==-1&&r<t.length-1};return{data:t,add:o,undo:c,redo:v,canUndo:m,canRedo:p}}var LP=function(t){var r=Bn(t),o=ro(),c=zP();c.add(t);var v=function(){return r.get()},m=function(ye){r.set(ye)},p=function(){return o.get().getOrThunk(r.get)},w=function(ye){var he=S(ye);return O(),o.set(he),he.url},S=function(ye){return{blob:ye,url:URL.createObjectURL(ye)}},T=function(ye){URL.revokeObjectURL(ye.url)},R=function(ye){ic.each(ye,T)},O=function(){o.on(T),o.clear()},N=function(ye){var he=S(ye);m(he);var Ve=c.add(he).removed;return R(Ve),he.url},L=function(ye){var he=S(ye);return o.set(he),he.url},q=function(ye){return o.get().fold(He,function(he){N(he.blob),ye()})},X=function(){var ye=c.undo();return m(ye),ye.url},ge=function(){var ye=c.redo();return m(ye),ye.url},ne=function(){var ye=c.canUndo(),he=c.canRedo();return{undoEnabled:ye,redoEnabled:he}};return{getBlobState:v,setBlobState:m,addBlobState:N,getTempState:p,updateTempState:w,addTempState:L,applyTempState:q,destroyTempState:O,undo:X,redo:ge,getHistoryStates:ne}},HP=function(t,r){var o=LP(t.currentState),c=function(vt,dt){var ln=dt.event.direction;Pe.zoom(vt,ln)},v=function(vt){var dt=o.getHistoryStates();ct.updateButtonUndoStates(vt,dt.undoEnabled,dt.redoEnabled),sn(vt,uc.formActionEvent,{name:uc.saveState(),value:dt.undoEnabled})},m=function(vt){ct.updateButtonUndoStates(vt,!1,!1)},p=function(vt,dt){var ln=o.undo();O(vt,ln).then(function(Hn){R(vt),v(vt)})},w=function(vt,dt){var ln=o.redo();O(vt,ln).then(function(Hn){R(vt),v(vt)})},S=function(vt){return vt.toBlob()},T=function(vt){sn(vt,uc.formActionEvent,{name:uc.disable(),value:{}})},R=function(vt){Bt.getApplyButton(vt).each(function(dt){Tn.enable(dt)}),sn(vt,uc.formActionEvent,{name:uc.enable(),value:{}})},O=function(vt,dt){return T(vt),Pe.updateSrc(vt,dt)},N=function(vt,dt,ln,Hn,Ct){T(vt),qF(dt).then(ln).then(S).then(Hn).then(function(En){return O(vt,En)}).then(function(){v(vt),Ct(),R(vt)}).catch(function(En){console.log(En),vt.getSystem().isConnected()&&R(vt)})},L=function(vt,dt,ln){var Hn=o.getBlobState().blob,Ct=function(En){return o.updateTempState(En)};N(vt,Hn,dt,Ct,ln)},q=function(vt,dt){var ln=o.getTempState().blob,Hn=function(Ct){return o.addTempState(Ct)};N(vt,ln,dt,Hn,He)},X=function(vt,dt,ln){var Hn=o.getBlobState().blob,Ct=function(En){var zn=o.addBlobState(En);return ne(vt),zn};N(vt,Hn,dt,Ct,ln)},ge=function(vt,dt){var ln=function(){ne(vt);var Hn=dt.event.swap;Hn()};o.applyTempState(ln)},ne=function(vt){var dt=o.getBlobState().url;return o.destroyTempState(),v(vt),dt},ye=function(vt){var dt=ne(vt);O(vt,dt).then(function(ln){R(vt)})},he=function(vt,dt){ye(vt);var ln=dt.event.swap;ln(),Pe.hideCrop()},Ve=function(vt,dt){return L(vt,dt.event.transform,He)},_e=function(vt,dt){return q(vt,dt.event.transform)},Ke=function(vt,dt){return X(vt,dt.event.transform,dt.event.swap)},Pe=IP(t.currentState.url),ct=$P(r),Bt=_P(Pe,r),Qt=function(vt,dt){m(vt);var ln=dt.event.transform,Hn=dt.event.swap;ln.fold(function(){Hn()},function(Ct){L(vt,Ct,Hn)})};return{dom:{tag:"div",attributes:{role:"presentation"}},components:[Bt.memContainer.asSpec(),Pe.memContainer.asSpec(),ct.container],behaviours:Pt([Vt.config({store:{mode:"manual",getValue:function(){return o.getBlobState()}}}),lr("image-tools-events",[ot(Bi.undo(),p),ot(Bi.redo(),w),ot(Bi.zoom(),c),ot(Bi.back(),he),ot(Bi.apply(),ge),ot(Bi.transform(),Ve),ot(Bi.tempTransform(),_e),ot(Bi.transformApply(),Ke),ot(Bi.swap(),Qt)]),ys.self()])}},VP=function(t,r){var o={dom:{tag:"label",innerHtml:r.providers.translate(t.label),classes:["tox-label"]}},c=yt(t.items,r.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[o].concat(c),behaviours:Pt([ys.self(),nr.config({}),ig.domHtml(D.none()),Pn.config({mode:"acyclic"})])}},Pk=function(t){return!Xn(t,"items")},QR="data-value",e5=function(t,r,o,c){return yt(o,function(v){return Pk(v)?{type:"togglemenuitem",text:v.text,value:v.value,active:v.value===c,onAction:function(){Vt.setValue(t,v.value),sn(t,Tc,{name:r}),Qn.focus(t)}}:{type:"nestedmenuitem",text:v.text,getSubmenuItems:function(){return e5(t,r,v.items,c)}}})},t5=function(t,r){return Ba(t,function(o){return Pk(o)?_g(o.value===r,o):t5(o.items,r)})},UP=function(t,r){var o=r.shared.providers,c=Ga(t.items).filter(Pk),v=t.label.map(function(w){return Tv(w,o)}),m=Xr.parts.field({dom:{},factory:{sketch:function(w){return jx({uid:w.uid,text:c.map(function(S){return S.text}),icon:D.none(),tooltip:t.label,role:D.none(),fetch:function(S,T){var R=e5(S,t.name,t.items,Vt.getValue(S));T(ug(R,$l.CLOSE_ON_EXECUTE,r,!1))},onSetup:re(He),getApi:re({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[La.config({}),Vt.config({store:{mode:"manual",initialValue:c.map(function(S){return S.value}).getOr(""),getValue:function(S){return Eu(S.element,QR)},setValue:function(S,T){t5(t.items,T).each(function(R){kr(S.element,QR,R.value),sn(S,P0,{text:R.text})})}}})]},"tox-listbox",r.shared)}}}),p={dom:{tag:"div",classes:["tox-listboxfield"]},components:[m]};return Xr.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:dn([v.toArray(),[p]]),fieldBehaviours:Pt([Tn.config({disabled:re(t.disabled),onDisabled:function(w){Xr.getField(w).each(Tn.disable)},onEnabled:function(w){Xr.getField(w).each(Tn.enable)}})])})},WP=function(t,r){return{dom:{tag:"div",classes:t.classes},components:yt(t.items,r.shared.interpreter)}},jP=function(t,r){var o=yt(t.options,function(v){return{dom:{tag:"option",value:v.value,innerHtml:v.text}}}),c=t.data.map(function(v){return $n("initialValue",v)}).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:o,behaviours:Ai(t.selectBehaviours,[Qn.config({}),Vt.config({store:me({mode:"manual",getValue:function(v){return Qf(v.element)},setValue:function(v,m){var p=Wn(t.options,function(w){return w.value===m});p.isSome()&&pl(v.element,m)}},c)})])}},qP=xc({name:"HtmlSelect",configFields:[nt("options"),Vo("selectBehaviours",[Qn,Vt]),xe("selectClasses",[]),xe("selectAttributes",{}),W("data")],factory:jP}),n5=function(t,r){var o=yt(t.items,function(w){return{text:r.translate(w.text),value:w.value}}),c=t.label.map(function(w){return Tv(w,r)}),v=Xr.parts.field({dom:{},selectAttributes:{size:t.size},options:o,factory:qP,selectBehaviours:Pt([Tn.config({disabled:function(){return t.disabled||r.isDisabled()}}),La.config({}),lr("selectbox-change",[ot(Lf(),function(w,S){sn(w,Tc,{name:t.name})})])])}),m=t.size>1?D.none():D.some(pf("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},r.icons)),p={dom:{tag:"div",classes:["tox-selectfield"]},components:dn([[v],m.toArray()])};return Xr.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:dn([c.toArray(),[p]]),fieldBehaviours:Pt([Tn.config({disabled:function(){return t.disabled||r.isDisabled()},onDisabled:function(w){Xr.getField(w).each(Tn.disable)},onEnabled:function(w){Xr.getField(w).each(Tn.enable)}}),Uo()])})},GP=function(t,r){var o=function(w){return{dom:{tag:"th",innerHtml:r.translate(w)}}},c=function(w){return{dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:yt(w,o)}]}},v=function(w){return{dom:{tag:"td",innerHtml:r.translate(w)}}},m=function(w){return{dom:{tag:"tr"},components:yt(w,v)}},p=function(w){return{dom:{tag:"tbody"},components:yt(w,m)}};return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[c(t.header),p(t.cells)],behaviours:Pt([La.config({}),Qn.config({})])}},r5=function(t,r){var o=t.label.map(function(N){return Tv(N,r)}),c=[Tn.config({disabled:function(){return t.disabled||r.isDisabled()}}),Uo(),Pn.config({mode:"execution",useEnter:t.multiline!==!0,useControlEnter:t.multiline===!0,execute:function(N){return zr(N,tg),D.some(!0)}}),lr("textfield-change",[ot(ol(),function(N,L){sn(N,Tc,{name:t.name})}),ot(Uf(),function(N,L){sn(N,Tc,{name:t.name})})]),La.config({})],v=t.validation.map(function(N){return yf.config({getRoot:function(L){return Si(L.element)},invalidClass:"tox-invalid",validator:{validate:function(L){var q=Vt.getValue(L),X=N.validator(q);return pu.pure(X===!0?mn.value(q):mn.error(X))},validateOnLoad:N.validateOnLoad}})}).toArray(),m=t.placeholder.fold(re({}),function(N){return{placeholder:r.translate(N)}}),p=t.inputMode.fold(re({}),function(N){return{inputmode:N}}),w=me(me({},m),p),S=Xr.parts.field({tag:t.multiline===!0?"textarea":"input",inputAttributes:w,inputClasses:[t.classname],inputBehaviours:Pt(dn([c,v])),selectOnFocus:!1,factory:$2}),T=t.flex?["tox-form__group--stretched"]:[],R=T.concat(t.maximized?["tox-form-group--maximize"]:[]),O=[Tn.config({disabled:function(){return t.disabled||r.isDisabled()},onDisabled:function(N){Xr.getField(N).each(Tn.disable)},onEnabled:function(N){Xr.getField(N).each(Tn.enable)}}),Uo()];return T0(o,S,R,O)},a5=function(t,r){return r5({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:t.disabled,classname:"tox-textfield",validation:D.none(),maximized:t.maximized},r)},KP=function(t,r){return r5({name:t.name,multiline:!0,label:t.label,inputMode:D.none(),placeholder:t.placeholder,flex:!0,disabled:t.disabled,classname:"tox-textarea",validation:D.none(),maximized:t.maximized},r)},XP=function(t,r){var o=t.stream.streams,c=o.setup(t,r);return xa([ot(t.event,c),Rs(function(){return r.cancel()})].concat(t.cancelEvent.map(function(v){return[ot(v,function(){return r.cancel()})]}).getOr([])))},YP=Object.freeze({__proto__:null,events:XP}),o5=function(t){var r=Bn(null),o=function(){return{timer:r.get()!==null?"set":"unset"}},c=function(m){r.set(m)},v=function(){var m=r.get();m!==null&&m.cancel()};return tu({readState:o,setTimer:c,cancel:v})},JP=function(t){return t.stream.streams.state(t)},ZP=Object.freeze({__proto__:null,throttle:o5,init:JP}),Qx=function(t,r){var o=t.stream,c=N3(t.onStream,o.delay);return r.setTimer(c),function(v,m){c.throttle(v,m),o.stopEvent&&m.stop()}},QP=[po("stream",Ln("mode",{throttle:[nt("delay"),xe("stopEvent",!0),sa("streams",{setup:Qx,state:o5})]})),xe("event","input"),W("cancelEvent"),Ei("onStream")],i5=si({fields:QP,name:"streaming",active:YP,state:ZP}),eT=function(t,r,o){var c=Vt.getValue(o);Vt.setValue(r,c),c5(r)},u5=function(t,r){var o=t.element,c=Qf(o),v=o.dom;Eu(o,"type")!=="number"&&r(v,c)},c5=function(t){u5(t,function(r,o){return r.setSelectionRange(o.length,o.length)})},eN=function(t,r){u5(t,function(o,c){return o.setSelectionRange(r,c.length)})},tN=function(t,r,o){if(t.selectsOver){var c=Vt.getValue(r),v=t.getDisplayText(c),m=Vt.getValue(o),p=t.getDisplayText(m);return p.indexOf(v)===0?D.some(function(){eT(t,r,o),eN(r,v.length)}):D.none()}else return D.none()},tT=re("alloy.typeahead.itemexecute"),nN=function(t,r,o,c){var v=function(S,T,R){t.previewing.set(!1);var O=Wo.getCoupled(S,"sandbox");if(Or.isOpen(O))Dr.getCurrent(O).each(function(L){Qr.getHighlighted(L).fold(function(){R(L)},function(){wi(O,L.element,"keydown",T)})});else{var N=function(L){Dr.getCurrent(L).each(R)};Jc(t,p(S),S,O,c,N,wf.HighlightFirst).get(He)}},m=JO(t),p=function(S){return function(T){return T.map(function(R){var O=pn(R.menus),N=qr(O,function(q){return rt(q.items,function(X){return X.type==="item"})}),L=Vt.getState(S);return L.update(yt(N,function(q){return q.data})),R})}},w=[Qn.config({}),Vt.config({onSetValue:t.onSetValue,store:me({mode:"dataset",getDataKey:function(S){return Qf(S.element)},getFallbackEntry:function(S){return{value:S,meta:{}}},setValue:function(S,T){pl(S.element,t.model.getDisplayText(T))}},t.initialData.map(function(S){return $n("initialValue",S)}).getOr({}))}),i5.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:function(S,T){var R=Wo.getCoupled(S,"sandbox"),O=Qn.isFocused(S);if(O&&Qf(S.element).length>=t.minChars){var N=Dr.getCurrent(R).bind(function(q){return Qr.getHighlighted(q).map(Vt.getValue)});t.previewing.set(!0);var L=function(q){Dr.getCurrent(R).each(function(X){N.fold(function(){t.model.selectsOver&&Qr.highlightFirst(X)},function(ge){Qr.highlightBy(X,function(ne){var ye=Vt.getValue(ne);return ye.value===ge.value}),Qr.getHighlighted(X).orThunk(function(){return Qr.highlightFirst(X),D.none()})})})};Jc(t,p(S),S,R,c,L,wf.HighlightFirst).get(He)}},cancelEvent:em()}),Pn.config({mode:"special",onDown:function(S,T){return v(S,T,Qr.highlightFirst),D.some(!0)},onEscape:function(S){var T=Wo.getCoupled(S,"sandbox");return Or.isOpen(T)?(Or.close(T),D.some(!0)):D.none()},onUp:function(S,T){return v(S,T,Qr.highlightLast),D.some(!0)},onEnter:function(S){var T=Wo.getCoupled(S,"sandbox"),R=Or.isOpen(T);if(R&&!t.previewing.get())return Dr.getCurrent(T).bind(function(N){return Qr.getHighlighted(N)}).map(function(N){return sn(S,tT(),{item:N}),!0});var O=Vt.getValue(S);return zr(S,em()),t.onExecute(T,S,O),R&&Or.close(T),D.some(!0)}}),A.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),Wo.config({others:{sandbox:function(S){return K4(t,S,{onOpen:function(){return A.on(S)},onClose:function(){return A.off(S)}})}}}),lr("typeaheadevents",[Pc(function(S){var T=He;Ah(t,p(S),S,c,T,wf.HighlightFirst).get(He)}),ot(tT(),function(S,T){var R=Wo.getCoupled(S,"sandbox");eT(t.model,S,T.event.item),zr(S,em()),t.onItemExecute(S,R,T.event.item,Vt.getValue(S)),Or.close(R),c5(S)})].concat(t.dismissOnBlur?[ot(Y0(),function(S){var T=Wo.getCoupled(S,"sandbox");Vc(T.element).isNone()&&Or.close(T)})]:[]))];return{uid:t.uid,dom:H4(gr(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:me(me({},m),Ai(t.typeaheadBehaviours,w)),eventOrder:t.eventOrder}},rN=re([W("lazySink"),nt("fetch"),xe("minChars",5),xe("responseTime",1e3),Kr("onOpen"),xe("getHotspot",D.some),xe("getAnchorOverrides",re({})),xe("layouts",D.none()),xe("eventOrder",{}),Fv("model",{},[xe("getDisplayText",function(t){return t.meta!==void 0&&t.meta.text!==void 0?t.meta.text:t.value}),xe("selectsOver",!0),xe("populateFromBrowse",!0)]),Kr("onSetValue"),xo("onExecute"),Kr("onItemExecute"),xe("inputClasses",[]),xe("inputAttributes",{}),xe("inputStyles",{}),xe("matchWidth",!0),xe("useMinWidth",!1),xe("dismissOnBlur",!0),Qu(["openClass"]),W("initialData"),Vo("typeaheadBehaviours",[Qn,Vt,i5,Pn,A,Wo]),ho("previewing",function(){return Bn(!0)})].concat(L4()).concat(Y4())),aN=re([jc({schema:[Np()],name:"menu",overrides:function(t){return{fakeFocus:!0,onHighlight:function(r,o){t.previewing.get()?r.getSystem().getByUid(t.uid).each(function(c){tN(t.model,c,o).fold(function(){return Qr.dehighlight(r,o)},function(v){return v()})}):r.getSystem().getByUid(t.uid).each(function(c){t.model.populateFromBrowse&&eT(t.model,c,o)}),t.previewing.set(!1)},onExecute:function(r,o){return r.getSystem().getByUid(t.uid).toOptional().map(function(c){return sn(c,tT(),{item:o}),!0})},onHover:function(r,o){t.previewing.set(!1),r.getSystem().getByUid(t.uid).each(function(c){t.model.populateFromBrowse&&eT(t.model,c,o)})}}}})]),oN=mu({name:"Typeahead",configFields:rN(),partFields:aN(),factory:nN}),Vl=function(t){var r=function(){return Vl(t.toCached())},o=function(S){return Vl(t.bind(function(T){return T.fold(function(R){return pu.pure(mn.error(R))},function(R){return S(R)})}))},c=function(S){return Vl(t.map(function(T){return T.bind(S)}))},v=function(S){return Vl(t.map(function(T){return T.map(S)}))},m=function(S){return Vl(t.map(function(T){return T.mapError(S)}))},p=function(S,T){return t.map(function(R){return R.fold(S,T)})},w=function(S,T){return Vl(pu.nu(function(R){var O=!1,N=setTimeout(function(){O=!0,R(mn.error(T()))},S);t.get(function(L){O||(clearTimeout(N),R(L))})}))};return me(me({},t),{toCached:r,bindFuture:o,bindResult:c,mapResult:v,mapError:m,foldResult:p,withTimeout:w})},s5=function(t){return Vl(pu.nu(t))},l5=function(t){return Vl(pu.pure(mn.value(t)))},f5=function(t){return Vl(pu.pure(mn.error(t)))},iN=function(t){return Vl(pu.pure(t))},uN=function(t){return Vl(t.map(mn.value))},cN=function(t){return s5(function(r){t.then(function(o){r(mn.value(o))},function(o){r(mn.error(o))})})},sN={nu:s5,wrap:Vl,pure:l5,value:l5,error:f5,fromResult:iN,fromFuture:uN,fromPromise:cN},lN={type:"separator"},fN=function(t){return{type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:He}},nT=function(t,r){return{type:"menuitem",value:r,text:t,meta:{attach:void 0},onAction:He}},Nh=function(t){return yt(t,fN)},rT=function(t,r){return rt(r,function(o){return o.type===t})},v5=function(t,r){return Nh(rT(t,r))},vN=function(t){return v5("header",t.targets)},Nk=function(t){return v5("anchor",t.targets)},dN=function(t){return D.from(t.anchorTop).map(function(r){return nT("<top>",r)}).toArray()},mN=function(t){return D.from(t.anchorBottom).map(function(r){return nT("<bottom>",r)}).toArray()},d5=function(t){return yt(t,function(r){return nT(r,r)})},m5=function(t){return kn(t,function(r,o){var c=r.length===0||o.length===0;return c?r.concat(o):r.concat(lN,o)},[])},Ik=function(t,r){var o=t.toLowerCase();return rt(r,function(c){var v=c.meta!==void 0&&c.meta.text!==void 0?c.meta.text:c.text;return Lo(v.toLowerCase(),o)||Lo(c.value.toLowerCase(),o)})},gN=function(t,r,o){var c=Vt.getValue(r),v=c.meta.text!==void 0?c.meta.text:c.value,m=o.getLinkInformation();return m.fold(function(){return[]},function(p){var w=Ik(v,d5(o.getHistory(t)));return t==="file"?m5([w,Ik(v,vN(p)),Ik(v,dn([dN(p),Nk(p),mN(p)]))]):w})},g5=bn("aria-invalid"),hN=function(t,r,o){var c,v=r.shared.providers,m=function(ne){var ye=Vt.getValue(ne);o.addToHistory(ye.value,t.filetype)},p=Xr.parts.field({factory:oN,dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":g5,type:"url"},minChars:0,responseTime:0,fetch:function(ne){var ye=gN(t.filetype,ne,o),he=ug(ye,$l.BUBBLE_TO_SANDBOX,r,!1);return pu.pure(he)},getHotspot:function(ne){return L.getOpt(ne)},onSetValue:function(ne,ye){ne.hasConfigured(yf)&&yf.run(ne).get(He)},typeaheadBehaviours:Pt(dn([o.getValidationHandler().map(function(ne){return yf.config({getRoot:function(ye){return Si(ye.element)},invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:function(ye,he){T.getOpt(ye).each(function(Ve){kr(Ve.element,"title",v.translate(he))})}},validator:{validate:function(ye){var he=Vt.getValue(ye);return sN.nu(function(Ve){ne({type:t.filetype,url:he.value},function(_e){if(_e.status==="invalid"){var Ke=mn.error(_e.message);Ve(Ke)}else{var Pe=mn.value(_e.message);Ve(Pe)}})})},validateOnLoad:!1}})}).toArray(),[Tn.config({disabled:function(){return t.disabled||v.isDisabled()}}),La.config({}),lr("urlinput-events",dn([t.filetype==="file"?[ot(ol(),function(ne){sn(ne,Tc,{name:t.name})})]:[],[ot(Lf(),function(ne){sn(ne,Tc,{name:t.name}),m(ne)}),ot(Uf(),function(ne){sn(ne,Tc,{name:t.name}),m(ne)})]]))]])),eventOrder:(c={},c[ol()]=["streaming","urlinput-events","invalidating"],c),model:{getDisplayText:function(ne){return ne.value},selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:r.shared.getSink,parts:{menu:T2(!1,1,"normal")},onExecute:function(ne,ye,he){sn(ye,tg,{})},onItemExecute:function(ne,ye,he,Ve){m(ne),sn(ne,Tc,{name:t.name})}}),w=t.label.map(function(ne){return Tv(ne,v)}),S=function(ne,ye,he,Ve){return he===void 0&&(he=ne),Ve===void 0&&(Ve=ne),pf(he,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+ne],attributes:me({title:v.translate(Ve),"aria-live":"polite"},ye.fold(function(){return{}},function(_e){return{id:_e}}))},v.icons)},T=ea(S("invalid",D.some(g5),"warning")),R=ea({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[T.asSpec()]}),O=o.getUrlPicker(t.filetype),N=bn("browser.url.event"),L=ea({dom:{tag:"div",classes:["tox-control-wrap"]},components:[p,R.asSpec()],behaviours:Pt([Tn.config({disabled:function(){return t.disabled||v.isDisabled()}})])}),q=ea(Ph({name:t.name,icon:D.some("browse"),text:t.label.getOr(""),disabled:t.disabled,primary:!1,borderless:!0},function(ne){return zr(ne,N)},v,[],["tox-browse-url"])),X=function(){return{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:dn([[L.asSpec()],O.map(function(){return q.asSpec()}).toArray()])}},ge=function(ne){Dr.getCurrent(ne).each(function(ye){var he=Vt.getValue(ye),Ve=me({fieldname:t.name},he);O.each(function(_e){_e(Ve).get(function(Ke){Vt.setValue(ye,Ke),sn(ne,Tc,{name:t.name})})})})};return Xr.sketch({dom:p6(),components:w.toArray().concat([X()]),fieldBehaviours:Pt([Tn.config({disabled:function(){return t.disabled||v.isDisabled()},onDisabled:function(ne){Xr.getField(ne).each(Tn.disable),q.getOpt(ne).each(Tn.disable)},onEnabled:function(ne){Xr.getField(ne).each(Tn.enable),q.getOpt(ne).each(Tn.enable)}}),Uo(),lr("url-input-events",[ot(N,ge)])])})},pN=function(t,r){return Nu.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in","tox-notification--"+t.level]},components:[{dom:{tag:"div",classes:["tox-notification__icon"]},components:[ac.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:b2(t.icon,r.icons),attributes:{title:r.translate(t.iconTooltip)}},action:function(o){sn(o,Ev,{name:"alert-banner",value:t.url})},buttonBehaviours:Pt([y2()])})]},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:r.translate(t.text)}}]})},h5=function(t,r){var o=Vt.config({store:{mode:"manual",getValue:function(S){var T=S.element.dom;return T.checked},setValue:function(S,T){var R=S.element.dom;R.checked=T}}}),c=function(S){return S.element.dom.click(),D.some(!0)},v=Xr.parts.field({factory:{sketch:Te},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:Pt([ys.self(),Tn.config({disabled:function(){return t.disabled||r.isDisabled()}}),La.config({}),Qn.config({}),o,Pn.config({mode:"special",onEnter:c,onSpace:c,stopSpaceKeyup:!0}),lr("checkbox-events",[ot(Lf(),function(S,T){sn(S,Tc,{name:t.name})})])])}),m=Xr.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"],innerHtml:r.translate(t.label)},behaviours:Pt([L2.config({})])}),p=function(S){var T=S==="checked"?"selected":"unselected";return pf(T,{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+S]},r.icons)},w=ea({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[p("checked"),p("unchecked")]});return Xr.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[v,w.asSpec(),m],fieldBehaviours:Pt([Tn.config({disabled:function(){return t.disabled||r.isDisabled()},disableClass:"tox-checkbox--disabled",onDisabled:function(S){Xr.getField(S).each(Tn.disable)},onEnabled:function(S){Xr.getField(S).each(Tn.enable)}}),Uo()])})},bN=function(t){return t.presets==="presentation"?Nu.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html}}):Nu.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:Pt([La.config({}),Qn.config({})])})},_i=function(t){return function(r,o,c){return Cn(o,"name").fold(function(){return t(o,c)},function(v){return r.field(v,t(o,c))})}},yN=function(t){return function(r,o,c){var v=gr(o,{source:"dynamic"});return _i(t)(r,v,c)}},wN={bar:_i(function(t,r){return v6(t,r.shared)}),collection:_i(function(t,r){return b6(t,r.shared.providers)}),alertbanner:_i(function(t,r){return pN(t,r.shared.providers)}),input:_i(function(t,r){return a5(t,r.shared.providers)}),textarea:_i(function(t,r){return KP(t,r.shared.providers)}),label:_i(function(t,r){return VP(t,r.shared)}),iframe:yN(function(t,r){return LF(t,r.shared.providers)}),button:_i(function(t,r){return LR(t,r.shared.providers)}),checkbox:_i(function(t,r){return h5(t,r.shared.providers)}),colorinput:_i(function(t,r){return H6(t,r.shared,r.colorinput)}),colorpicker:_i(RF),dropzone:_i(function(t,r){return NF(t,r.shared.providers)}),grid:_i(function(t,r){return IF(t,r.shared)}),listbox:_i(function(t,r){return UP(t,r)}),selectbox:_i(function(t,r){return n5(t,r.shared.providers)}),sizeinput:_i(function(t,r){return WR(t,r.shared.providers)}),urlinput:_i(function(t,r){return hN(t,r,r.urlinput)}),customeditor:_i(rR),htmlpanel:_i(bN),imagetools:_i(function(t,r){return HP(t,r.shared.providers)}),table:_i(function(t,r){return GP(t,r.shared.providers)}),panel:_i(function(t,r){return WP(t,r)})},$k={field:function(t,r){return r}},aT=function(t,r,o){var c=gr(o,{shared:{interpreter:function(v){return Ih(t,v,c)}}});return Ih(t,r,c)},Ih=function(t,r,o){return Cn(wN,r.type).fold(function(){return console.error('Unknown factory type "'+r.type+'", defaulting to container: ',r),r},function(c){return c(t,r,o)})},CN=function(t,r){var o=$k;return Ih(o,t,r)},p5={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},SN=function(t,r,o){var c=12,v={maxHeightFunction:sv()},m=function(){return{type:"node",root:im(t()),node:D.from(t()),bubble:Cm(c,c,p5),layouts:{onRtl:function(){return[c0]},onLtr:function(){return[p2]}},overrides:v}},p=function(){return{type:"hotspot",hotspot:r(),bubble:Cm(-c,c,p5),layouts:{onRtl:function(){return[au]},onLtr:function(){return[ou]}},overrides:v}};return function(){return o()?m():p()}},xN=function(t,r,o){var c=function(){return{type:"node",root:im(t()),node:D.from(t()),layouts:{onRtl:function(){return[gf]},onLtr:function(){return[gf]}}}},v=function(){return{type:"hotspot",hotspot:r(),layouts:{onRtl:function(){return[Ui]},onLtr:function(){return[Ui]}}}};return function(){return o()?c():v()}},TN=function(t,r){return function(){return{type:"selection",root:r(),getSelection:function(){var o=t.selection.getRng();return D.some(Tm.range(Ft.fromDom(o.startContainer),o.startOffset,Ft.fromDom(o.endContainer),o.endOffset))}}}},b5=function(t){return function(r){return{type:"node",root:t(),node:r}}},y5=function(t,r,o){var c=cx(t),v=function(){return Ft.fromDom(t.getBody())},m=function(){return Ft.fromDom(t.getContentAreaContainer())},p=function(){return c||!o()};return{inlineDialog:SN(m,r,p),banner:xN(m,r,p),cursor:TN(t,v),node:b5(v)}},w5=function(t){return function(r,o){var c=B4(t);c(r,o)}},EN=function(t){return function(){return SO(t)}},kN=function(t){return function(){return M2(t)}},AN=function(t){return function(){return S0(t)}},ON=function(t){return{colorPicker:w5(t),hasCustomColors:EN(t),getColors:kN(t),getColorCols:AN(t)}},DN=function(t){return function(){return ZA(t)}},C5=function(t){return{isDraggableModal:DN(t)}},RN=function(t){var r=Bn(GA(t)?"bottom":"top");return{isPositionedAtTop:function(){return r.get()==="top"},getDockingMode:r.get,setDockingMode:r.set}},S5=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],BN=function(t){return Xn(t,"items")},_N=function(t){return Xn(t,"block")},x5=function(t){return Xn(t,"inline")},$h=function(t){return Xn(t,"selector")},zk=function(t){return kn(t,function(r,o){if(BN(o)){var c=zk(o.items);return{customFormats:r.customFormats.concat(c.customFormats),formats:r.formats.concat([{title:o.title,items:c.formats}])}}else if(x5(o)||_N(o)||$h(o)){var v=Ut(o.name)?o.name:o.title.toLowerCase(),m="custom-"+v;return{customFormats:r.customFormats.concat([{name:m,format:o}]),formats:r.formats.concat([{title:o.title,format:m,icon:o.icon}])}}else return me(me({},r),{formats:r.formats.concat(o)})},{customFormats:[],formats:[]})},MN=function(t,r){var o=zk(r),c=function(v){Jt(v,function(m){t.formatter.has(m.name)||t.formatter.register(m.name,m.format)})};return t.formatter?c(o.customFormats):t.on("init",function(){c(o.customFormats)}),o.formats},T5=function(t){return N_(t).map(function(r){var o=MN(t,r);return I_(t)?S5.concat(o):o}).getOr(S5)},E5=function(t,r,o){var c={type:"formatter",isSelected:r(t.format),getStylePreview:o(t.format)};return gr(t,c)},Lk=function(t,r,o,c){var v=function(S){return E5(S,o,c)},m=function(S){var T={type:"submenu"};return gr(S,T)},p=function(S){var T=Ut(S.name)?S.name:bn(S.title),R="custom-"+T,O={type:"formatter",format:R,isSelected:o(R),getStylePreview:c(R)},N=gr(S,O);return t.formatter.register(T,N),N},w=function(S){return yt(S,function(T){var R=$r(T);if(Na(T,"items")){var O=w(T.items);return gr(m(T),{getStyleItems:re(O)})}else return Na(T,"format")?v(T):R.length===1&&ir(R,"title")?gr(T,{type:"separator"}):p(T)})};return w(r)},FN=function(t){var r=function(O){return function(){return t.formatter.match(O)}},o=function(O){return function(){var N=t.formatter.get(O);return N!==void 0?D.some({tag:N.length>0&&(N[0].inline||N[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(O))}):D.none()}},c=function(O){var N=O.items;return N!==void 0&&N.length>0?qr(N,c):[O.format]},v=Bn([]),m=Bn([]),p=Bn([]),w=Bn([]),S=Bn(!1);t.on("PreInit",function(O){var N=T5(t),L=Lk(t,N,r,o);v.set(L),m.set(qr(L,c))}),t.on("addStyleModifications",function(O){var N=Lk(t,O.items,r,o);p.set(N),S.set(O.replace),w.set(qr(N,c))});var T=function(){var O=S.get()?[]:v.get(),N=p.get();return O.concat(N)},R=function(){var O=S.get()?[]:m.get(),N=w.get();return O.concat(N)};return{getData:T,getFlattenedKeys:R}},PN=function(t){return un(t)&&t.nodeType===1},NN=ic.trim,k5=function(t){return function(r){return!!(PN(r)&&(r.contentEditable===t||r.getAttribute("data-mce-contenteditable")===t))}},IN=k5("true"),$N=k5("false"),A5=function(t,r,o,c,v){return{type:t,title:r,url:o,level:c,attach:v}},zN=function(t){for(;t=t.parentNode;){var r=t.contentEditable;if(r&&r!=="inherit")return IN(t)}return!1},LN=function(t,r){return yt(zu(Ft.fromDom(r),t),function(o){return o.dom})},O5=function(t){return t.innerText||t.textContent},D5=function(t){return t.id?t.id:bn("h")},HN=function(t){return t&&t.nodeName==="A"&&(t.id||t.name)!==void 0},VN=function(t){return HN(t)&&B5(t)},R5=function(t){return t&&/^(H[1-6])$/.test(t.nodeName)},B5=function(t){return zN(t)&&!$N(t)},UN=function(t){return R5(t)&&B5(t)},Hk=function(t){return R5(t)?parseInt(t.nodeName.substr(1),10):0},_5=function(t){var r=D5(t),o=function(){t.id=r};return A5("header",O5(t),"#"+r,Hk(t),o)},WN=function(t){var r=t.id||t.name,o=O5(t);return A5("anchor",o||"#"+r,"#"+r,0,He)},jN=function(t){return yt(rt(t,UN),_5)},qN=function(t){return yt(rt(t,VN),WN)},GN=function(t){var r=LN("h1,h2,h3,h4,h5,h6,a:not([href])",t);return r},KN=function(t){return NN(t.title).length>0},XN=function(t){var r=GN(t);return rt(jN(r).concat(qN(r)),KN)},YN={find:XN},oT="tinymce-url-history",M5=5,X2=function(t){return Ut(t)&&/^https?/.test(t)},JN=function(t){return Sn(t)&&t.length<=M5&&Ur(t,X2)},F5=function(t){return Vn(t)&&Ha(t,function(r){return!JN(r)}).isNone()},Vk=function(){var t=mx.getItem(oT);if(t===null)return{};var r;try{r=JSON.parse(t)}catch(o){if(o instanceof SyntaxError)return console.log("Local storage "+oT+" was not valid JSON",o),{};throw o}return F5(r)?r:(console.log("Local storage "+oT+" was not valid format",r),{})},zh=function(t){if(!F5(t))throw new Error(`Bad format for history:
`+JSON.stringify(t));mx.setItem(oT,JSON.stringify(t))},ZN=function(t){var r=Vk();return Cn(r,t).getOr([])},Uk=function(t,r){if(!!X2(t)){var o=Vk(),c=Cn(o,r).getOr([]),v=rt(c,function(m){return m!==t});o[r]=[t].concat(v).slice(0,M5),zh(o)}},I0=function(t){return!!t},QN=function(t){return Gr(ic.makeMap(t,/[, ]/),I0)},Wk=function(t){return D.from(W_(t)).filter(br)},e8=function(t){var r=D.some(j_(t)).filter(I0),o=D.some(q_(t)).filter(I0),c=r.or(o).map(QN);return Wk(t).fold(rn,function(v){return c.fold(ut,function(m){return $r(m).length>0?m:!1})})},t8=function(t,r){var o=e8(t);return jt(o)?o?Wk(t):D.none():o[r]?Wk(t):D.none()},n8=function(t,r){return t8(t,r).map(function(o){return function(c){return pu.nu(function(v){var m=function(w,S){if(!Ut(w))throw new Error("Expected value to be string");if(S!==void 0&&!Vn(S))throw new Error("Expected meta to be a object");var T={value:w,meta:S};v(T)},p=me({filetype:r,fieldname:c.fieldname},D.from(c.meta).getOr({}));o.call(t,m,c.value,p)})}})},cg=function(t){return D.from(t).filter(Ut).getOrUndefined()},P5=function(t){return G_(t)?D.none():D.some({targets:YN.find(t.getBody()),anchorTop:cg(K_(t)),anchorBottom:cg(X_(t))})},r8=function(t){return D.from(Y_(t))},a8=function(t){return{getHistory:ZN,addToHistory:Uk,getLinkInformation:function(){return P5(t)},getValidationHandler:function(){return r8(t)},getUrlPicker:function(r){return n8(t,r)}}},o8=function(t,r,o){var c=Bn(!1),v=RN(r),m={shared:{providers:{icons:function(){return r.ui.registry.getAll().icons},menuItems:function(){return r.ui.registry.getAll().menuItems},translate:hf.translate,isDisabled:function(){return r.mode.isReadOnly()||r.ui.isDisabled()},getSetting:r.getParam.bind(r)},interpreter:function(p){return CN(p,m)},anchors:y5(r,o,v.isPositionedAtTop),header:v,getSink:function(){return mn.value(t)}},urlinput:a8(r),styleselect:FN(r),colorinput:ON(r),dialog:C5(r),isContextMenuOpen:function(){return c.get()},setContextMenuState:function(p){return c.set(p)}};return m},i8=function(t,r,o){var c=function(he,Ve){Jt([r,o],function(_e){_e.broadcastEvent(he,Ve)})},v=function(he,Ve){Jt([r,o],function(_e){_e.broadcastOn([he],Ve)})},m=function(he){return v(md(),{target:he.target})},p=ji(Ft.fromDom(document),"touchstart",m),w=ji(Ft.fromDom(document),"touchmove",function(he){return c(Eg(),he)}),S=ji(Ft.fromDom(document),"touchend",function(he){return c(kT(),he)}),T=ji(Ft.fromDom(document),"mousedown",m),R=ji(Ft.fromDom(document),"mouseup",function(he){he.raw.button===0&&v(yy(),{target:he.target})}),O=function(he){return v(md(),{target:Ft.fromDom(he.target)})},N=function(he){he.button===0&&v(yy(),{target:Ft.fromDom(he.target)})},L=function(){Jt(t.editorManager.get(),function(he){t!==he&&he.fire("DismissPopups",{relatedTarget:t})})},q=function(he){return c(J0(),t1(he))},X=function(he){v(Rm(),{}),c(Gf(),t1(he))},ge=function(){return v(Rm(),{})},ne=function(he){he.state&&v(md(),{target:Ft.fromDom(t.getContainer())})},ye=function(he){v(md(),{target:Ft.fromDom(he.relatedTarget.getContainer())})};t.on("PostRender",function(){t.on("click",O),t.on("tap",O),t.on("mouseup",N),t.on("mousedown",L),t.on("ScrollWindow",q),t.on("ResizeWindow",X),t.on("ResizeEditor",ge),t.on("AfterProgressState",ne),t.on("DismissPopups",ye)}),t.on("remove",function(){t.off("click",O),t.off("tap",O),t.off("mouseup",N),t.off("mousedown",L),t.off("ScrollWindow",q),t.off("ResizeWindow",X),t.off("ResizeEditor",ge),t.off("AfterProgressState",ne),t.off("DismissPopups",ye),T.unbind(),p.unbind(),w.unbind(),S.unbind(),R.unbind()}),t.on("detach",function(){Pu(r),Pu(o),r.destroy(),o.destroy()})},Ec=qn,Lh=VC,jk=re([xe("shell",!1),nt("makeItem"),xe("setupItem",He),Sc.field("listBehaviours",[nr])]),Y2=function(){return{behaviours:Pt([nr.config({})])}},iT=ps({name:"items",overrides:Y2}),uT=re([iT]),Hh=re("CustomList"),cT=function(t,r,o,c){var v=function(w,S){p(w).fold(function(){throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},function(T){var R=nr.contents(T),O=S.length,N=O-R.length,L=N>0?te(N,function(){return t.makeItem()}):[],q=R.slice(O);Jt(q,function(ge){return nr.remove(T,ge)}),Jt(L,function(ge){return nr.append(T,ge)});var X=nr.contents(T);Jt(X,function(ge,ne){t.setupItem(w,ge,S[ne],ne)})})},m=t.shell?{behaviours:[nr.config({})],components:[]}:{behaviours:[],components:r},p=function(w){return t.shell?D.some(w):ya(w,t,"items")};return{uid:t.uid,dom:t.dom,components:m.components,behaviours:Ai(t.listBehaviours,m.behaviours),apis:{setItems:v}}},N5=mu({name:Hh(),configFields:jk(),partFields:uT(),factory:cT,apis:{setItems:function(t,r,o){t.setItems(r,o)}}}),Vh=re([nt("dom"),xe("shell",!0),Vo("toolbarBehaviours",[nr])]),I5=function(){return{behaviours:Pt([nr.config({})])}},$5=re([ps({name:"groups",overrides:I5})]),u8=function(t,r,o,c){var v=function(w,S){m(w).fold(function(){throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},function(T){nr.set(T,S)})},m=function(w){return t.shell?D.some(w):ya(w,t,"groups")},p=t.shell?{behaviours:[nr.config({})],components:[]}:{behaviours:[],components:r};return{uid:t.uid,dom:t.dom,components:p.components,behaviours:Ai(t.toolbarBehaviours,p.behaviours),apis:{setGroups:v},domModification:{attributes:{role:"group"}}}},Ul=mu({name:"Toolbar",configFields:Vh(),partFields:$5(),factory:u8,apis:{setGroups:function(t,r,o){t.setGroups(r,o)}}}),c8=He,s8=rn,z5=re([]),qk=Object.freeze({__proto__:null,setup:c8,isDocked:s8,getBehaviours:z5}),sT=function(t){var r=pc(Zr(t,"position"),"fixed"),o=r?D.none():Vv(t);return o.orThunk(function(){var c=Ft.fromTag("span");return Si(t).bind(function(v){Ju(v,c);var m=Vv(c);return Yf(c),m})})},L5=function(t){return sT(t).map(yl).getOrThunk(function(){return Qa(0,0)})},lT=fu.generate([{static:[]},{absolute:["positionCss"]},{fixed:["positionCss"]}]),l8=function(t,r){var o=t.element;no(o,r.transitionClass),wo(o,r.fadeOutClass),no(o,r.fadeInClass),r.onShow(t)},H5=function(t,r){var o=t.element;no(o,r.transitionClass),wo(o,r.fadeInClass),no(o,r.fadeOutClass),r.onHide(t)},f8=function(t,r){return t.y<r.bottom&&t.bottom>r.y},v8=function(t,r){return t.y>=r.y},V5=function(t,r){return t.bottom<=r.bottom},U5=function(t,r,o){return Ur(t,function(c){switch(c){case"bottom":return V5(r,o);case"top":return v8(r,o)}})},W5=function(t,r){return r.getInitialPos().map(function(o){return du(o.bounds.x,o.bounds.y,ii(t),Ti(t))})},d8=function(t,r,o){o.setInitialPos({style:Xv(t),position:oi(t,"position")||"static",bounds:r})},sg=function(t,r,o){return o.getInitialPos().bind(function(c){switch(o.clearInitialPos(),c.position){case"static":return D.some(lT.static());case"absolute":var v=sT(t).map(Ao).getOrThunk(function(){return Ao(gl())});return D.some(lT.absolute(Wi("absolute",Cn(c.style,"left").map(function(m){return r.x-v.x}),Cn(c.style,"top").map(function(m){return r.y-v.y}),Cn(c.style,"right").map(function(m){return v.right-r.right}),Cn(c.style,"bottom").map(function(m){return v.bottom-r.bottom}))));default:return D.none()}})},Uh=function(t,r,o){return W5(t,o).filter(function(c){return U5(o.getModes(),c,r)}).bind(function(c){return sg(t,c,o)})},j5=function(t,r,o){var c=Ao(t);if(U5(o.getModes(),c,r))return D.none();d8(t,c,o);var v=Is(),m=c.x-v.x,p=r.y-v.y,w=v.bottom-r.bottom,S=c.y<=r.y;return D.some(lT.fixed(Wi("fixed",D.some(m),S?D.some(p):D.none(),D.none(),S?D.none():D.some(w))))},m8=function(t,r,o){var c=t.element,v=pc(Zr(c,"position"),"fixed");return v?Uh(c,r,o):j5(c,r,o)},q5=function(t,r){var o=t.element;return W5(o,r).bind(function(c){return sg(o,c,r)})},G5=function(t,r){Jt(["left","right","top","bottom","position"],function(o){return Ma(t.element,o)}),r.onUndocked(t)},$0=function(t,r,o){ym(t.element,o);var c=o.position==="fixed"?r.onDocked:r.onUndocked;c(t)},Zs=function(t,r,o,c,v){v===void 0&&(v=!1),r.contextual.each(function(m){m.lazyContext(t).each(function(p){var w=f8(p,c);if(w!==o.isVisible())if(o.setVisible(w),v&&!w)Lc(t.element,[m.fadeOutClass]),m.onHide(t);else{var S=w?l8:H5;S(t,m)}})})},g8=function(t,r,o){var c=r.lazyViewport(t),v=o.isDocked();v&&Zs(t,r,o,c),m8(t,c,o).each(function(m){o.setDocked(!v),m.fold(function(){return G5(t,r)},function(p){return $0(t,r,p)},function(p){Zs(t,r,o,c,!0),$0(t,r,p)})})},Ov=function(t,r,o){var c=t.element;o.setDocked(!1),q5(t,o).each(function(v){v.fold(function(){return G5(t,r)},function(m){return $0(t,r,m)},He)}),o.setVisible(!0),r.contextual.each(function(v){vu(c,[v.fadeInClass,v.fadeOutClass,v.transitionClass]),v.onShow(t)}),Gk(t,r,o)},Gk=function(t,r,o){t.getSystem().isConnected()&&g8(t,r,o)},K5=function(t,r,o){o.isDocked()&&Ov(t,r,o)},X5=function(t,r,o){return o.isDocked()},fT=function(t,r,o,c){return o.setModes(c)},lg=function(t,r,o){return o.getModes()},kc=Object.freeze({__proto__:null,refresh:Gk,reset:K5,isDocked:X5,getModes:lg,setModes:fT}),h8=function(t,r){return xa([vs(Hf(),function(o,c){t.contextual.each(function(v){if(Co(o.element,v.transitionClass)){vu(o.element,[v.transitionClass,v.fadeInClass]);var m=r.isVisible()?v.onShown:v.onHidden;m(o)}c.stop()})}),ot(J0(),function(o,c){Gk(o,t,r)}),ot(Gf(),function(o,c){K5(o,t,r)})])},Y5=Object.freeze({__proto__:null,events:h8}),J5=[$a("contextual",[In("fadeInClass"),In("fadeOutClass"),In("transitionClass"),Eo("lazyContext"),Kr("onShow"),Kr("onShown"),Kr("onHide"),Kr("onHidden")]),aa("lazyViewport",Is),va("modes",["top","bottom"],ue),Kr("onDocked"),Kr("onUndocked")],Z5=function(t){var r=Bn(!1),o=Bn(!0),c=ro(),v=Bn(t.modes),m=function(){return"docked:  "+r.get()+", visible: "+o.get()+", modes: "+v.get().join(",")};return tu({isDocked:r.get,setDocked:r.set,getInitialPos:c.get,setInitialPos:c.set,clearInitialPos:c.clear,isVisible:o.get,setVisible:o.set,getModes:v.get,setModes:v.set,readState:m})},p8=Object.freeze({__proto__:null,init:Z5}),Vu=si({fields:J5,name:"docking",active:Y5,apis:kc,state:p8}),Dv=re(bn("toolbar-height-change")),xf={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},Wh="tox-tinymce--toolbar-sticky-on",J2="tox-tinymce--toolbar-sticky-off",Q5=function(t,r){var o=Wa(r),c=o.dom.defaultView.innerHeight,v=Ns(o),m=Ft.fromDom(t.elm),p=tv(m),w=Ti(m),S=p.y,T=S+w,R=yl(r),O=Ti(r),N=R.top,L=N+O,q=Math.abs(N-v.top)<2,X=Math.abs(L-(v.top+c))<2;if(q&&S<L)Jv(v.left,S-O,o);else if(X&&T>N){var ge=S-c+w+O;Jv(v.left,ge,o)}},Kk=function(t,r){return ir(Vu.getModes(t),r)},Xk=function(t){var r=function(c){return Hc(c)+(parseInt(oi(c,"margin-top"),10)||0)+(parseInt(oi(c,"margin-bottom"),10)||0)},o=t.element;Si(o).each(function(c){var v="padding-"+Vu.getModes(t)[0];if(Vu.isDocked(t)){var m=ii(c);yr(o,"width",m+"px"),yr(c,v,r(o)+"px")}else Ma(o,"width"),Ma(c,v)})},eB=function(t,r){r?(wo(t,xf.fadeOutClass),Lc(t,[xf.transitionClass,xf.fadeInClass])):(wo(t,xf.fadeInClass),Lc(t,[xf.fadeOutClass,xf.transitionClass]))},tB=function(t,r){var o=Ft.fromDom(t.getContainer());r?(no(o,Wh),wo(o,J2)):(no(o,J2),wo(o,Wh))},z0=function(t,r){var o=Wa(r);tc(o).filter(function(c){return!Ja(r,c)}).filter(function(c){return Ja(c,Ft.fromDom(o.dom.body))||Jl(t,c)}).each(function(){return Fu(r)})},b8=function(t,r){return Vc(t).orThunk(function(){return r().toOptional().bind(function(o){return Vc(o.element)})})},y8=function(t,r,o){t.inline||(r.header.isPositionedAtTop()||t.on("ResizeEditor",function(){o().each(Vu.reset)}),t.on("ResizeWindow ResizeEditor",function(){o().each(Xk)}),t.on("SkinLoaded",function(){o().each(function(c){Vu.isDocked(c)?Vu.reset(c):Vu.refresh(c)})}),t.on("FullscreenStateChanged",function(){o().each(Vu.reset)})),t.on("AfterScrollIntoView",function(c){o().each(function(v){Vu.refresh(v);var m=v.element;Yy(m)&&Q5(c,m)})}),t.on("PostRender",function(){tB(t,!1)})},w8=function(t){return t().map(Vu.isDocked).getOr(!1)},C8=function(){var t;return[yc.config({channels:(t={},t[Dv()]={onReceive:Xk},t)})]},nB=function(t,r){var o=ro(),c=r.getSink,v=function(w){c().each(function(S){return w(S.element)})},m=function(w){t.inline||Xk(w),tB(t,Vu.isDocked(w)),w.getSystem().broadcastOn([Rm()],{}),c().each(function(S){return S.getSystem().broadcastOn([Rm()],{})})},p=t.inline?[]:C8();return Dn([Qn.config({}),Vu.config({contextual:me({lazyContext:function(w){var S=Hc(w.element),T=t.inline?t.getContentAreaContainer():t.getContainer(),R=Ao(Ft.fromDom(T)),O=R.height-S,N=R.y+(Kk(w,"top")?0:S);return D.some(du(R.x,N,R.width,O))},onShow:function(){v(function(w){return eB(w,!0)})},onShown:function(w){v(function(S){return vu(S,[xf.transitionClass,xf.fadeInClass])}),o.get().each(function(S){z0(w.element,S),o.clear()})},onHide:function(w){b8(w.element,c).fold(o.clear,o.set),v(function(S){return eB(S,!1)})},onHidden:function(){v(function(w){return vu(w,[xf.transitionClass])})}},xf),lazyViewport:function(w){var S=Is(),T=g4(t),R=S.y+(Kk(w,"top")?T:0),O=S.height-(Kk(w,"bottom")?T:0);return du(S.x,R,S.width,O)},modes:[r.header.getDockingMode()],onDocked:m,onUndocked:m})],p)},vT=Object.freeze({__proto__:null,setup:y8,isDocked:w8,getBehaviours:nB}),S8=function(t){var r=t.editor,o=t.sticky?nB:z5;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:Pt(o(r,t.sharedBackstage))}},rB=De([In("type"),po("items",ce([Gt([In("name"),B("items",ue)]),ue]))].concat(C2)),Yk=function(t){return Pr("GroupToolbarButton",rB,t)},aB=[Z("text"),Z("tooltip"),Z("icon"),Eo("fetch"),aa("onSetup",function(){return He})],dT=De(Dn([In("type")],aB)),Z2=function(t){return Pr("menubutton",dT,t)},jh=De([In("type"),Z("tooltip"),Z("icon"),Z("text"),Zn("select"),Eo("fetch"),aa("onSetup",function(){return He}),Cu("presets","normal",["normal","color","listpreview"]),xe("columns",1),Eo("onAction"),Eo("onItemAction")]),x8=function(t){return Pr("SplitButton",jh,t)},T8=function(t,r){var o=function(v,m){var p=yt(m,function(w){var S={type:"menubutton",text:w.text,fetch:function(R){R(w.getItems())}},T=Z2(S).mapError(function(R){return ju(R)}).getOrDie();return Dk(T,"tox-mbtn",r.backstage,D.some("menuitem"))});nr.set(v,p)},c={focus:Pn.focusIn,setMenus:o};return{uid:t.uid,dom:t.dom,components:[],behaviours:Pt([nr.config({}),lr("menubar-events",[Ta(function(v){t.onSetup(v)}),ot(al(),function(v,m){ru(v.element,".tox-mbtn--active").each(function(p){hs(m.event.target,".tox-mbtn").each(function(w){Ja(p,w)||v.getSystem().getByDom(p).each(function(S){v.getSystem().getByDom(w).each(function(T){zl.expand(T),zl.close(S),Qn.focus(T)})})})})}),ot(tm(),function(v,m){m.event.prevFocus.bind(function(p){return v.getSystem().getByDom(p).toOptional()}).each(function(p){m.event.newFocus.bind(function(w){return v.getSystem().getByDom(w).toOptional()}).each(function(w){zl.isOpen(p)&&(zl.expand(w),zl.close(p))})})})]),Pn.config({mode:"flow",selector:".tox-mbtn",onEscape:function(v){return t.onEscape(v),D.some(!0)}}),La.config({})]),apis:c,domModification:{attributes:{role:"menubar"}}}},Q2=xc({factory:T8,name:"silver.Menubar",configFields:[nt("dom"),nt("uid"),nt("onEscape"),nt("backstage"),xe("onSetup",He)],apis:{focus:function(t,r){t.focus(r)},setMenus:function(t,r,o){t.setMenus(r,o)}}}),ew=function(t,r){return r.getAnimationRoot.fold(function(){return t.element},function(o){return o(t)})},Tf=function(t){return t.dimension.property},qh=function(t,r){return t.dimension.getDimension(r)},Jk=function(t,r){var o=ew(t,r);vu(o,[r.shrinkingClass,r.growingClass])},Zk=function(t,r){wo(t.element,r.openClass),no(t.element,r.closedClass),yr(t.element,Tf(r),"0px"),Ql(t.element)},L0=function(t,r){wo(t.element,r.closedClass),no(t.element,r.openClass),Ma(t.element,Tf(r))},mT=function(t,r,o,c){o.setCollapsed(),yr(t.element,Tf(r),qh(r,t.element)),Ql(t.element),Jk(t,r),Zk(t,r),r.onStartShrink(t),r.onShrunk(t)},E8=function(t,r,o,c){var v=c.getOrThunk(function(){return qh(r,t.element)});o.setCollapsed(),yr(t.element,Tf(r),v),Ql(t.element);var m=ew(t,r);wo(m,r.growingClass),no(m,r.shrinkingClass),Zk(t,r),r.onStartShrink(t)},oB=function(t,r,o){var c=qh(r,t.element),v=c==="0px"?mT:E8;v(t,r,o,D.some(c))},Qk=function(t,r,o){var c=ew(t,r),v=Co(c,r.shrinkingClass),m=qh(r,t.element);L0(t,r);var p=qh(r,t.element),w=function(){yr(t.element,Tf(r),m),Ql(t.element)},S=function(){Zk(t,r)},T=v?w:S;T(),wo(c,r.shrinkingClass),no(c,r.growingClass),L0(t,r),yr(t.element,Tf(r),p),o.setExpanded(),r.onStartGrow(t)},k8=function(t,r,o){if(o.isExpanded()){Ma(t.element,Tf(r));var c=qh(r,t.element);yr(t.element,Tf(r),c)}},A8=function(t,r,o){o.isExpanded()||Qk(t,r,o)},e=function(t,r,o){o.isExpanded()&&oB(t,r,o)},n=function(t,r,o){o.isExpanded()&&mT(t,r,o)},a=function(t,r,o){return o.isExpanded()},i=function(t,r,o){return o.isCollapsed()},s=function(t,r,o){var c=ew(t,r);return Co(c,r.growingClass)===!0},f=function(t,r,o){var c=ew(t,r);return Co(c,r.shrinkingClass)===!0},g=function(t,r,o){return s(t,r)||f(t,r)},b=function(t,r,o){var c=o.isExpanded()?oB:Qk;c(t,r,o)},C=Object.freeze({__proto__:null,refresh:k8,grow:A8,shrink:e,immediateShrink:n,hasGrown:a,hasShrunk:i,isGrowing:s,isShrinking:f,isTransitioning:g,toggleGrow:b,disableTransitions:Jk}),k=function(t,r,o){var c=r.expanded;return Za(c?{classes:[r.openClass],styles:{}}:{classes:[r.closedClass],styles:$n(r.dimension.property,"0px")})},_=function(t,r){return xa([vs(Hf(),function(o,c){var v=c.event.raw;if(v.propertyName===t.dimension.property){Jk(o,t),r.isExpanded()&&Ma(o.element,t.dimension.property);var m=r.isExpanded()?t.onGrown:t.onShrunk;m(o)}})])},M=Object.freeze({__proto__:null,exhibit:k,events:_}),F=[nt("closedClass"),nt("openClass"),nt("shrinkingClass"),nt("growingClass"),W("getAnimationRoot"),Kr("onShrunk"),Kr("onStartShrink"),Kr("onGrown"),Kr("onStartGrow"),xe("expanded",!1),po("dimension",Ln("property",{width:[sa("property","width"),sa("getDimension",function(t){return ii(t)+"px"})],height:[sa("property","height"),sa("getDimension",function(t){return Ti(t)+"px"})]}))],U=function(t){var r=Bn(t.expanded),o=function(){return"expanded: "+r.get()};return tu({isExpanded:function(){return r.get()===!0},isCollapsed:function(){return r.get()===!1},setCollapsed:gt(r.set,!1),setExpanded:gt(r.set,!0),readState:o})},K=Object.freeze({__proto__:null,init:U}),j=si({fields:F,name:"sliding",active:M,apis:C,state:K}),J="container",fe=[Vo("slotBehaviours",[])],ve=function(t){return"<alloy.field."+t+">"},ae=function(t){var r=function(){var m=[],p=function(w,S){return m.push(w),Dy(J,ve(w),S)};return{slot:p,record:re(m)}}(),o=t(r),c=r.record(),v=yt(c,function(m){return uu({name:m,pname:ve(m)})});return My(J,fe,v,de,o)},de=function(t,r){var o=function(X){return qC(t)},c=function(X,ge){return ya(X,t,ge)},v=function(X,ge){return function(ne,ye){return ya(ne,t,ye).map(function(he){return X(he,ye)}).getOr(ge)}},m=function(X){return function(ge,ne){Jt(ne,function(ye){return X(ge,ye)})}},p=function(X,ge){return Eu(X.element,"aria-hidden")!=="true"},w=function(X,ge){if(!p(X)){var ne=X.element;Ma(ne,"display"),zi(ne,"aria-hidden"),sn(X,Z0(),{name:ge,visible:!0})}},S=function(X,ge){if(p(X)){var ne=X.element;yr(ne,"display","none"),kr(ne,"aria-hidden","true"),sn(X,Z0(),{name:ge,visible:!1})}},T=v(p,!1),R=v(S),O=m(R),N=function(X){return O(X,o())},L=v(w),q={getSlotNames:o,getSlot:c,isShowing:T,hideSlot:R,hideAllSlots:N,showSlot:L};return{uid:t.uid,dom:t.dom,components:r,behaviours:D1(t.slotBehaviours),apis:q}},Ee=Gr({getSlotNames:function(t,r){return t.getSlotNames(r)},getSlot:function(t,r,o){return t.getSlot(r,o)},isShowing:function(t,r,o){return t.isShowing(r,o)},hideSlot:function(t,r,o){return t.hideSlot(r,o)},hideAllSlots:function(t,r){return t.hideAllSlots(r)},showSlot:function(t,r,o){return t.showSlot(r,o)}},function(t){return Iu(t)}),Me=me(me({},Ee),{sketch:ae}),Qe=De([Z("icon"),Z("tooltip"),aa("onShow",He),aa("onHide",He),aa("onSetup",function(){return He})]),Tt=function(t){return Pr("sidebar",Qe,t)},jn=function(t){var r=t.ui.registry.getAll().sidebars;Jt($r(r),function(o){var c=r[o],v=function(){return pc(D.from(t.queryCommandValue("ToggleSidebar")),o)};t.ui.registry.addToggleButton(o,{icon:c.icon,tooltip:c.tooltip,onAction:function(m){t.execCommand("ToggleSidebar",!1,o),m.setActive(v())},onSetup:function(m){var p=function(){return m.setActive(v())};return t.on("ToggleSidebar",p),function(){t.off("ToggleSidebar",p)}}})})},Yt=function(t){return{element:function(){return t.element.dom}}},lt=function(t,r){var o=yt($r(r),function(c){var v=r[c],m=ba(Tt(v));return{name:c,getApi:Yt,onSetup:m.onSetup,onShow:m.onShow,onHide:m.onHide}});return yt(o,function(c){var v=Bn(He);return t.slot(c.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:rx.unnamedEvents([Zm(c,v),p0(c,v),ot(Z0(),function(m,p){var w=p.event,S=Wn(o,function(T){return T.name===w.name});S.each(function(T){var R=w.visible?T.onShow:T.onHide;R(T.getApi(m))})})])})})},Kn=function(t){return Me.sketch(function(r){return{dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:lt(r,t),slotBehaviours:rx.unnamedEvents([Ta(function(o){return Me.hideAllSlots(o)})])}})},kt=function(t,r){var o=Dr.getCurrent(t);o.each(function(c){return nr.set(c,[Kn(r)])})},tn=function(t,r){var o=Dr.getCurrent(t);o.each(function(c){var v=Dr.getCurrent(c);v.each(function(m){j.hasGrown(c)?Me.isShowing(m,r)?j.shrink(c):(Me.hideAllSlots(m),Me.showSlot(m,r)):(Me.hideAllSlots(m),Me.showSlot(m,r),j.grow(c))})})},Et=function(t){var r=Dr.getCurrent(t);return r.bind(function(o){var c=j.isGrowing(o)||j.hasGrown(o);if(c){var v=Dr.getCurrent(o);return v.bind(function(m){return Wn(Me.getSlotNames(m),function(p){return Me.isShowing(m,p)})})}else return D.none()})},zt=bn("FixSizeEvent"),hn=bn("AutoSizeEvent"),ft=function(t){return{uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"complementary"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:Pt([La.config({}),Qn.config({}),j.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:function(r){var o=Dr.getCurrent(r);o.each(Me.hideAllSlots),zr(r,hn)},onGrown:function(r){zr(r,hn)},onStartGrow:function(r){sn(r,zt,{width:Zr(r.element,"width").getOr("")})},onStartShrink:function(r){sn(r,zt,{width:ii(r.element)+"px"})}}),nr.config({}),Dr.config({find:function(r){var o=nr.contents(r);return Ga(o)}})])}],behaviours:Pt([ys.childAt(0),lr("sidebar-sliding-events",[ot(zt,function(r,o){yr(r.element,"width",o.event.width)}),ot(hn,function(r,o){Ma(r.element,"width")})])])}},cn=function(t,r,o,c){kr(t.element,"aria-busy",!0);var v=r.getRoot(t).getOr(t),m=Pt([Pn.config({mode:"special",onTab:function(){return D.some(!0)},onShiftTab:function(){return D.some(!0)}}),Qn.config({})]),p=c(v,m),w=v.getSystem().build(p);nr.append(v,So(w)),w.hasConfigured(Pn)&&r.focus&&Pn.focusIn(w),o.isBlocked()||r.onBlock(t),o.blockWith(function(){return nr.remove(v,w)})},Sr=function(t,r,o){zi(t.element,"aria-busy"),o.isBlocked()&&r.onUnblock(t),o.clear()},da=Object.freeze({__proto__:null,block:cn,unblock:Sr}),Hr=[aa("getRoot",D.none),uo("focus",!0),Kr("onBlock"),Kr("onUnblock")],jo=function(){var t=QT(),r=function(o){t.set({destroy:o})};return tu({readState:t.isSet,blockWith:r,clear:t.clear,isBlocked:t.isSet})},Oo=Object.freeze({__proto__:null,init:jo}),li=si({fields:Hr,name:"blocking",apis:da,state:Oo}),Cs=function(t){var r=t.dom.attributes!==void 0?t.dom.attributes:[];return kn(r,function(o,c){var v;return c.name==="class"?o:me(me({},o),(v={},v[c.name]=c.value,v))},{})},st=function(t){return Array.prototype.slice.call(t.dom.classList,0)},$e=function(t){var r=Ft.fromHtml(t),o=Yu(r),c=Cs(r),v=st(r),m=o.length===0?{}:{innerHtml:sb(r)};return me({tag:Nc(r),classes:v,attributes:c},m)},mt=function(t){return function(r,o){return{dom:{tag:"div",attributes:{"aria-label":t.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:$e('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}}},We=function(t){return Dr.getCurrent(t).each(function(r){return Fu(r.element)})},yn=function(t,r){var o="tabindex",c="data-mce-"+o;D.from(t.iframeElement).map(Ft.fromDom).each(function(v){r?($c(v,o).each(function(m){return kr(v,c,m)}),kr(v,o,-1)):(zi(v,o),$c(v,c).each(function(m){kr(v,o,m),zi(v,c)}))})},Lt=function(t,r,o,c){var v=r.element;if(yn(t,o),o)li.block(r,mt(c)),Ma(v,"display"),zi(v,"aria-hidden"),t.hasFocus()&&We(r);else{var m=Dr.getCurrent(r).exists(function(p){return Xp(p.element)});li.unblock(r),yr(v,"display","none"),kr(v,"aria-hidden","true"),m&&t.focus()}},ar=function(t){return{uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:Pt([nr.config({}),li.config({focus:!1}),Dr.config({find:function(r){return Ga(r.components())}})]),components:[]}},dr=function(t){return t.type==="focusin"},ja=function(t){if(dr(t)){var r=t.composed?Ga(t.composedPath()):D.from(t.target);return r.map(Ft.fromDom).filter(gc).exists(function(o){return Co(o,"mce-pastebin")})}else return!1},Uu=function(t,r,o){var c=Bn(!1),v=ro(),m=function(w){c.get()&&!ja(w)&&(w.preventDefault(),We(r()),t.editorManager.setActive(t))};t.inline||t.on("PreInit",function(){t.dom.bind(t.getWin(),"focusin",m),t.on("BeforeExecCommand",function(w){w.command.toLowerCase()==="mcefocus"&&w.value!==!0&&m(w)})});var p=function(w){w!==c.get()&&(c.set(w),Lt(t,r(),w,o.providers),t.fire("AfterProgressState",{state:w}))};t.on("ProgressState",function(w){if(v.on(Il.clearTimeout),mr(w.time)){var S=Il.setEditorTimeout(t,function(){return p(w.state)},w.time);v.set(S)}else p(w.state),v.clear()})},cc=function(t,r){var o={len:0,list:[]},c=kn(t,function(v,m){var p=r(m,v.len);return p.fold(re(v),function(w){return{len:w.finish,list:v.list.concat([w])}})},o);return c.list},Ef=function(t,r,o){return{within:t,extra:r,withinWidth:o}},Ji=function(t,r,o){var c=cc(t,function(w,S){var T=o(w);return D.some({element:w,start:S,finish:S+T,width:T})}),v=rt(c,function(w){return w.finish<=r}),m=an(v,function(w,S){return w+S.width},0),p=c.slice(v.length);return{within:v,extra:p,withinWidth:m}},bu=function(t){return yt(t,function(r){return r.element})},Mi=function(t,r,o){var c=bu(t.concat(r));return Ef(c,[],o)},Vd=function(t,r,o,c){var v=bu(t).concat([o]);return Ef(v,bu(r),c)},Ac=function(t,r,o){return Ef(bu(t),[],o)},ns=function(t,r,o){var c=Ji(r,t,o);return c.extra.length===0?D.some(c):D.none()},kf=function(t,r,o,c){var v=ns(t,r,o).getOrThunk(function(){return Ji(r,t-o(c),o)}),m=v.within,p=v.extra,w=v.withinWidth;return p.length===1&&p[0].width<=o(c)?Mi(m,p,w):p.length>=1?Vd(m,p,c,w):Ac(m,p,w)},H0=function(t,r){var o=yt(r,function(c){return So(c)});Ul.setGroups(t,o)},ao=function(t){return Ba(t,function(r){return Vc(r.element).bind(function(o){return r.getSystem().getByDom(o).toOptional()})})},Pa=function(t,r,o){var c=r.builtGroups.get();if(c.length!==0){var v=_l(t,r,"primary"),m=Wo.getCoupled(t,"overflowGroup");yr(v.element,"visibility","hidden");var p=c.concat([m]),w=ao(p);o([]),H0(v,p);var S=ii(v.element),T=kf(S,r.builtGroups.get(),function(R){return ii(R.element)},m);T.extra.length===0?(nr.remove(v,m),o([])):(H0(v,T.within),o(T.extra)),Ma(v.element,"visibility"),Ql(v.element),w.each(Qn.focus)}},fi=re([Vo("splitToolbarBehaviours",[Wo]),ho("builtGroups",function(){return Bn([])})]),Rv=re([Qu(["overflowToggledClass"]),Zn("getOverflowBounds"),nt("lazySink"),ho("overflowGroups",function(){return Bn([])})].concat(fi())),Af=re([uu({factory:Ul,schema:Vh(),name:"primary"}),jc({schema:Vh(),name:"overflow"}),jc({name:"overflow-button"}),jc({name:"overflow-group"})]),Wl=re(function(t,r){Sb(t,Math.floor(r))}),fg=re([Qu(["toggledClass"]),nt("lazySink"),Eo("fetch"),Zn("getBounds"),$a("fireDismissalEventInstead",[xe("event",mc())]),$s()]),eA=re([jc({name:"button",overrides:function(t){return{dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:Pt([A.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])}}}),jc({factory:Ul,schema:Vh(),name:"toolbar",overrides:function(t){return{toolbarBehaviours:Pt([Pn.config({mode:"cyclic",onEscape:function(r){return ya(r,t,"button").each(Qn.focus),D.none()}})])}}})]),tw=function(t,r){var o=Wo.getCoupled(t,"toolbarSandbox");Or.isOpen(o)?Or.close(o):Or.open(o,r.toolbar())},Of=function(t,r,o,c){var v=o.getBounds.map(function(p){return p()}),m=o.lazySink(t).getOrDie();lo.positionWithinBounds(m,r,{anchor:{type:"hotspot",hotspot:t,layouts:c,overrides:{maxWidthFunction:Wl()}}},v)},tA=function(t,r,o,c,v){Ul.setGroups(r,v),Of(t,r,o,c),A.on(t)},iB=function(t,r,o){var c=Fa(),v=function(p,w){o.fetch().get(function(S){tA(t,w,o,r.layouts,S),c.link(t.element),Pn.focusIn(w)})},m=function(){A.off(t),Qn.focus(t),c.unlink(t.element)};return{dom:{tag:"div",attributes:{id:c.id}},behaviours:Pt([Pn.config({mode:"special",onEscape:function(p){return Or.close(p),D.some(!0)}}),Or.config({onOpen:v,onClose:m,isPartOf:function(p,w,S){return ef(w,S)||ef(t,S)},getAttachPoint:function(){return o.lazySink(t).getOrDie()}}),yc.config({channels:me(me({},nc(me({isExtraPart:rn},o.fireDismissalEventInstead.map(function(p){return{fireEventInstead:{event:p.event}}}).getOr({})))),gd({doReposition:function(){Or.getState(Wo.getCoupled(t,"toolbarSandbox")).each(function(p){Of(t,p,o,r.layouts)})}}))})])}},O8=function(t,r,o,c){return me(me({},ac.sketch(me(me({},c.button()),{action:function(v){tw(v,c)},buttonBehaviours:Sc.augment({dump:c.button().buttonBehaviours},[Wo.config({others:{toolbarSandbox:function(v){return iB(v,o,t)}}})])}))),{apis:{setGroups:function(v,m){Or.getState(Wo.getCoupled(v,"toolbarSandbox")).each(function(p){tA(v,p,t,o.layouts,m)})},reposition:function(v){Or.getState(Wo.getCoupled(v,"toolbarSandbox")).each(function(m){Of(v,m,t,o.layouts)})},toggle:function(v){tw(v,c)},getToolbar:function(v){return Or.getState(Wo.getCoupled(v,"toolbarSandbox"))},isOpen:function(v){return Or.isOpen(Wo.getCoupled(v,"toolbarSandbox"))}}})},Gh=mu({name:"FloatingToolbarButton",factory:O8,configFields:fg(),partFields:eA(),apis:{setGroups:function(t,r,o){t.setGroups(r,o)},reposition:function(t,r){t.reposition(r)},toggle:function(t,r){t.toggle(r)},getToolbar:function(t,r){return t.getToolbar(r)},isOpen:function(t,r){return t.isOpen(r)}}}),D8=re([nt("items"),Qu(["itemSelector"]),Vo("tgroupBehaviours",[Pn])]),R8=re([F1({name:"items",unit:"item"})]),Kh=function(t,r,o,c){return{uid:t.uid,dom:t.dom,components:r,behaviours:Ai(t.tgroupBehaviours,[Pn.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}},nw=mu({name:"ToolbarGroup",configFields:D8(),partFields:R8(),factory:Kh}),be=function(t){return yt(t,function(r){return So(r)})},je=function(t,r,o){Pa(t,o,function(c){o.overflowGroups.set(c),r.getOpt(t).each(function(v){Gh.setGroups(v,be(c))})})},Ot=function(t,r,o,c){var v=ea(Gh.sketch({fetch:function(){return pu.nu(function(m){m(be(t.overflowGroups.get()))})},layouts:{onLtr:function(){return[ou,au]},onRtl:function(){return[au,ou]},onBottomLtr:function(){return[Mu,_u]},onBottomRtl:function(){return[_u,Mu]}},getBounds:o.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:c["overflow-button"](),toolbar:c.overflow()}}));return{uid:t.uid,dom:t.dom,components:r,behaviours:Ai(t.splitToolbarBehaviours,[Wo.config({others:{overflowGroup:function(){return nw.sketch(me(me({},c["overflow-group"]()),{items:[v.asSpec()]}))}}})]),apis:{setGroups:function(m,p){t.builtGroups.set(yt(p,m.getSystem().build)),je(m,v,t)},refresh:function(m){return je(m,v,t)},toggle:function(m){v.getOpt(m).each(function(p){Gh.toggle(p)})},isOpen:function(m){return v.getOpt(m).map(Gh.isOpen).getOr(!1)},reposition:function(m){v.getOpt(m).each(function(p){Gh.reposition(p)})},getOverflow:function(m){return v.getOpt(m).bind(Gh.getToolbar)}},domModification:{attributes:{role:"group"}}}},Ht=mu({name:"SplitFloatingToolbar",configFields:Rv(),partFields:Af(),factory:Ot,apis:{setGroups:function(t,r,o){t.setGroups(r,o)},refresh:function(t,r){t.refresh(r)},reposition:function(t,r){t.reposition(r)},toggle:function(t,r){t.toggle(r)},isOpen:function(t,r){return t.isOpen(r)},getOverflow:function(t,r){return t.getOverflow(r)}}}),pr=re([Qu(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),Kr("onOpened"),Kr("onClosed")].concat(fi())),ta=re([uu({factory:Ul,schema:Vh(),name:"primary"}),uu({factory:Ul,schema:Vh(),name:"overflow",overrides:function(t){return{toolbarBehaviours:Pt([j.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:function(r){ya(r,t,"overflow-button").each(function(o){A.off(o),Qn.focus(o)}),t.onClosed(r)},onGrown:function(r){Pn.focusIn(r),t.onOpened(r)},onStartGrow:function(r){ya(r,t,"overflow-button").each(A.on)}}),Pn.config({mode:"acyclic",onEscape:function(r){return ya(r,t,"overflow-button").each(Qn.focus),D.some(!0)}})])}}}),jc({name:"overflow-button",overrides:function(t){return{buttonBehaviours:Pt([A.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])}}}),jc({name:"overflow-group"})]),oo=function(t,r){return ya(t,r,"overflow").map(j.hasGrown).getOr(!1)},Ud=function(t,r){ya(t,r,"overflow-button").bind(function(){return ya(t,r,"overflow")}).each(function(o){B8(t,r),j.toggleGrow(o)})},B8=function(t,r){ya(t,r,"overflow").each(function(o){Pa(t,r,function(c){var v=yt(c,function(m){return So(m)});Ul.setGroups(o,v)}),ya(t,r,"overflow-button").each(function(c){j.hasGrown(o)&&A.on(c)}),j.refresh(o)})},T$=function(t,r,o,c){var v="alloy.toolbar.toggle",m=function(p,w){var S=yt(w,p.getSystem().build);t.builtGroups.set(S)};return{uid:t.uid,dom:t.dom,components:r,behaviours:Ai(t.splitToolbarBehaviours,[Wo.config({others:{overflowGroup:function(p){return nw.sketch(me(me({},c["overflow-group"]()),{items:[ac.sketch(me(me({},c["overflow-button"]()),{action:function(w){zr(p,v)}}))]}))}}}),lr("toolbar-toggle-events",[ot(v,function(p){Ud(p,t)})])]),apis:{setGroups:function(p,w){m(p,w),B8(p,t)},refresh:function(p){return B8(p,t)},toggle:function(p){return Ud(p,t)},isOpen:function(p){return oo(p,t)}},domModification:{attributes:{role:"group"}}}},_8=mu({name:"SplitSlidingToolbar",configFields:pr(),partFields:ta(),factory:T$,apis:{setGroups:function(t,r,o){t.setGroups(r,o)},refresh:function(t,r){t.refresh(r)},toggle:function(t,r){t.toggle(r)},isOpen:function(t,r){return t.isOpen(r)}}}),xI=function(t){var r=t.title.fold(function(){return{}},function(o){return{attributes:{title:o}}});return{dom:me({tag:"div",classes:["tox-toolbar__group"]},r),components:[nw.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled])"},tgroupBehaviours:Pt([La.config({}),Qn.config({})])}},uB=function(t){return nw.sketch(xI(t))},TI=function(t,r){var o=Ta(function(c){var v=yt(t.initGroups,uB);Ul.setGroups(c,v)});return Pt([Yc.toolbarButton(t.providers.isDisabled),Uo(),Pn.config({mode:r,onEscape:t.onEscape,selector:".tox-toolbar__group"}),lr("toolbar-events",[o])])},EI=function(t){var r=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":xI({title:D.none(),items:[]}),"overflow-button":IR({name:"more",icon:D.some("more-drawer"),disabled:!1,tooltip:D.some("More..."),primary:!1,borderless:!1},D.none(),t.providers)},splitToolbarBehaviours:TI(t,r)}},E$=function(t){var r=EI(t),o=4,c=Ht.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return Ht.sketch(me(me({},r),{lazySink:t.getSink,getOverflowBounds:function(){var v=t.moreDrawerData.lazyHeader().element,m=tv(v),p=sl(v),w=tv(p),S=Math.max(p.dom.scrollHeight,w.height);return du(m.x+o,w.y,m.width-o*2,S)},parts:me(me({},r.parts),{overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}}),components:[c],markers:{overflowToggledClass:"tox-tbtn--enabled"}}))},k$=function(t){var r=_8.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),o=_8.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),c=EI(t);return _8.sketch(me(me({},c),{components:[r,o],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:function(v){v.getSystem().broadcastOn([Dv()],{type:"opened"})},onClosed:function(v){v.getSystem().broadcastOn([Dv()],{type:"closed"})}}))},cB=function(t){var r=t.cyclicKeying?"cyclic":"acyclic";return Ul.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===Xc.scrolling?["tox-toolbar--scrolling"]:[])},components:[Ul.parts.groups({})],toolbarBehaviours:TI(t,r)})},A$=function(t,r,o){var c={getSocket:function(v){return Ec.getPart(v,t,"socket")},setSidebar:function(v,m){Ec.getPart(v,t,"sidebar").each(function(p){return kt(p,m)})},toggleSidebar:function(v,m){Ec.getPart(v,t,"sidebar").each(function(p){return tn(p,m)})},whichSidebar:function(v){return Ec.getPart(v,t,"sidebar").bind(Et).getOrNull()},getHeader:function(v){return Ec.getPart(v,t,"header")},getToolbar:function(v){return Ec.getPart(v,t,"toolbar")},setToolbar:function(v,m){Ec.getPart(v,t,"toolbar").each(function(p){p.getApis().setGroups(p,m)})},setToolbars:function(v,m){Ec.getPart(v,t,"multiple-toolbar").each(function(p){N5.setItems(p,m)})},refreshToolbar:function(v){var m=Ec.getPart(v,t,"toolbar");m.each(function(p){return p.getApis().refresh(p)})},toggleToolbarDrawer:function(v){Ec.getPart(v,t,"toolbar").each(function(m){xp(m.getApis().toggle,function(p){return p(m)})})},isToolbarDrawerToggled:function(v){return Ec.getPart(v,t,"toolbar").bind(function(m){return D.from(m.getApis().isOpen).map(function(p){return p(m)})}).getOr(!1)},getThrobber:function(v){return Ec.getPart(v,t,"throbber")},focusToolbar:function(v){var m=Ec.getPart(v,t,"toolbar").orThunk(function(){return Ec.getPart(v,t,"multiple-toolbar")});m.each(function(p){Pn.focusIn(p)})},setMenubar:function(v,m){Ec.getPart(v,t,"menubar").each(function(p){Q2.setMenus(p,m)})},focusMenubar:function(v){Ec.getPart(v,t,"menubar").each(function(m){Q2.focus(m)})}};return{uid:t.uid,dom:t.dom,components:r,apis:c,behaviours:t.behaviours}},O$=Lh.optional({factory:Q2,name:"menubar",schema:[nt("backstage")]}),D$=function(t){return t.type===Xc.sliding?k$:t.type===Xc.floating?E$:cB},R$=Lh.optional({factory:{sketch:function(t){return N5.sketch({uid:t.uid,dom:t.dom,listBehaviours:Pt([Pn.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:function(){return cB({type:t.type,uid:bn("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:function(){return t.onEscape(),D.some(!0)}})},setupItem:function(r,o,c,v){Ul.setGroups(o,c)},shell:!0})}},name:"multiple-toolbar",schema:[nt("dom"),nt("onEscape")]}),B$=Lh.optional({factory:{sketch:function(t){var r=D$(t),o={type:t.type,uid:t.uid,onEscape:function(){return t.onEscape(),D.some(!0)},cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes};return r(o)}},name:"toolbar",schema:[nt("dom"),nt("onEscape"),nt("getSink")]}),_$=Lh.optional({factory:{sketch:S8},name:"header",schema:[nt("dom")]}),M$=Lh.optional({name:"socket",schema:[nt("dom")]}),F$=Lh.optional({factory:{sketch:ft},name:"sidebar",schema:[nt("dom")]}),P$=Lh.optional({factory:{sketch:ar},name:"throbber",schema:[nt("dom")]}),qo=mu({name:"OuterContainer",factory:A$,configFields:[nt("dom"),nt("behaviours")],partFields:[_$,O$,B$,R$,M$,F$,P$],apis:{getSocket:function(t,r){return t.getSocket(r)},setSidebar:function(t,r,o){t.setSidebar(r,o)},toggleSidebar:function(t,r,o){t.toggleSidebar(r,o)},whichSidebar:function(t,r){return t.whichSidebar(r)},getHeader:function(t,r){return t.getHeader(r)},getToolbar:function(t,r){return t.getToolbar(r)},setToolbar:function(t,r,o){var c=yt(o,function(v){return uB(v)});t.setToolbar(r,c)},setToolbars:function(t,r,o){var c=yt(o,function(v){return yt(v,uB)});t.setToolbars(r,c)},refreshToolbar:function(t,r){return t.refreshToolbar(r)},toggleToolbarDrawer:function(t,r){t.toggleToolbarDrawer(r)},isToolbarDrawerToggled:function(t,r){return t.isToolbarDrawerToggled(r)},getThrobber:function(t,r){return t.getThrobber(r)},setMenubar:function(t,r,o){t.setMenubar(r,o)},focusMenubar:function(t,r){t.focusMenubar(r)},focusToolbar:function(t,r){t.focusToolbar(r)}}}),N$="file edit view insert format tools table help",kI={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | formats blockformats fontformats fontsizes align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code wordcount"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},I$=function(t,r,o){var c=L_(o).split(/[ ,]/);return{text:t.title,getItems:function(){return qr(t.items,function(v){var m=v.toLowerCase();return m.trim().length===0?[]:la(c,function(p){return p===m})?[]:m==="separator"||m==="|"?[{type:"separator"}]:r.menuItems[m]?[r.menuItems[m]]:[]})}}},M8=function(t){return typeof t=="string"?t.split(" "):t},AI=function(t,r){var o=me(me({},kI),r.menus),c=$r(r.menus).length>0,v=r.menubar===void 0||r.menubar===!0?M8(N$):M8(r.menubar===!1?"":r.menubar),m=rt(v,function(w){var S=Xn(kI,w);return c?S||Cn(r.menus,w).exists(function(T){return Xn(T,"items")}):S}),p=yt(m,function(w){var S=o[w];return I$({title:S.title,items:M8(S.items)},r,t)});return rt(p,function(w){var S=function(T){return T.type!=="separator"};return w.getItems().length>0&&la(w.getItems(),S)})},OI=function(t){var r=function(){t._skinLoaded=!0,yM(t)};return function(){t.initialized?r():t.on("init",r)}},$$=function(t,r){return function(){return wM(t,{message:r})}},DI=function(t,r,o){return new w2(function(c,v){o.load(r,c,v),t.on("remove",function(){return o.unload(r)})})},z$=function(t,r){var o=r+"/skin.min.css";return DI(t,o,t.ui.styleSheetLoader)},L$=function(t,r){var o=vw(Ft.fromDom(t.getElement()));if(o){var c=r+"/skin.shadowdom.min.css";return DI(t,c,m0.DOM.styleSheetLoader)}else return w2.resolve()},RI=function(t,r){var o=VA(r);o&&r.contentCSS.push(o+(t?"/content.inline":"/content")+".min.css"),P_(r)===!1&&Ut(o)?w2.all([z$(r,o),L$(r,o)]).then(OI(r),$$(r,"Skin could not be loaded")):OI(r)()},H$=gt(RI,!1),V$=gt(RI,!0),sB=function(t,r){return function(o){var c=Sl(),v=function(){o.setActive(t.formatter.match(r));var m=t.formatter.formatChanged(r,o.setActive);c.set(m)};return t.initialized?v():t.once("init",v),function(){t.off("init",v),c.clear()}}},lB=function(t,r,o){return function(c){var v=function(){return o(c)},m=function(){o(c),t.on(r,v)};return t.initialized?m():t.once("init",m),function(){t.off("init",m),t.off(r,v)}}},BI=function(t){return function(r){return function(){t.undoManager.transact(function(){t.focus(),t.execCommand("mceToggleFormat",!1,r.format)})}}},Df=function(t,r){return function(){return t.execCommand(r)}},U$=function(t,r,o){var c=function(w,S,T,R){var O=r.shared.providers.translate(w.title);if(w.type==="separator")return D.some({type:"separator",text:O});if(w.type==="submenu"){var N=qr(w.getStyleItems(),function(L){return v(L,S,R)});return S===0&&N.length<=0?D.none():D.some({type:"nestedmenuitem",text:O,disabled:N.length<=0,getSubmenuItems:function(){return qr(w.getStyleItems(),function(L){return v(L,S,R)})}})}else return D.some(me({type:"togglemenuitem",text:O,icon:w.icon,active:w.isSelected(R),disabled:T,onAction:o.onAction(w)},w.getStylePreview().fold(function(){return{}},function(L){return{meta:{style:L}}})))},v=function(w,S,T){var R=w.type==="formatter"&&o.isInvalid(w);return S===0?R?[]:c(w,S,!1,T).toArray():c(w,S,R,T).toArray()},m=function(w){var S=o.getCurrentValue(),T=o.shouldHide?0:1;return qr(w,function(R){return v(R,T,S)})},p=function(w,S){return function(T,R){var O=S(),N=m(O),L=ug(N,$l.CLOSE_ON_EXECUTE,w,!1);R(L)}};return{validateItems:m,getFetch:p}},gT=function(t,r,o){var c=o.dataset,v=c.type==="basic"?function(){return yt(c.data,function(m){return E5(m,o.isSelectedFor,o.getPreviewFor)})}:c.getData;return{items:U$(t,r,o),getStyleItems:v}},nA=function(t,r,o){var c=gT(t,r,o),v=c.items,m=c.getStyleItems,p=function(S){return{getComponent:re(S)}},w=lB(t,"NodeChange",function(S){var T=S.getComponent();o.updateText(T)});return jx({text:o.icon.isSome()?D.none():o.text,icon:o.icon,tooltip:D.from(o.tooltip),role:D.none(),fetch:v.getFetch(r,m),onSetup:w,getApi:p,columns:1,presets:"normal",classes:o.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",r.shared)},W$=function(t){return yt(t,function(r){var o=r,c=r,v=r.split("=");return v.length>1&&(o=v[0],c=v[1]),{title:o,format:c}})},j$=function(t){return{type:"basic",data:t}},hT;(function(t){t[t.SemiColon=0]="SemiColon",t[t.Space=1]="Space"})(hT||(hT={}));var q$=function(t,r){return r===hT.SemiColon?t.replace(/;$/,"").split(";"):t.split(" ")},F8=function(t,r,o,c){var v=t.getParam(r,o,"string"),m=W$(q$(v,c));return{type:"basic",data:m}},P8=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],_I=function(t){var r=function(){return Wn(P8,function(w){return t.formatter.match(w.format)})},o=function(w){return function(){return t.formatter.match(w)}},c=function(w){return D.none},v=function(w){var S=r(),T=S.fold(re("left"),function(R){return R.title.toLowerCase()});sn(w,MR,{icon:"align-"+T})},m=j$(P8),p=function(w){return function(){return Wn(P8,function(S){return S.format===w.format}).each(function(S){return t.execCommand(S.command)})}};return{tooltip:"Align",text:D.none(),icon:D.some("align-left"),isSelectedFor:o,getCurrentValue:D.none,getPreviewFor:c,onAction:p,updateText:v,dataset:m,shouldHide:!1,isInvalid:function(w){return!t.formatter.canApply(w.format)}}},G$=function(t,r){return nA(t,r,_I(t))},K$=function(t,r){var o=gT(t,r,_I(t));t.ui.registry.addNestedMenuItem("align",{text:r.shared.providers.translate("Align"),getSubmenuItems:function(){return o.items.validateItems(o.getStyleItems())}})},X$="Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats",Y$=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],MI=function(t){var r=t.split(/\s*,\s*/);return yt(r,function(o){return o.replace(/^['"]+|['"]+$/g,"")})},J$=function(t){var r=function(){var o=MI(t.toLowerCase());return Ur(Y$,function(c){return o.indexOf(c.toLowerCase())>-1})};return t.indexOf("-apple-system")===0&&r()},FI=function(t){var r="System Font",o=function(){var T=function(q){return q?MI(q)[0]:""},R=t.queryCommandValue("FontName"),O=S.data,N=R?R.toLowerCase():"",L=Wn(O,function(q){var X=q.format;return X.toLowerCase()===N||T(X).toLowerCase()===T(N).toLowerCase()}).orThunk(function(){return _g(J$(N),{title:r,format:N})});return{matchOpt:L,font:R}},c=function(T){return function(R){return R.exists(function(O){return O.format===T})}},v=function(){var T=o().matchOpt;return T},m=function(T){return function(){return D.some({tag:"div",styles:T.indexOf("dings")===-1?{"font-family":T}:{}})}},p=function(T){return function(){t.undoManager.transact(function(){t.focus(),t.execCommand("FontName",!1,T.format)})}},w=function(T){var R=o(),O=R.matchOpt,N=R.font,L=O.fold(re(N),function(q){return q.title});sn(T,P0,{text:L})},S=F8(t,"font_formats",X$,hT.SemiColon);return{tooltip:"Fonts",text:D.some(r),icon:D.none(),isSelectedFor:c,getCurrentValue:v,getPreviewFor:m,onAction:p,updateText:w,dataset:S,shouldHide:!1,isInvalid:rn}},Z$=function(t,r){return nA(t,r,FI(t))},Q$=function(t,r){var o=gT(t,r,FI(t));t.ui.registry.addNestedMenuItem("fontformats",{text:r.shared.providers.translate("Fonts"),getSubmenuItems:function(){return o.items.validateItems(o.getStyleItems())}})},ez="8pt 10pt 12pt 14pt 18pt 24pt 36pt",tz={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},nz={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},rz=function(t,r){var o=Math.pow(10,r);return Math.round(t*o)/o},az=function(t,r){return/[0-9.]+px$/.test(t)?rz(parseInt(t,10)*72/96,r||0)+"pt":Cn(nz,t).getOr(t)},oz=function(t){return Cn(tz,t).getOr("")},PI=function(t){var r=function(){var S=D.none(),T=w.data,R=t.queryCommandValue("FontSize");if(R)for(var O=function(L){var q=az(R,L),X=oz(q);S=Wn(T,function(ge){return ge.format===R||ge.format===q||ge.format===X})},N=3;S.isNone()&&N>=0;N--)O(N);return{matchOpt:S,size:R}},o=function(S){return function(T){return T.exists(function(R){return R.format===S})}},c=function(){var S=r().matchOpt;return S},v=re(D.none),m=function(S){return function(){t.undoManager.transact(function(){t.focus(),t.execCommand("FontSize",!1,S.format)})}},p=function(S){var T=r(),R=T.matchOpt,O=T.size,N=R.fold(re(O),function(L){return L.title});sn(S,P0,{text:N})},w=F8(t,"fontsize_formats",ez,hT.Space);return{tooltip:"Font sizes",text:D.some("12pt"),icon:D.none(),isSelectedFor:o,getPreviewFor:v,getCurrentValue:c,onAction:m,updateText:p,dataset:w,shouldHide:!1,isInvalid:rn}},iz=function(t,r){return nA(t,r,PI(t))},uz=function(t,r){var o=gT(t,r,PI(t));t.ui.registry.addNestedMenuItem("fontsizes",{text:"Font sizes",getSubmenuItems:function(){return o.items.validateItems(o.getStyleItems())}})},NI=function(t,r){var o=r(),c=yt(o,function(v){return v.format});return D.from(t.formatter.closest(c)).bind(function(v){return Wn(o,function(m){return m.format===v})}).orThunk(function(){return _g(t.formatter.match("p"),{title:"Paragraph",format:"p"})})},cz="Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre",II=function(t){var r="Paragraph",o=function(p){return function(){return t.formatter.match(p)}},c=function(p){return function(){var w=t.formatter.get(p);return D.some({tag:w.length>0&&(w[0].inline||w[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(p))})}},v=function(p){var w=NI(t,function(){return m.data}),S=w.fold(re(r),function(T){return T.title});sn(p,P0,{text:S})},m=F8(t,"block_formats",cz,hT.SemiColon);return{tooltip:"Blocks",text:D.some(r),icon:D.none(),isSelectedFor:o,getCurrentValue:D.none,getPreviewFor:c,onAction:BI(t),updateText:v,dataset:m,shouldHide:!1,isInvalid:function(p){return!t.formatter.canApply(p.format)}}},sz=function(t,r){return nA(t,r,II(t))},lz=function(t,r){var o=gT(t,r,II(t));t.ui.registry.addNestedMenuItem("blockformats",{text:"Blocks",getSubmenuItems:function(){return o.items.validateItems(o.getStyleItems())}})},$I=function(t,r){var o="Paragraph",c=function(p){return function(){return t.formatter.match(p)}},v=function(p){return function(){var w=t.formatter.get(p);return w!==void 0?D.some({tag:w.length>0&&(w[0].inline||w[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(p))}):D.none()}},m=function(p){var w=function(O){var N=O.items;return N!==void 0&&N.length>0?qr(N,w):[{title:O.title,format:O.format}]},S=qr(T5(t),w),T=NI(t,re(S)),R=T.fold(re(o),function(O){return O.title});sn(p,P0,{text:R})};return{tooltip:"Formats",text:D.some(o),icon:D.none(),isSelectedFor:c,getCurrentValue:D.none,getPreviewFor:v,onAction:BI(t),updateText:m,shouldHide:t.getParam("style_formats_autohide",!1,"boolean"),isInvalid:function(p){return!t.formatter.canApply(p.format)},dataset:r}},fz=function(t,r){var o=me({type:"advanced"},r.styleselect);return nA(t,r,$I(t,o))},vz=function(t,r){var o=me({type:"advanced"},r.styleselect),c=gT(t,r,$I(t,o));t.ui.registry.addNestedMenuItem("formats",{text:"Formats",getSubmenuItems:function(){return c.items.validateItems(c.getStyleItems())}})},dz=function(t,r){var o=function(c,v){t.updateState.each(function(m){var p=m(c,v);r.set(p)}),t.renderComponents.each(function(m){var p=m(v,r.get()),w=yt(p,c.getSystem().build);gy(c,w)})};return xa([ot(Ds(),function(c,v){var m=v;if(!m.universal){var p=t.channel;ir(m.channels,p)&&o(c,m.data)}}),Ta(function(c,v){t.initialData.each(function(m){o(c,m)})})])},mz=Object.freeze({__proto__:null,events:dz}),gz=function(t,r,o){return o},hz=Object.freeze({__proto__:null,getState:gz}),pz=[nt("channel"),W("renderComponents"),W("updateState"),W("initialData")],bz=function(){var t=Bn(D.none()),r=function(){return t.set(D.none())},o=function(){return t.get().getOr("none")};return{readState:o,get:t.get,set:t.set,clear:r}},yz=Object.freeze({__proto__:null,init:bz}),Qs=si({fields:pz,name:"reflecting",active:mz,apis:hz,state:yz}),wz=re([nt("toggleClass"),nt("fetch"),Ei("onExecute"),xe("getHotspot",D.some),xe("getAnchorOverrides",re({})),$s(),Ei("onItemExecute"),W("lazySink"),nt("dom"),Kr("onOpen"),Vo("splitDropdownBehaviours",[Wo,Pn,Qn]),xe("matchWidth",!1),xe("useMinWidth",!1),xe("eventOrder",{}),W("role")].concat(Y4())),Cz=uu({factory:ac,schema:[nt("dom")],name:"arrow",defaults:function(){return{buttonBehaviours:Pt([Qn.revoke()])}},overrides:function(t){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(r){r.getSystem().getByUid(t.uid).each(Mc)},buttonBehaviours:Pt([A.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])}}}),Sz=uu({factory:ac,schema:[nt("dom")],name:"button",defaults:function(){return{buttonBehaviours:Pt([Qn.revoke()])}},overrides:function(t){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(r){r.getSystem().getByUid(t.uid).each(function(o){t.onExecute(o,r)})}}}}),xz=re([Cz,Sz,ps({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}}}},schema:[nt("text")],name:"aria-descriptor"}),jc({schema:[Np()],name:"menu",defaults:function(t){return{onExecute:function(r,o){r.getSystem().getByUid(t.uid).each(function(c){t.onItemExecute(c,r,o)})}}}}),oD()]),Tz=function(t,r,o,c){var v,m=function(O){Dr.getCurrent(O).each(function(N){Qr.highlightFirst(N),Pn.focusIn(N)})},p=function(O){var N=m;Ah(t,Te,O,c,N,wf.HighlightFirst).get(He)},w=function(O){return p(O),D.some(!0)},S=function(O){var N=_l(O,t,"button");return Mc(N),D.some(!0)},T=me(me({},xa([Ta(function(O,N){var L=ya(O,t,"aria-descriptor");L.each(function(q){var X=bn("aria");kr(q.element,"id",X),kr(O.element,"aria-describedby",X)})})])),V(D.some(p))),R={repositionMenus:function(O){A.isOn(O)&&X4(O)}};return{uid:t.uid,dom:t.dom,components:r,apis:R,eventOrder:me(me({},t.eventOrder),(v={},v[Xu()]=["disabling","toggling","alloy.base.behaviour"],v)),events:T,behaviours:Ai(t.splitDropdownBehaviours,[Wo.config({others:{sandbox:function(O){var N=_l(O,t,"arrow"),L={onOpen:function(){A.on(N),A.on(O)},onClose:function(){A.off(N),A.off(O)}};return K4(t,O,L)}}}),Pn.config({mode:"special",onSpace:S,onEnter:S,onDown:w}),Qn.config({}),A.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},fB=mu({name:"SplitDropdown",configFields:wz(),partFields:xz(),factory:Tz,apis:{repositionMenus:function(t,r){return t.repositionMenus(r)}}}),Ez=function(t){return{isDisabled:function(){return Tn.isDisabled(t)},setDisabled:function(r){return Tn.set(t,r)}}},kz=function(t){return{setActive:function(r){A.set(t,r)},isActive:function(){return A.isOn(t)},isDisabled:function(){return Tn.isDisabled(t)},setDisabled:function(r){return Tn.set(t,r)}}},zI=function(t,r){return t.map(function(o){return{"aria-label":r.translate(o),title:r.translate(o)}}).getOr({})},LI=bn("focus-button"),N8=function(t,r,o,c,v,m){var p;return{dom:{tag:"button",classes:["tox-tbtn"].concat(r.isSome()?["tox-tbtn--select"]:[]),attributes:zI(o,m)},components:b0([t.map(function(w){return Ux(w,m.icons)}),r.map(function(w){return Fh(w,"tox-tbtn",m)})]),eventOrder:(p={},p[Ku()]=["focusing","alloy.base.behaviour","common-button-display-events"],p),buttonBehaviours:Pt([Yc.toolbarButton(m.isDisabled),Uo(),lr("common-button-display-events",[ot(Ku(),function(w,S){S.event.prevent(),zr(w,LI)})])].concat(c.map(function(w){return Qs.config({channel:w,initialData:{icon:t,text:r},renderComponents:function(S,T){return b0([S.icon.map(function(R){return Ux(R,m.icons)}),S.text.map(function(R){return Fh(R,"tox-tbtn",m)})])}})}).toArray()).concat(v.getOr([])))}},Az=function(t,r,o,c){var v=r.shared;return Gh.sketch({lazySink:v.getSink,fetch:function(){return pu.nu(function(m){m(yt(o(t.items),uB))})},markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:N8(t.icon,t.text,t.tooltip,D.none(),D.none(),v.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:c}}}})},HI=function(t,r,o){var c=Bn(He),v=N8(t.icon,t.text,t.tooltip,D.none(),D.none(),o);return ac.sketch({dom:v.dom,components:v.components,eventOrder:_R,buttonBehaviours:Pt([lr("toolbar-button-events",[gP({onAction:t.onAction,getApi:r.getApi}),Zm(r,c),p0(r,c)]),Yc.toolbarButton(function(){return t.disabled||o.isDisabled()}),Uo()].concat(r.toolbarButtonBehaviours))})},Oz=function(t,r){return VI(t,r,[])},VI=function(t,r,o){return HI(t,{toolbarButtonBehaviours:[].concat(o.length>0?[lr("toolbarButtonWith",o)]:[]),getApi:Ez,onSetup:t.onSetup},r)},Dz=function(t,r){return UI(t,r,[])},UI=function(t,r,o){return gr(HI(t,{toolbarButtonBehaviours:[nr.config({}),A.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(o.length>0?[lr("toolbarToggleButtonWith",o)]:[]),getApi:kz,onSetup:t.onSetup},r))},Rz=function(t,r,o){return function(c){return pu.nu(function(v){return r.fetch(v)}).map(function(v){return D.from(N4(gr(_4(bn("menu-value"),v,function(m){r.onItemAction(t(c),m)},r.columns,r.presets,$l.CLOSE_ON_EXECUTE,r.select.getOr(rn),o),{movement:gx(r.columns,r.presets),menuBehaviours:rx.unnamedEvents(r.columns!=="auto"?[]:[Ta(function(m,p){i4(m,4,Z3(r.presets)).each(function(w){var S=w.numRows,T=w.numColumns;Pn.setGridSize(m,S,T)})})])})))})}},Bz=function(t,r){var o,c=bn("channel-update-split-dropdown-display"),v=function(w){return{isDisabled:function(){return Tn.isDisabled(w)},setDisabled:function(S){return Tn.set(w,S)},setIconFill:function(S,T){ru(w.element,'svg path[id="'+S+'"], rect[id="'+S+'"]').each(function(R){kr(R,"fill",T)})},setIconStroke:function(S,T){ru(w.element,'svg path[id="'+S+'"], rect[id="'+S+'"]').each(function(R){kr(R,"stroke",T)})},setActive:function(S){kr(w.element,"aria-pressed",S),ru(w.element,"span").each(function(T){w.getSystem().getByDom(T).each(function(R){return A.set(R,S)})})},isActive:function(){return ru(w.element,"span").exists(function(S){return w.getSystem().getByDom(S).exists(A.isOn)})}}},m=Bn(He),p={getApi:v,onSetup:t.onSetup};return fB.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:me({"aria-pressed":!1},zI(t.tooltip,r.providers))},onExecute:function(w){t.onAction(v(w))},onItemExecute:function(w,S,T){},splitDropdownBehaviours:Pt([Yc.splitButton(r.providers.isDisabled),Uo(),lr("split-dropdown-events",[ot(LI,Qn.focus),Zm(p,m),p0(p,m)]),L2.config({})]),eventOrder:(o={},o[ul()]=["alloy.base.behaviour","split-dropdown-events"],o),toggleClass:"tox-tbtn--enabled",lazySink:r.getSink,fetch:Rz(v,t,r.providers),parts:{menu:T2(!1,t.columns,t.presets)},components:[fB.parts.button(N8(t.icon,t.text,D.none(),D.some(c),D.some([A.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),r.providers)),fB.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:b2("chevron-down",r.providers.icons)},buttonBehaviours:Pt([Yc.splitButton(r.providers.isDisabled),Uo(),y2()])}),fB.parts["aria-descriptor"]({text:r.providers.translate("To open the popup, press Shift+Enter")})]})},_z=[{name:"history",items:["undo","redo"]},{name:"styles",items:["styleselect"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],rA=function(t,r){return function(o,c,v){var m=t(o).mapError(function(p){return ju(p)}).getOrDie();return r(m,c,v)}},pT={button:rA(SA,function(t,r){return Oz(t,r.backstage.shared.providers)}),togglebutton:rA(TA,function(t,r){return Dz(t,r.backstage.shared.providers)}),menubutton:rA(Z2,function(t,r){return Dk(t,"tox-tbtn",r.backstage,D.none())}),splitbutton:rA(x8,function(t,r){return Bz(t,r.backstage.shared)}),grouptoolbarbutton:rA(Yk,function(t,r,o){var c,v=o.ui.registry.getAll().buttons,m=function(w){return vB(o,{buttons:v,toolbar:w,allowToolbarGroups:!1},r,D.none())},p=(c={},c[id]=r.backstage.shared.header.isPositionedAtTop()?xl.TopToBottom:xl.BottomToTop,c);switch(D2(o)){case Xc.floating:return Az(t,r.backstage,m,p);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}}),styleSelectButton:function(t,r){return fz(t,r.backstage)},fontsizeSelectButton:function(t,r){return iz(t,r.backstage)},fontSelectButton:function(t,r){return Z$(t,r.backstage)},formatButton:function(t,r){return sz(t,r.backstage)},alignMenuButton:function(t,r){return G$(t,r.backstage)}},Mz=function(t,r,o){return Cn(pT,t.type).fold(function(){return console.error("skipping button defined by",t),D.none()},function(c){return D.some(c(t,r,o))})},WI={styleselect:pT.styleSelectButton,fontsizeselect:pT.fontsizeSelectButton,fontselect:pT.fontSelectButton,formatselect:pT.formatButton,align:pT.alignMenuButton},Fz=function(t){var r=yt(_z,function(o){var c=rt(o.items,function(v){return Xn(t,v)||Xn(WI,v)});return{name:o.name,items:c}});return rt(r,function(o){return o.items.length>0})},Pz=function(t){var r=t.split("|");return yt(r,function(o){return{items:o.trim().split(" ")}})},Nz=function(t){return it(t,function(r){return Xn(r,"name")&&Xn(r,"items")})},Iz=function(t){var r=t.toolbar,o=t.buttons;return r===!1?[]:r===void 0||r===!0?Fz(o):Ut(r)?Pz(r):Nz(r)?r:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},$z=function(t,r,o,c,v,m){return Cn(r,o.toLowerCase()).orThunk(function(){return m.bind(function(p){return Ba(p,function(w){return Cn(r,w+o.toLowerCase())})})}).fold(function(){return Cn(WI,o.toLowerCase()).map(function(p){return p(t,v)}).orThunk(function(){return D.none()})},function(p){return p.type==="grouptoolbarbutton"&&!c?(console.warn("Ignoring the '"+o+"' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested."),D.none()):Mz(p,v,t)})},vB=function(t,r,o,c){var v=Iz(r),m=yt(v,function(p){var w=qr(p.items,function(S){return S.trim().length===0?[]:$z(t,r.buttons,S,r.allowToolbarGroups,o,c).toArray()});return{title:D.from(t.translate(p.name)),items:w}});return rt(m,function(p){return p.items.length>0})},jI=function(t,r,o,c){var v=r.outerContainer,m=o.toolbar,p=o.buttons;if(it(m,Ut)){var w=m.map(function(S){var T={toolbar:S,buttons:p,allowToolbarGroups:o.allowToolbarGroups};return vB(t,T,{backstage:c},D.none())});qo.setToolbars(v,w)}else qo.setToolbar(v,vB(t,o,{backstage:c},D.none()))},qI=Ni(),zz=qI.os.isiOS()&&qI.os.version.major<=12,Lz=function(t,r){var o=t.dom,c=t.getWin(),v=t.getDoc().documentElement,m=Bn(Qa(c.innerWidth,c.innerHeight)),p=Bn(Qa(v.offsetWidth,v.offsetHeight)),w=function(){var N=m.get();(N.left!==c.innerWidth||N.top!==c.innerHeight)&&(m.set(Qa(c.innerWidth,c.innerHeight)),dx(t))},S=function(){var N=t.getDoc().documentElement,L=p.get();(L.left!==N.offsetWidth||L.top!==N.offsetHeight)&&(p.set(Qa(N.offsetWidth,N.offsetHeight)),dx(t))},T=function(N){return SM(t,N)};o.bind(c,"resize",w),o.bind(c,"scroll",T);var R=Gg(Ft.fromDom(t.getBody()),"load",S),O=r.uiMothership.element;t.on("hide",function(){yr(O,"display","none")}),t.on("show",function(){Ma(O,"display")}),t.on("NodeChange",S),t.on("remove",function(){R.unbind(),o.unbind(c,"resize",w),o.unbind(c,"scroll",T),c=null})},Hz=function(t,r,o,c,v){var m=Bn(0),p=r.outerContainer;H$(t);var w=Ft.fromDom(v.targetNode),S=im($i(w));Hs(w,r.mothership),vv(S,r.uiMothership),t.on("PostRender",function(){jI(t,r,o,c),m.set(t.getWin().innerWidth),qo.setMenubar(p,AI(t,o)),qo.setSidebar(p,o.sidebar),Lz(t,r)});var T=qo.getSocket(p).getOrDie("Could not find expected socket element");if(zz){bc(T.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});var R=zB(function(){t.fire("ScrollContent")},20),O=ji(T.element,"scroll",R.throttle);t.on("remove",O.unbind)}lx(t,r),t.addCommand("ToggleSidebar",function(X,ge){qo.toggleSidebar(p,ge),t.fire("ToggleSidebar")}),t.addQueryValueHandler("ToggleSidebar",function(){return qo.whichSidebar(p)});var N=D2(t),L=function(){qo.refreshToolbar(r.outerContainer)};(N===Xc.sliding||N===Xc.floating)&&t.on("ResizeWindow ResizeEditor ResizeContent",function(){var X=t.getWin().innerWidth;X!==m.get()&&(L(),m.set(X))});var q={enable:function(){g0(r,!1)},disable:function(){g0(r,!0)},isDisabled:function(){return Tn.isDisabled(p)}};return{iframeContainer:T.element.dom,editorContainer:p.element.dom,api:q}},Vz=Object.freeze({__proto__:null,render:Hz}),I8=function(t){var r=/^[0-9\.]+(|px)$/i;return r.test(""+t)?D.some(parseInt(""+t,10)):D.none()},$8=function(t){return mr(t)?t+"px":t},dB=function(t,r,o){var c=r.filter(function(m){return t<m}),v=o.filter(function(m){return t>m});return c.or(v).getOr(t)},Uz=function(t){var r=UA(t),o=f4(t),c=WA(t);return I8(r).map(function(v){return dB(v,o,c)})},Wz=function(t){var r=Uz(t);return r.getOr(UA(t))},GI=function(t){var r=s4(t),o=l4(t),c=v4(t);return I8(r).map(function(v){return dB(v,o,c)})},jz=function(t){var r=GI(t);return r.getOr(s4(t))},qz=function(t,r,o,c,v){var m=o.uiMothership,p=o.outerContainer,w=m0.DOM,S=cx(t),T=sx(t),R=v4(t).or(GI(t)),O=c.shared.header,N=O.isPositionedAtTop,L=D2(t),q=L===Xc.sliding||L===Xc.floating,X=Bn(!1),ge=function(){return X.get()&&!t.removed},ne=function(vt){return q?vt.fold(re(0),function(dt){return dt.components().length>1?Ti(dt.components()[1].element):0}):0},ye=function(vt){switch(qA(t)){case Eh.auto:var dt=qo.getToolbar(p),ln=ne(dt),Hn=Ti(vt.element)-ln,Ct=Ao(r),En=Ct.y>Hn;if(En)return"top";var zn=sl(r),Vr=Math.max(zn.dom.scrollHeight,Ti(zn)),wa=Ct.bottom<Vr-Hn;if(wa)return"bottom";var Do=Is(),Rf=Do.bottom<Ct.bottom-Hn;return Rf?"bottom":"top";case Eh.bottom:return"bottom";case Eh.top:default:return"top"}},he=function(vt){var dt=v.get();Vu.setModes(dt,[vt]),O.setDockingMode(vt);var ln=N()?xl.TopToBottom:xl.BottomToTop;kr(dt.element,id,ln)},Ve=function(){var vt=R.getOrThunk(function(){var dt=I8(oi(gl(),"margin-left")).getOr(0);return ii(gl())-yl(r).left+dt});yr(v.get().element,"max-width",vt+"px")},_e=function(){var vt=qo.getToolbar(p),dt=ne(vt),ln=Ao(r),Hn=N()?Math.max(ln.y-Ti(v.get().element)+dt,0):ln.bottom;bc(p.element,{position:"absolute",top:Math.round(Hn)+"px",left:Math.round(ln.x)+"px"})},Ke=function(){m.broadcastOn([Rm()],{})},Pe=function(vt){if(vt===void 0&&(vt=!1),!!ge()){if(S||Ve(),q&&qo.refreshToolbar(p),S||_e(),T){var dt=v.get();vt?Vu.reset(dt):Vu.refresh(dt)}Ke()}},ct=function(vt){if(vt===void 0&&(vt=!0),!(S||!T||!ge())){var dt=O.getDockingMode(),ln=ye(v.get());ln!==dt&&(he(ln),vt&&Pe(!0))}},Bt=function(){X.set(!0),yr(p.element,"display","flex"),w.addClass(t.getBody(),"mce-edit-focus"),Ma(m.element,"display"),ct(!1),Pe()},Qt=function(){X.set(!1),o.outerContainer&&(yr(p.element,"display","none"),w.removeClass(t.getBody(),"mce-edit-focus")),yr(m.element,"display","none")};return{isVisible:ge,isPositionedAtTop:N,show:Bt,hide:Qt,update:Pe,updateMode:ct,repositionPopups:Ke}},KI=function(t,r){var o=Ao(t);return{pos:r?o.y:o.bottom,bounds:o}},Gz=function(t,r,o,c){var v=Bn(KI(r,o.isPositionedAtTop())),m=function(w){var S=KI(r,o.isPositionedAtTop()),T=S.pos,R=S.bounds,O=v.get(),N=O.pos,L=O.bounds,q=R.height!==L.height||R.width!==L.width;v.set({pos:T,bounds:R}),q&&dx(t,w),o.isVisible()&&(N!==T?o.update(!0):q&&(o.updateMode(),o.repositionPopups()))};c||(t.on("activate",o.show),t.on("deactivate",o.hide)),t.on("SkinLoaded ResizeWindow",function(){return o.update(!0)}),t.on("NodeChange keydown",function(w){Il.requestAnimationFrame(function(){return m(w)})}),t.on("ScrollWindow",function(){return o.updateMode()});var p=Sl();p.set(Gg(Ft.fromDom(t.getBody()),"load",m)),t.on("remove",function(){p.clear()})},Kz=function(t,r,o,c,v){var m=r.mothership,p=r.uiMothership,w=r.outerContainer,S=Bn(null),T=Ft.fromDom(v.targetNode),R=qz(t,T,r,c,S),O=KA(t);V$(t);var N=function(){if(S.get()){R.show();return}S.set(qo.getHeader(w).getOrDie());var X=YA(t);vv(X,m),vv(X,p),jI(t,r,o,c),qo.setMenubar(w,AI(t,o)),R.show(),Gz(t,T,R,O),t.nodeChanged()},L=function(){return Il.setEditorTimeout(t,N,0)};t.on("show",N),t.on("hide",R.hide),O||(t.on("focus",L),t.on("blur",R.hide)),t.on("init",function(){(t.hasFocus()||O)&&L()}),lx(t,r);var q={show:function(){R.show()},hide:function(){R.hide()},enable:function(){g0(r,!1)},disable:function(){g0(r,!0)},isDisabled:function(){return Tn.isDisabled(w)}};return{editorContainer:w.element.dom,api:q}},Xz=Object.freeze({__proto__:null,render:Kz}),Yz="contexttoolbar-show",XI="contexttoolbar-hide",Jz=function(t){return{hide:function(){return zr(t,jf())},getValue:function(){return Vt.getValue(t)}}},YI=function(t,r){return ot(Wx,function(o,c){var v=t.get(o),m=Jz(v);r.onAction(m,c.event.buttonApi)})},Zz=function(t,r,o){var c=r.original;c.primary;var v=Y(c,["primary"]),m=ba(SA(me(me({},v),{type:"button",onAction:He})));return VI(m,o.backstage.shared.providers,[YI(t,r)])},Qz=function(t,r,o){var c=r.original;c.primary;var v=Y(c,["primary"]),m=ba(TA(me(me({},v),{type:"togglebutton",onAction:He})));return UI(m,o.backstage.shared.providers,[YI(t,r)])},eL=function(t,r,o){var c={backstage:{shared:{providers:o}}};return r.type==="contextformtogglebutton"?Qz(t,r,c):Zz(t,r,c)},tL=function(t,r,o){var c=yt(r,function(p){return ea(eL(t,p,o))}),v=function(){return yt(c,function(p){return p.asSpec()})},m=function(p){return Ba(r,function(w,S){return w.primary?D.from(c[S]).bind(function(T){return T.getOpt(p)}).filter(pt(Tn.isDisabled)):D.none()})};return{asSpecs:v,findPrimary:m}},JI=function(t,r){var o=t.label.fold(function(){return{}},function(m){return{"aria-label":m}}),c=ea($2.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:t.initValue(),inputAttributes:o,selectOnFocus:!0,inputBehaviours:Pt([Pn.config({mode:"special",onEnter:function(m){return v.findPrimary(m).map(function(p){return Mc(p),!0})},onLeft:function(m,p){return p.cut(),D.none()},onRight:function(m,p){return p.cut(),D.none()}})])})),v=tL(c,t.commands,r);return[{title:D.none(),items:[c.asSpec()]},{title:D.none(),items:v.asSpecs()}]},nL=function(t,r,o){return cB({type:t,uid:bn("context-toolbar"),initGroups:JI(r,o),onEscape:D.none,cyclicKeying:!0,providers:o})},rL={renderContextForm:nL,buildInitGroups:JI},ZI=function(t,r,o){return o===void 0&&(o=.01),r.bottom-t.y>=o&&t.bottom-r.y>=o},aL=function(t){var r=t.getBoundingClientRect();if(r.height<=0&&r.width<=0){var o=fw(Ft.fromDom(t.startContainer),t.startOffset).element,c=Ci(o)?Si(o):D.some(o);return c.filter(gc).map(function(v){return v.dom.getBoundingClientRect()}).getOr(r)}else return r},z8=function(t){var r=t.selection.getRng(),o=aL(r);if(t.inline){var c=Ns();return du(c.left+o.left,c.top+o.top,o.width,o.height)}else{var v=tv(Ft.fromDom(t.getBody()));return du(v.x+o.left,v.y+o.top,o.width,o.height)}},oL=function(t,r){return r.filter(Hi).map(tv).getOrThunk(function(){return z8(t)})},iL=function(t,r,o){var c=Math.max(t.x+o,r.x),v=Math.min(t.right-o,r.right);return{x:c,width:v-c}},uL=function(t,r,o,c,v,m){var p=Ft.fromDom(t.getContainer()),w=ru(p,".tox-editor-header").getOr(p),S=Ao(w),T=S.y>=r.bottom,R=c&&!T;if(t.inline&&R)return{y:Math.max(S.bottom+m,o.y),bottom:o.bottom};if(t.inline&&!R)return{y:o.y,bottom:Math.min(S.y-m,o.bottom)};var O=v==="line"?Ao(p):r;return R?{y:Math.max(S.bottom+m,o.y),bottom:Math.min(O.bottom-m,o.bottom)}:{y:Math.max(O.y+m,o.y),bottom:Math.min(S.y-m,o.bottom)}},QI=function(t,r,o,c){c===void 0&&(c=0);var v=Eb(window),m=Ao(Ft.fromDom(t.getContentAreaContainer())),p=d4(t)||m4(t)||ix(t),w=iL(m,v,c),S=w.x,T=w.width;if(t.inline&&!p)return du(S,v.y,T,v.height);var R=r.header.isPositionedAtTop(),O=uL(t,m,v,R,o,c),N=O.y,L=O.bottom;return du(S,N,T,L-N)},mB=12,e7={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},t7={maxHeightFunction:sv(),maxWidthFunction:Wl()},cL=function(t,r){var o=t.selection.getRng(),c=fw(Ft.fromDom(o.startContainer),o.startOffset);return o.startContainer===o.endContainer&&o.startOffset===o.endOffset-1&&Ja(c.element,r)},sL=function(t,r,o){var c=Zr(t,"position");yr(t,"position",r);var v=o(t);return c.each(function(m){return yr(t,"position",m)}),v},n7=function(t){return t==="node"},lL=function(t,r,o,c,v){var m=z8(t),p=c.lastElement().exists(function(T){return Ja(o,T)});if(cL(t,o))return p?_3:gf;if(p)return sL(r,c.getMode(),function(){var T=ZI(m,Ao(r));return T&&!c.isReposition()?RB:_3});var w=c.getMode()==="fixed"?v.y+Ns().top:v.y,S=Ti(r)+mB;return w+S<=m.y?gf:s0},fL=function(t,r,o,c){var v=function(S){return function(T,R,O,N,L){var q=lL(t,N,S,o,L),X=me(me({},T),{y:L.y,height:L.height});return me(me({},q(X,R,O,N,L)),{alwaysFit:!0})}},m=function(S){return n7(c)?[v(S)]:[]},p={onLtr:function(S){return[Vi,Ui,_u,au,Mu,ou].concat(m(S))},onRtl:function(S){return[Vi,Ui,Mu,ou,_u,au].concat(m(S))}},w={onLtr:function(S){return[Ui,au,ou,_u,Mu,Vi].concat(m(S))},onRtl:function(S){return[Ui,ou,au,Mu,_u,Vi].concat(m(S))}};return r?w:p},vL=function(t,r,o,c){return r==="line"?{bubble:Cm(mB,0,e7),layouts:{onLtr:function(){return[Up]},onRtl:function(){return[Wp]}},overrides:t7}:{bubble:Cm(0,mB,e7,1/mB),layouts:fL(t,o,c,r),overrides:t7}},L8=function(t,r){var o=rt(r,function(p){return p.predicate(t.dom)}),c=$t(o,function(p){return p.type==="contexttoolbar"}),v=c.pass,m=c.fail;return{contextToolbars:v,contextForms:m}},dL=function(t){if(t.length<=1)return t;var r=function(w){return la(t,function(S){return S.position===w})},o=function(w){return rt(t,function(S){return S.position===w})},c=r("selection"),v=r("node");if(c||v)if(v&&c){var m=o("node"),p=yt(o("selection"),function(w){return me(me({},w),{position:"node"})});return m.concat(p)}else return o(c?"selection":"node");else return o("line")},mL=function(t){if(t.length<=1)return t;var r=function(c){return Wn(t,function(v){return v.position===c})},o=r("selection").orThunk(function(){return r("node")}).orThunk(function(){return r("line")}).map(function(c){return c.position});return o.fold(function(){return[]},function(c){return rt(t,function(v){return v.position===c})})},gL=function(t,r,o){var c=L8(t,r);if(c.contextForms.length>0)return D.some({elem:t,toolbars:[c.contextForms[0]]});var v=L8(t,o);if(v.contextForms.length>0)return D.some({elem:t,toolbars:[v.contextForms[0]]});if(c.contextToolbars.length>0||v.contextToolbars.length>0){var m=dL(c.contextToolbars.concat(v.contextToolbars));return D.some({elem:t,toolbars:m})}else return D.none()},hL=function(t,r,o){return t(r)?D.none():zv(r,function(c){if(gc(c)){var v=L8(c,o.inNodeScope),m=v.contextToolbars,p=v.contextForms,w=p.length>0?p:mL(m);return w.length>0?D.some({elem:c,toolbars:w}):D.none()}else return D.none()},t)},pL=function(t,r){var o=Ft.fromDom(r.getBody()),c=function(p){return Ja(p,o)},v=function(p){return!c(p)&&!Jl(o,p)},m=Ft.fromDom(r.selection.getNode());return v(m)?D.none():gL(m,t.inNodeScope,t.inEditorScope).orThunk(function(){return hL(c,m,t)})},bL=function(t,r){var o={},c=[],v=[],m={},p={},w=function(R,O){var N=ba(K3(O));o[R]=N,N.launch.map(function(L){m["form:"+R+""]=me(me({},O.launch),{type:L.type==="contextformtogglebutton"?"togglebutton":"button",onAction:function(){r(N)}})}),N.scope==="editor"?v.push(N):c.push(N),p[R]=N},S=function(R,O){o_(O).each(function(N){O.scope==="editor"?v.push(N):c.push(N),p[R]=N})},T=$r(t);return Jt(T,function(R){var O=t[R];O.type==="contextform"?w(R,O):O.type==="contexttoolbar"&&S(R,O)}),{forms:o,inNodeScope:c,inEditorScope:v,lookupTable:p,formNavigators:m}},r7=bn("forward-slide"),a7=bn("backward-slide"),H8=bn("change-slide-event"),V8="tox-pop--resizing",yL=function(t){var r=Bn([]);return za.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:function(o){r.set([]),za.getContent(o).each(function(c){Ma(c.element,"visibility")}),wo(o.element,V8),Ma(o.element,"width")},inlineBehaviours:Pt([lr("context-toolbar-events",[vs(Hf(),function(o,c){c.event.raw.propertyName==="width"&&(wo(o.element,V8),Ma(o.element,"width"))}),ot(H8,function(o,c){var v=o.element;Ma(v,"width");var m=ii(v);za.setContent(o,c.event.contents),no(v,V8);var p=ii(v);yr(v,"width",m+"px"),za.getContent(o).each(function(w){c.event.focus.bind(function(S){return Fu(S),Vc(v)}).orThunk(function(){return Pn.focusIn(w),tc($i(v))})}),Il.setTimeout(function(){yr(o.element,"width",p+"px")},0)}),ot(r7,function(o,c){za.getContent(o).each(function(v){r.set(r.get().concat([{bar:v,focus:tc($i(o.element))}]))}),sn(o,H8,{contents:c.event.forwardContents,focus:D.none()})}),ot(a7,function(o,c){Ka(r.get()).each(function(v){r.set(r.get().slice(0,r.get().length-1)),sn(o,H8,{contents:So(v.bar),focus:v.focus})})})]),Pn.config({mode:"special",onEscape:function(o){return Ka(r.get()).fold(function(){return t.onEscape()},function(c){return zr(o,a7),D.some(!0)})}})]),lazySink:function(){return mn.value(t.sink)}})},U8="tox-pop--transition",wL=function(t,r,o,c){var v=c.backstage,m=v.shared,p=Ni().deviceType.isTouch,w=ro(),S=ro(),T=ro(),R=nu(yL({sink:o,onEscape:function(){return t.focus(),D.some(!0)}})),O=function(){var Bt=T.get().getOr("node"),Qt=n7(Bt)?1:0;return QI(t,m,Bt,Qt)},N=function(){return!t.removed&&!(p()&&v.isContextMenuOpen())},L=function(Bt){return pc(lm(Bt,w.get(),Ja),!0)},q=function(){if(N()){var Bt=O(),Qt=pc(T.get(),"node")?oL(t,w.get()):z8(t);return Bt.height<=0||!ZI(Qt,Bt)}else return!0},X=function(){w.clear(),S.clear(),T.clear(),za.hide(R)},ge=function(){if(za.isOpen(R)){var Bt=R.element;Ma(Bt,"display"),q()?yr(Bt,"display","none"):(S.set(0),za.reposition(R))}},ne=function(Bt){return{dom:{tag:"div",classes:["tox-pop__dialog"]},components:[Bt],behaviours:Pt([Pn.config({mode:"acyclic"}),lr("pop-dialog-wrap-events",[Ta(function(Qt){t.shortcuts.add("ctrl+F9","focus statusbar",function(){return Pn.focusIn(Qt)})}),Rs(function(Qt){t.shortcuts.remove("ctrl+F9")})])])}},ye=Xa(function(){return bL(r,function(Bt){var Qt=_e([Bt]);sn(R,r7,{forwardContents:ne(Qt)})})}),he=function(Bt,Qt){return vB(t,{buttons:Bt,toolbar:Qt.items,allowToolbarGroups:!1},c,D.some(["form:"]))},Ve=function(Bt,Qt){return rL.buildInitGroups(Bt,Qt)},_e=function(Bt){var Qt=t.ui.registry.getAll().buttons,vt=ye(),dt=me(me({},Qt),vt.formNavigators),ln=D2(t)===Xc.scrolling?Xc.scrolling:Xc.default,Hn=dn(yt(Bt,function(Ct){return Ct.type==="contexttoolbar"?he(dt,Ct):Ve(Ct,m.providers)}));return cB({type:ln,uid:bn("context-toolbar"),initGroups:Hn,onEscape:D.none,cyclicKeying:!0,providers:m.providers})},Ke=function(Bt,Qt){var vt=Bt==="node"?m.anchors.node(Qt):m.anchors.cursor(),dt=vL(t,Bt,p(),{lastElement:w.get,isReposition:function(){return pc(S.get(),0)},getMode:function(){return lo.getMode(o)}});return gr(vt,dt)},Pe=function(Bt,Qt){if(ct.cancel(),!!N()){var vt=_e(Bt),dt=Bt[0].position,ln=Ke(dt,Qt);T.set(dt),S.set(1);var Hn=R.element;Ma(Hn,"display"),L(Qt)||(wo(Hn,U8),lo.reset(o,R)),za.showWithinBounds(R,ne(vt),{anchor:ln,transition:{classes:[U8],mode:"placement"}},function(){return D.some(O())}),Qt.fold(w.clear,w.set),q()&&yr(Hn,"display","none")}},ct=N3(function(){if(!(!t.hasFocus()||t.removed))if(Co(R.element,U8))ct.throttle();else{var Bt=ye();pL(Bt,t).fold(X,function(Qt){Pe(Qt.toolbars,D.some(Qt.elem))})}},17);t.on("init",function(){t.on("remove",X),t.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",ge),t.on("click keyup focus SetContent",ct.throttle),t.on(XI,X),t.on(Yz,function(Bt){var Qt=ye();Cn(Qt.lookupTable,Bt.toolbarKey).each(function(vt){Pe([vt],_g(Bt.target!==t,Bt.target)),za.getContent(R).each(Pn.focusIn)})}),t.on("focusout",function(Bt){Il.setEditorTimeout(t,function(){Vc(o.element).isNone()&&Vc(R.element).isNone()&&X()},0)}),t.on("SwitchMode",function(){t.mode.isReadOnly()&&X()}),t.on("AfterProgressState",function(Bt){Bt.state?X():t.hasFocus()&&ct.throttle()}),t.on("NodeChange",function(Bt){Vc(R.element).fold(ct.throttle,He)})})},CL=function(t){var r=[{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}];Jt(r,function(o){t.ui.registry.addToggleButton(o.name,{tooltip:o.text,icon:o.icon,onAction:Df(t,o.cmd),onSetup:sB(t,o.name)})}),t.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onAction:Df(t,"JustifyNone")})},SL={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},xL=function(){var t="[0-9]+",r="[+-]?"+t,o="[eE]"+r,c="\\.",v=function(w){return"(?:"+w+")?"},m=["Infinity",t+c+v(t)+v(o),c+t+v(o),t+v(o)].join("|"),p="[+-]?(?:"+m+")";return new RegExp("^("+p+")(.*)$")}(),TL=function(t,r){return la(r,function(o){return la(SL[o],function(c){return t===c})})},EL=function(t,r){var o=D.from(xL.exec(t));return o.bind(function(c){var v=Number(c[1]),m=c[2];return TL(m,r)?D.some({value:v,unit:m}):D.none()})},kL=function(t,r){return EL(t,r).map(function(o){var c=o.value,v=o.unit;return c+v})},o7=function(t,r){var o=function(){var c=r.getOptions(t),v=r.getCurrent(t).map(r.hash),m=ro();return yt(c,function(p){return{type:"togglemenuitem",text:r.display(p),onSetup:function(w){var S=function(R){R&&(m.on(function(O){return O.setActive(!1)}),m.set(w)),w.setActive(R)};S(pc(v,r.hash(p)));var T=r.watcher(t,p,S);return function(){m.clear(),T()}},onAction:function(){return r.setCurrent(t,p)}}})};t.ui.registry.addMenuButton(r.name,{tooltip:r.text,icon:r.icon,fetch:function(c){return c(o())},onSetup:r.onToolbarSetup}),t.ui.registry.addNestedMenuItem(r.name,{type:"nestedmenuitem",text:r.text,getSubmenuItems:o,onSetup:r.onMenuSetup})},AL={name:"lineheight",text:"Line height",icon:"line-height",getOptions:$_,hash:function(t){return kL(t,["fixed","relative","empty"]).getOr(t)},display:Te,watcher:function(t,r,o){return t.formatter.formatChanged("lineheight",o,!1,{value:r}).unbind},getCurrent:function(t){return D.from(t.queryCommandValue("LineHeight"))},setCurrent:function(t,r){return t.execCommand("LineHeight",!1,r)}},OL=function(t){var r=D.from(z_(t));return r.map(function(o){return{name:"language",text:"Language",icon:"language",getOptions:re(o),hash:function(c){return ia(c.customCode)?c.code:c.code+"/"+c.customCode},display:function(c){return c.title},watcher:function(c,v,m){return c.formatter.formatChanged("lang",m,!1,{value:v.code,customValue:v.customCode}).unbind},getCurrent:function(c){var v=Ft.fromDom(c.selection.getNode());return Zd(v,function(m){return D.some(m).filter(gc).bind(function(p){var w=$c(p,"lang");return w.map(function(S){var T=$c(p,"data-mce-lang").getOrUndefined();return{code:S,customCode:T,title:""}})})})},setCurrent:function(c,v){return c.execCommand("Lang",!1,v)},onToolbarSetup:function(c){var v=Sl();return c.setActive(t.formatter.match("lang",{},void 0,!0)),v.set(t.formatter.formatChanged("lang",c.setActive,!0)),v.clear}}})},DL=function(t){o7(t,AL),OL(t).each(function(r){return o7(t,r)})},RL=function(t,r){K$(t,r),Q$(t,r),vz(t,r),lz(t,r),uz(t,r)},BL=function(t){return lB(t,"NodeChange",function(r){r.setDisabled(!t.queryCommandState("outdent"))})},_L=function(t){t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:BL(t),onAction:Df(t,"outdent")}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onAction:Df(t,"indent")})},ML=function(t){_L(t)},W8=function(t,r){return function(){t.execCommand("mceToggleFormat",!1,r)}},FL=function(t){ic.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],function(c,v){t.ui.registry.addToggleButton(c.name,{tooltip:c.text,icon:c.icon,onSetup:sB(t,c.name),onAction:W8(t,c.name)})});for(var r=1;r<=6;r++){var o="h"+r;t.ui.registry.addToggleButton(o,{text:o.toUpperCase(),tooltip:"Heading "+r,onSetup:sB(t,o),onAction:W8(t,o)})}},PL=function(t){ic.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"}],function(r){t.ui.registry.addButton(r.name,{tooltip:r.text,icon:r.icon,onAction:Df(t,r.action)})})},NL=function(t){ic.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],function(r){t.ui.registry.addToggleButton(r.name,{tooltip:r.text,icon:r.icon,onAction:Df(t,r.action),onSetup:sB(t,r.name)})})},IL=function(t){FL(t),PL(t),NL(t)},$L=function(t){ic.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through",shortcut:""},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript",shortcut:""},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript",shortcut:""},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting",shortcut:""},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document",shortcut:""},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"}],function(r){t.ui.registry.addMenuItem(r.name,{text:r.text,icon:r.icon,shortcut:r.shortcut,onAction:Df(t,r.action)})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onAction:W8(t,"code")})},zL=function(t){IL(t),$L(t)},gB=function(t,r){return lB(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",function(o){o.setDisabled(t.mode.isReadOnly()||!t.undoManager[r]())})},LL=function(t){t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:gB(t,"hasUndo"),onAction:Df(t,"undo")}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:gB(t,"hasRedo"),onAction:Df(t,"redo")})},HL=function(t){t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",disabled:!0,onSetup:gB(t,"hasUndo"),onAction:Df(t,"undo")}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",disabled:!0,onSetup:gB(t,"hasRedo"),onAction:Df(t,"redo")})},VL=function(t){LL(t),HL(t)},UL=function(t){return lB(t,"VisualAid",function(r){r.setActive(t.hasVisual)})},WL=function(t){t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:UL(t),onAction:Df(t,"mceToggleVisualAid")})},jL=function(t){t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:Df(t,"mceToggleVisualAid")})},qL=function(t){jL(t),WL(t)},GL=function(t,r){CL(t),zL(t),RL(t,r),VL(t),BO(t),qL(t),ML(t),DL(t)},aA=function(t,r){return{type:"makeshift",x:t,y:r}},KL=function(t,r,o){return aA(t.x+r,t.y+o)},i7=function(t){return t.type==="longpress"||t.type.indexOf("touch")===0},XL=function(t){if(i7(t)){var r=t.touches[0];return aA(r.pageX,r.pageY)}else return aA(t.pageX,t.pageY)},YL=function(t){if(i7(t)){var r=t.touches[0];return aA(r.clientX,r.clientY)}else return aA(t.clientX,t.clientY)},JL=function(t,r){var o=m0.DOM.getPos(t);return KL(r,o.x,o.y)},ZL=function(t,r){return r.type==="contextmenu"||r.type==="longpress"?t.inline?XL(r):JL(t.getContentAreaContainer(),YL(r)):u7(t)},u7=function(t){return{type:"selection",root:Ft.fromDom(t.selection.getNode())}},QL=function(t){return{type:"node",node:D.some(Ft.fromDom(t.selection.getNode())),root:Ft.fromDom(t.getBody())}},c7=function(t,r,o){switch(o){case"node":return QL(t);case"point":return ZL(t,r);case"selection":return u7(t)}},eH=function(t,r,o,c,v,m){var p=o(),w=c7(t,r,m);ug(p,$l.CLOSE_ON_EXECUTE,c,!1).map(function(S){r.preventDefault(),za.showMenuAt(v,{anchor:w},{menu:{markers:l0("normal")},data:S})})},tH={onLtr:function(){return[Ui,au,ou,_u,Mu,Vi,gf,s0,c0,h2,p2,g2]},onRtl:function(){return[Ui,ou,au,Mu,_u,Vi,gf,s0,p2,g2,c0,h2]}},nH=12,rH={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},aH=function(t,r){var o=t.selection;if(o.isCollapsed()||r.touches.length<1)return!1;var c=r.touches[0],v=o.getRng(),m=m1(t.getWin(),Tm.domRange(v));return m.exists(function(p){return p.left<=c.clientX&&p.right>=c.clientX&&p.top<=c.clientY&&p.bottom>=c.clientY})},oH=function(t){var r=t.selection.getRng(),o=function(){Il.setEditorTimeout(t,function(){t.selection.setRng(r)},10),m()};t.once("touchend",o);var c=function(p){p.preventDefault(),p.stopImmediatePropagation()};t.on("mousedown",c,!0);var v=function(){return m()};t.once("longpresscancel",v);var m=function(){t.off("touchend",o),t.off("longpresscancel",v),t.off("mousedown",c)}},iH=function(t,r,o){var c=c7(t,r,o),v=o==="point"?nH:0;return me({bubble:Cm(0,v,rH),layouts:tH,overrides:{maxWidthFunction:Wl(),maxHeightFunction:sv()}},c)},uH=function(t,r,o,c,v,m,p){var w=iH(t,r,m);ug(o,$l.CLOSE_ON_EXECUTE,c,!0).map(function(S){r.preventDefault(),za.showMenuWithinBounds(v,{anchor:w},{menu:{markers:l0("normal"),highlightImmediately:p},data:S,type:"horizontal"},function(){return D.some(QI(t,c.shared,m==="node"?"node":"selection"))}),t.fire(XI)})},cH=function(t,r,o,c,v,m){var p=Ni(),w=p.os.isiOS(),S=p.os.isOSX(),T=p.os.isAndroid(),R=p.deviceType.isTouch(),O=function(){return!(T||w||S&&R)},N=function(){var q=o();uH(t,r,q,c,v,m,O())};if((S||w)&&m!=="node"){var L=function(){oH(t),N()};aH(t,r)?L():(t.once("selectionchange",L),t.once("touchend",function(){return t.off("selectionchange",L)}))}else N()},s7=function(t){return typeof t=="string"?t.split(/[ ,]/):t},l7=function(t){return t.getParam("contextmenu_never_use_native",!1,"boolean")},sH=function(t,r,o){var c=t.ui.registry.getAll().contextMenus;return D.from(t.getParam(r)).map(s7).getOrThunk(function(){return rt(s7(o),function(v){return Xn(c,v)})})},lH=function(t){return t.getParam("contextmenu")===!1},fH=function(t){return sH(t,"contextmenu","link linkchecker image imagetools table spellchecker configurepermanentpen")},vH=function(t){return t.getParam("contextmenu_avoid_overlap","","string")},f7=function(t){return Ut(t)?t==="|":t.type==="separator"},j8={type:"separator"},v7=function(t){var r=function(o){return{text:o.text,icon:o.icon,disabled:o.disabled,shortcut:o.shortcut}};if(Ut(t))return t;switch(t.type){case"separator":return j8;case"submenu":return me(me({type:"nestedmenuitem"},r(t)),{getSubmenuItems:function(){var o=t.getSubmenuItems();return Ut(o)?o:yt(o,v7)}});default:return me(me({type:"menuitem"},r(t)),{onAction:wn(t.onAction)})}},d7=function(t,r){if(r.length===0)return t;var o=Ka(t).filter(function(v){return!f7(v)}),c=o.fold(function(){return[]},function(v){return[j8]});return t.concat(c).concat(r).concat([j8])},dH=function(t,r,o){var c=kn(r,function(v,m){return Cn(t,m.toLowerCase()).map(function(p){var w=p.update(o);if(Ut(w))return d7(v,w.split(" "));if(w.length>0){var S=yt(w,v7);return d7(v,S)}else return v}).getOrThunk(function(){return v.concat([m])})},[]);return c.length>0&&f7(c[c.length-1])&&c.pop(),c},mH=function(t,r){return r.ctrlKey&&!l7(t)},m7=function(t,r){return r.type!=="longpress"&&(r.button!==2||r.target===t.getBody()&&r.pointerType==="")},g7=function(t,r){return m7(t,r)?t.selection.getStart(!0):r.target},gH=function(t,r){var o=vH(t),c=m7(t,r)?"selection":"point";if(ks(o)){var v=g7(t,r),m=Fd(Ft.fromDom(v),o);return m?"node":c}else return c},hH=function(t,r,o){var c=Ni(),v=c.deviceType.isTouch,m=nu(za.sketch({dom:{tag:"div"},lazySink:r,onEscape:function(){return t.focus()},onShow:function(){return o.setContextMenuState(!0)},onHide:function(){return o.setContextMenuState(!1)},fireDismissalEventInstead:{},inlineBehaviours:Pt([lr("dismissContextMenu",[ot(mc(),function(S,T){Or.close(S),t.focus()})])])})),p=function(S){return za.hide(m)},w=function(S){if(l7(t)&&S.preventDefault(),!(mH(t,S)||lH(t))){var T=gH(t,S),R=function(){var N=g7(t,S),L=t.ui.registry.getAll(),q=fH(t);return dH(L.contextMenus,q,N)},O=v()?cH:eH;O(t,S,R,o,m,T)}};t.on("init",function(){var S="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(v()?"":" ResizeWindow");t.on(S,p),t.on("longpress contextmenu",w)})},q8=fu.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),hB=function(t){return function(r){return r.translate(-t.left,-t.top)}},pB=function(t){return function(r){return r.translate(t.left,t.top)}},Xh=function(t){return function(r,o){return kn(t,function(c,v){return v(c)},Qa(r,o))}},bB=function(t,r,o){return t.fold(Xh([pB(o),hB(r)]),Xh([hB(r)]),Xh([]))},bT=function(t,r,o){return t.fold(Xh([pB(o)]),Xh([]),Xh([pB(r)]))},h7=function(t,r,o){return t.fold(Xh([]),Xh([hB(o)]),Xh([pB(r),hB(o)]))},pH=function(t,r,o,c,v,m){var p=bT(t,v,m),w=bT(r,v,m);return Math.abs(p.left-w.left)<=o&&Math.abs(p.top-w.top)<=c},bH=function(t,r,o,c,v,m){var p=bT(t,v,m),w=bT(r,v,m),S=Math.abs(p.left-w.left),T=Math.abs(p.top-w.top);return Qa(S,T)},p7=function(t,r,o){var c=t.fold(function(v,m){return{position:D.some("absolute"),left:D.some(v+"px"),top:D.some(m+"px")}},function(v,m){return{position:D.some("absolute"),left:D.some(v-o.left+"px"),top:D.some(m-o.top+"px")}},function(v,m){return{position:D.some("fixed"),left:D.some(v+"px"),top:D.some(m+"px")}});return me({right:D.none(),bottom:D.none()},c)},yH=function(t,r,o){return t.fold(function(c,v){return yB(c+r,v+o)},function(c,v){return V0(c+r,v+o)},function(c,v){return rw(c+r,v+o)})},G8=function(t,r,o,c){var v=function(m,p){return function(w,S){var T=m(r,o,c);return p(w.getOr(T.left),S.getOr(T.top))}};return t.fold(v(h7,yB),v(bT,V0),v(bB,rw))},yB=q8.offset,V0=q8.absolute,rw=q8.fixed,b7=function(t,r){var o=Eu(t,r);return ia(o)?NaN:parseInt(o,10)},wH=function(t,r){var o=t.element,c=b7(o,r.leftAttr),v=b7(o,r.topAttr);return isNaN(c)||isNaN(v)?D.none():D.some(Qa(c,v))},CH=function(t,r,o){var c=t.element;kr(c,r.leftAttr,o.left+"px"),kr(c,r.topAttr,o.top+"px")},SH=function(t,r){var o=t.element;zi(o,r.leftAttr),zi(o,r.topAttr)},xH=function(t,r,o,c){return wH(t,r).fold(function(){return o},function(v){return rw(v.left+c.left,v.top+c.top)})},TH=function(t,r,o,c,v,m){var p=xH(t,r,o,c),w=r.mustSnap?kH(t,r,p,v,m):AH(t,r,p,v,m),S=bB(p,v,m);return CH(t,r,S),w.fold(function(){return{coord:rw(S.left,S.top),extra:D.none()}},function(T){return{coord:T.output,extra:T.extra}})},EH=function(t,r){SH(t,r)},y7=function(t,r,o,c){return Ba(t,function(v){var m=v.sensor,p=pH(r,m,v.range.left,v.range.top,o,c);return p?D.some({output:G8(v.output,r,o,c),extra:v.extra}):D.none()})},kH=function(t,r,o,c,v){var m=r.getSnapPoints(t),p=y7(m,o,c,v);return p.orThunk(function(){var w=kn(m,function(S,T){var R=T.sensor,O=bH(o,R,T.range.left,T.range.top,c,v);return S.deltas.fold(function(){return{deltas:D.some(O),snap:D.some(T)}},function(N){var L=(O.left+O.top)/2,q=(N.left+N.top)/2;return L<=q?{deltas:D.some(O),snap:D.some(T)}:S})},{deltas:D.none(),snap:D.none()});return w.snap.map(function(S){return{output:G8(S.output,o,c,v),extra:S.extra}})})},AH=function(t,r,o,c,v){var m=r.getSnapPoints(t);return y7(m,o,c,v)},OH=function(t,r,o){return{coord:G8(t.output,t.output,r,o),extra:t.extra}},DH=function(t,r,o,c){var v=r.getTarget(t.element);if(r.repositionTarget){var m=Wa(t.element),p=Ns(m),w=L5(v),S=OH(c,p,w),T=p7(S.coord,p,w);Kv(v,T)}},RH=Object.freeze({__proto__:null,snapTo:DH}),K8="data-initial-z-index",BH=function(t){Si(t.element).filter(gc).each(function(r){$c(r,K8).fold(function(){return Ma(r,"z-index")},function(o){return yr(r,"z-index",o)}),zi(r,K8)})},_H=function(t){Si(t.element).filter(gc).each(function(r){Zr(r,"z-index").each(function(o){kr(r,K8,o)}),yr(r,"z-index",oi(t.element,"z-index"))})},w7=function(t,r){t.getSystem().addToGui(r),_H(r)},MH=function(t){BH(t),t.getSystem().removeFromGui(t)},C7=function(t,r,o){return t.getSystem().build(Nu.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[r]},events:o}))},FH=$a("snaps",[nt("getSnapPoints"),Kr("onSensor"),nt("leftAttr"),nt("topAttr"),xe("lazyViewport",Is),xe("mustSnap",!1)]),X8=[xe("useFixed",rn),nt("blockerClass"),xe("getTarget",Te),xe("onDrag",He),xe("repositionTarget",!0),xe("onDrop",He),aa("getBounds",Is),FH],PH=function(t){return Dw(Zr(t,"left"),Zr(t,"top"),Zr(t,"position"),function(r,o,c){var v=c==="fixed"?rw:yB;return v(parseInt(r,10),parseInt(o,10))}).getOrThunk(function(){var r=yl(t);return V0(r.left,r.top)})},NH=function(t,r,o,c,v){var m=v.bounds,p=bT(r,o,c),w=Bu(p.left,m.x,m.x+m.width-v.width),S=Bu(p.top,m.y,m.y+m.height-v.height),T=V0(w,S);return r.fold(function(){var R=h7(T,o,c);return yB(R.left,R.top)},re(T),function(){var R=bB(T,o,c);return rw(R.left,R.top)})},IH=function(t,r,o,c,v,m,p){var w=r.fold(function(){var S=yH(o,m.left,m.top),T=bB(S,c,v);return rw(T.left,T.top)},function(S){var T=TH(t,S,o,m,c,v);return T.extra.each(function(R){S.onSensor(t,R)}),T.coord});return NH(t,w,c,v,p)},$H=function(t,r,o,c){var v=r.getTarget(t.element);if(r.repositionTarget){var m=Wa(t.element),p=Ns(m),w=L5(v),S=PH(v),T=IH(t,r.snaps,S,p,w,c,o),R=p7(T,p,w);Kv(v,R)}r.onDrag(t,v,c)},S7=function(t,r){return{bounds:t.getBounds(),height:Hc(r.element),width:dm(r.element)}},Y8=function(t,r,o,c,v){var m=o.update(c,v),p=o.getStartData().getOrThunk(function(){return S7(r,t)});m.each(function(w){$H(t,r,p,w)})},x7=function(t,r,o,c){r.each(MH),o.snaps.each(function(m){EH(t,m)});var v=o.getTarget(t.element);c.reset(),o.onDrop(t,v)},J8=function(t){return function(r,o){var c=function(v){o.setStartData(S7(r,v))};return xa(Dn([ot(J0(),function(v){o.getStartData().each(function(){return c(v)})})],t(r,o,c)))}},zH=function(t){return xa([ot(Ku(),t.forceDrop),ot(ls(),t.drop),ot(Zh(),function(r,o){t.move(o.event)}),ot(X0(),t.delayDrop)])},LH=function(t){return D.from(Qa(t.x,t.y))},HH=function(t,r){return Qa(r.left-t.left,r.top-t.top)},VH=Object.freeze({__proto__:null,getData:LH,getDelta:HH}),T7=function(t,r,o){return[ot(Ku(),function(c,v){var m=v.event.raw;if(m.button===0){v.stop();var p=function(){return x7(c,D.some(T),t,r)},w=$O(p,200),S={drop:p,delayDrop:w.schedule,forceDrop:p,move:function(O){w.cancel(),Y8(c,t,r,VH,O)}},T=C7(c,t.blockerClass,zH(S)),R=function(){o(c),w7(c,T)};R()}})]},UH=Dn(Dn([],X8),[sa("dragger",{handlers:J8(T7)})]),WH=function(t){return xa([ot(Tr(),t.forceDrop),ot(fr(),t.drop),ot(Tu(),t.drop),ot(Cr(),function(r,o){t.move(o.event)})])},jH=function(t){var r=t[0];return D.some(Qa(r.clientX,r.clientY))},qH=function(t){var r=t.raw,o=r.touches;return o.length===1?jH(o):D.none()},GH=function(t,r){return Qa(r.left-t.left,r.top-t.top)},E7=Object.freeze({__proto__:null,getData:qH,getDelta:GH}),k7=function(t,r,o){var c=ro(),v=function(m){x7(m,c.get(),t,r),c.clear()};return[ot(Tr(),function(m,p){p.stop();var w=function(){return v(m)},S={drop:w,delayDrop:He,forceDrop:w,move:function(O){Y8(m,t,r,E7,O)}},T=C7(m,t.blockerClass,WH(S));c.set(T);var R=function(){o(m),w7(m,T)};R()}),ot(Cr(),function(m,p){p.stop(),Y8(m,t,r,E7,p.event)}),ot(fr(),function(m,p){p.stop(),v(m)}),ot(Tu(),v)]},KH=Dn(Dn([],X8),[sa("dragger",{handlers:J8(k7)})]),XH=function(t,r,o){return Dn(Dn([],T7(t,r,o)),k7(t,r,o))},YH=Dn(Dn([],X8),[sa("dragger",{handlers:J8(XH)})]),JH=UH,ZH=KH,QH=YH,e9=Object.freeze({__proto__:null,mouse:JH,touch:ZH,mouseOrTouch:QH}),t9=function(){var t=D.none(),r=D.none(),o=function(){t=D.none(),r=D.none()},c=function(S,T){var R=t.map(function(O){return S.getDelta(O,T)});return t=D.some(T),R},v=function(S,T){return S.getData(T).bind(function(R){return c(S,R)})},m=function(S){r=D.some(S)},p=function(){return r},w=re({});return tu({readState:w,reset:o,update:v,getStartData:p,setStartData:m})},n9=Object.freeze({__proto__:null,init:t9}),aw=Kp({branchKey:"mode",branches:e9,name:"dragging",active:{events:function(t,r){var o=t.dragger;return o.handlers(t,r)}},extra:{snap:function(t){return{sensor:t.sensor,range:t.range,output:t.output,extra:D.from(t.extra)}}},state:n9,apis:RH}),Z8=40,wB=Z8/2,A7=function(t,r,o,c,v,m){return t.fold(function(){return aw.snap({sensor:V0(o-wB,c-wB),range:Qa(v,m),output:V0(D.some(o),D.some(c)),extra:{td:r}})},function(p){var w=o-wB,S=c-wB,T=Z8,R=Z8,O=p.element.dom.getBoundingClientRect();return aw.snap({sensor:V0(w,S),range:Qa(T,R),output:V0(D.some(o-O.width/2),D.some(c-O.height/2)),extra:{td:r}})})},O7=function(t,r,o){var c=function(v,m){return v.exists(function(p){return Ja(p,m)})};return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:function(v,m){var p=m.td;c(r.get(),p)||(r.set(p),o(p))},mustSnap:!0}},D7=function(t){return ea(ac.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:Pt([aw.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),L2.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}}))},r9=function(t,r){var o=Bn([]),c=Bn([]),v=Bn(!1),m=ro(),p=ro(),w=function(Pe){var ct=tv(Pe);return A7(L.getOpt(r),Pe,ct.x,ct.y,ct.width,ct.height)},S=function(){return yt(o.get(),function(Pe){return w(Pe)})},T=function(Pe){var ct=tv(Pe);return A7(q.getOpt(r),Pe,ct.right,ct.bottom,ct.width,ct.height)},R=function(){return yt(c.get(),function(Pe){return T(Pe)})},O=O7(S,m,function(Pe){p.get().each(function(ct){t.fire("TableSelectorChange",{start:Pe,finish:ct})})}),N=O7(R,p,function(Pe){m.get().each(function(ct){t.fire("TableSelectorChange",{start:ct,finish:Pe})})}),L=D7(O),q=D7(N),X=nu(L.asSpec()),ge=nu(q.asSpec()),ne=function(Pe,ct,Bt,Qt){var vt=ct.dom.getBoundingClientRect();Ma(Pe.element,"display");var dt=rm(Ft.fromDom(t.getBody())).dom.innerHeight,ln=Bt(vt),Hn=Qt(vt,dt);(ln||Hn)&&yr(Pe.element,"display","none")},ye=function(Pe,ct,Bt,Qt){var vt=Bt(ct);aw.snapTo(Pe,vt);var dt=function(Hn){return Hn[Qt]<0},ln=function(Hn,Ct){return Hn[Qt]>Ct};ne(Pe,ct,dt,ln)},he=function(Pe){return ye(X,Pe,w,"top")},Ve=function(){return m.get().each(he)},_e=function(Pe){return ye(ge,Pe,T,"bottom")},Ke=function(){return p.get().each(_e)};Ni().deviceType.isTouch()&&(t.on("TableSelectionChange",function(Pe){v.get()||(vd(r,X),vd(r,ge),v.set(!0)),m.set(Pe.start),p.set(Pe.finish),Pe.otherCells.each(function(ct){o.set(ct.upOrLeftCells),c.set(ct.downOrRightCells),he(Pe.start),_e(Pe.finish)})}),t.on("ResizeEditor ResizeWindow ScrollContent",function(){Ve(),Ke()}),t.on("TableSelectionClear",function(){v.get()&&(Al(X),Al(ge),v.set(!1)),m.clear(),p.clear()}))},a9=function(t){return t.nodeType===1&&(t.nodeName==="BR"||!!t.getAttribute("data-mce-bogus")||t.getAttribute("data-mce-type")==="bookmark")},o9=function(t,r,o){r.delimiter||(r.delimiter="\xBB");var c=function(m){var p=m||[],w=yt(p,function(T,R){return ac.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{role:"button","data-index":R,"tab-index":-1,"aria-level":R+1},innerHtml:T.name},action:function(O){t.focus(),t.selection.select(T.element),t.nodeChanged()},buttonBehaviours:Pt([Yc.button(o.isDisabled),Uo()])})}),S={dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0},innerHtml:" "+r.delimiter+" "}};return kn(w.slice(1),function(T,R){var O=T;return O.push(S),O.push(R),O},[w[0]])},v=function(m){for(var p=[],w=m.length;w-- >0;){var S=m[w];if(S.nodeType===1&&!a9(S)){var T=t.fire("ResolveName",{name:S.nodeName.toLowerCase(),target:S});if(T.isDefaultPrevented()||p.push({name:T.name,element:S}),T.isPropagationStopped())break}}return p};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:Pt([Pn.config({mode:"flow",selector:"div[role=button]"}),Tn.config({disabled:o.isDisabled}),Uo(),La.config({}),nr.config({}),lr("elementPathEvents",[Ta(function(m,p){t.shortcuts.add("alt+F11","focus statusbar elementpath",function(){return Pn.focusIn(m)}),t.on("NodeChange",function(w){var S=v(w.parents);S.length>0?nr.set(m,c(S)):nr.set(m,[])})})])]),components:[]}},ow;(function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Vertical=2]="Vertical"})(ow||(ow={}));var i9=function(t,r,o,c,v){var m={};return m.height=dB(c+r.top,f4(t),WA(t)),o===ow.Both&&(m.width=dB(v+r.left,l4(t),v4(t))),m},R7=function(t,r,o){var c=Ft.fromDom(t.getContainer()),v=i9(t,r,o,Ti(c),ii(c));Sa(v,function(m,p){return yr(c,p,$8(m))}),CM(t)},u9=function(t){var r=!t.hasPlugin("autoresize"),o=t.getParam("resize",r);return o===!1?ow.None:o==="both"?ow.Both:ow.Vertical},CB=function(t,r,o,c){var v=20,m=Qa(o*v,c*v);return R7(t,m,r),D.some(!0)},c9=function(t,r){var o=u9(t);return o===ow.None?D.none():D.some(pf("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:r.translate("Resize")},behaviours:[aw.config({mode:"mouse",repositionTarget:!1,onDrag:function(c,v,m){return R7(t,m,o)},blockerClass:"tox-blocker"}),Pn.config({mode:"special",onLeft:function(){return CB(t,o,-1,0)},onRight:function(){return CB(t,o,1,0)},onUp:function(){return CB(t,o,0,-1)},onDown:function(){return CB(t,o,0,1)}}),La.config({}),Qn.config({})]},r.icons))},s9=function(t,r){var o,c=function(v,m,p){return nr.set(v,[bl(r.translate(["{0} "+p,m[p]]))])};return ac.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:Pt([Yc.button(r.isDisabled),Uo(),La.config({}),nr.config({}),Vt.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),lr("wordcount-events",[Pc(function(v){var m=Vt.getValue(v),p=m.mode==="words"?"characters":"words";Vt.setValue(v,{mode:p,count:m.count}),c(v,m.count,p)}),Ta(function(v){t.on("wordCountUpdate",function(m){var p=Vt.getValue(v).mode;Vt.setValue(v,{mode:p,count:m.wordCount}),c(v,m.wordCount,p)})})])]),eventOrder:(o={},o[Xu()]=["disabling","alloy.base.behaviour","wordcount-events"],o)})},l9=function(t,r){var o=function(){var m=hf.translate(["Powered by {0}","Tiny"]),p='<a href="https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce&amp;utm_content=v5" rel="noopener" target="_blank" tabindex="-1" aria-label="'+m+'">'+m+"</a>";return{dom:{tag:"span",classes:["tox-statusbar__branding"],innerHtml:p}}},c=function(){var m=[];return t.getParam("elementpath",!0,"boolean")&&m.push(o9(t,{},r)),t.hasPlugin("wordcount")&&m.push(s9(t,r)),t.getParam("branding",!0,"boolean")&&m.push(o()),m.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container"]},components:m}]:[]},v=function(){var m=c(),p=c9(t,r);return m.concat(p.toArray())};return{dom:{tag:"div",classes:["tox-statusbar"]},components:v()}},f9=function(t){var r,o=t.inline,c=o?Xz:Vz,v=sx(t)?vT:qk,m=D.none(),p=Ni(),w=p.browser.isIE(),S=w?["tox-platform-ie"]:[],T=p.deviceType.isTouch(),R="tox-platform-touch",O=T?[R]:[],N=GA(t),L=YA(t),q=hf.isRtl()?{attributes:{dir:"rtl"}}:{},X={attributes:(r={},r[id]=N?xl.BottomToTop:xl.TopToBottom,r)},ge=function(){return m.bind(qo.getHeader)},ne=function(){return v.isDocked(ge)},ye=function(){yr(Ss.element,"width",document.body.clientWidth+"px")},he=function(){var Wu=Ja(gl(),L)&&oi(L,"display")==="grid",U0={dom:me({tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(S).concat(O)},q),behaviours:Pt([lo.config({useFixed:function(){return ne()}})])},wT={dom:{styles:{width:document.body.clientWidth+"px"}},events:xa([ot(Gf(),ye)])};return gr(U0,Wu?wT:{})},Ve=nu(he()),_e=function(){return mn.value(Ve)},Ke=ea({dom:{tag:"div",classes:["tox-anchorbar"]}}),Pe=function(){return m.bind(function(Wu){return Ke.getOpt(Wu)}).getOrDie("Could not find a anchor bar element")},ct=function(){return m.bind(function(Wu){return qo.getToolbar(Wu)}).getOrDie("Could not find more toolbar element")},Bt=function(){return m.bind(function(Wu){return qo.getThrobber(Wu)}).getOrDie("Could not find throbber element")},Qt=o8(Ve,t,Pe),vt=qo.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:Qt,onEscape:function(){t.focus()}}),dt=D2(t),ln=qo.parts.toolbar(me({dom:{tag:"div",classes:["tox-toolbar"]},getSink:_e,providers:Qt.shared.providers,onEscape:function(){t.focus()},type:dt,lazyToolbar:ct,lazyHeader:function(){return ge().getOrDie("Could not find header element")}},X)),Hn=qo.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:Qt.shared.providers,onEscape:function(){t.focus()},type:dt}),Ct=qo.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),En=qo.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}}),zn=qo.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:Qt}),Vr=t.getParam("statusbar",!0,"boolean"),wa=Vr&&!o?D.some(l9(t,Qt.shared.providers)):D.none(),Do={dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[Ct,En]},Rf=ix(t),jl=m4(t),fI=d4(t),vI=function(){return Rf?[Hn]:jl?[ln]:[]},xB=qo.parts.header({dom:me({tag:"div",classes:["tox-editor-header"]},X),components:dn([fI?[vt]:[],vI(),cx(t)?[]:[Ke.asSpec()]]),sticky:sx(t),editor:t,sharedBackstage:Qt.shared}),dI=dn([N?[]:[xB],o?[]:[Do],N?[xB]:[]]),iA={dom:{tag:"div",classes:["tox-editor-container"]},components:dI},TB=dn([[iA],o?[]:wa.toArray(),[zn]]),uA=JA(t),EB=me(me({role:"application"},hf.isRtl()?{dir:"rtl"}:{}),uA?{"aria-hidden":"true"}:{}),_v=nu(qo.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(o?["tox-tinymce-inline"]:[]).concat(N?["tox-tinymce--toolbar-bottom"]:[]).concat(O).concat(S),styles:me({visibility:"hidden"},uA?{opacity:"0",border:"0"}:{}),attributes:EB},components:TB,behaviours:Pt([Uo(),Tn.config({disableClass:"tox-tinymce--disabled"}),Pn.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])}));m=D.some(_v),t.shortcuts.add("alt+F9","focus menubar",function(){qo.focusMenubar(_v)}),t.shortcuts.add("alt+F10","focus toolbar",function(){qo.focusToolbar(_v)}),t.addCommand("ToggleToolbarDrawer",function(){qo.toggleToolbarDrawer(_v)}),t.addQueryStateHandler("ToggleToolbarDrawer",function(){return qo.isToolbarDrawerToggled(_v)});var cA=qO(_v),Ss=qO(Ve);i8(t,cA,Ss);var mI=function(){var Wu={broadcastAll:Ss.broadcast,broadcastOn:Ss.broadcastOn,register:He};return{channels:Wu}},gI=function(){var Wu=$8(Wz(t)),U0=$8(jz(t));return t.inline||(pb("div","width",U0)&&yr(_v.element,"width",U0),pb("div","height",Wu)?yr(_v.element,"height",Wu):yr(_v.element,"height","200px")),Wu},hI=function(){v.setup(t,Qt.shared,ge),GL(t,Qt),hH(t,_e,Qt),jn(t),Uu(t,Bt,Qt.shared),Gr(H_(t),function(Ts,Bf){t.ui.registry.addGroupToolbarButton(Bf,Ts)});var Wu=t.ui.registry.getAll(),U0=Wu.buttons,wT=Wu.menuItems,pI=Wu.contextToolbars,CT=Wu.sidebars,bI=jA(t),nn={menuItems:wT,menus:QA(t),menubar:U_(t),toolbar:bI.getOrThunk(function(){return eO(t)}),allowToolbarGroups:dt===Xc.floating,buttons:U0,sidebar:CT};wL(t,pI,Ve,{backstage:Qt}),r9(t,Ve);var xr=t.getElement(),ha=gI(),Fo={mothership:cA,uiMothership:Ss,outerContainer:_v},xs={targetNode:xr,height:ha};return c.render(t,Fo,nn,Qt,xs)};return{mothership:cA,uiMothership:Ss,backstage:Qt,renderUI:hI,getUi:mI}},v9=function(t,r){var o=D.from(Eu(t,"id")).fold(function(){var c=bn("dialog-describe");return kr(r,"id",c),c},Te);kr(t,"aria-describedby",o)},d9=function(t,r){var o=$c(t,"id").fold(function(){var c=bn("dialog-label");return kr(r,"id",c),c},Te);kr(t,"aria-labelledby",o)},m9=re([nt("lazySink"),W("dragBlockClass"),aa("getBounds",Is),xe("useTabstopAt",ut),xe("eventOrder",{}),Vo("modalBehaviours",[Pn]),xo("onExecute"),Rb("onEscape")]),Q8={sketch:Te},g9=re([ps({name:"draghandle",overrides:function(t,r){return{behaviours:Pt([aw.config({mode:"mouse",getTarget:function(o){return nv(o,'[role="dialog"]').getOr(o)},blockerClass:t.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(r,null,2)).message),getBounds:t.getDragBounds})])}}}),uu({schema:[nt("dom")],name:"title"}),uu({factory:Q8,schema:[nt("dom")],name:"close"}),uu({factory:Q8,schema:[nt("dom")],name:"body"}),ps({factory:Q8,schema:[nt("dom")],name:"footer"}),jc({factory:{sketch:function(t,r){return me(me({},t),{dom:r.dom,components:r.components})}},schema:[xe("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),xe("components",[])],name:"blocker"})]),h9=function(t,r,o,c){var v,m=ro(),p=function(q){m.set(q);var X=t.lazySink(q).getOrDie(),ge=c.blocker(),ne=X.getSystem().build(me(me({},ge),{components:ge.components.concat([So(q)]),behaviours:Pt([Qn.config({}),lr("dialog-blocker-events",[vs(Qo(),function(){Pn.focusIn(q)})])])}));vd(X,ne),Pn.focusIn(q)},w=function(q){m.clear(),Si(q.element).each(function(X){q.getSystem().getByDom(X).each(function(ge){Al(ge)})})},S=function(q){return _l(q,t,"body")},T=function(q){return _l(q,t,"footer")},R=function(q,X){li.block(q,X)},O=function(q){li.unblock(q)},N=bn("modal-events"),L=me(me({},t.eventOrder),(v={},v[ul()]=[N].concat(t.eventOrder["alloy.system.attached"]||[]),v));return{uid:t.uid,dom:t.dom,components:r,apis:{show:p,hide:w,getBody:S,getFooter:T,setIdle:O,setBusy:R},eventOrder:L,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:Ai(t.modalBehaviours,[nr.config({}),Pn.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt}),li.config({getRoot:m.get}),lr(N,[Ta(function(q){d9(q.element,_l(q,t,"title").element),v9(q.element,_l(q,t,"body").element)})])])}},Zi=mu({name:"ModalDialog",configFields:m9(),partFields:g9(),factory:h9,apis:{show:function(t,r){t.show(r)},hide:function(t,r){t.hide(r)},getBody:function(t,r){return t.getBody(r)},getFooter:function(t,r){return t.getFooter(r)},setBusy:function(t,r,o){t.setBusy(r,o)},setIdle:function(t,r){t.setIdle(r)}}}),p9=De([In("type"),In("name")].concat(Th)),b9=Ce,B7=[hr("name","name",we(function(){return bn("button-name")}),ue),Z("icon"),Cu("align","end",["start","end"]),uo("primary",!1),uo("disabled",!1)],_7=Dn(Dn([],B7),[In("text")]),eI=Dn([Mf("type",["submit","cancel","custom"])],_7),y9=Dn([Mf("type",["menu"]),Z("text"),Z("tooltip"),Z("icon"),B("items",p9)],B7),w9=Ln("type",{submit:eI,cancel:eI,custom:eI,menu:y9}),C9=[In("type"),In("text"),Mf("level",["info","warn","error","success"]),In("icon"),xe("url","")],S9=De(C9),x9=function(t){return[In("type"),t]},T9=[In("type"),In("text"),uo("disabled",!1),uo("primary",!1),hr("name","name",we(function(){return bn("button-name")}),ue),Z("icon"),uo("borderless",!1)],E9=De(T9),k9=[In("type"),In("name"),In("label"),uo("disabled",!1)],A9=De(k9),O9=Ce,tI=[In("type"),In("name")],Bv=tI.concat([Z("label")]),D9=Bv.concat([xe("columns","auto")]),R9=De(D9),B9=Gt([In("value"),In("text"),In("icon")]),_9=Bv,M9=De(_9),F9=ue,P9=Bv,N9=De(P9),I9=ue,$9=tI.concat([el("tag","textarea"),In("scriptId"),In("scriptUrl"),Rc("settings",void 0)]),z9=tI.concat([el("tag","textarea"),Eo("init")]),L9=ga(function(t){return Pr("customeditor.old",Ne(z9),t).orThunk(function(){return Pr("customeditor.new",Ne($9),t)})}),H9=ue,V9=Bv,U9=De(V9),W9=tr(),j9=function(t){return[In("type"),rs("columns"),t]},q9=[In("type"),In("html"),Cu("presets","presentation",["presentation","document"])],G9=De(q9),K9=Bv.concat([uo("sandboxed",!0)]),X9=De(K9),Y9=ue,J9=Bv.concat([po("currentState",De([nt("blob"),In("url")]))]),Z9=De(J9),Q9=Bv.concat([Z("inputMode"),Z("placeholder"),uo("maximized",!1),uo("disabled",!1)]),eV=De(Q9),tV=ue,nV=function(t){return[In("type"),In("label"),t]},rV=[In("text"),In("value")],aV=[In("text"),B("items",_f("items",function(){return M7}))],M7=ce([De(rV),De(aV)]),oV=Bv.concat([B("items",M7),uo("disabled",!1)]),iV=De(oV),uV=ue,cV=Bv.concat([as("items",[In("text"),In("value")]),Dc("size",1),uo("disabled",!1)]),sV=De(cV),lV=ue,fV=Bv.concat([uo("constrain",!0),uo("disabled",!1)]),vV=De(fV),F7=De([In("width"),In("height")]),dV=[In("type"),B("header",ue),B("cells",z(ue))],mV=De(dV),gV=Bv.concat([Z("placeholder"),uo("maximized",!1),uo("disabled",!1)]),hV=De(gV),pV=ue,bV=Bv.concat([Cu("filetype","file",["image","media","file"]),xe("disabled",!1)]),yV=De(bV),wV=De([In("value"),xe("meta",{})]),nI=function(t){return hr("items","items",ee(),z(ga(function(r){return Pr("Checking item of "+t,rI,r).fold(function(o){return mn.error(ju(o))},function(o){return mn.value(o)})})))},rI=ie(function(){return fn("type",{alertbanner:S9,bar:De(x9(nI("bar"))),button:E9,checkbox:A9,colorinput:M9,colorpicker:N9,dropzone:U9,grid:De(j9(nI("grid"))),iframe:X9,input:eV,listbox:iV,selectbox:sV,sizeinput:vV,textarea:hV,urlinput:yV,customeditor:L9,htmlpanel:G9,imagetools:Z9,collection:R9,label:De(nV(nI("label"))),table:mV,panel:P7})}),CV=[In("type"),xe("classes",[]),B("items",rI)],P7=De(CV),SV=[hr("name","name",we(function(){return bn("tab-name")}),ue),In("title"),B("items",rI)],xV=[In("type"),as("tabs",SV)],TV=De(xV),EV=_7,kV=w9,AV=De([In("title"),po("body",fn("type",{panel:P7,tabpanel:TV})),el("size","normal"),B("buttons",kV),xe("initialData",{}),aa("onAction",He),aa("onChange",He),aa("onSubmit",He),aa("onClose",He),aa("onCancel",He),xe("onTabChange",He)]),OV=function(t){return Pr("dialog",AV,t)},DV=De(Dn([Mf("type",["cancel","custom"])],EV)),RV=De([In("title"),In("url"),Ie("height"),Ie("width"),ca("buttons",DV),aa("onAction",He),aa("onCancel",He),aa("onClose",He),aa("onMessage",He)]),BV=function(t){return Pr("dialog",RV,t)},aI=function(t){return Vn(t)?[t].concat(qr(pn(t),aI)):Sn(t)?qr(t,aI):[]},_V=function(t){return Ut(t.type)&&Ut(t.name)},MV={checkbox:O9,colorinput:F9,colorpicker:I9,dropzone:W9,input:tV,iframe:Y9,sizeinput:F7,selectbox:lV,listbox:uV,size:F7,textarea:pV,urlinput:wV,customeditor:H9,collection:B9,togglemenuitem:b9},FV=function(t){return D.from(MV[t.type])},PV=function(t){return rt(aI(t),_V)},NV=function(t){var r=PV(t),o=qr(r,function(c){return FV(c).fold(function(){return[]},function(v){return[po(c.name,v)]})});return De(o)},N7=function(t){var r=ba(OV(t)),o=NV(t),c=t.initialData;return{internalDialog:r,dataValidator:o,initialData:c}},oA={open:function(t,r){var o=N7(r);return t(o.internalDialog,o.initialData,o.dataValidator)},openUrl:function(t,r){var o=ba(BV(r));return t(o)},redial:function(t){return N7(t)}},I7=function(t){var r=[],o={};return Sa(t,function(c,v){c.fold(function(){r.push(v)},function(m){o[v]=m})}),r.length>0?mn.error(r):mn.value(o)},IV=function(t,r){var o=ea(B0.sketch(function(c){return{dom:{tag:"div",classes:["tox-form"].concat(t.classes)},components:yt(t.items,function(v){return aT(c,v,r)})}}));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[o.asSpec()]}],behaviours:Pt([Pn.config({mode:"acyclic",useTabstopAt:pt(G2)}),ys.memento(o),ig.memento(o,{postprocess:function(c){return I7(c).fold(function(v){return console.error(v),{}},Te)}})])}},$V=function(t,r){return{uid:t.uid,dom:t.dom,components:t.components,events:V(t.action),behaviours:Ai(t.tabButtonBehaviours,[Qn.config({}),Pn.config({mode:"execution",useSpace:!0,useEnter:!0}),Vt.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}},zV=xc({name:"TabButton",configFields:[xe("uid",void 0),nt("value"),hr("dom","dom",Dt(function(){return{attributes:{role:"tab",id:bn("aria"),"aria-selected":"false"}}}),Mt()),W("action"),xe("domModification",{}),Vo("tabButtonBehaviours",[Qn,Pn,Vt]),nt("view")],factory:$V}),LV=re([nt("tabs"),nt("dom"),xe("clickToDismiss",!1),Vo("tabbarBehaviours",[Qr,Pn]),Qu(["tabClass","selectedClass"])]),HV=F1({factory:zV,name:"tabs",unit:"tab",overrides:function(t){var r=function(c,v){Qr.dehighlight(c,v),sn(c,Q0(),{tabbar:c,button:v})},o=function(c,v){Qr.highlight(c,v),sn(c,ep(),{tabbar:c,button:v})};return{action:function(c){var v=c.getSystem().getByUid(t.uid).getOrDie(),m=Qr.isHighlighted(v,c),p=function(){return m&&t.clickToDismiss?r:m?He:o}();p(v,c)},domModification:{classes:[t.markers.tabClass]}}}}),VV=re([HV]),UV=function(t,r,o,c){return{uid:t.uid,dom:t.dom,components:r,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:Ai(t.tabbarBehaviours,[Qr.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:function(v,m){kr(m.element,"aria-selected","true")},onDehighlight:function(v,m){kr(m.element,"aria-selected","false")}}),Pn.config({mode:"flow",getInitial:function(v){return Qr.getHighlighted(v).map(function(m){return m.element})},selector:"."+t.markers.tabClass,executeOnMove:!0})])}},$7=mu({name:"Tabbar",configFields:LV(),partFields:VV(),factory:UV}),WV=function(t,r){return{uid:t.uid,dom:t.dom,behaviours:Ai(t.tabviewBehaviours,[nr.config({})]),domModification:{attributes:{role:"tabpanel"}}}},jV=xc({name:"Tabview",configFields:[Vo("tabviewBehaviours",[nr])],factory:WV}),qV=re([xe("selectFirst",!0),Kr("onChangeTab"),Kr("onDismissTab"),xe("tabs",[]),Vo("tabSectionBehaviours",[])]),GV=uu({factory:$7,schema:[nt("dom"),Je("markers",[nt("tabClass"),nt("selectedClass")])],name:"tabbar",defaults:function(t){return{tabs:t.tabs}}}),KV=uu({factory:jV,name:"tabview"}),XV=re([GV,KV]),YV=function(t,r,o,c){var v=function(p){var w=Vt.getValue(p);ya(p,t,"tabview").each(function(S){var T=Wn(t.tabs,function(R){return R.value===w});T.each(function(R){var O=R.view();$c(p.element,"id").each(function(N){kr(S.element,"aria-labelledby",N)}),nr.set(S,O),t.onChangeTab(S,p,O)})})},m=function(p,w){ya(p,t,"tabbar").each(function(S){w(S).each(Mc)})};return{uid:t.uid,dom:t.dom,components:r,behaviours:D1(t.tabSectionBehaviours),events:xa(dn([t.selectFirst?[Ta(function(p,w){m(p,Qr.getFirst)})]:[],[ot(ep(),function(p,w){var S=w.event.button;v(S)}),ot(Q0(),function(p,w){var S=w.event.button;t.onDismissTab(p,S)})]])),apis:{getViewItems:function(p){return ya(p,t,"tabview").map(function(w){return nr.contents(w)}).getOr([])},showTab:function(p,w){var S=function(T){var R=Qr.getCandidates(T),O=Wn(R,function(N){return Vt.getValue(N)===w});return O.filter(function(N){return!Qr.isHighlighted(T,N)})};m(p,S)}}}},yT=mu({name:"TabSection",configFields:qV(),partFields:XV(),factory:YV,apis:{getViewItems:function(t,r){return t.getViewItems(r)},showTab:function(t,r,o){t.showTab(r,o)}}}),JV=function(t,r,o){return yt(t,function(c,v){nr.set(o,t[v].view());var m=r.dom.getBoundingClientRect();return nr.set(o,[]),m.height})},ZV=function(t){return Ga(vi(t,function(r,o){return r>o?-1:r<o?1:0}))},QV=function(t,r,o){var c=sl(t).dom,v=nv(t,".tox-dialog-wrap").getOr(t),m=oi(v,"position")==="fixed",p;m?p=Math.max(c.clientHeight,window.innerHeight):p=Math.max(c.offsetHeight,c.scrollHeight);var w=Ti(r),S=r.dom.offsetLeft>=o.dom.offsetLeft+ii(o),T=S?Math.max(Ti(o),w):w,R=parseInt(oi(t,"margin-top"),10)||0,O=parseInt(oi(t,"margin-bottom"),10)||0,N=Ti(t)+R+O,L=N-T;return p-L},eU=function(t,r){Ga(t).each(function(o){return yT.showTab(r,o.value)})},z7=function(t,r){yr(t,"height",r+"px"),Ni().browser.isIE()?Ma(t,"flex-basis"):yr(t,"flex-basis",r+"px")},SB=function(t,r,o){nv(t,'[role="dialog"]').each(function(c){ru(c,'[role="tablist"]').each(function(v){o.get().map(function(m){return yr(r,"height","0"),yr(r,"flex-basis","0"),Math.min(m,QV(c,r,v))}).each(function(m){z7(r,m)})})})},oI=function(t){return ru(t,'[role="tabpanel"]')},tU=function(t){var r=function(){var c=ro(),v=[Ta(function(p){var w=p.element;oI(w).each(function(S){yr(S,"visibility","hidden"),p.getSystem().getByDom(S).toOptional().each(function(T){var R=JV(t,S,T),O=ZV(R);O.fold(c.clear,c.set)}),SB(w,S,c),Ma(S,"visibility"),eU(t,p),Il.requestAnimationFrame(function(){SB(w,S,c)})})}),ot(Gf(),function(p){var w=p.element;oI(w).each(function(S){SB(w,S,c)})}),ot(z4,function(p,w){var S=p.element;oI(S).each(function(T){var R=tc($i(T));yr(T,"visibility","hidden");var O=Zr(T,"height").map(function(q){return parseInt(q,10)});Ma(T,"height"),Ma(T,"flex-basis");var N=T.dom.getBoundingClientRect().height,L=O.forall(function(q){return N>q});L?(c.set(N),SB(S,T,c)):O.each(function(q){z7(T,q)}),Ma(T,"visibility"),R.each(Fu)})})],m=!1;return{extraEvents:v,selectFirst:m}}(),o=function(){var c=[],v=!0;return{extraEvents:c,selectFirst:v}}();return{smartTabHeight:r,naiveTabHeight:o}},L7="send-data-to-section",H7="send-data-to-view",nU=function(t,r){var o=Bn({}),c=function(S){var T=Vt.getValue(S),R=I7(T).getOr({}),O=o.get(),N=gr(O,R);o.set(N)},v=function(S){var T=o.get();Vt.setValue(S,T)},m=Bn(null),p=yt(t.tabs,function(S){return{value:S.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"],innerHtml:r.shared.providers.translate(S.title)},view:function(){return[B0.sketch(function(T){return{dom:{tag:"div",classes:["tox-form"]},components:yt(S.items,function(R){return aT(T,R,r)}),formBehaviours:Pt([Pn.config({mode:"acyclic",useTabstopAt:pt(G2)}),lr("TabView.form.events",[Ta(v),Rs(c)]),yc.config({channels:ss([{key:L7,value:{onReceive:c}},{key:H7,value:{onReceive:v}}])})])}})]}}}),w=tU(p).smartTabHeight;return yT.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:function(S,T,R){var O=Vt.getValue(T);sn(S,YO,{name:O,oldName:m.get()}),m.set(O)},tabs:p,components:[yT.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[$7.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:Pt([La.config({})])}),yT.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:w.selectFirst,tabSectionBehaviours:Pt([lr("tabpanel",w.extraEvents),Pn.config({mode:"acyclic"}),Dr.config({find:function(S){return Ga(yT.getViewItems(S))}}),Vt.config({store:{mode:"manual",getValue:function(S){return S.getSystem().broadcastOn([L7],{}),o.get()},setValue:function(S,T){o.set(T),S.getSystem().broadcastOn([H7],{})}}})])})},iI=bn("update-dialog"),V7=bn("update-title"),U7=bn("update-body"),W7=bn("update-footer"),j7=bn("body-send-message"),q7=function(t,r,o,c){var v=function(w){switch(w.body.type){case"tabpanel":return[nU(w.body,o)];default:return[IV(w.body,o)]}},m=function(w,S){return D.some({isTabPanel:function(){return S.body.type==="tabpanel"}})},p={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:me(me({},r.map(function(w){return{id:w}}).getOr({})),c?p:{})},components:[],behaviours:Pt([ys.childAt(0),Qs.config({channel:U7,updateState:m,renderComponents:v,initialData:t})])}},rU=function(t,r,o,c){return q7(t,D.some(r),o,c)},aU=function(t,r){var o=q7(t,D.none(),r,!1);return Zi.parts.body(o)},oU=function(t){var r={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[cR({dom:{tag:"iframe",attributes:{src:t.url}},behaviours:Pt([La.config({}),Qn.config({})])})]}],behaviours:Pt([Pn.config({mode:"acyclic",useTabstopAt:pt(G2)})])};return Zi.parts.body(r)},iU=y4.deviceType.isTouch(),G7=function(t,r){return{dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,r]}},K7=function(t,r){return Zi.parts.close(ac.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":r.translate("Close")}},action:t,buttonBehaviours:Pt([La.config({})])}))},X7=function(){return Zi.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}})},Y7=function(t,r){return Zi.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:$e("<p>"+r.translate(t)+"</p>")}]}]})},J7=function(t){return Zi.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t})},Z7=function(t,r){return[Nu.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),Nu.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:r})]},uI=function(t){var r,o="tox-dialog",c=o+"-wrap",v=c+"__backdrop",m=o+"__disable-scroll";return Zi.sketch({lazySink:t.lazySink,onEscape:function(p){return t.onEscape(p),D.some(!0)},useTabstopAt:function(p){return!G2(p)},dom:{tag:"div",classes:[o].concat(t.extraClasses),styles:me({position:"relative"},t.extraStyles)},components:Dn([t.header,t.body],t.footer.toArray()),parts:{blocker:{dom:$e('<div class="'+c+'"></div>'),components:[{dom:{tag:"div",classes:iU?[v,v+"--opaque"]:[v]}}]}},dragBlockClass:c,modalBehaviours:Pt(Dn([Qn.config({}),lr("dialog-events",t.dialogEvents.concat([vs(Qo(),function(p,w){Pn.focusIn(p)})])),lr("scroll-lock",[Ta(function(){no(gl(),m)}),Rs(function(){wo(gl(),m)})])],t.extraBehaviours)),eventOrder:me((r={},r[Xu()]=["dialog-events"],r[ul()]=["scroll-lock","dialog-events","alloy.base.behaviour"],r[Lv()]=["alloy.base.behaviour","dialog-events","scroll-lock"],r),t.eventOrder)})},Q7=function(t){return ac.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),title:t.translate("Close")}},components:[pf("close",{tag:"div",classes:["tox-icon"]},t.icons)],action:function(r){zr(r,kh)}})},e$=function(t,r,o){var c=function(v){return[bl(o.translate(v.title))]};return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:me({},r.map(function(v){return{id:v}}).getOr({}))},components:c(t),behaviours:Pt([Qs.config({channel:V7,renderComponents:c})])}},t$=function(){return{dom:$e('<div class="tox-dialog__draghandle"></div>')}},uU=function(t,r,o){return Nu.sketch({dom:$e('<div class="tox-dialog__header"></div>'),components:[e$(t,D.some(r),o),t$(),Q7(o)],containerBehaviours:Pt([aw.config({mode:"mouse",blockerClass:"blocker",getTarget:function(c){return hs(c,'[role="dialog"]').getOrDie()},snaps:{getSnapPoints:function(){return[]},leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])})},cU=function(t,r){var o=Zi.parts.title(e$(t,D.none(),r)),c=Zi.parts.draghandle(t$()),v=Zi.parts.close(Q7(r)),m=[o].concat(t.draggable?[c]:[]).concat([v]);return Nu.sketch({dom:$e('<div class="tox-dialog__header"></div>'),components:m})},n$=function(t,r){return cU({title:r.shared.providers.translate(t),draggable:r.dialog.isDraggableModal()},r.shared.providers)},r$=function(t,r,o){return{dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":o.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:"0px",position:"absolute"}},behaviours:r,components:[{dom:$e('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}},a$=function(t,r,o){return{onClose:function(){return o.closeWindow()},onBlock:function(c){Zi.setBusy(t(),function(v,m){return r$(c.message,m,r)})},onUnblock:function(){Zi.setIdle(t())}}},o$=function(t,r,o,c){var v,m=function(p,w){return D.some(w)};return nu(uI(me(me({},t),{lazySink:c.shared.getSink,extraBehaviours:Dn([Qs.config({channel:iI,updateState:m,initialData:r}),ig.memory({})],t.extraBehaviours),onEscape:function(p){zr(p,kh)},dialogEvents:o,eventOrder:(v={},v[Ds()]=[Qs.name(),yc.name()],v[ul()]=["scroll-lock",Qs.name(),"messages","dialog-events","alloy.base.behaviour"],v[Lv()]=["alloy.base.behaviour","dialog-events","messages",Qs.name(),"scroll-lock"],v)})))},i$=function(t){var r=function(o){var c=yt(o.items,function(v){var m=Bn(!1);return me(me({},v),{storage:m})});return me(me({},o),{items:c})};return yt(t,function(o){return o.type==="menu"?r(o):o})},u$=function(t){return kn(t,function(r,o){if(o.type==="menu"){var c=o;return kn(c.items,function(v,m){return v[m.name]=m.storage,v},r)}return r},{})},c$=function(t,r){return[Fc(Qo(),$F),t(I2,function(o,c){r.onClose(),c.onClose()}),t(kh,function(o,c,v,m){c.onCancel(o),zr(m,I2)}),ot($4,function(o,c){return r.onUnblock()}),ot(I4,function(o,c){return r.onBlock(c.event)})]},sU=function(t,r){var o=function(v,m){return ot(v,function(p,w){c(p,function(S,T){m(t(),S,w.event,p)})})},c=function(v,m){Qs.getState(v).get().each(function(p){m(p,v)})};return Dn(Dn([],c$(o,r)),[o(Ev,function(v,m,p){m.onAction(v,{name:p.name})})])},lU=function(t,r,o){var c=function(m,p){return ot(m,function(w,S){v(w,function(T,R){p(t(),T,S.event,w)})})},v=function(m,p){Qs.getState(m).get().each(function(w){p(w.internalDialog,m)})};return Dn(Dn([],c$(c,r)),[c(tg,function(m,p){return p.onSubmit(m)}),c(Tc,function(m,p,w){p.onChange(m,{name:w.name})}),c(Ev,function(m,p,w,S){var T=function(){return Pn.focusIn(S)},R=function(L){return gw(L,"disabled")||$c(L,"aria-disabled").exists(function(q){return q==="true"})},O=$i(S.element),N=tc(O);p.onAction(m,{name:w.name,value:w.value}),tc(O).fold(T,function(L){R(L)||N.exists(function(q){return Jl(L,q)&&R(q)})?T():o().toOptional().filter(function(q){return!Jl(q.element,L)}).each(T)})}),c(YO,function(m,p,w){p.onTabChange(m,{newTabName:w.name,oldTabName:w.oldName})}),Rs(function(m){var p=t();Vt.setValue(m,p.getData())})])},cI={initUrlDialog:sU,initDialog:lU},fU=function(t,r){return Xx(t,t.type,r)},vU=function(t,r,o){return Wn(r,function(c){return c.name===o}).bind(function(c){return c.memento.getOpt(t)})},dU=function(t,r){var o=r.map(function(w){return w.footerButtons}).getOr([]),c=$t(o,function(w){return w.align==="start"}),v=function(w,S){return Nu.sketch({dom:{tag:"div",classes:["tox-dialog__footer-"+w]},components:yt(S,function(T){return T.memento.asSpec()})})},m=v("start",c.pass),p=v("end",c.fail);return[m,p]},s$=function(t,r){var o=function(c,v){var m=yt(v.buttons,function(w){var S=ea(fU(w,r));return{name:w.name,align:w.align,memento:S}}),p=function(w,S){return vU(w,m,S)};return D.some({lookupByName:p,footerButtons:m})};return{dom:$e('<div class="tox-dialog__footer"></div>'),components:[],behaviours:Pt([Qs.config({channel:W7,initialData:t,updateState:o,renderComponents:dU})])}},mU=function(t,r){return s$(t,r)},l$=function(t,r){return Zi.parts.footer(s$(t,r))},sI=function(t,r){var o=t.getRoot();if(o.getSystem().isConnected()){var c=Dr.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return B0.getField(c,r).fold(function(){var v=t.getFooter(),m=Qs.getState(v);return m.get().bind(function(p){return p.lookupByName(c,r)})},function(v){return D.some(v)})}else return D.none()},gU=function(t,r){var o=t.getRoot();return Qs.getState(o).get().map(function(c){return ba(Pr("data",c.dataValidator,r))}).getOr(r)},f$=function(t,r,o){var c=function(X){var ge=t.getRoot();ge.getSystem().isConnected()&&X(ge)},v=function(){var X=t.getRoot(),ge=X.getSystem().isConnected()?t.getFormWrapper():X,ne=Vt.getValue(ge),ye=Gr(o,function(he){return he.get()});return me(me({},ne),ye)},m=function(X){c(function(ge){var ne=q.getData(),ye=me(me({},ne),X),he=gU(t,ye),Ve=t.getFormWrapper();Vt.setValue(Ve,he),Sa(o,function(_e,Ke){Xn(ye,Ke)&&_e.set(ye[Ke])})})},p=function(X){sI(t,X).each(Tn.disable)},w=function(X){sI(t,X).each(Tn.enable)},S=function(X){sI(t,X).each(Qn.focus)},T=function(X){if(!Ut(X))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");c(function(ge){sn(ge,I4,{message:X})})},R=function(){c(function(X){zr(X,$4)})},O=function(X){c(function(ge){var ne=t.getBody(),ye=Qs.getState(ne);ye.get().exists(function(he){return he.isTabPanel()})&&Dr.getCurrent(ne).each(function(he){yT.showTab(he,X)})})},N=function(X){c(function(ge){var ne=r(X);ge.getSystem().broadcastOn([iI],ne),ge.getSystem().broadcastOn([V7],ne.internalDialog),ge.getSystem().broadcastOn([U7],ne.internalDialog),ge.getSystem().broadcastOn([W7],ne.internalDialog),q.setData(ne.initialData)})},L=function(){c(function(X){zr(X,I2)})},q={getData:v,setData:m,disable:p,enable:w,focus:S,block:T,unblock:R,showTab:O,redial:N,close:L};return q},hU=function(t){switch(t){case"large":return["tox-dialog--width-lg"];case"medium":return["tox-dialog--width-md"];default:return[]}},pU=function(t,r,o){var c=n$(t.internalDialog.title,o),v=aU({body:t.internalDialog.body},o),m=i$(t.internalDialog.buttons),p=u$(m),w=l$({buttons:m},o),S=cI.initDialog(function(){return L},a$(function(){return O},o.shared.providers,r),o.shared.getSink),T=hU(t.internalDialog.size),R={header:c,body:v,footer:D.some(w),extraClasses:T,extraBehaviours:[],extraStyles:{}},O=o$(R,t,S,o),N=function(){var q=function(){var X=Zi.getBody(O);return Dr.getCurrent(X).getOr(X)};return{getRoot:re(O),getBody:function(){return Zi.getBody(O)},getFooter:function(){return Zi.getFooter(O)},getFormWrapper:q}}(),L=f$(N,r.redial,p);return{dialog:O,instanceApi:L}},bU=function(t,r,o,c){var v,m,p=bn("dialog-label"),w=bn("dialog-content"),S=function(ne,ye){return D.some(ye)},T=ea(uU({title:t.internalDialog.title,draggable:!0},p,o.shared.providers)),R=ea(rU({body:t.internalDialog.body},w,o,c)),O=i$(t.internalDialog.buttons),N=u$(O),L=ea(mU({buttons:O},o)),q=cI.initDialog(function(){return ge},{onBlock:function(ne){li.block(X,function(ye,he){return r$(ne.message,he,o.shared.providers)})},onUnblock:function(){li.unblock(X)},onClose:function(){return r.closeWindow()}},o.shared.getSink),X=nu({dom:{tag:"div",classes:["tox-dialog","tox-dialog-inline"],attributes:(v={role:"dialog"},v["aria-labelledby"]=p,v["aria-describedby"]=w,v)},eventOrder:(m={},m[Ds()]=[Qs.name(),yc.name()],m[Xu()]=["execute-on-form"],m[ul()]=["reflecting","execute-on-form"],m),behaviours:Pt([Pn.config({mode:"cyclic",onEscape:function(ne){return zr(ne,I2),D.some(!0)},useTabstopAt:function(ne){return!G2(ne)&&(Nc(ne)!=="button"||Eu(ne,"disabled")!=="disabled")}}),Qs.config({channel:iI,updateState:S,initialData:t}),Qn.config({}),lr("execute-on-form",q.concat([vs(Qo(),function(ne,ye){Pn.focusIn(ne)})])),li.config({getRoot:function(){return D.some(X)}}),nr.config({}),ig.memory({})]),components:[T.asSpec(),R.asSpec(),L.asSpec()]}),ge=f$({getRoot:re(X),getFooter:function(){return L.get(X)},getBody:function(){return R.get(X)},getFormWrapper:function(){var ne=R.get(X);return Dr.getCurrent(ne).getOr(ne)}},r.redial,N);return{dialog:X,instanceApi:ge}},lI=tinymce.util.Tools.resolve("tinymce.util.URI"),yU=function(t){var r=function(p){t.getSystem().isConnected()&&p(t)},o=function(p){if(!Ut(p))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");r(function(w){sn(w,I4,{message:p})})},c=function(){r(function(p){zr(p,$4)})},v=function(){r(function(p){zr(p,I2)})},m=function(p){r(function(w){w.getSystem().broadcastOn([j7],p)})};return{block:o,unblock:c,close:v,sendMessage:m}},wU=["insertContent","setContent","execCommand","close","block","unblock"],v$=function(t){return Vn(t)&&wU.indexOf(t.mceAction)!==-1},CU=function(t){return!v$(t)&&Vn(t)&&Xn(t,"mceAction")},SU=function(t,r,o){switch(o.mceAction){case"insertContent":t.insertContent(o.content);break;case"setContent":t.setContent(o.content);break;case"execCommand":var c=jt(o.ui)?o.ui:!1;t.execCommand(o.cmd,c,o.value);break;case"close":r.close();break;case"block":r.block(o.message);break;case"unblock":r.unblock();break}},xU=function(t,r,o,c){var v,m=n$(t.title,c),p=oU(t),w=t.buttons.bind(function(ye){return ye.length===0?D.none():D.some(l$({buttons:ye},c))}),S=cI.initUrlDialog(function(){return ne},a$(function(){return ge},c.shared.providers,r)),T=me(me({},t.height.fold(function(){return{}},function(ye){return{height:ye+"px","max-height":ye+"px"}})),t.width.fold(function(){return{}},function(ye){return{width:ye+"px","max-width":ye+"px"}})),R=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],O=new lI(t.url,{base_uri:new lI(window.location.href)}),N=O.protocol+"://"+O.host+(O.port?":"+O.port:""),L=Sl(),q=[lr("messages",[Ta(function(){var ye=ji(Ft.fromDom(window),"message",function(he){if(O.isSameOrigin(new lI(he.raw.origin))){var Ve=he.raw.data;v$(Ve)?SU(o,ne,Ve):CU(Ve)&&t.onMessage(ne,Ve)}});L.set(ye)}),Rs(L.clear)]),yc.config({channels:(v={},v[j7]={onReceive:function(ye,he){ru(ye.element,"iframe").each(function(Ve){var _e=Ve.dom.contentWindow;_e.postMessage(he,N)})}},v)})],X={header:m,body:p,footer:w,extraClasses:R,extraBehaviours:q,extraStyles:T},ge=o$(X,t,S,c),ne=yU(ge);return{dialog:ge,instanceApi:ne}},TU=function(t){var r=t.backstage.shared,o=function(c,v){var m=function(){Zi.hide(T),v()},p=ea(Xx({name:"close-alert",text:"OK",primary:!0,align:"end",disabled:!1,icon:D.none()},"cancel",t.backstage)),w=X7(),S=K7(m,r.providers),T=nu(uI({lazySink:function(){return r.getSink()},header:G7(w,S),body:Y7(c,r.providers),footer:D.some(J7(Z7([],[p.asSpec()]))),onEscape:m,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[ot(kh,m)],eventOrder:{}}));Zi.show(T);var R=p.get(T);Qn.focus(R)};return{open:o}},EU=function(t){var r=t.backstage.shared,o=function(c,v){var m=function(N){Zi.hide(R),v(N)},p=ea(Xx({name:"yes",text:"Yes",primary:!0,align:"end",disabled:!1,icon:D.none()},"submit",t.backstage)),w=Xx({name:"no",text:"No",primary:!1,align:"end",disabled:!1,icon:D.none()},"cancel",t.backstage),S=X7(),T=K7(function(){return m(!1)},r.providers),R=nu(uI({lazySink:function(){return r.getSink()},header:G7(S,T),body:Y7(c,r.providers),footer:D.some(J7(Z7([],[w,p.asSpec()]))),onEscape:function(){return m(!1)},extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[ot(kh,function(){return m(!1)}),ot(tg,function(){return m(!0)})],eventOrder:{}}));Zi.show(R);var O=p.get(R);Qn.focus(O)};return{open:o}},kU=function(t,r){return ba(Pr("data",r,t))},AU=function(t){return Fd(t,".tox-alert-dialog")||Fd(t,".tox-confirm-dialog")},OU=function(t,r,o){return r&&o?[]:[Vu.config({contextual:{lazyContext:function(){return D.some(Ao(Ft.fromDom(t.getContentAreaContainer())))},fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"]})]},DU=function(t){var r=t.backstage,o=t.editor,c=sx(o),v=TU(t),m=EU(t),p=function(q,X,ge){return X!==void 0&&X.inline==="toolbar"?R(q,r.shared.anchors.inlineDialog(),ge,X.ariaAttrs):X!==void 0&&X.inline==="cursor"?R(q,r.shared.anchors.cursor(),ge,X.ariaAttrs):T(q,ge)},w=function(q,X){return S(q,X)},S=function(q,X){var ge=function(ne){var ye=xU(ne,{closeWindow:function(){Zi.hide(ye.dialog),X(ye.instanceApi)}},o,r);return Zi.show(ye.dialog),ye.instanceApi};return oA.openUrl(ge,q)},T=function(q,X){var ge=function(ne,ye,he){var Ve=ye,_e={dataValidator:he,initialData:Ve,internalDialog:ne},Ke=pU(_e,{redial:oA.redial,closeWindow:function(){Zi.hide(Ke.dialog),X(Ke.instanceApi)}},r);return Zi.show(Ke.dialog),Ke.instanceApi.setData(Ve),Ke.instanceApi};return oA.open(ge,q)},R=function(q,X,ge,ne){var ye=function(he,Ve,_e){var Ke=kU(Ve,_e),Pe=ro(),ct=r.shared.header.isPositionedAtTop(),Bt={dataValidator:_e,initialData:Ke,internalDialog:he},Qt=function(){return Pe.on(function(ln){za.reposition(ln),Vu.refresh(ln)})},vt=bU(Bt,{redial:oA.redial,closeWindow:function(){Pe.on(za.hide),o.off("ResizeEditor",Qt),Pe.clear(),ge(vt.instanceApi)}},r,ne),dt=nu(za.sketch(me(me({lazySink:r.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:{}},ct?{}:{fireRepositionEventInstead:{}}),{inlineBehaviours:Pt(Dn([lr("window-manager-inline-events",[ot(mc(),function(ln,Hn){zr(vt.dialog,kh)})])],OU(o,c,ct))),isExtraPart:function(ln,Hn){return AU(Hn)}})));return Pe.set(dt),za.showWithin(dt,So(vt.dialog),{anchor:X},D.some(gl())),(!c||!ct)&&(Vu.refresh(dt),o.on("ResizeEditor",Qt)),vt.instanceApi.setData(Ke),Pn.focusIn(vt.dialog),vt.instanceApi};return oA.open(ye,q)},O=function(q,X){m.open(q,function(ge){X(ge)})},N=function(q,X){v.open(q,function(){X()})},L=function(q){q.close()};return{open:p,openUrl:w,alert:N,close:L,confirm:O}};function RU(){Rr.add("silver",function(t){var r=f9(t),o=r.uiMothership,c=r.backstage,v=r.renderUI,m=r.getUi;IO.register(t,c.shared);var p=DU({editor:t,backstage:c});return{renderUI:v,getWindowManagerImpl:re(p),getNotificationManagerImpl:function(){return $B(t,{backstage:c},o)},ui:m()}})}RU()})();tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 012 2 2 2 0 01-2 2 2 2 0 01-2-2c0-1.1.9-2 2-2zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 01-1-1v-5c0-.6-.4-1-1-1a1 1 0 00-1 1v5c0 .6-.4 1-1 1a1 1 0 01-1-1V9H4a1 1 0 110-2h16c.6 0 1 .4 1 1s-.4 1-1 1z" fill-rule="nonzero"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 00-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 10-1.4-1.4L12 13.6 5.7 7.3z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 001.4-1.4L12 6.6l-7.7 7.7a1 1 0 001.4 1.4L12 9.4l6.3 6.3z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 110-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5L13 7H5a1 1 0 110-2h9.2zm4 0h.8a1 1 0 010 2h-2l1.2-2zm-6.4 4l-1.2 2H5a1 1 0 010-2h6.8zm4 0H19a1 1 0 010 2h-4.4l1.2-2zm-6.4 4l-1.2 2H5a1 1 0 010-2h4.4zm4 0H19a1 1 0 010 2h-6.8l1.2-2zM7 17l-1.2 2H5a1 1 0 010-2h2zm4 0h8a1 1 0 010 2H9.8l1.2-2zm5.2-13.5l1.3.7-9.7 16.3-1.3-.7 9.7-16.3z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="M5.6 13l12 6a1 1 0 001.4-1V6a1 1 0 00-1.4-.9l-12 6a1 1 0 000 1.8z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="M18.5 13l-12 6A1 1 0 015 18V6a1 1 0 011.4-.9l12 6a1 1 0 010 1.8z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 01-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 00-1 1z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.7-.3 1 1 0 01-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3zm0-10a1 1 0 01-.7-.3A1 1 0 0111 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 01-.7.3zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 01-.7.3h-1a1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1zM7 12c0 .3-.1.5-.3.7a1 1 0 01-.7.3H5a1 1 0 01-.7-.3A1 1 0 014 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7zm10 3.5l.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 01-.8.3 1 1 0 01-.6-.3l-.8-.7a1 1 0 01-.3-.8c0-.2.1-.5.3-.7a1 1 0 011.4 0zm-10-7l-.7-.8a1 1 0 01-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.8-.3zm10 0a1 1 0 01-.8.3 1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 010 1.4l-.8.8a1 1 0 01-.6.3 1 1 0 01-.8-.3 1 1 0 01-.3-.8c0-.2.1-.5.3-.6l.7-.8zM12 8a4 4 0 013.7 2.4 4 4 0 010 3.2A4 4 0 0112 16a4 4 0 01-3.7-2.4 4 4 0 010-3.2A4 4 0 0112 8zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 9.4l-2.3 2.3a1 1 0 11-1.4-1.4l4-4a1 1 0 011.4 0l4 4a1 1 0 01-1.4 1.4L13 13.4V20a1 1 0 01-2 0v-6.6z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 110 14.8 7.4 7.4 0 010-14.8zM12 3a9 9 0 100 18 9 9 0 000-18zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="M15.7 2l1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 01-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2zM18 12l-4.5-4L9 12h9zM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 01-2-2v-5h2zm8-7V4h6a2 2 0 012 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1l.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="M13 11l-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="M18.4 8l1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 01-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8zm1.6 7l-3-3-3 3h6z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 01-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 01-1 .7h-.2a.7.7 0 01-.7-1l4-12a1 1 0 012 0l4 12a.7.7 0 01-.8 1h-.2a1 1 0 01-1-.7l-.8-2.6zm-.3-1.5l-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1zm4.8-6.8V10H7.7V5.8h-1v-1h2zM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1zM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2v-.1-.2l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 01-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 00-.5-.1 1 1 0 00-.4 0l-.3.4h-1zm2.3.8h-.2l-.2.1-.4.1a1 1 0 00-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 001.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 00-.6-.3l-.6.3-.2.8zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 00-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 01-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 01-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8a1 1 0 010 2h-8a1 1 0 010-2zM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 011.6 1.2l-8 12a1 1 0 01-1.5.1l-5-5a1 1 0 111.4-1.4l4.1 4.1 7.4-11z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 010-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3L4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 010-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 010-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 010-1.1L6 5 2.2 1.3z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8L5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 010-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2L13.4 12l3.9 3.8a1 1 0 01-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 01-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 011.5-1.5l3.8 3.9 3.8-3.9a1 1 0 011.5 1.5z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 01-.8 2 2.8 2.8 0 01.8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 01-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 01-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 01-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 01.8-2 2.8 2.8 0 01-.8-2zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2zM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 01-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 01-.5-.5V17a3 3 0 001-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0118 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 01-3.7 3 5.7 5.7 0 01-3.2 0A5.9 5.9 0 017.6 18a6.2 6.2 0 01-1.4-2.6 6.7 6.7 0 010-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 012.3-4A20 20 0 0112 4a26.4 26.4 0 013.2 3.4 18.2 18.2 0 012.3 4zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 00-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 01-1.3 3 5.3 5.3 0 01-2.3 1.5 4.9 4.9 0 01-2 .1 4.3 4.3 0 002.4.8 4 4 0 002-.6 4 4 0 001.5-1.5z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 000 18 1.5 1.5 0 001.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 005-5c0-4.4-4-8-9-8zm-5.5 9a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm3-4a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm5 0a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm3 4a1.5 1.5 0 110-3 1.5 1.5 0 010 3z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3L3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9 19l3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 00-1 1v10c0 .6.4 1 1 1h4v2zm-2 4v-4H5a3 3 0 01-3-3V6a3 3 0 013-3h14a3 3 0 013 3v10a3 3 0 01-3 3h-6.4L7 23z"/><path d="M13 10h2a1 1 0 010 2h-2v2a1 1 0 01-2 0v-2H9a1 1 0 010-2h2V8a1 1 0 012 0v2z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="M9 19l3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 00-1 1v10c0 .6.4 1 1 1h4v2zm-2 4v-4H5a3 3 0 01-3-3V6a3 3 0 013-3h14a3 3 0 013 3v10a3 3 0 01-3 3h-6.4L7 23z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4zm-6 8a6 6 0 006 6V6a6 6 0 00-6 6z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 00-2 2v11h2V5h10V3zm1 4a2 2 0 012 2v10a2 2 0 01-2 2h-7a2 2 0 01-2-2V9c0-1.2.9-2 2-2h7zm0 12V9h-7v10h7z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 01-1-1v-2H7V9H5a1 1 0 110-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3zM9 9v5l5-5H9zm1 6h5v-5l-5 5z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0110.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 012 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 017 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7zm12.3 5h-3v10h3v-10zM8 13.8h-.3l-.4.2a2.8 2.8 0 00-.7.4v.1a2.8 2.8 0 00-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 00.8-.3 2.4 2.4 0 00.7-.7 2.5 2.5 0 00.3-.8 1.5 1.5 0 000-.8 1 1 0 00-.2-.4 1 1 0 00-.5-.2H8zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4zM7 5.8h-.4a1 1 0 00-.5.3 1 1 0 00-.2.5v.7a2.5 2.5 0 00.3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 000-.8 2.6 2.6 0 00-.3-.8A2.5 2.5 0 007.7 6l-.4-.1H7z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 01-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 018.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 010-2c0-.4.3-.7.5-1l2 2V3h14zM8.5 15.3h-.3a2.6 2.6 0 00-.8.4 2.5 2.5 0 00-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 00.8-.3L9 18V18l.4-.4.2-.4.1-.4v-.3-.4a1 1 0 00-.2-.5 1 1 0 00-.4-.2h-.5zm7 0H15a1 1 0 00-.4.3 1 1 0 00-.2.5 1.5 1.5 0 000 .7v.4a2.8 2.8 0 00.5.7h.1a2.8 2.8 0 00.8.6l.4.1h.7l.5-.2.2-.5v-.4-.3a2.6 2.6 0 00-.3-.8 2.4 2.4 0 00-.7-.7 2.5 2.5 0 00-.8-.3h-.3zM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4zm8.5-7.1h-11v2h11v-2z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 01-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 018.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 010-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 010 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8zm-8.5 2.2l.1-.4v-.3-.4a1 1 0 00-.2-.5 1 1 0 00-.4-.2 1.6 1.6 0 00-.8 0 2.6 2.6 0 00-.8.3 2.5 2.5 0 00-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 00.8-.3 2.8 2.8 0 001-1zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4zm5.4 4l.2-.5v-.4-.3a2.6 2.6 0 00-.3-.8 2.4 2.4 0 00-.7-.7 2.5 2.5 0 00-.8-.3 1.5 1.5 0 00-.8 0 1 1 0 00-.4.2 1 1 0 00-.2.5 1.5 1.5 0 000 .7v.4l.3.4.3.4a2.8 2.8 0 00.8.5l.4.1h.7l.5-.2z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 00-2 2v14c0 1.1.9 2 2 2h10a2 2 0 002-2V7.6L14.4 3zM17 19H7V5h6v4h4v10z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5zm0 4h2v2h-2V9zM9 9h2v2H9V9zm4 4h2v2h-2v-2zm-4 0h2v2H9v-2zm0 4h2v2H9v-2zm4 0h2v2h-2v-2zM9 5h2v2H9V5z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7zm-2 2h-3v12h3V8zm-2-6v2H8v15H6V2h7z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16zm-2 2H8v3h12v-3zm-1-6v2H4v5H2V7h17z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10zm3 8h-2V9h-7v10h9a2 2 0 01-2 2h-7a2 2 0 01-2-2V9c0-1.2.9-2 2-2h7a2 2 0 012 2v2z"/><path d="M17 14h1a1 1 0 010 2h-1v1a1 1 0 01-2 0v-1h-1a1 1 0 010-2h1v-1a1 1 0 012 0v1z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19.8 8.8l-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5zm-2-.2l1-.9v-.3l-2.2-2.2a.3.3 0 00-.3 0l-1 1L18 8.5zm-1 1l-2.5-2.4-6 6 2.5 2.5 6-6zm-7 7.1l-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 00-2-2H7v2h11v9zM6 17h15a1 1 0 010 2h-1v1a1 1 0 01-2 0v-1H6a2 2 0 01-2-2V7H3a1 1 0 110-2h1V4a1 1 0 112 0v13zm3-5.3l1.3 2 3-4.7 3.7 6H7l2-3.3z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0119 6zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 008 19h3zM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 00-4 4.5h2.2zm-3.4 0a12 12 0 012.8-4 12 12 0 00-5 4h2.2z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm1 2v14h14V5H5zm4.8 2.6l5.6 4a.5.5 0 010 .8l-5.6 4A.5.5 0 019 16V8a.5.5 0 01.8-.4z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 00-1 1c0 .6.4 1 1 1zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 00-1 1c0 .6.4 1 1 1zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5zM12 4a8 8 0 100 16 8 8 0 000-16zm0 14.5a6.5 6.5 0 110-13 6.5 6.5 0 010 13z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3L18 7v1h-5V5H7v14h9a1 1 0 012 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3z"/><path d="M16.4 9.2a1 1 0 011.4.2l2.4 3.6-2.4 3.6a1 1 0 01-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 01.2-1.4z"/></g></svg>',fill:'<svg width="24" height="26"><path d="M16.6 12l-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 002.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2zM5.2 13L10 8.2l4.8 4.8H5.2zM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 002-2c0-1.3-2-3.5-2-3.5z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2zm4-8h2V9h-2v2zM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 00-2 2zm14-2v2h2a2 2 0 00-2-2zm-7 16h2V3h-2v18zm7-6h2v-2h-2v2zm-4-8h2V5h-2v2zm4 12a2 2 0 002-2h-2v2z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5zm8 4v2h2v-2h-2zm4-14H7a2 2 0 00-2 2v3h2V6h10v3h2V6a2 2 0 00-2-2zm2 14h-2v2a2 2 0 002-2zM3 11v2h18v-2H3zm6 7v2h2v-2H9zm8-4v2h2v-2h-2zM5 18c0 1.1.9 2 2 2v-2H5z" fill-rule="nonzero"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 00-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 010 2h-4v11a1 1 0 01-2 0V7H7a1 1 0 110-2h10z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="M15.3 10l-1.2-1.3 2.9-3h-2.3a.9.9 0 110-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 11-1.8 0V7l-2.9 3zm0 4l3 3v-2.3a.9.9 0 111.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 110-1.8H17l-3-2.9 1.3-1.2zM10 15.4l-2.9 3h2.3a.9.9 0 110 1.7H5a.9.9 0 01-.9-.9v-4.4a.9.9 0 111.8 0V17l2.9-3 1.2 1.3zM8.7 10L5.7 7v2.3a.9.9 0 01-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 010 1.8H7l3 2.9-1.3 1.2z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="M5 15.7l2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7zM5 18V19h3l1.8-1.9-2-2L5 17.9zm14-3l-2.5-2.4-6.4 6.5H19v-4zM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 01-1-1V7c0-.6.4-1 1-1zm6 7a2 2 0 110-4 2 2 0 010 4zM4.5 4h15a.5.5 0 110 1h-15a.5.5 0 010-1zm2-2h11a.5.5 0 110 1h-11a.5.5 0 010-1z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm1 2v14h14V5H5zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 00-.4-.8l-.1-.2H8 8v-1l.3-.1.3-.1h.7a1 1 0 01.6.5l.1.3a8.5 8.5 0 01.3.6l1.9 4.6 2-5.2a1 1 0 011-.6.5.5 0 01.5.6L13 14v2.8a.7.7 0 01-1.4 0z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 00-6 9 6.3 6.3 0 001.4 2l1 1a6.3 6.3 0 003.6 1 6.5 6.5 0 006-9 6.3 6.3 0 00-1.4-2l-1-1a6.3 6.3 0 00-3.6-1zM12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4z"/><path d="M9.6 9.7a.7.7 0 01-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 00-.8.8.8.8 0 01-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path id="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 012.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm12 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm-6 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="M5 15.7l3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7zM5 18V19h3l2.8-2.9-2-2L5 17.9zm14-3l-2.5-2.4-6.4 6.5H19v-4zM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm6 8a2 2 0 100-4 2 2 0 000 4z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 110-2zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm-5 4h12a1 1 0 010 2H7a1 1 0 010-2zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 011.2-1.6l3 2a1 1 0 010 1.6l-3 2a1 1 0 11-1.2-1.6z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4zm-1 3v2h2V7h-2zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 001.8-2.9 6.3 6.3 0 00-.1-4.1 5.8 5.8 0 00-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 00-3.9 1.8 6.3 6.3 0 00-1.3 6 6.2 6.2 0 001.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 014 11c0-1 .2-1.9.6-2.7A7 7 0 016.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 015.7 2 7 7 0 011.7 2.3 6 6 0 01.2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 01-3.6 2.5v.5z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 100-14 7 7 0 000 14zm0 2a9 9 0 110-18 9 9 0 010 18z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 00-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3L16.5 18a5.8 5.8 0 01-3.1 1.9 6.1 6.1 0 01-5.5-1.6A5.8 5.8 0 016 14v-.3l.1-1.2A13.9 13.9 0 017.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 00.2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 00-3-4.2L12 6a26.1 26.1 0 00-2.2 2.5l-1-1a20.9 20.9 0 012.9-3.3L12 4l1 .8a22.2 22.2 0 014 5.4c.6 1.2 1 2.4 1 3.6z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="M16.7 4.7l-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 110 18 9 9 0 010-18zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 003.2-2.1l-.2-.2a6 6 0 00-1-.6zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 01-2-2.8zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 01-.3-2zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1zm3-1.4l-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 00-1.3-3.5zm-9 0l2 .2V5.5a9 9 0 00-2 2.2zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 00-2-2.3zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 011.9-2.5zm4.4 0l.1.1a10 10 0 011.8 2.4l1.1-.7a7.5 7.5 0 00-3-1.8z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zm0 4a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zm0 4a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zm0 4a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zM7 3.6l3.7 3.7a1 1 0 01-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 011.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 011.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 01-1.3 0h-.1a1 1 0 010-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="M15 9l-8 8H4v-3l8-8 3 3zm1-1l-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1zM4 18h16v2H4v-2z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 011.4 1.4l-2.1 2a2 2 0 102.7 2.8l4.8-4.8a1 1 0 000-1.4 1 1 0 111.4-1.3 2.9 2.9 0 010 4L9.6 20a3.9 3.9 0 01-5.5-5.5l2-2zm11.6-.6a1 1 0 01-1.4-1.4l2-2a2 2 0 10-2.6-2.8L11 10.3a1 1 0 000 1.4A1 1 0 119.6 13a2.9 2.9 0 010-4L14.4 4a3.9 3.9 0 015.5 5.5l-2 2z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6zM11 26a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6zM11 36a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8l-1.6 1v-1.1l1.6-1h1.2V17zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6zM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3zM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4zM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3zM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM37.1 34.6L34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2zm.7 1a2 2 0 00-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1zM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3zM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2zm.7 1a2 2 0 00-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33zm0 10v-1.2h-1.3V26H33zm0 10v-1.2h-1.3V36H33z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15zm0 10v-1.2h1.3V26H15zm0 10v-1.2h1.3V36H15z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M39.3 17l-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3zm-1.6-4.7l-.7 2.3h1.6l-.8-2.3zM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26zM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M12.6 17l-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3zM11 12.3l-.7 2.3h1.6l-.8-2.3zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7zM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3zm0 10v-1.2H33V27h-1.3zm0 10v-1.2H33V37h-1.3z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15zm0 10v-1.2h1.3V27H15zm0 10v-1.2h1.3V37H15z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3zM10 8v3h4V8a1 1 0 00-.3-.7A1 1 0 0013 7h-2a1 1 0 00-.7.3 1 1 0 00-.3.7z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 017.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L11 5zM4.4 16.2L6.2 15l-1.8-1.2a1 1 0 011.2-1.6l3 2a1 1 0 010 1.6l-3 2a1 1 0 11-1.2-1.6z" fill-rule="evenodd"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm12 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm-6 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 00-2 2v14c0 1.1.9 2 2 2h10a2 2 0 002-2V7.6L14.4 3zM17 19H7V5h6v4h4v10z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="M15 13l2-2v8H5V7h8l-2 2H7v8h8v-4zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 110-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 01-1-1v-3zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M17.8 9.8L15.4 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7l2.3 5.8zm0 0l2.2 5.7-2.3-5.8zM13 17v-2h-2v2h2zm0-4V7h-2v6h2z" fill-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 010 2H6a1 1 0 010-2zm0-6h8a1 1 0 010 2H6a1 1 0 010-2zm0-6h8a1 1 0 010 2H6a1 1 0 110-2zm13-1v3.5a.5.5 0 11-1 0V5h-.5a.5.5 0 110-1H19zm-1 8.8l.2.2h1.3a.5.5 0 110 1h-1.6a1 1 0 01-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 00-.2-.2h-1.3a.5.5 0 01-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 010-1h1.2a.3.3 0 100-.6h-1.3a.4.4 0 110-.8h1.3a.3.3 0 000-.6h-1.2a.5.5 0 110-1H19c.6 0 1 .4 1 1z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 110-2zM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 01-.5-.5V5h-.5a.5.5 0 010-1H6zm-1 8.8l.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 01-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 00-.2-.2H4.5a.5.5 0 01-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3zM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 010-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 110-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 110-1H6c.6 0 1 .4 1 1z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4L1 13l6.4 6.5 6.5-6.5-6.5-6.5zM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7zM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 010-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 11-4.3 16.9l1.5-1.5A7 7 0 1013 6h-1z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 110-2zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm-5 4h12a1 1 0 010 2H7a1 1 0 010-2zm1.6-3.8a1 1 0 01-1.2 1.6l-3-2a1 1 0 010-1.6l3-2a1 1 0 011.2 1.6L6.8 12l1.8 1.2z" fill-rule="evenodd"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 010-2zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1zM6 22a1 1 0 01-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 01-1-1v-5H7v5c0 .6-.4 1-1 1z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 016.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L10 5z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm8 7v12h-6V8h6zm-1.5 1.5h-3v9h3v-9zM12 3a1 1 0 100 2 1 1 0 000-2z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm-2 7v12H4V8h6zM8.5 9.5h-3v9h3v-9zM12 3a1 1 0 100 2 1 1 0 000-2z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm10 11v5H8v-5h14zm-1.5 1.5h-11v2h11v-2zM12 3a1 1 0 100 2 1 1 0 000-2z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm10 7v5H8V8h14zm-1.5 1.5h-11v2h11v-2zM12 3a1 1 0 100 2 1 1 0 000-2z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h3V9h9zM9 20H6a2 2 0 01-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0112 1a3 3 0 012.8 2H18a2 2 0 012 2v4h1v12H9v-1zm1.5-9.5v9h9v-9h-9zM12 3a1 1 0 00-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h3V9h9zM9 20H6a2 2 0 01-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0112 1a3 3 0 012.8 2H18a2 2 0 012 2v4h1v12H9v-1zm1.5-9.5v9h9v-9h-9zM12 3a1 1 0 00-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5L8 20H3v-3l3.5-3.5a2 2 0 010-3L14 3l1 1-7.3 7.3a1 1 0 000 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 01-2.8 0l-.1-.1z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 01.1 2H13v6a1 1 0 01-2 .1V13H5a1 1 0 01-.1-2H11V5c0-.6.4-1 1-1z"/></svg>',preferences:'<svg width="24" height="24"><path d="M20.1 13.5l-1.9.2a5.8 5.8 0 01-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 01-1.4 0l-1.5-1.2a6.2 6.2 0 01-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 01-1-.9l-.2-1.9a5.8 5.8 0 01-1.5-.6l-1.5 1.2a1 1 0 01-1.4 0l-.7-.7a1 1 0 010-1.4l1.2-1.5a6.2 6.2 0 01-.6-1.5l-1.9-.2a1 1 0 01-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 01.6-1.5L5.2 7.3a1 1 0 010-1.4l.7-.7a1 1 0 011.4 0l1.5 1.2a6.2 6.2 0 011.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 011.5.6l1.5-1.2a1 1 0 011.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 01.6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1zM12 15a3 3 0 100-6 3 3 0 000 6z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 002.1-2.8 15.7 15.7 0 00-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 00-6.7 3.2A16.2 16.2 0 003.2 12c0 .2.2.3.3.5zm-2.4-1l.7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 012.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 01-2.8-3.7 1 1 0 010-1zm12-3.3a2 2 0 102.7 2.6 4 4 0 11-2.6-2.6z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 00-3 3v6h2v3h14v-3h2v-6a3 3 0 00-3-3zm-1 10H7v-4h10v4zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5zm.5-8H6v2h12V5z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 00-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 00.8 1.3zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 00-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 00.8 1.3z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 11-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 111.4-1.4l5 5a1 1 0 010 1.4l-5 5a1 1 0 01-1.4-1.4l3.3-3.3z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M5 22.1l-1.2-4.7v-.2a1 1 0 011-1l5 .4a1 1 0 11-.2 2l-2.2-.2a7.8 7.8 0 008.4.2 7.5 7.5 0 003.5-6.4 1 1 0 112 0 9.5 9.5 0 01-4.5 8 9.9 9.9 0 01-10.2 0l.4 1.4a1 1 0 11-2 .5zM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 00-9.5-1 7.5 7.5 0 00-3.6 7 1 1 0 01-2 0 9.5 9.5 0 014.5-8.6 10 10 0 0110.9.3l-.3-1a1 1 0 012-.5l1.1 4.8a1 1 0 01-1 1.2l-5-.4a1 1 0 01-.9-1z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 010 .2l-2.6 10a1 1 0 01-1 .8h-.2a.8.8 0 01-.8-1l2.6-10H8a1 1 0 110-2h9a1 1 0 010 2h-3.8zM5 18h7a1 1 0 010 2H5a1 1 0 010-2zm13 1.5L16.5 18 15 19.5a.7.7 0 01-1-1l1.5-1.5-1.5-1.5a.7.7 0 011-1l1.5 1.5 1.5-1.5a.7.7 0 011 1L17.5 17l1.5 1.5a.7.7 0 01-1 1z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 010 2h-1v9a3 3 0 01-3 3H9a3 3 0 01-3-3V9H5a1 1 0 110-2h3V6a3 3 0 013-3h2a3 3 0 013 3v1zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 00-1 1v1h4zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9zm-7 3a1 1 0 012 0v4a1 1 0 01-2 0v-4zm4 0a1 1 0 012 0v4a1 1 0 01-2 0v-4z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 119 2l-7 7A.5.5 0 111 8l7-7zM8.1 5.1A.5.5 0 119 6l-3 3A.5.5 0 115 8l3-3z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 01-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 01-.7.3h-6a1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.7-.3A1 1 0 014 11V5z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1z"/><path d="M4.7 10H9a1 1 0 010 2H3a1 1 0 01-1-1V5a1 1 0 112 0v3l2.5-2.4a9.2 9.2 0 0110.8-1.5A9 9 0 0113.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 111.3-1.5 7.2 7.2 0 0011.6-3.7 7 7 0 00-3.5-7.7A7.2 7.2 0 008 7L4.7 10z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 010 2H3a1 1 0 01-1-1V5a1 1 0 112 0v3l2.5-2.4a9.2 9.2 0 0110.8-1.5A9 9 0 0113.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 111.3-1.5 7.2 7.2 0 0011.6-3.7 7 7 0 00-3.5-7.7A7.2 7.2 0 008 7L4.7 10z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 012 0v6c0 .6-.4 1-1 1h-6a1 1 0 010-2h4.3L16 7A7.2 7.2 0 007.7 6a7 7 0 003 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 011.4 1.5A9.2 9.2 0 012.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 014.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L8 5zm12 11.2a1 1 0 11-1 1.6l-3-2a1 1 0 010-1.6l3-2a1 1 0 111 1.6L18.4 15l1.8 1.2z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 012 2v2a2 2 0 01-2 2H5a2 2 0 01-2-2v-2c0-1.1.9-2 2-2zm0 2v2h14v-2H5zm10 0h2v2h-2v-2zm-4-6.4L8.7 9.3a1 1 0 10-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 10-1.4-1.4L13 11.6V4a1 1 0 00-2 0v7.6z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 00-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2a2 2 0 00-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8a2 2 0 002-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2zM7 17h10V7H7v10zm2-8h6v6H9V9z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6c0-1.1.9-2 2-2zm3.6 10.9L7 12.3a.7.7 0 00-1 1L9.6 17 18 8.6a.7.7 0 000-1 .7.7 0 00-1 0l-7.4 7.3z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V8H5a1 1 0 110-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6zM8 8h2V6H8v2zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V13H5a1 1 0 010-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6zM14 13h2v-2h-2v2zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V18H5a1 1 0 010-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6zM8 18h2v-2H8v2z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="M16 6l4 4-8 9-8-9 4-4h8zm-4 10.2l5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 010-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7zM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 00-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6zm0-3v2h2V5H6zm13 0h-3v5h3v1h-3a1 1 0 01-.7-.3 1 1 0 01-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1zm-5 1.5l-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 01-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5zM13 10V8h-2v2h2zm0-3V5h-2v2h2zm3 5l1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 017 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1z"/><path d="M5 11h14a1 1 0 010 2H5a1 1 0 010-2z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="M10.4 10l4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10zM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 00-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 01-1.3 1.3l-.6.6h2.6V19z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4L10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2v-8c0-1.1.9-2 2-2h14zM5 15v3h6v-3H5zm14 0h-6v3h6v-3zm0-5h-6v3h6v-3zM5 13h6v-3H5v3z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8zm-2 2H5v5h6V6z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 012 2v7h-8v-2h6V6h-6V4z" opacity=".2"/><path d="M18 20l-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3 .2-2.3 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 9H5v5h6v-5zm8 0h-6v5h6v-5zm-8-7H5v5h6V6z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v12h14V6z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v12h14V6z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v7h-8v7H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 9H5v5h6v-5zm8-7h-6v5h6V6zm-8 0H5v5h6V6z"/><path d="M18 20l-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3 .2-2.3 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2zm.3.5l1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6zm-4.7 1.8l1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 6v12h14V6H5z"/><path d="M14.4 8.6l1 1-2.3 2.4 2.3 2.4-1 1-2.4-2.3-2.4 2.3-1-1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 01-2 0V6h-8v12h8v-1a1 1 0 012 0v2c0 .5-.4 1-.9 1H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h15zM9 13H5v5h4v-5zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 01.1 2H17v2a1 1 0 01-2 .1V13h-2a1 1 0 01-.1-2H15V9c0-.6.4-1 1-1zM9 6H5v5h4V6z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H4a1 1 0 01-1-1v-2a1 1 0 012 0v1h8V6H5v1a1 1 0 11-2 0V5c0-.6.4-1 1-1h15zm0 9h-4v5h4v-5zM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 01.1 2H9v2a1 1 0 01-2 .1V13H5a1 1 0 01-.1-2H7V9c0-.6.4-1 1-1zm11-2h-4v5h4V6z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 110 2H5v6h14V6h-1a1 1 0 010-2h2c.6 0 1 .4 1 1v13a2 2 0 01-2 2H5a2 2 0 01-2-2V5c0-.6.4-1 1-1h2zm5 10H5v4h6v-4zm8 0h-6v4h6v-4zM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 010 2h-2v2a1 1 0 01-2 .1V8H9a1 1 0 010-2h2V4c0-.6.4-1 1-1z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 01.1 2H13v2a1 1 0 01-2 .1V18H9a1 1 0 01-.1-2H11v-2c0-.6.4-1 1-1zm6 7a1 1 0 010-2h1v-6H5v6h1a1 1 0 010 2H4a1 1 0 01-1-1V6c0-1.1.9-2 2-2h14a2 2 0 012 2v13c0 .5-.4 1-.9 1H18zM11 6H5v4h6V6zm8 0h-6v4h6V6z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 9h-4v5h4v-5zm-6 0H9v5h4v-5zm0-7H9v5h4V6zm6 0h-4v5h4V6z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 15.5V18h3v-2.5H5zm14-5h-9V18h9v-7.5zM19 6h-4v2.5h4V6zM8 6H5v2.5h3V6zm5 0h-3v2.5h3V6zm-8 7.5h3v-3H5v3z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 00-2 2v13c0 1.1.9 2 2 2h12a2 2 0 002-2V6a2 2 0 00-2-2H6zm0 12h8v3H6v-3zm11 0c.6 0 1 .4 1 1v1a1 1 0 01-2 0v-1c0-.6.4-1 1-1zM6 11h8v3H6v-3zm11 0c.6 0 1 .4 1 1v1a1 1 0 01-2 0v-1c0-.6.4-1 1-1zM6 6h8v3H6V6zm11 0c.6 0 1 .4 1 1v1a1 1 0 11-2 0V7c0-.6.4-1 1-1z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 012 2v13a2 2 0 01-2 2H6a2 2 0 01-2-2V6c0-1.1.9-2 2-2h12zm0 12h-8v3h8v-3zM7 16a1 1 0 00-1 1v1a1 1 0 002 0v-1c0-.6-.4-1-1-1zm11-5h-8v3h8v-3zM7 11a1 1 0 00-1 1v1a1 1 0 002 0v-1c0-.6-.4-1-1-1zm11-5h-8v3h8V6zM7 6a1 1 0 00-1 1v1a1 1 0 102 0V7c0-.6-.4-1-1-1z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 15v3h6v-3H5zm14 0h-6v3h6v-3zm0-9h-6v3h6V6zM5 9h6V6H5v3z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM8 15.5H5V18h3v-2.5zm11-5h-9V18h9v-7.5zm-2.5 1l1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2zm-8.5-1H5v3h3v-3zM19 6h-4v2.5h4V6zM8 6H5v2.5h3V6zm5 0h-3v2.5h3V6z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 11H5v3h6v-3zm8 0h-6v3h6v-3zm0-5h-6v3h6v-3zM5 13h6v-3H5v3z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 14v4h6v-4H5zm14 0h-6v4h6v-4zm0-6h-6v4h6V8zM5 12h6V8H5v4z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14zM9 16v-4a5 5 0 116 0v4h4a2 2 0 012 2v3H3v-3c0-1.1.9-2 2-2h4zm4 0v-5l.8-.6a3 3 0 10-3.6 0l.8.6v5h2z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 111 0V6H15v1.6a8 8 0 11-6 0zm-2.6 5.3a.5.5 0 00.3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 013.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 00-4.1 3.7z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path id="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 01-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 01-.5.6h-.8a.5.5 0 01-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4zm2.6-7.6l-.6 2a.5.5 0 00.5.6h1.6a.5.5 0 00.5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4z"/></g></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 110-2zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 110-2zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 110-2zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="M12.7 14.3l-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 010-1l3.1-3A12.4 12.4 0 016.7 9H8a10.1 10.1 0 001.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 110-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 01-1 2.4 13.5 13.5 0 01-1.7 2.3l1.9 1.8zm4.3-3l2.7 7.3a.5.5 0 01-.4.7 1 1 0 01-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 01-1 .7.5.5 0 01-.4-.7l2.7-7.4a1 1 0 012 0zm-2.2 4.4h2.4L16 12.5l-1.2 3.2z" fill-rule="evenodd"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 01-.4 1.8l-1 1.4a5.3 5.3 0 01-5.5 1 5 5 0 01-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 01-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 002.2.8 3.4 3.4 0 002.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1zM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 01-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 11-1.4 1.4l-5-5a1 1 0 010-1.4l5-5a1 1 0 011.4 1.4L6.4 8z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 011.4 1.4l-2 2a2 2 0 102.6 2.8l4.8-4.8a1 1 0 000-1.4 1 1 0 111.4-1.3 2.9 2.9 0 010 4L9.6 20a3.9 3.9 0 01-5.5-5.5l2-2zm11.6-.6a1 1 0 01-1.4-1.4l2.1-2a2 2 0 10-2.7-2.8L11 10.3a1 1 0 000 1.4A1 1 0 119.6 13a2.9 2.9 0 010-4L14.4 4a3.9 3.9 0 015.5 5.5l-2 2zM7.6 6.3a.8.8 0 01-1 1.1L3.3 4.2a.7.7 0 111-1l3.2 3.1zM5.1 8.6a.8.8 0 010 1.5H3a.8.8 0 010-1.5H5zm5-3.5a.8.8 0 01-1.5 0V3a.8.8 0 011.5 0V5zm6 11.8a.8.8 0 011-1l3.2 3.2a.8.8 0 01-1 1L16 17zm-2.2 2a.8.8 0 011.5 0V21a.8.8 0 01-1.5 0V19zm5-3.5a.7.7 0 110-1.5H21a.8.8 0 010 1.5H19z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 00-.3-.7A1 1 0 0016 7h-2a1 1 0 00-.7.3 1 1 0 00-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6c0-1.1.9-2 2-2zm0 1a1 1 0 00-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 012 0v3c0 .6-.4 1-1 1H5a1 1 0 01-1-1v-3a1 1 0 012 0v2h12zM11 6.4L8.7 8.7a1 1 0 01-1.4-1.4l4-4a1 1 0 011.4 0l4 4a1 1 0 11-1.4 1.4L13 6.4V16a1 1 0 01-2 0V6.4z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 110-24 12 12 0 010 24zm-8.7-5.3a11 11 0 0017.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7zM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 011.2 1.5l-.1.1-4.1 3-4-3a1 1 0 011-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8l4 2.9a1 1 0 01-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 01-1-1v-4l-2 1.3a1 1 0 01-1.2-.1l-.1-.1a1 1 0 01.1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2zm-4 0v2a2 2 0 01-2-2h2zm8 0v2h-2v-2h2zm8 0a2 2 0 01-2 2v-2h2zm-4 0v2h-2v-2h2zM15 7a1 1 0 010 2v7a1 1 0 01-2 0V9h-1v7a1 1 0 01-2 0v-4a2.5 2.5 0 01-.2-5H15zM5 15v2H3v-2h2zm16 0v2h-2v-2h2zM5 11v2H3v-2h2zm16 0v2h-2v-2h2zM5 7v2H3V7h2zm16 0v2h-2V7h2zM5 3v2H3c0-1.1.9-2 2-2zm8 0v2h-2V3h2zm6 0a2 2 0 012 2h-2V3zM9 3v2H7V3h2zm8 0v2h-2V3h2z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 016.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L10 5z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6zM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 00-.3-.7 1 1 0 00-.7-.3 1 1 0 00-.7.3 1 1 0 00-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3zm.7-3l.3-4a1 1 0 00-.3-.7 1 1 0 00-.7-.3 1 1 0 00-.7.3 1 1 0 00-.3.7l.3 4h1.4z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12zm-1-9a1 1 0 012 0v6a1 1 0 01-2 0V8zm-2 4a1 1 0 010-2h6a1 1 0 010 2H8z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12zm-3-5a1 1 0 010-2h6a1 1 0 010 2H8z" fill-rule="nonzero"/></svg>'}});(function(){var Nt=tinymce.util.Tools.resolve("tinymce.PluginManager"),on=function(gt,pt,bt){return pt===""||gt.length>=pt.length&&gt.substr(bt,bt+pt.length)===pt},vn=function(gt,pt){return gt.indexOf(pt)!==-1},or=function(gt,pt){return on(gt,pt,0)},Ut=tinymce.util.Tools.resolve("tinymce.Env"),Vn=function(){return/(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)[A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*(?::\d+)?(?:\/(?:[-+~=.,%()\/\w]*[-+~=%()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?/g},Sn=new RegExp("^"+Vn().source+"$","i"),An=function(gt){return gt.getParam("autolink_pattern",Sn)},jt=function(gt){return gt.getParam("default_link_target",!1)},ia=function(gt){return gt.getParam("link_default_protocol","http","string")},Fr=function(gt,pt){return gt===pt||gt===" "||gt.charCodeAt(0)===160},un=function(gt){re(gt,-1,"(")},br=function(gt){re(gt,0,"")},mr=function(gt){re(gt,-1,"")},it=function(gt,pt){if(pt<0&&(pt=0),gt.nodeType===3){var bt=gt.data.length;pt>bt&&(pt=bt)}return pt},He=function(gt,pt,bt){pt.nodeType!==1||pt.hasChildNodes()?gt.setStart(pt,it(pt,bt)):gt.setStartBefore(pt)},wn=function(gt,pt,bt){pt.nodeType!==1||pt.hasChildNodes()?gt.setEnd(pt,it(pt,bt)):gt.setEndAfter(pt)},wt=function(gt){return/^([A-Za-z][A-Za-z\d.+-]*:\/\/)|mailto:/.test(gt)},Un=function(gt){return/[?!,.;:]/.test(gt)},re=function(gt,pt,bt){var rn,ut,Rr,me,Y,Dn,Aa,At=An(gt),Oa=jt(gt);if(gt.selection.getNode().tagName!=="A"){var Nn=gt.selection.getRng().cloneRange();if(Nn.startOffset<5){if(Y=Nn.endContainer.previousSibling,!Y){if(!Nn.endContainer.firstChild||!Nn.endContainer.firstChild.nextSibling)return;Y=Nn.endContainer.firstChild.nextSibling}if(Dn=Y.length,He(Nn,Y,Dn),wn(Nn,Y,Dn),Nn.endOffset<5)return;rn=Nn.endOffset,ut=Y}else{if(ut=Nn.endContainer,ut.nodeType!==3&&ut.firstChild){for(;ut.nodeType!==3&&ut.firstChild;)ut=ut.firstChild;ut.nodeType===3&&(He(Nn,ut,0),wn(Nn,ut,ut.nodeValue.length))}Nn.endOffset===1?rn=2:rn=Nn.endOffset-1-pt}var D=rn;do He(Nn,ut,rn>=2?rn-2:0),wn(Nn,ut,rn>=1?rn-1:0),rn-=1,Aa=Nn.toString();while(Aa!==" "&&Aa!==""&&Aa.charCodeAt(0)!==160&&rn-2>=0&&Aa!==bt);Fr(Nn.toString(),bt)?(He(Nn,ut,rn),wn(Nn,ut,D),rn+=1):Nn.startOffset===0?(He(Nn,ut,0),wn(Nn,ut,D)):(He(Nn,ut,rn),wn(Nn,ut,D)),me=Nn.toString(),Un(me.charAt(me.length-1))&&wn(Nn,ut,D-1),me=Nn.toString().trim();var na=me.match(At),_t=ia(gt);if(na){var Kt=na[0];or(Kt,"www.")?Kt=_t+"://"+Kt:vn(Kt,"@")&&!wt(Kt)&&(Kt="mailto:"+Kt),Rr=gt.selection.getBookmark(),gt.selection.setRng(Nn),gt.execCommand("createlink",!1,Kt),Oa!==!1&&gt.dom.setAttrib(gt.selection.getNode(),"target",Oa),gt.selection.moveToBookmark(Rr),gt.nodeChanged()}}},Te=function(gt){var pt;if(gt.on("keydown",function(bt){if(bt.keyCode===13)return mr(gt)}),Ut.browser.isIE()){gt.on("focus",function(){if(!pt){pt=!0;try{gt.execCommand("AutoUrlDetect",!1,!0)}catch(bt){}}});return}gt.on("keypress",function(bt){if(bt.keyCode===41)return un(gt)}),gt.on("keyup",function(bt){if(bt.keyCode===32)return br(gt)})};function qe(){Nt.add("autolink",function(gt){Te(gt)})}qe()})();(function(){var Nt=function(Te){var qe=Te,gt=function(){return qe},pt=function(bt){qe=bt};return{get:gt,set:pt}},on=Object.hasOwnProperty,vn=function(Te,qe){return on.call(Te,qe)},or=tinymce.util.Tools.resolve("tinymce.PluginManager"),Ut=tinymce.util.Tools.resolve("tinymce.Env"),Vn=tinymce.util.Tools.resolve("tinymce.util.Delay"),Sn=function(Te){return Te.fire("ResizeEditor")},An=function(Te){return Te.getParam("min_height",Te.getElement().offsetHeight,"number")},jt=function(Te){return Te.getParam("max_height",0,"number")},ia=function(Te){return Te.getParam("autoresize_overflow_padding",1,"number")},Fr=function(Te){return Te.getParam("autoresize_bottom_margin",50,"number")},un=function(Te){return Te.getParam("autoresize_on_init",!0,"boolean")},br=function(Te){return Te.plugins.fullscreen&&Te.plugins.fullscreen.isFullscreen()},mr=function(Te,qe,gt,pt,bt){Vn.setEditorTimeout(Te,function(){wn(Te,qe),gt--?mr(Te,qe,gt,pt,bt):bt&&bt()},pt)},it=function(Te,qe){var gt=Te.getBody();gt&&(gt.style.overflowY=qe?"":"hidden",qe||(gt.scrollTop=0))},He=function(Te,qe,gt,pt){var bt=parseInt(Te.getStyle(qe,gt,pt),10);return isNaN(bt)?0:bt},wn=function(Te,qe){var gt=Te.dom,pt=Te.getDoc();if(!!pt){if(br(Te)){it(Te,!0);return}var bt=pt.documentElement,rn=Fr(Te),ut=An(Te),Rr=He(gt,bt,"margin-top",!0),me=He(gt,bt,"margin-bottom",!0),Y=bt.offsetHeight+Rr+me+rn;Y<0&&(Y=0);var Dn=Te.getContainer().offsetHeight,Aa=Te.getContentAreaContainer().offsetHeight,At=Dn-Aa;Y+At>An(Te)&&(ut=Y+At);var Oa=jt(Te);if(Oa&&ut>Oa?(ut=Oa,it(Te,!0)):it(Te,!1),ut!==qe.get()){var Nn=ut-qe.get();if(gt.setStyle(Te.getContainer(),"height",ut+"px"),qe.set(ut),Sn(Te),Ut.browser.isSafari()&&Ut.mac){var D=Te.getWin();D.scrollTo(D.pageXOffset,D.pageYOffset)}Te.hasFocus()&&Te.selection.scrollIntoView(Te.selection.getNode()),Ut.webkit&&Nn<0&&wn(Te,qe)}}},wt=function(Te,qe){Te.on("init",function(){var gt=ia(Te),pt=Te.dom;pt.setStyles(Te.getDoc().documentElement,{height:"auto"}),pt.setStyles(Te.getBody(),{paddingLeft:gt,paddingRight:gt,"min-height":0})}),Te.on("NodeChange SetContent keyup FullscreenStateChanged ResizeContent",function(){wn(Te,qe)}),un(Te)&&Te.on("init",function(){mr(Te,qe,20,100,function(){mr(Te,qe,5,1e3)})})},Un=function(Te,qe){Te.addCommand("mceAutoResize",function(){wn(Te,qe)})};function re(){or.add("autoresize",function(Te){if(vn(Te.settings,"resize")||(Te.settings.resize=!1),!Te.inline){var qe=Nt(0);Un(Te,qe),wt(Te,qe)}})}re()})();(function(){var Nt=tinymce.util.Tools.resolve("tinymce.PluginManager");function on(){Nt.add("colorpicker",function(){console.warn("Color picker plugin is now built in to the core editor, please remove it from your editor configuration")})}on()})();(function(){var Nt=tinymce.util.Tools.resolve("tinymce.PluginManager");function on(){Nt.add("contextmenu",function(){console.warn("Context menu plugin is now built in to the core editor, please remove it from your editor configuration")})}on()})();(function(){var Nt=function(ie){var Se=ie,Ne=function(){return Se},De=function(z){Se=z};return{get:Ne,set:De}},on=tinymce.util.Tools.resolve("tinymce.PluginManager"),vn=function(ie){return{isFullscreen:function(){return ie.get()!==null}}},or=function(ie){var Se=typeof ie;return ie===null?"null":Se==="object"&&(Array.prototype.isPrototypeOf(ie)||ie.constructor&&ie.constructor.name==="Array")?"array":Se==="object"&&(String.prototype.isPrototypeOf(ie)||ie.constructor&&ie.constructor.name==="String")?"string":Se},Ut=function(ie){return function(Se){return or(Se)===ie}},Vn=function(ie){return function(Se){return typeof Se===ie}},Sn=Ut("string"),An=Ut("array"),jt=Vn("boolean"),ia=function(ie){return ie==null},Fr=function(ie){return!ia(ie)},un=Vn("function"),br=Vn("number"),mr=function(){},it=function(ie,Se){return function(){for(var Ne=[],De=0;De<arguments.length;De++)Ne[De]=arguments[De];return ie(Se.apply(null,Ne))}},He=function(ie,Se){return function(Ne){return ie(Se(Ne))}},wn=function(ie){return function(){return ie}},wt=function(ie){return ie};function Un(ie){for(var Se=[],Ne=1;Ne<arguments.length;Ne++)Se[Ne-1]=arguments[Ne];return function(){for(var De=[],z=0;z<arguments.length;z++)De[z]=arguments[z];var ce=Se.concat(De);return ie.apply(null,ce)}}var re=wn(!1),Te=wn(!0),qe=function(){return gt},gt=function(){var ie=function(De){return De()},Se=wt,Ne={fold:function(De,z){return De()},isSome:re,isNone:Te,getOr:Se,getOrThunk:ie,getOrDie:function(De){throw new Error(De||"error: getOrDie called on none.")},getOrNull:wn(null),getOrUndefined:wn(void 0),or:Se,orThunk:ie,map:qe,each:mr,bind:qe,exists:re,forall:Te,filter:function(){return qe()},toArray:function(){return[]},toString:wn("none()")};return Ne}(),pt=function(ie){var Se=wn(ie),Ne=function(){return z},De=function(ce){return ce(ie)},z={fold:function(ce,ke){return ke(ie)},isSome:Te,isNone:re,getOr:Se,getOrThunk:Se,getOrDie:Se,getOrNull:Se,getOrUndefined:Se,or:Ne,orThunk:Ne,map:function(ce){return pt(ce(ie))},each:function(ce){ce(ie)},bind:De,exists:De,forall:De,filter:function(ce){return ce(ie)?z:gt},toArray:function(){return[ie]},toString:function(){return"some("+ie+")"}};return z},bt=function(ie){return ie==null?gt:pt(ie)},rn={some:pt,none:qe,from:bt},ut=function(){return ut=Object.assign||function(Se){for(var Ne,De=1,z=arguments.length;De<z;De++){Ne=arguments[De];for(var ce in Ne)Object.prototype.hasOwnProperty.call(Ne,ce)&&(Se[ce]=Ne[ce])}return Se},ut.apply(this,arguments)},Rr=function(ie){var Se=Nt(rn.none()),Ne=function(){return Se.get().each(ie)},De=function(){Ne(),Se.set(rn.none())},z=function(){return Se.get().isSome()},ce=function(){return Se.get()},ke=function(Ue){Ne(),Se.set(rn.some(Ue))};return{clear:De,isSet:z,get:ce,set:ke}},me=function(){return Rr(function(ie){return ie.unbind()})},Y=function(){var ie=Rr(mr),Se=function(Ne){return ie.get().each(Ne)};return ut(ut({},ie),{on:Se})},Dn=Array.prototype.push,Aa=function(ie,Se){for(var Ne=ie.length,De=new Array(Ne),z=0;z<Ne;z++){var ce=ie[z];De[z]=Se(ce,z)}return De},At=function(ie,Se){for(var Ne=0,De=ie.length;Ne<De;Ne++){var z=ie[Ne];Se(z,Ne)}},Oa=function(ie,Se){for(var Ne=[],De=0,z=ie.length;De<z;De++){var ce=ie[De];Se(ce,De)&&Ne.push(ce)}return Ne},Nn=function(ie){for(var Se=[],Ne=0,De=ie.length;Ne<De;++Ne){if(!An(ie[Ne]))throw new Error("Arr.flatten item "+Ne+" was not an array, input: "+ie);Dn.apply(Se,ie[Ne])}return Se},D=function(ie,Se){return Nn(Aa(ie,Se))},na=function(ie,Se){return Se>=0&&Se<ie.length?rn.some(ie[Se]):rn.none()},_t=function(ie){return na(ie,0)},Kt=Object.keys,Ro=function(ie,Se){for(var Ne=Kt(ie),De=0,z=Ne.length;De<z;De++){var ce=Ne[De],ke=ie[ce];Se(ke,ce)}},Go=function(ie){return ie.style!==void 0&&un(ie.style.getPropertyValue)},ir=function(ie,Se){var Ne=Se||document,De=Ne.createElement("div");if(De.innerHTML=ie,!De.hasChildNodes()||De.childNodes.length>1)throw console.error("HTML does not have a single root node",ie),new Error("HTML must have a single root node");return qa(De.childNodes[0])},la=function(ie,Se){var Ne=Se||document,De=Ne.createElement(ie);return qa(De)},te=function(ie,Se){var Ne=Se||document,De=Ne.createTextNode(ie);return qa(De)},qa=function(ie){if(ie==null)throw new Error("Node cannot be null or undefined");return{dom:ie}},yt=function(ie,Se,Ne){return rn.from(ie.dom.elementFromPoint(Se,Ne)).map(qa)},Jt={fromHtml:ir,fromTag:la,fromText:te,fromDom:qa,fromPoint:yt};typeof window!="undefined"||Function("return this;")();var It=9,$t=11,rt=1,an=3,kn=function(ie){return ie.dom.nodeType},Ze=function(ie){return function(Se){return kn(Se)===ie}},Wn=Ze(rt),ma=Ze(an),dn=Ze(It),qr=Ze($t),Ur=function(ie,Se){var Ne=ie.dom;if(Ne.nodeType!==rt)return!1;var De=Ne;if(De.matches!==void 0)return De.matches(Se);if(De.msMatchesSelector!==void 0)return De.msMatchesSelector(Se);if(De.webkitMatchesSelector!==void 0)return De.webkitMatchesSelector(Se);if(De.mozMatchesSelector!==void 0)return De.mozMatchesSelector(Se);throw new Error("Browser lacks native selectors")},On=function(ie){return ie.nodeType!==rt&&ie.nodeType!==It&&ie.nodeType!==$t||ie.childElementCount===0},ra=function(ie,Se){var Ne=Se===void 0?document:Se.dom;return On(Ne)?[]:Aa(Ne.querySelectorAll(ie),Jt.fromDom)},Po=function(ie,Se){return ie.dom===Se.dom},Ko=function(ie){return Jt.fromDom(ie.dom.ownerDocument)},vi=function(ie){return dn(ie)?ie:Ko(ie)},No=function(ie){return rn.from(ie.dom.parentNode).map(Jt.fromDom)},Ga=function(ie,Se){for(var Ne=un(Se)?Se:re,De=ie.dom,z=[];De.parentNode!==null&&De.parentNode!==void 0;){var ce=De.parentNode,ke=Jt.fromDom(ce);if(z.push(ke),Ne(ke)===!0)break;De=ce}return z},Ka=function(ie){var Se=function(Ne){return Oa(Ne,function(De){return!Po(ie,De)})};return No(ie).map(Xo).map(Se).getOr([])},Xo=function(ie){return Aa(ie.dom.childNodes,Jt.fromDom)},Ba=function(ie){return qr(ie)&&Fr(ie.dom.host)},vo=un(Element.prototype.attachShadow)&&un(Node.prototype.getRootNode),Ca=wn(vo),Yo=vo?function(ie){return Jt.fromDom(ie.dom.getRootNode())}:vi,mn=function(ie){var Se=Yo(ie);return Ba(Se)?rn.some(Se):rn.none()},Yr=function(ie){return Jt.fromDom(ie.dom.host)},mo=function(ie){if(Ca()&&Fr(ie.target)){var Se=Jt.fromDom(ie.target);if(Wn(Se)&&ti(Se)&&ie.composed&&ie.composedPath){var Ne=ie.composedPath();if(Ne)return _t(Ne)}}return rn.from(ie.target)},ti=function(ie){return Fr(ie.dom.shadowRoot)},ur=function(ie){var Se=ma(ie)?ie.dom.parentNode:ie.dom;if(Se==null||Se.ownerDocument===null)return!1;var Ne=Se.ownerDocument;return mn(Jt.fromDom(Se)).fold(function(){return Ne.body.contains(Se)},He(ur,Yr))},eo=function(ie){var Se=ie.dom.body;if(Se==null)throw new Error("Body is not available yet");return Jt.fromDom(Se)},Jo=function(ie,Se,Ne){if(Sn(Ne)||jt(Ne)||br(Ne))ie.setAttribute(Se,Ne+"");else throw console.error("Invalid call to Attribute.set. Key ",Se,":: Value ",Ne,":: Element ",ie),new Error("Attribute value was not simple")},Qi=function(ie,Se,Ne){Jo(ie.dom,Se,Ne)},Io=function(ie,Se){var Ne=ie.dom.getAttribute(Se);return Ne===null?void 0:Ne},Zo=function(ie,Se){ie.dom.removeAttribute(Se)},di=function(ie,Se,Ne){if(!Sn(Ne))throw console.error("Invalid call to CSS.set. Property ",Se,":: Value ",Ne,":: Element ",ie),new Error("CSS value must be a string: "+Ne);Go(ie)&&ie.style.setProperty(Se,Ne)},Fi=function(ie,Se){var Ne=ie.dom;Ro(Se,function(De,z){di(Ne,z,De)})},Br=function(ie,Se){var Ne=ie.dom,De=window.getComputedStyle(Ne),z=De.getPropertyValue(Se);return z===""&&!ur(ie)?ua(Ne,Se):z},ua=function(ie,Se){return Go(ie)?ie.style.getPropertyValue(Se):""},cr=function(ie,Se,Ne,De,z,ce,ke){return{target:ie,x:Se,y:Ne,stop:De,prevent:z,kill:ce,raw:ke}},to=function(ie){var Se=Jt.fromDom(mo(ie).getOr(ie.target)),Ne=function(){return ie.stopPropagation()},De=function(){return ie.preventDefault()},z=it(De,Ne);return cr(Se,ie.clientX,ie.clientY,Ne,De,z,ie)},$r=function(ie,Se){return function(Ne){ie(Ne)&&Se(to(Ne))}},go=function(ie,Se,Ne,De,z){var ce=$r(Ne,De);return ie.dom.addEventListener(Se,ce,z),{unbind:Un(Gr,ie,Se,ce,z)}},Sa=function(ie,Se,Ne,De){return go(ie,Se,Ne,De,!1)},Gr=function(ie,Se,Ne,De){ie.dom.removeEventListener(Se,Ne,De)},$o=Te,To=function(ie,Se,Ne){return Sa(ie,Se,$o,Ne)},zo=function(ie,Se){var Ne=function(De,z){return zo(ie+De,Se+z)};return{left:ie,top:Se,translate:Ne}},mi=zo,pa=function(ie){var Se=ie!==void 0?ie.dom:document,Ne=Se.body.scrollLeft||Se.documentElement.scrollLeft,De=Se.body.scrollTop||Se.documentElement.scrollTop;return mi(Ne,De)},Ha=function(ie){var Se=ie===void 0?window:ie;return rn.from(Se.visualViewport)},pn=function(ie,Se,Ne,De){return{x:ie,y:Se,width:Ne,height:De,right:ie+Ne,bottom:Se+De}},Cn=function(ie){var Se=ie===void 0?window:ie,Ne=Se.document,De=pa(Jt.fromDom(Ne));return Ha(Se).fold(function(){var z=Se.document.documentElement,ce=z.clientWidth,ke=z.clientHeight;return pn(De.left,De.top,ce,ke)},function(z){return pn(Math.max(z.pageLeft,De.left),Math.max(z.pageTop,De.top),z.width,z.height)})},Xn=function(ie,Se,Ne){return Ha(Ne).map(function(De){var z=function(ce){return Se(to(ce))};return De.addEventListener(ie,z),{unbind:function(){return De.removeEventListener(ie,z)}}}).getOrThunk(function(){return{unbind:mr}})},Na=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),yu=tinymce.util.Tools.resolve("tinymce.Env"),gi=tinymce.util.Tools.resolve("tinymce.util.Delay"),Pi=function(ie,Se){ie.fire("FullscreenStateChanged",{state:Se})},gr=function(ie){return ie.getParam("fullscreen_native",!1,"boolean")},hi=function(ie){var Se=Jt.fromDom(ie.getElement());return mn(Se).map(Yr).getOrThunk(function(){return eo(Ko(Se))})},Xa=function(ie){return ie.fullscreenElement!==void 0?ie.fullscreenElement:ie.msFullscreenElement!==void 0?ie.msFullscreenElement:ie.webkitFullscreenElement!==void 0?ie.webkitFullscreenElement:null},ee=function(){return document.fullscreenElement!==void 0?"fullscreenchange":document.msFullscreenElement!==void 0?"MSFullscreenChange":document.webkitFullscreenElement!==void 0?"webkitfullscreenchange":"fullscreenchange"},we=function(ie){var Se=ie.dom;Se.requestFullscreen?Se.requestFullscreen():Se.msRequestFullscreen?Se.msRequestFullscreen():Se.webkitRequestFullScreen&&Se.webkitRequestFullScreen()},Oe=function(ie){var Se=ie.dom;Se.exitFullscreen?Se.exitFullscreen():Se.msExitFullscreen?Se.msExitFullscreen():Se.webkitCancelFullScreen&&Se.webkitCancelFullScreen()},Fe=function(ie){return ie.dom===Xa(Ko(ie).dom)},Dt=function(ie,Se,Ne){return Oa(Ga(ie,Ne),Se)},G=function(ie,Se){return Oa(Ka(ie),Se)},le=function(ie){return ra(ie)},Be=function(ie,Se,Ne){return Dt(ie,function(De){return Ur(De,Se)},Ne)},Le=function(ie,Se){return G(ie,function(Ne){return Ur(Ne,Se)})},at="data-ephox-mobile-fullscreen-style",Rt="display:none!important;",Zt="position:absolute!important;",Rn="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",Yn="background-color:rgb(255,255,255)!important;",sr=yu.os.isAndroid(),Wr=function(ie){var Se=Br(ie,"background-color");return Se!==void 0&&Se!==""?"background-color:"+Se+"!important":Yn},Da=function(ie,Se,Ne){var De=function(Mt){return Le(Mt,"*:not(.tox-silver-sink)")},z=function(Mt){return function(Xt){var $=Io(Xt,"style"),ue=$===void 0?"no-styles":$.trim();ue!==Mt&&(Qi(Xt,at,ue),Fi(Xt,ie.parseStyle(Mt)))}},ce=Be(Se,"*"),ke=D(ce,De),Ue=Wr(Ne);At(ke,z(Rt)),At(ce,z(Zt+Rn+Ue));var Gt=sr===!0?"":Zt;z(Gt+Rn+Ue)(Se)},et=function(ie){var Se=le("["+at+"]");At(Se,function(Ne){var De=Io(Ne,at);De!=="no-styles"?Fi(Ne,ie.parseStyle(De)):Zo(Ne,"style"),Zo(Ne,at)})},Jr=Na.DOM,Jn=function(){return Cn(window)},Ar=function(ie){return window.scrollTo(ie.x,ie.y)},io=Ha().fold(function(){return{bind:mr,unbind:mr}},function(ie){var Se=Y(),Ne=me(),De=me(),z=function(){document.body.scrollTop=0,document.documentElement.scrollTop=0},ce=function(){window.requestAnimationFrame(function(){Se.on(function(Mt){return Fi(Mt,{top:ie.offsetTop+"px",left:ie.offsetLeft+"px",height:ie.height+"px",width:ie.width+"px"})})})},ke=gi.throttle(function(){z(),ce()},50),Ue=function(Mt){Se.set(Mt),ke(),Ne.set(Xn("resize",ke)),De.set(Xn("scroll",ke))},Gt=function(){Se.on(function(){Ne.clear(),De.clear()}),Se.clear()};return{bind:Ue,unbind:Gt}}),wr=function(ie,Se){var Ne=document.body,De=document.documentElement,z=ie.getContainer(),ce=Jt.fromDom(z),ke=hi(ie),Ue=Se.get(),Gt=Jt.fromDom(ie.getBody()),Mt=yu.deviceType.isTouch(),Xt=z.style,$=ie.iframeElement,ue=$.style,Ce=function(en){en(Ne,"tox-fullscreen"),en(De,"tox-fullscreen"),en(z,"tox-fullscreen"),mn(ce).map(function(fn){return Yr(fn).dom}).each(function(fn){en(fn,"tox-fullscreen"),en(fn,"tox-shadowhost")})},ze=function(){Mt&&et(ie.dom),Ce(Jr.removeClass),io.unbind(),rn.from(Se.get()).each(function(en){return en.fullscreenChangeHandler.unbind()})};if(Ue)Ue.fullscreenChangeHandler.unbind(),gr(ie)&&Fe(ke)&&Oe(Ko(ke)),ue.width=Ue.iframeWidth,ue.height=Ue.iframeHeight,Xt.width=Ue.containerWidth,Xt.height=Ue.containerHeight,Xt.top=Ue.containerTop,Xt.left=Ue.containerLeft,Ar(Ue.scrollPos),Se.set(null),Pi(ie,!1),ze(),ie.off("remove",ze);else{var Re=To(Ko(ke),ee(),function(en){gr(ie)&&!Fe(ke)&&Se.get()!==null&&wr(ie,Se)}),xt={scrollPos:Jn(),containerWidth:Xt.width,containerHeight:Xt.height,containerTop:Xt.top,containerLeft:Xt.left,iframeWidth:ue.width,iframeHeight:ue.height,fullscreenChangeHandler:Re};Mt&&Da(ie.dom,ce,Gt),ue.width=ue.height="100%",Xt.width=Xt.height="",Ce(Jr.addClass),io.bind(ce),ie.on("remove",ze),Se.set(xt),gr(ie)&&we(ke),Pi(ie,!0)}},sc=function(ie,Se){ie.addCommand("mceFullScreen",function(){wr(ie,Se)})},su=function(ie,Se){return function(Ne){Ne.setActive(Se.get()!==null);var De=function(z){return Ne.setActive(z.state)};return ie.on("FullscreenStateChanged",De),function(){return ie.off("FullscreenStateChanged",De)}}},lu=function(ie,Se){var Ne=function(){return ie.execCommand("mceFullScreen")};ie.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:Ne,onSetup:su(ie,Se)}),ie.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:Ne,onSetup:su(ie,Se)})};function ni(){on.add("fullscreen",function(ie){var Se=Nt(null);return ie.inline||(sc(ie,Se),lu(ie,Se),ie.addShortcut("Meta+Shift+F","","mceFullScreen")),vn(Se)})}ni()})();(function(){var Nt=tinymce.util.Tools.resolve("tinymce.PluginManager"),on=function(Ut){Ut.addCommand("InsertHorizontalRule",function(){Ut.execCommand("mceInsertContent",!1,"<hr />")})},vn=function(Ut){var Vn=function(){return Ut.execCommand("InsertHorizontalRule")};Ut.ui.registry.addButton("hr",{icon:"horizontal-rule",tooltip:"Horizontal line",onAction:Vn}),Ut.ui.registry.addMenuItem("hr",{icon:"horizontal-rule",text:"Horizontal line",onAction:Vn})};function or(){Nt.add("hr",function(Ut){on(Ut),vn(Ut)})}or()})();(function(){var Nt=tinymce.util.Tools.resolve("tinymce.PluginManager"),on=function(){return on=Object.assign||function(W){for(var se,Ie=1,Z=arguments.length;Ie<Z;Ie++){se=arguments[Ie];for(var Zn in se)Object.prototype.hasOwnProperty.call(se,Zn)&&(W[Zn]=se[Zn])}return W},on.apply(this,arguments)},vn=function(B){var W=typeof B;return B===null?"null":W==="object"&&(Array.prototype.isPrototypeOf(B)||B.constructor&&B.constructor.name==="Array")?"array":W==="object"&&(String.prototype.isPrototypeOf(B)||B.constructor&&B.constructor.name==="String")?"string":W},or=function(B){return function(W){return vn(W)===B}},Ut=function(B){return function(W){return typeof W===B}},Vn=function(B){return function(W){return B===W}},Sn=or("string"),An=or("object"),jt=or("array"),ia=Vn(null),Fr=Ut("boolean"),un=function(B){return B==null},br=function(B){return!un(B)},mr=Ut("function"),it=Ut("number"),He=function(){},wn=function(B){return function(){return B}},wt=function(B){return B},Un=wn(!1),re=wn(!0),Te=function(){return qe},qe=function(){var B=function(Ie){return Ie()},W=wt,se={fold:function(Ie,Z){return Ie()},isSome:Un,isNone:re,getOr:W,getOrThunk:B,getOrDie:function(Ie){throw new Error(Ie||"error: getOrDie called on none.")},getOrNull:wn(null),getOrUndefined:wn(void 0),or:W,orThunk:B,map:Te,each:He,bind:Te,exists:Un,forall:re,filter:function(){return Te()},toArray:function(){return[]},toString:wn("none()")};return se}(),gt=function(B){var W=wn(B),se=function(){return Z},Ie=function(Zn){return Zn(B)},Z={fold:function(Zn,ca){return ca(B)},isSome:re,isNone:Un,getOr:W,getOrThunk:W,getOrDie:W,getOrNull:W,getOrUndefined:W,or:se,orThunk:se,map:function(Zn){return gt(Zn(B))},each:function(Zn){Zn(B)},bind:Ie,exists:Ie,forall:Ie,filter:function(Zn){return Zn(B)?Z:qe},toArray:function(){return[B]},toString:function(){return"some("+B+")"}};return Z},pt=function(B){return B==null?qe:gt(B)},bt={some:gt,none:Te,from:pt},rn=Object.keys,ut=Object.hasOwnProperty,Rr=function(B,W){for(var se=rn(B),Ie=0,Z=se.length;Ie<Z;Ie++){var Zn=se[Ie],ca=B[Zn];W(ca,Zn)}},me=function(B){return function(W,se){B[se]=W}},Y=function(B,W,se,Ie){var Z={};return Rr(B,function(Zn,ca){(W(Zn,ca)?se:Ie)(Zn,ca)}),Z},Dn=function(B,W){var se={};return Y(B,W,me(se),He),se},Aa=function(B,W){return ut.call(B,W)},At=function(B,W){return Aa(B,W)&&B[W]!==void 0&&B[W]!==null},Oa=Array.prototype.push,Nn=function(B){for(var W=[],se=0,Ie=B.length;se<Ie;++se){if(!jt(B[se]))throw new Error("Arr.flatten item "+se+" was not an array, input: "+B);Oa.apply(W,B[se])}return W},D=function(B,W){return W>=0&&W<B.length?bt.some(B[W]):bt.none()},na=function(B){return D(B,0)},_t=function(B,W){for(var se=0;se<B.length;se++){var Ie=W(B[se],se);if(Ie.isSome())return Ie}return bt.none()};typeof window!="undefined"||Function("return this;")();var Kt=function(B,W,se){if(Sn(se)||Fr(se)||it(se))B.setAttribute(W,se+"");else throw console.error("Invalid call to Attribute.set. Key ",W,":: Value ",se,":: Element ",B),new Error("Attribute value was not simple")},Ro=function(B,W,se){Kt(B.dom,W,se)},Go=function(B,W){B.dom.removeAttribute(W)},ir=function(B,W){var se=W||document,Ie=se.createElement("div");if(Ie.innerHTML=B,!Ie.hasChildNodes()||Ie.childNodes.length>1)throw console.error("HTML does not have a single root node",B),new Error("HTML must have a single root node");return qa(Ie.childNodes[0])},la=function(B,W){var se=W||document,Ie=se.createElement(B);return qa(Ie)},te=function(B,W){var se=W||document,Ie=se.createTextNode(B);return qa(Ie)},qa=function(B){if(B==null)throw new Error("Node cannot be null or undefined");return{dom:B}},yt=function(B,W,se){return bt.from(B.dom.elementFromPoint(W,se)).map(qa)},Jt={fromHtml:ir,fromTag:la,fromText:te,fromDom:qa,fromPoint:yt},It=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),$t=tinymce.util.Tools.resolve("tinymce.util.Promise"),rt=tinymce.util.Tools.resolve("tinymce.util.XHR"),an=function(B){return B.getParam("image_dimensions",!0,"boolean")},kn=function(B){return B.getParam("image_advtab",!1,"boolean")},Ze=function(B){return B.getParam("image_uploadtab",!0,"boolean")},Wn=function(B){return B.getParam("image_prepend_url","","string")},ma=function(B){return B.getParam("image_class_list")},dn=function(B){return B.getParam("image_description",!0,"boolean")},qr=function(B){return B.getParam("image_title",!1,"boolean")},Ur=function(B){return B.getParam("image_caption",!1,"boolean")},On=function(B){return B.getParam("image_list",!1)},ra=function(B){return br(B.getParam("images_upload_url"))},Po=function(B){return br(B.getParam("images_upload_handler"))},Ko=function(B){return B.getParam("a11y_advanced_options",!1,"boolean")},vi=function(B){return B.getParam("automatic_uploads",!0,"boolean")},No=function(B,W){return Math.max(parseInt(B,10),parseInt(W,10))},Ga=function(B){return new $t(function(W){var se=document.createElement("img"),Ie=function(Zn){se.onload=se.onerror=null,se.parentNode&&se.parentNode.removeChild(se),W(Zn)};se.onload=function(){var Zn=No(se.width,se.clientWidth),ca=No(se.height,se.clientHeight),$a={width:Zn,height:ca};Ie($t.resolve($a))},se.onerror=function(){Ie($t.reject("Failed to get image dimensions for: "+B))};var Z=se.style;Z.visibility="hidden",Z.position="fixed",Z.bottom=Z.left="0px",Z.width=Z.height="auto",document.body.appendChild(se),se.src=B})},Ka=function(B){return B&&(B=B.replace(/px$/,"")),B},Xo=function(B){return B.length>0&&/^[0-9]+$/.test(B)&&(B+="px"),B},Ba=function(B){if(B.margin){var W=String(B.margin).split(" ");switch(W.length){case 1:B["margin-top"]=B["margin-top"]||W[0],B["margin-right"]=B["margin-right"]||W[0],B["margin-bottom"]=B["margin-bottom"]||W[0],B["margin-left"]=B["margin-left"]||W[0];break;case 2:B["margin-top"]=B["margin-top"]||W[0],B["margin-right"]=B["margin-right"]||W[1],B["margin-bottom"]=B["margin-bottom"]||W[0],B["margin-left"]=B["margin-left"]||W[1];break;case 3:B["margin-top"]=B["margin-top"]||W[0],B["margin-right"]=B["margin-right"]||W[1],B["margin-bottom"]=B["margin-bottom"]||W[2],B["margin-left"]=B["margin-left"]||W[1];break;case 4:B["margin-top"]=B["margin-top"]||W[0],B["margin-right"]=B["margin-right"]||W[1],B["margin-bottom"]=B["margin-bottom"]||W[2],B["margin-left"]=B["margin-left"]||W[3]}delete B.margin}return B},vo=function(B,W){var se=On(B);Sn(se)?rt.send({url:se,success:function(Ie){W(JSON.parse(Ie))}}):mr(se)?se(W):W(se)},Ca=function(B,W,se){var Ie=function(){se.onload=se.onerror=null,B.selection&&(B.selection.select(se),B.nodeChanged())};se.onload=function(){!W.width&&!W.height&&an(B)&&B.dom.setAttribs(se,{width:String(se.clientWidth),height:String(se.clientHeight)}),Ie()},se.onerror=Ie},Yo=function(B){return new $t(function(W,se){var Ie=new FileReader;Ie.onload=function(){W(Ie.result)},Ie.onerror=function(){se(Ie.error.message)},Ie.readAsDataURL(B)})},mn=function(B){return B.nodeName==="IMG"&&(B.hasAttribute("data-mce-object")||B.hasAttribute("data-mce-placeholder"))},Yr=It.DOM,mo=function(B){return B.style.marginLeft&&B.style.marginRight&&B.style.marginLeft===B.style.marginRight?Ka(B.style.marginLeft):""},ti=function(B){return B.style.marginTop&&B.style.marginBottom&&B.style.marginTop===B.style.marginBottom?Ka(B.style.marginTop):""},ur=function(B){return B.style.borderWidth?Ka(B.style.borderWidth):""},eo=function(B,W){return B.hasAttribute(W)?B.getAttribute(W):""},Jo=function(B,W){return B.style[W]?B.style[W]:""},Qi=function(B){return B.parentNode!==null&&B.parentNode.nodeName==="FIGURE"},Io=function(B,W,se){se===""?B.removeAttribute(W):B.setAttribute(W,se)},Zo=function(B){var W=Yr.create("figure",{class:"image"});Yr.insertAfter(W,B),W.appendChild(B),W.appendChild(Yr.create("figcaption",{contentEditable:"true"},"Caption")),W.contentEditable="false"},di=function(B){var W=B.parentNode;Yr.insertAfter(B,W),Yr.remove(W)},Fi=function(B){Qi(B)?di(B):Zo(B)},Br=function(B,W){var se=B.getAttribute("style"),Ie=W(se!==null?se:"");Ie.length>0?(B.setAttribute("style",Ie),B.setAttribute("data-mce-style",Ie)):B.removeAttribute("style")},ua=function(B,W){return function(se,Ie,Z){se.style[Ie]?(se.style[Ie]=Xo(Z),Br(se,W)):Io(se,Ie,Z)}},cr=function(B,W){return B.style[W]?Ka(B.style[W]):eo(B,W)},to=function(B,W){var se=Xo(W);B.style.marginLeft=se,B.style.marginRight=se},$r=function(B,W){var se=Xo(W);B.style.marginTop=se,B.style.marginBottom=se},go=function(B,W){var se=Xo(W);B.style.borderWidth=se},Sa=function(B,W){B.style.borderStyle=W},Gr=function(B){return Jo(B,"borderStyle")},$o=function(B){return B.nodeName==="FIGURE"},To=function(B){return B.nodeName==="IMG"},zo=function(B){return Yr.getAttrib(B,"alt").length===0&&Yr.getAttrib(B,"role")==="presentation"},mi=function(B){return zo(B)?"":eo(B,"alt")},pa=function(){return{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}},Ha=function(B,W){var se=document.createElement("img");return Io(se,"style",W.style),(mo(se)||W.hspace!=="")&&to(se,W.hspace),(ti(se)||W.vspace!=="")&&$r(se,W.vspace),(ur(se)||W.border!=="")&&go(se,W.border),(Gr(se)||W.borderStyle!=="")&&Sa(se,W.borderStyle),B(se.getAttribute("style"))},pn=function(B,W){var se=document.createElement("img");if(Pi(B,on(on({},W),{caption:!1}),se),Na(se,W.alt,W.isDecorative),W.caption){var Ie=Yr.create("figure",{class:"image"});return Ie.appendChild(se),Ie.appendChild(Yr.create("figcaption",{contentEditable:"true"},"Caption")),Ie.contentEditable="false",Ie}else return se},Cn=function(B,W){return{src:eo(W,"src"),alt:mi(W),title:eo(W,"title"),width:cr(W,"width"),height:cr(W,"height"),class:eo(W,"class"),style:B(eo(W,"style")),caption:Qi(W),hspace:mo(W),vspace:ti(W),border:ur(W),borderStyle:Jo(W,"borderStyle"),isDecorative:zo(W)}},Xn=function(B,W,se,Ie,Z){se[Ie]!==W[Ie]&&Z(B,Ie,se[Ie])},Na=function(B,W,se){if(se){Yr.setAttrib(B,"role","presentation");var Ie=Jt.fromDom(B);Ro(Ie,"alt","")}else{if(ia(W)){var Ie=Jt.fromDom(B);Go(Ie,"alt")}else{var Ie=Jt.fromDom(B);Ro(Ie,"alt",W)}Yr.getAttrib(B,"role")==="presentation"&&Yr.setAttrib(B,"role","")}},yu=function(B,W,se){(se.alt!==W.alt||se.isDecorative!==W.isDecorative)&&Na(B,se.alt,se.isDecorative)},gi=function(B,W){return function(se,Ie,Z){B(se,Z),Br(se,W)}},Pi=function(B,W,se){var Ie=Cn(B,se);Xn(se,Ie,W,"caption",function(Z,Zn,ca){return Fi(Z)}),Xn(se,Ie,W,"src",Io),Xn(se,Ie,W,"title",Io),Xn(se,Ie,W,"width",ua("width",B)),Xn(se,Ie,W,"height",ua("height",B)),Xn(se,Ie,W,"class",Io),Xn(se,Ie,W,"style",gi(function(Z,Zn){return Io(Z,"style",Zn)},B)),Xn(se,Ie,W,"hspace",gi(to,B)),Xn(se,Ie,W,"vspace",gi($r,B)),Xn(se,Ie,W,"border",gi(go,B)),Xn(se,Ie,W,"borderStyle",gi(Sa,B)),yu(se,Ie,W)},gr=function(B,W){var se=B.dom.styles.parse(W),Ie=Ba(se),Z=B.dom.styles.parse(B.dom.styles.serialize(Ie));return B.dom.styles.serialize(Z)},hi=function(B){var W=B.selection.getNode(),se=B.dom.getParent(W,"figure.image");return se?B.dom.select("img",se)[0]:W&&(W.nodeName!=="IMG"||mn(W))?null:W},Xa=function(B,W){var se=B.dom,Ie=Dn(B.schema.getTextBlockElements(),function(Zn,ca){return!B.schema.isValidChild(ca,"figure")}),Z=se.getParent(W.parentNode,function(Zn){return At(Ie,Zn.nodeName)},B.getBody());return Z?se.split(Z,W):W},ee=function(B){var W=hi(B);return W?Cn(function(se){return gr(B,se)},W):pa()},we=function(B,W){var se=pn(function(Zn){return gr(B,Zn)},W);B.dom.setAttrib(se,"data-mce-id","__mcenew"),B.focus(),B.selection.setContent(se.outerHTML);var Ie=B.dom.select('*[data-mce-id="__mcenew"]')[0];if(B.dom.setAttrib(Ie,"data-mce-id",null),$o(Ie)){var Z=Xa(B,Ie);B.selection.select(Z)}else B.selection.select(Ie)},Oe=function(B,W){B.dom.setAttrib(W,"src",W.getAttribute("src"))},Fe=function(B,W){if(W){var se=B.dom.is(W.parentNode,"figure.image")?W.parentNode:W;B.dom.remove(se),B.focus(),B.nodeChanged(),B.dom.isEmpty(B.getBody())&&(B.setContent(""),B.selection.setCursorLocation())}},Dt=function(B,W){var se=hi(B);if(Pi(function(Z){return gr(B,Z)},W,se),Oe(B,se),$o(se.parentNode)){var Ie=se.parentNode;Xa(B,Ie),B.selection.select(se.parentNode)}else B.selection.select(se),Ca(B,W,se)},G=function(B,W){var se=hi(B);if(se){var Ie=Cn(function(Zn){return gr(B,Zn)},se),Z=on(on({},Ie),W);Z.src?Dt(B,Z):Fe(B,se)}else W.src&&we(B,on(on({},pa()),W))},le=function(B,W){var se=An(B)&&An(W);return se?Le(B,W):W},Be=function(B){return function(){for(var W=[],se=0;se<arguments.length;se++)W[se]=arguments[se];if(W.length===0)throw new Error("Can't merge zero objects");for(var Ie={},Z=0;Z<W.length;Z++){var Zn=W[Z];for(var ca in Zn)Aa(Zn,ca)&&(Ie[ca]=B(Ie[ca],Zn[ca]))}return Ie}},Le=Be(le),at=function(B){return B.length>0},Rt=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),Zt=tinymce.util.Tools.resolve("tinymce.util.Tools"),Rn=function(B){return Sn(B.value)?B.value:""},Yn=function(B){return Sn(B.text)?B.text:Sn(B.title)?B.title:""},sr=function(B,W){var se=[];return Zt.each(B,function(Ie){var Z=Yn(Ie);if(Ie.menu!==void 0){var Zn=sr(Ie.menu,W);se.push({text:Z,items:Zn})}else{var ca=W(Ie);se.push({text:Z,value:ca})}}),se},Wr=function(B){return B===void 0&&(B=Rn),function(W){return W?bt.from(W).map(function(se){return sr(se,B)}):bt.none()}},Da=function(B){return Wr(Rn)(B)},et=function(B){return Aa(B,"items")},Jr=function(B,W){return _t(B,function(se){return et(se)?Jr(se.items,W):se.value===W?bt.some(se):bt.none()})},Jn=function(B,W){return B.bind(function(se){return Jr(se,W)})},Ar={sanitizer:Wr,sanitize:Da,findEntry:Jn},io=function(B){return{title:"Advanced",name:"advanced",items:[{type:"input",label:"Style",name:"style"},{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]}},wr={makeTab:io},sc=function(B){var W=Ar.sanitizer(function(Rc){return B.convertURL(Rc.value||Rc.url,"src")}),se=new $t(function(Rc){vo(B,function(va){Rc(W(va).map(function(Fv){return Nn([[{text:"None",value:""}],Fv])}))})}),Ie=Ar.sanitize(ma(B)),Z=kn(B),Zn=Ze(B),ca=ra(B),$a=Po(B),Oc=ee(B),xe=dn(B),bo=qr(B),Dc=an(B),el=Ur(B),Cu=Ko(B),uo=vi(B),aa=bt.some(Wn(B)).filter(function(Rc){return Sn(Rc)&&Rc.length>0});return se.then(function(Rc){return{image:Oc,imageList:Rc,classList:Ie,hasAdvTab:Z,hasUploadTab:Zn,hasUploadUrl:ca,hasUploadHandler:$a,hasDescription:xe,hasImageTitle:bo,hasDimensions:Dc,hasImageCaption:el,prependURL:aa,hasAccessibilityOptions:Cu,automaticUploads:uo}})},su=function(B){var W={name:"src",type:"urlinput",filetype:"image",label:"Source"},se=B.imageList.map(function(bo){return{name:"images",type:"listbox",label:"Image list",items:bo}}),Ie={name:"alt",type:"input",label:"Alternative description",disabled:B.hasAccessibilityOptions&&B.image.isDecorative},Z={name:"title",type:"input",label:"Image title"},Zn={name:"dimensions",type:"sizeinput"},ca={type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]},$a=B.classList.map(function(bo){return{name:"classes",type:"listbox",label:"Class",items:bo}}),Oc={type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]},xe=function(bo){return bo?{type:"grid",columns:2}:{type:"panel"}};return Nn([[W],se.toArray(),B.hasAccessibilityOptions&&B.hasDescription?[ca]:[],B.hasDescription?[Ie]:[],B.hasImageTitle?[Z]:[],B.hasDimensions?[Zn]:[],[on(on({},xe(B.classList.isSome()&&B.hasImageCaption)),{items:Nn([$a.toArray(),B.hasImageCaption?[Oc]:[]])})]])},lu=function(B){return{title:"General",name:"general",items:su(B)}},ni={makeTab:lu,makeItems:su},ie=function(B){var W=[{type:"dropzone",name:"fileinput"}];return{title:"Upload",name:"upload",items:W}},Se={makeTab:ie},Ne=function(B){return{prevImage:Ar.findEntry(B.imageList,B.image.src),prevAlt:B.image.alt,open:!0}},De=function(B){return{src:{value:B.src,meta:{}},images:B.src,alt:B.alt,title:B.title,dimensions:{width:B.width,height:B.height},classes:B.class,caption:B.caption,style:B.style,vspace:B.vspace,border:B.border,hspace:B.hspace,borderstyle:B.borderStyle,fileinput:[],isDecorative:B.isDecorative}},z=function(B,W){return{src:B.src.value,alt:B.alt.length===0&&W?null:B.alt,title:B.title,width:B.dimensions.width,height:B.dimensions.height,class:B.classes,style:B.style,caption:B.caption,hspace:B.hspace,vspace:B.vspace,border:B.border,borderStyle:B.borderstyle,isDecorative:B.isDecorative}},ce=function(B,W){return/^(?:[a-zA-Z]+:)?\/\//.test(W)?bt.none():B.prependURL.bind(function(se){return W.substring(0,se.length)!==se?bt.some(se+W):bt.none()})},ke=function(B,W){var se=W.getData();ce(B,se.src.value).each(function(Ie){W.setData({src:{value:Ie,meta:se.src.meta}})})},Ue=function(B,W,se){B.hasDescription&&Sn(se.alt)&&(W.alt=se.alt),B.hasAccessibilityOptions&&(W.isDecorative=se.isDecorative||W.isDecorative||!1),B.hasImageTitle&&Sn(se.title)&&(W.title=se.title),B.hasDimensions&&(Sn(se.width)&&(W.dimensions.width=se.width),Sn(se.height)&&(W.dimensions.height=se.height)),Sn(se.class)&&Ar.findEntry(B.classList,se.class).each(function(Ie){W.classes=Ie.value}),B.hasImageCaption&&Fr(se.caption)&&(W.caption=se.caption),B.hasAdvTab&&(Sn(se.style)&&(W.style=se.style),Sn(se.vspace)&&(W.vspace=se.vspace),Sn(se.border)&&(W.border=se.border),Sn(se.hspace)&&(W.hspace=se.hspace),Sn(se.borderstyle)&&(W.borderstyle=se.borderstyle))},Gt=function(B,W){var se=W.getData(),Ie=se.src.meta;if(Ie!==void 0){var Z=Le({},se);Ue(B,Z,Ie),W.setData(Z)}},Mt=function(B,W,se,Ie){var Z=Ie.getData(),Zn=Z.src.value,ca=Z.src.meta||{};!ca.width&&!ca.height&&W.hasDimensions&&(at(Zn)?B.imageSize(Zn).then(function($a){se.open&&Ie.setData({dimensions:$a})}).catch(function($a){return console.error($a)}):Ie.setData({dimensions:{width:"",height:""}}))},Xt=function(B,W,se){var Ie=se.getData(),Z=Ar.findEntry(B.imageList,Ie.src.value);W.prevImage=Z,se.setData({images:Z.map(function(Zn){return Zn.value}).getOr("")})},$=function(B,W,se,Ie){ke(W,Ie),Gt(W,Ie),Mt(B,W,se,Ie),Xt(W,se,Ie)},ue=function(B,W,se,Ie){var Z=Ie.getData(),Zn=Ar.findEntry(W.imageList,Z.images);Zn.each(function(ca){var $a=Z.alt===""||se.prevImage.map(function(Oc){return Oc.text===Z.alt}).getOr(!1);$a?ca.value===""?Ie.setData({src:ca,alt:se.prevAlt}):Ie.setData({src:ca,alt:ca.text}):Ie.setData({src:ca})}),se.prevImage=Zn,$(B,W,se,Ie)},Ce=function(B){var W=B["margin-top"]&&B["margin-bottom"]&&B["margin-top"]===B["margin-bottom"];return W?Ka(String(B["margin-top"])):""},ze=function(B){var W=B["margin-right"]&&B["margin-left"]&&B["margin-right"]===B["margin-left"];return W?Ka(String(B["margin-right"])):""},Re=function(B){return B["border-width"]?Ka(String(B["border-width"])):""},xt=function(B){return B["border-style"]?String(B["border-style"]):""},en=function(B,W,se){return W(B(W(se)))},fn=function(B,W,se){var Ie=Ba(B(se.style)),Z=Le({},se);return Z.vspace=Ce(Ie),Z.hspace=ze(Ie),Z.border=Re(Ie),Z.borderstyle=xt(Ie),Z.style=en(B,W,Ie),Z},tr=function(B,W){var se=W.getData(),Ie=fn(B.parseStyle,B.serializeStyle,se);W.setData(Ie)},ga=function(B,W,se){var Ie=Le(De(W.image),se.getData()),Z=Ha(B.normalizeCss,z(Ie,!1));se.setData({style:Z})},fa=function(B,W,se,Ie){var Z=Ie.getData();Ie.block("Uploading image"),na(Z.fileinput).fold(function(){Ie.unblock()},function(Zn){var ca=URL.createObjectURL(Zn),$a=function(){Ie.unblock(),URL.revokeObjectURL(ca)},Oc=function(xe){Ie.setData({src:{value:xe,meta:{}}}),Ie.showTab("general"),$(B,W,se,Ie)};Yo(Zn).then(function(xe){var bo=B.createBlobCache(Zn,ca,xe);W.automaticUploads?B.uploadImage(bo).then(function(Dc){Oc(Dc.url),$a()}).catch(function(Dc){$a(),B.alertErr(Dc)}):(B.addToBlobCache(bo),Oc(bo.blobUri()),Ie.unblock())})})},Va=function(B,W,se){return function(Ie,Z){Z.name==="src"?$(B,W,se,Ie):Z.name==="images"?ue(B,W,se,Ie):Z.name==="alt"?se.prevAlt=Ie.getData().alt:Z.name==="style"?tr(B,Ie):Z.name==="vspace"||Z.name==="hspace"||Z.name==="border"||Z.name==="borderstyle"?ga(B,W,Ie):Z.name==="fileinput"?fa(B,W,se,Ie):Z.name==="isDecorative"&&(Ie.getData().isDecorative?Ie.disable("alt"):Ie.enable("alt"))}},Pr=function(B){return function(){B.open=!1}},ba=function(B){if(B.hasAdvTab||B.hasUploadUrl||B.hasUploadHandler){var W={type:"tabpanel",tabs:Nn([[ni.makeTab(B)],B.hasAdvTab?[wr.makeTab(B)]:[],B.hasUploadTab&&(B.hasUploadUrl||B.hasUploadHandler)?[Se.makeTab(B)]:[]])};return W}else{var se={type:"panel",items:ni.makeItems(B)};return se}},Ia=function(B){return function(W){var se=Ne(W);return{title:"Insert/Edit Image",size:"normal",body:ba(W),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:De(W.image),onSubmit:B.onSubmit(W),onChange:Va(B,W,se),onClose:Pr(se)}}},ju=function(B){return function(W){return function(se){var Ie=Le(De(W.image),se.getData());B.execCommand("mceUpdateImage",!1,z(Ie,W.hasAccessibilityOptions)),B.editorUpload.uploadImagesAuto(),se.close()}}},Ln=function(B){return function(W){return Ga(B.documentBaseURI.toAbsolute(W)).then(function(se){return{width:String(se.width),height:String(se.height)}})}},_f=function(B){return function(W,se,Ie){return B.editorUpload.blobCache.create({blob:W,blobUri:se,name:W.name?W.name.replace(/\.[^\.]+$/,""):null,filename:W.name,base64:Ie.split(",")[1]})}},hr=function(B){return function(W){B.editorUpload.blobCache.add(W)}},ho=function(B){return function(W){B.windowManager.alert(W)}},ql=function(B){return function(W){return gr(B,W)}},nt=function(B){return function(W){return B.dom.parseStyle(W)}},po=function(B){return function(W,se){return B.dom.serializeStyle(W,se)}},rs=function(B){return function(W){return Rt(B).upload([W],!1).then(function(se){return se.length===0?$t.reject("Failed to upload image"):se[0].status===!1?$t.reject(se[0].error.message):se[0]})}},In=function(B){var W={onSubmit:ju(B),imageSize:Ln(B),addToBlobCache:hr(B),createBlobCache:_f(B),alertErr:ho(B),normalizeCss:ql(B),parseStyle:nt(B),serializeStyle:po(B),uploadImage:rs(B)},se=function(){sc(B).then(Ia(W)).then(B.windowManager.open)};return{open:se}},Mf=function(B){B.addCommand("mceImage",In(B).open),B.addCommand("mceUpdateImage",function(W,se){B.undoManager.transact(function(){return G(B,se)})})},wu=function(B){var W=B.attr("class");return W&&/\bimage\b/.test(W)},Eo=function(B){return function(W){for(var se=W.length,Ie=function(Zn){Zn.attr("contenteditable",B?"true":null)};se--;){var Z=W[se];wu(Z)&&(Z.attr("contenteditable",B?"false":null),Zt.each(Z.getAll("figcaption"),Ie))}}},Mv=function(B){B.on("PreInit",function(){B.parser.addNodeFilter("figure",Eo(!0)),B.serializer.addNodeFilter("figure",Eo(!1))})},Je=function(B){B.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:In(B).open,onSetup:function(W){return B.selection.selectorChangedWithUnbind("img:not([data-mce-object],[data-mce-placeholder]),figure.image",W.setActive).unbind}}),B.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:In(B).open}),B.ui.registry.addContextMenu("image",{update:function(W){return $o(W)||To(W)&&!mn(W)?["image"]:[]}})};function as(){Nt.add("image",function(B){Mv(B),Je(B),Mf(B)})}as()})();(function(){var Nt=function(z){var ce=z,ke=function(){return ce},Ue=function(Gt){ce=Gt};return{get:ke,set:Ue}},on=tinymce.util.Tools.resolve("tinymce.PluginManager"),vn=tinymce.util.Tools.resolve("tinymce.util.Tools"),or=function(z){var ce=typeof z;return z===null?"null":ce==="object"&&(Array.prototype.isPrototypeOf(z)||z.constructor&&z.constructor.name==="Array")?"array":ce==="object"&&(String.prototype.isPrototypeOf(z)||z.constructor&&z.constructor.name==="String")?"string":ce},Ut=function(z){return function(ce){return or(ce)===z}},Vn=function(z){return function(ce){return typeof ce===z}},Sn=Ut("array"),An=function(z){return z==null},jt=function(z){return!An(z)},ia=Vn("function"),Fr=function(){},un=function(z){return function(){return z}},br=function(z){return z},mr=un(!1),it=un(!0),He=function(){return wn},wn=function(){var z=function(Ue){return Ue()},ce=br,ke={fold:function(Ue,Gt){return Ue()},isSome:mr,isNone:it,getOr:ce,getOrThunk:z,getOrDie:function(Ue){throw new Error(Ue||"error: getOrDie called on none.")},getOrNull:un(null),getOrUndefined:un(void 0),or:ce,orThunk:z,map:He,each:Fr,bind:He,exists:mr,forall:it,filter:function(){return He()},toArray:function(){return[]},toString:un("none()")};return ke}(),wt=function(z){var ce=un(z),ke=function(){return Gt},Ue=function(Mt){return Mt(z)},Gt={fold:function(Mt,Xt){return Xt(z)},isSome:it,isNone:mr,getOr:ce,getOrThunk:ce,getOrDie:ce,getOrNull:ce,getOrUndefined:ce,or:ke,orThunk:ke,map:function(Mt){return wt(Mt(z))},each:function(Mt){Mt(z)},bind:Ue,exists:Ue,forall:Ue,filter:function(Mt){return Mt(z)?Gt:wn},toArray:function(){return[z]},toString:function(){return"some("+z+")"}};return Gt},Un=function(z){return z==null?wn:wt(z)},re={some:wt,none:He,from:Un},Te=function(z,ce){return pt(document.createElement("canvas"),z,ce)},qe=function(z){var ce=Te(z.width,z.height),ke=gt(ce);return ke.drawImage(z,0,0),ce},gt=function(z){return z.getContext("2d")},pt=function(z,ce,ke){return z.width=ce,z.height=ke,z},bt=function(z){return z.naturalWidth||z.width},rn=function(z){return z.naturalHeight||z.height},ut=function(){var z=function(Re){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");if(typeof Re!="function")throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],ze(Re,Ue(Xt,this),Ue($,this))},ce=window,ke=z.immediateFn||typeof ce.setImmediate=="function"&&ce.setImmediate||function(Re){return setTimeout(Re,1)},Ue=function(Re,xt){return function(){for(var en=[],fn=0;fn<arguments.length;fn++)en[fn]=arguments[fn];return Re.apply(xt,en)}},Gt=Array.isArray||function(Re){return Object.prototype.toString.call(Re)==="[object Array]"};function Mt(Re){var xt=this;if(this._state===null){this._deferreds.push(Re);return}ke(function(){var en=xt._state?Re.onFulfilled:Re.onRejected;if(en===null){(xt._state?Re.resolve:Re.reject)(xt._value);return}var fn;try{fn=en(xt._value)}catch(tr){Re.reject(tr);return}Re.resolve(fn)})}function Xt(Re){try{if(Re===this)throw new TypeError("A promise cannot be resolved with itself.");if(Re&&(typeof Re=="object"||typeof Re=="function")){var xt=Re.then;if(typeof xt=="function"){ze(Ue(xt,Re),Ue(Xt,this),Ue($,this));return}}this._state=!0,this._value=Re,ue.call(this)}catch(en){$.call(this,en)}}function $(Re){this._state=!1,this._value=Re,ue.call(this)}function ue(){for(var Re=0,xt=this._deferreds;Re<xt.length;Re++){var en=xt[Re];Mt.call(this,en)}this._deferreds=[]}function Ce(Re,xt,en,fn){this.onFulfilled=typeof Re=="function"?Re:null,this.onRejected=typeof xt=="function"?xt:null,this.resolve=en,this.reject=fn}var ze=function(Re,xt,en){var fn=!1;try{Re(function(tr){fn||(fn=!0,xt(tr))},function(tr){fn||(fn=!0,en(tr))})}catch(tr){if(fn)return;fn=!0,en(tr)}};return z.prototype.catch=function(Re){return this.then(null,Re)},z.prototype.then=function(Re,xt){var en=this;return new z(function(fn,tr){Mt.call(en,new Ce(Re,xt,fn,tr))})},z.all=function(){for(var Re=[],xt=0;xt<arguments.length;xt++)Re[xt]=arguments[xt];var en=Array.prototype.slice.call(Re.length===1&&Gt(Re[0])?Re[0]:Re);return new z(function(fn,tr){if(en.length===0)return fn([]);for(var ga=en.length,fa=function(Pr,ba){try{if(ba&&(typeof ba=="object"||typeof ba=="function")){var Ia=ba.then;if(typeof Ia=="function"){Ia.call(ba,function(ju){fa(Pr,ju)},tr);return}}en[Pr]=ba,--ga==0&&fn(en)}catch(ju){tr(ju)}},Va=0;Va<en.length;Va++)fa(Va,en[Va])})},z.resolve=function(Re){return Re&&typeof Re=="object"&&Re.constructor===z?Re:new z(function(xt){xt(Re)})},z.reject=function(Re){return new z(function(xt,en){en(Re)})},z.race=function(Re){return new z(function(xt,en){for(var fn=0,tr=Re;fn<tr.length;fn++){var ga=tr[fn];ga.then(xt,en)}})},z},Rr=window.Promise?window.Promise:ut(),me=function(z){var ce=z.src;return ce.indexOf("data:")===0?At(ce):Dn(ce)},Y=function(z){return new Rr(function(ce,ke){var Ue=URL.createObjectURL(z),Gt=new Image,Mt=function(){Gt.removeEventListener("load",Xt),Gt.removeEventListener("error",$)},Xt=function(){Mt(),ce(Gt)},$=function(){Mt(),ke("Unable to load data of type "+z.type+": "+Ue)};Gt.addEventListener("load",Xt),Gt.addEventListener("error",$),Gt.src=Ue,Gt.complete&&setTimeout(Xt,0)})},Dn=function(z){return new Rr(function(ce,ke){var Ue=new XMLHttpRequest;Ue.open("GET",z,!0),Ue.responseType="blob",Ue.onload=function(){this.status===200&&ce(this.response)},Ue.onerror=function(){var Gt=this,Mt=function(){var $=new Error("No access to download image");return $.code=18,$.name="SecurityError",$},Xt=function(){return new Error("Error "+Gt.status+" downloading image")};ke(this.status===0?Mt():Xt())},Ue.send()})},Aa=function(z){var ce=z.split(","),ke=/data:([^;]+)/.exec(ce[0]);if(!ke)return re.none();for(var Ue=ke[1],Gt=ce[1],Mt=1024,Xt=atob(Gt),$=Xt.length,ue=Math.ceil($/Mt),Ce=new Array(ue),ze=0;ze<ue;++ze){for(var Re=ze*Mt,xt=Math.min(Re+Mt,$),en=new Array(xt-Re),fn=Re,tr=0;fn<xt;++tr,++fn)en[tr]=Xt[fn].charCodeAt(0);Ce[ze]=new Uint8Array(en)}return re.some(new Blob(Ce,{type:Ue}))},At=function(z){return new Rr(function(ce,ke){Aa(z).fold(function(){ke("uri is not base64: "+z)},ce)})},Oa=function(z,ce,ke){return ce=ce||"image/png",ia(HTMLCanvasElement.prototype.toBlob)?new Rr(function(Ue,Gt){z.toBlob(function(Mt){Mt?Ue(Mt):Gt()},ce,ke)}):At(z.toDataURL(ce,ke))},Nn=function(z,ce,ke){return ce=ce||"image/png",z.toDataURL(ce,ke)},D=function(z){return Y(z).then(function(ce){_t(ce);var ke=Te(bt(ce),rn(ce)),Ue=gt(ke);return Ue.drawImage(ce,0,0),ke})},na=function(z){return new Rr(function(ce){var ke=new FileReader;ke.onloadend=function(){ce(ke.result)},ke.readAsDataURL(z)})},_t=function(z){URL.revokeObjectURL(z.src)},Kt=function(z){return Y(z)},Ro=function(z){return me(z)},Go=Array.prototype.indexOf,ir=function(z,ce){return Go.call(z,ce)},la=function(z,ce){return ir(z,ce)>-1},te=function(z,ce){for(var ke=0,Ue=z.length;ke<Ue;ke++){var Gt=z[ke];ce(Gt,ke)}},qa=function(z,ce){for(var ke=[],Ue=0,Gt=z.length;Ue<Gt;Ue++){var Mt=z[Ue];ce(Mt,Ue)&&ke.push(Mt)}return ke},yt=function(z,ce,ke){return te(z,function(Ue,Gt){ke=ce(ke,Ue,Gt)}),ke},Jt=function(z,ce,ke){for(var Ue=0,Gt=z.length;Ue<Gt;Ue++){var Mt=z[Ue];if(ce(Mt,Ue))return re.some(Mt);if(ke(Mt,Ue))break}return re.none()},It=function(z,ce){return Jt(z,ce,mr)},$t=function(z,ce){for(var ke=0,Ue=z.length;ke<Ue;++ke){var Gt=z[ke];if(ce(Gt,ke)!==!0)return!1}return!0},rt=Object.keys,an=function(z,ce){for(var ke=rt(z),Ue=0,Gt=ke.length;Ue<Gt;Ue++){var Mt=ke[Ue],Xt=z[Mt];ce(Xt,Mt)}},kn=function(z){if(!Sn(z))throw new Error("cases must be an array");if(z.length===0)throw new Error("there must be at least one case");var ce=[],ke={};return te(z,function(Ue,Gt){var Mt=rt(Ue);if(Mt.length!==1)throw new Error("one and only one name per case");var Xt=Mt[0],$=Ue[Xt];if(ke[Xt]!==void 0)throw new Error("duplicate key detected:"+Xt);if(Xt==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Sn($))throw new Error("case arguments must be an array");ce.push(Xt),ke[Xt]=function(){for(var ue=[],Ce=0;Ce<arguments.length;Ce++)ue[Ce]=arguments[Ce];var ze=ue.length;if(ze!==$.length)throw new Error("Wrong number of arguments to case "+Xt+". Expected "+$.length+" ("+$+"), got "+ze);var Re=function(xt){var en=rt(xt);if(ce.length!==en.length)throw new Error("Wrong number of arguments to match. Expected: "+ce.join(",")+`
Actual: `+en.join(","));var fn=$t(ce,function(tr){return la(en,tr)});if(!fn)throw new Error("Not all branches were specified when using match. Specified: "+en.join(", ")+`
Required: `+ce.join(", "));return xt[Xt].apply(null,ue)};return{fold:function(){for(var xt=[],en=0;en<arguments.length;en++)xt[en]=arguments[en];if(xt.length!==z.length)throw new Error("Wrong number of arguments to fold. Expected "+z.length+", got "+xt.length);var fn=xt[Gt];return fn.apply(null,ue)},match:Re,log:function(xt){console.log(xt,{constructors:ce,constructor:Xt,params:ue})}}}}),ke},Ze={generate:kn};Ze.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);var Wn=function(z,ce,ke){var Ue=ce.type,Gt=un(Ue),Mt=function(){return Rr.resolve(ce)},Xt=un(ke),$=function(){return ke.split(",")[1]},ue=function(xt,en){return z.then(function(fn){return Oa(fn,xt,en)})},Ce=function(xt,en){return z.then(function(fn){return Nn(fn,xt,en)})},ze=function(xt,en){return Ce(xt,en).then(function(fn){return fn.split(",")[1]})},Re=function(){return z.then(qe)};return{getType:Gt,toBlob:Mt,toDataURL:Xt,toBase64:$,toAdjustedBlob:ue,toAdjustedDataURL:Ce,toAdjustedBase64:ze,toCanvas:Re}},ma=function(z){return na(z).then(function(ce){return Wn(D(z),z,ce)})},dn=function(z,ce){return Oa(z,ce).then(function(ke){return Wn(Rr.resolve(z),ke,z.toDataURL())})},qr=function(z,ce){ce===void 0&&(ce=2);var ke=Math.pow(10,ce),Ue=Math.round(z*ke);return Math.ceil(Ue/ke)},Ur=function(z,ce){return z.toCanvas().then(function(ke){return On(ke,z.getType(),ce)})},On=function(z,ce,ke){var Ue=ke<0?360+ke:ke,Gt=Ue*Math.PI/180,Mt=z.width,Xt=z.height,$=Math.sin(Gt),ue=Math.cos(Gt),Ce=qr(Math.abs(Mt*ue)+Math.abs(Xt*$)),ze=qr(Math.abs(Mt*$)+Math.abs(Xt*ue)),Re=Te(Ce,ze),xt=gt(Re);return xt.translate(Ce/2,ze/2),xt.rotate(Gt),xt.drawImage(z,-Mt/2,-Xt/2),dn(Re,ce)},ra=function(z,ce){return z.toCanvas().then(function(ke){return Po(ke,z.getType(),ce)})},Po=function(z,ce,ke){var Ue=Te(z.width,z.height),Gt=gt(Ue);return ke==="v"?(Gt.scale(1,-1),Gt.drawImage(z,0,-Ue.height)):(Gt.scale(-1,1),Gt.drawImage(z,-Ue.width,0)),dn(Ue,ce)},Ko=function(z,ce){return ra(z,ce)},vi=function(z,ce){return Ur(z,ce)},No=function(z,ce,ke){return ke===void 0&&(ke=!1),new Rr(function(Ue){var Gt=new XMLHttpRequest;Gt.onreadystatechange=function(){Gt.readyState===4&&Ue({status:Gt.status,blob:Gt.response})},Gt.open("GET",z,!0),Gt.withCredentials=ke,an(ce,function(Mt,Xt){Gt.setRequestHeader(Xt,Mt)}),Gt.responseType="blob",Gt.send()})},Ga=function(z){return new Rr(function(ce,ke){var Ue=new FileReader;Ue.onload=function(){ce(Ue.result)},Ue.onerror=function(Gt){ke(Gt)},Ue.readAsText(z)})},Ka=function(z){try{return re.some(JSON.parse(z))}catch(ce){return re.none()}},Xo=[{code:404,message:"Could not find Image Proxy"},{code:403,message:"Rejected request"},{code:0,message:"Incorrect Image Proxy URL"}],Ba=[{type:"not_found",message:"Failed to load image."},{type:"key_missing",message:"The request did not include an api key."},{type:"key_not_found",message:"The provided api key could not be found."},{type:"domain_not_trusted",message:"The api key is not valid for the request origins."}],vo=function(z,ce){var ke=yt(ce,function(Ue,Gt){return jt(Ue)?Ue[Gt]:void 0},z);return re.from(ke)},Ca=function(z,ce){return(ce==null?void 0:ce.type)==="application/json"&&(z===400||z===403||z===404||z===500)},Yo=function(z){var ce=It(Xo,function(ke){return z===ke.code}).fold(un("Unknown ImageProxy error"),function(ke){return ke.message});return"ImageProxy HTTP error: "+ce},mn=function(z){var ce=Yo(z);return Rr.reject(ce)},Yr=function(z){return It(Ba,function(ce){return ce.type===z}).fold(un("Unknown service error"),function(ce){return ce.message})},mo=function(z){var ce=Ka(z),ke=ce.bind(function(Ue){return vo(Ue,["error","type"]).map(Yr)}).getOr("Invalid JSON in service error message");return"ImageProxy Service error: "+ke},ti=function(z){return Ga(z).then(function(ce){var ke=mo(ce);return Rr.reject(ke)})},ur=function(z,ce){return Ca(z,ce)?ti(ce):mn(z)},eo=function(z,ce){var ke=z.indexOf("?")===-1?"?":"&";return/[?&]apiKey=/.test(z)?z:z+ke+"apiKey="+encodeURIComponent(ce)},Jo=function(z){return z<200||z>=300},Qi=function(z,ce){var ke={"Content-Type":"application/json;charset=UTF-8","tiny-api-key":ce};return No(eo(z,ce),ke).then(function(Ue){return Jo(Ue.status)?ur(Ue.status,Ue.blob):Rr.resolve(Ue.blob)})},Io=function(z,ce){return No(z,{},ce).then(function(ke){return Jo(ke.status)?mn(ke.status):Rr.resolve(ke.blob)})},Zo=function(z,ce,ke){return ke===void 0&&(ke=!1),ce?Qi(z,ce):Io(z,ke)},di=function(z){return ma(z)},Fi=1,Br=function(z,ce){var ke=ce||document,Ue=ke.createElement("div");if(Ue.innerHTML=z,!Ue.hasChildNodes()||Ue.childNodes.length>1)throw console.error("HTML does not have a single root node",z),new Error("HTML must have a single root node");return to(Ue.childNodes[0])},ua=function(z,ce){var ke=ce||document,Ue=ke.createElement(z);return to(Ue)},cr=function(z,ce){var ke=ce||document,Ue=ke.createTextNode(z);return to(Ue)},to=function(z){if(z==null)throw new Error("Node cannot be null or undefined");return{dom:z}},$r=function(z,ce,ke){return re.from(z.dom.elementFromPoint(ce,ke)).map(to)},go={fromHtml:Br,fromTag:ua,fromText:cr,fromDom:to,fromPoint:$r},Sa=function(z,ce){var ke=z.dom;if(ke.nodeType!==Fi)return!1;var Ue=ke;if(Ue.matches!==void 0)return Ue.matches(ce);if(Ue.msMatchesSelector!==void 0)return Ue.msMatchesSelector(ce);if(Ue.webkitMatchesSelector!==void 0)return Ue.webkitMatchesSelector(ce);if(Ue.mozMatchesSelector!==void 0)return Ue.mozMatchesSelector(ce);throw new Error("Browser lacks native selectors")};typeof window!="undefined"||Function("return this;")();var Gr=function(z,ce){var ke=function(Gt){return ce(go.fromDom(Gt))},Ue=It(z.dom.childNodes,ke);return Ue.map(go.fromDom)},$o=function(z,ce){return Gr(z,function(ke){return Sa(ke,ce)})},To=tinymce.util.Tools.resolve("tinymce.util.Delay"),zo=tinymce.util.Tools.resolve("tinymce.util.Promise"),mi=tinymce.util.Tools.resolve("tinymce.util.URI"),pa=function(z){return z.getParam("imagetools_toolbar","rotateleft rotateright flipv fliph editimage imageoptions")},Ha=function(z){return z.getParam("imagetools_proxy")},pn=function(z){return z.getParam("imagetools_cors_hosts",[],"string[]")},Cn=function(z){return z.getParam("imagetools_credentials_hosts",[],"string[]")},Xn=function(z){return re.from(z.getParam("imagetools_fetch_image",null,"function"))},Na=function(z){return z.getParam("api_key",z.getParam("imagetools_api_key","","string"),"string")},yu=function(z){return z.getParam("images_upload_timeout",3e4,"number")},gi=function(z){return z.getParam("images_reuse_filename",!1,"boolean")},Pi=function(z){var ce,ke,Ue=function(Gt){return/^[0-9\.]+px$/.test(Gt)};return ce=z.style.width,ke=z.style.height,ce||ke?Ue(ce)&&Ue(ke)?{w:parseInt(ce,10),h:parseInt(ke,10)}:null:(ce=z.width,ke=z.height,ce&&ke?{w:parseInt(ce,10),h:parseInt(ke,10)}:null)},gr=function(z,ce){var ke,Ue;ce&&(ke=z.style.width,Ue=z.style.height,(ke||Ue)&&(z.style.width=ce.w+"px",z.style.height=ce.h+"px",z.removeAttribute("data-mce-style")),ke=z.width,Ue=z.height,(ke||Ue)&&(z.setAttribute("width",String(ce.w)),z.setAttribute("height",String(ce.h))))},hi=function(z){return{w:z.naturalWidth,h:z.naturalHeight}},Xa=0,ee=function(z){return $o(go.fromDom(z),"img")},we=function(z,ce){return z.dom.is(ce,"figure")},Oe=function(z,ce){return z.dom.is(ce,"img:not([data-mce-object],[data-mce-placeholder])")},Fe=function(z,ce){var ke=function(Ue){return Oe(z,Ue)&&(Le(z,Ue)||at(z,Ue)||jt(Ha(z)))};return we(z,ce)?ee(ce).bind(function(Ue){return ke(Ue.dom)?re.some(Ue.dom):re.none()}):ke(ce)?re.some(ce):re.none()},Dt=function(z,ce){z.notificationManager.open({text:ce,type:"error"})},G=function(z){var ce=z.selection.getNode(),ke=z.dom.getParent(ce,"figure.image");return ke!==null&&we(z,ke)?ee(ke):Oe(z,ce)?re.some(go.fromDom(ce)):re.none()},le=function(z,ce,ke){var Ue=ce.match(/(?:\/|^)(([^\/\?]+)\.(?:[a-z0-9.]+))(?:\?|$)/i);return jt(Ue)?z.dom.encode(Ue[ke]):null},Be=function(){return"imagetools"+Xa++},Le=function(z,ce){var ke=ce.src;return ke.indexOf("data:")===0||ke.indexOf("blob:")===0||new mi(ke).host===z.documentBaseURI.host},at=function(z,ce){return vn.inArray(pn(z),new mi(ce.src).host)!==-1},Rt=function(z,ce){return vn.inArray(Cn(z),new mi(ce.src).host)!==-1},Zt=function(z,ce){if(at(z,ce))return Zo(ce.src,null,Rt(z,ce));if(!Le(z,ce)){var ke=Ha(z),Ue=ke+(ke.indexOf("?")===-1?"?":"&")+"url="+encodeURIComponent(ce.src),Gt=Na(z);return Zo(Ue,Gt,!1)}return Ro(ce)},Rn=function(z,ce){return Xn(z).fold(function(){return Zt(z,ce)},function(ke){return ke(ce)})},Yn=function(z,ce){var ke=z.editorUpload.blobCache.getByUri(ce.src);return ke?zo.resolve(ke.blob()):Rn(z,ce)},sr=function(z,ce){var ke=To.setEditorTimeout(z,function(){z.editorUpload.uploadImagesAuto()},yu(z));ce.set(ke)},Wr=function(z){To.clearTimeout(z.get())},Da=function(z,ce,ke,Ue,Gt,Mt,Xt){return ke.toBlob().then(function($){var ue,Ce,ze,Re,xt=z.editorUpload.blobCache;ue=Mt.src;var en=ce.type===$.type;return gi(z)&&(Re=xt.getByUri(ue),jt(Re)?(ue=Re.uri(),Ce=Re.name(),ze=Re.filename()):(Ce=le(z,ue,2),ze=le(z,ue,1))),Re=xt.create({id:Be(),blob:$,base64:ke.toBase64(),uri:ue,name:Ce,filename:en?ze:void 0}),xt.add(Re),z.undoManager.transact(function(){var fn=function(){z.$(Mt).off("load",fn),z.nodeChanged(),Ue?z.editorUpload.uploadImagesAuto():(Wr(Gt),sr(z,Gt))};z.$(Mt).on("load",fn),Xt&&z.$(Mt).attr({width:Xt.w,height:Xt.h}),z.$(Mt).attr({src:Re.blobUri()}).removeAttr("data-mce-src")}),Re})},et=function(z,ce,ke,Ue){return function(){var Gt=G(z);return Gt.fold(function(){Dt(z,"Could not find selected image")},function(Mt){return z._scanForImages().then(function(){return Yn(z,Mt.dom)}).then(function(Xt){return di(Xt).then(ke).then(function($){return Da(z,Xt,$,!1,ce,Mt.dom,Ue)})}).catch(function(Xt){Dt(z,Xt)})})}},Jr=function(z,ce,ke){return function(){var Ue=G(z),Gt=Ue.map(function(Mt){var Xt=Pi(Mt.dom);return Xt?{w:Xt.h,h:Xt.w}:null}).getOrNull();return et(z,ce,function(Mt){return vi(Mt,ke)},Gt)()}},Jn=function(z,ce,ke){return function(){return et(z,ce,function(Ue){return Ko(Ue,ke)})()}},Ar=function(z,ce,ke,Ue,Gt){return Kt(Gt).then(function(Mt){var Xt=hi(Mt);return(Ue.w!==Xt.w||Ue.h!==Xt.h)&&Pi(ke)&&gr(ke,Xt),URL.revokeObjectURL(Mt.src),Gt}).then(di).then(function(Mt){return Da(z,Gt,Mt,!0,ce,ke)})},io="save-state",wr="disable",sc="enable",su=function(z){return{blob:z,url:URL.createObjectURL(z)}},lu=function(z,ce){return function(){var ke=function(Mt){return{title:"Edit Image",size:"large",body:{type:"panel",items:[{type:"imagetools",name:"imagetools",label:"Edit Image",currentState:Mt}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0,disabled:!0}],onSubmit:function(Xt){var $=Xt.getData().imagetools.blob;Ue.each(function(ue){Gt.each(function(Ce){Ar(z,ce,ue.dom,Ce,$)})}),Xt.close()},onCancel:Fr,onAction:function(Xt,$){switch($.name){case io:$.value?Xt.enable("save"):Xt.disable("save");break;case wr:Xt.disable("save"),Xt.disable("cancel");break;case sc:Xt.enable("cancel");break}}}},Ue=G(z),Gt=Ue.map(function(Mt){return hi(Mt.dom)});Ue.each(function(Mt){Fe(z,Mt.dom).each(function(Xt){Yn(z,Mt.dom).then(function($){var ue=su($);z.windowManager.open(ke(ue))})})})}},ni=function(z,ce){vn.each({mceImageRotateLeft:Jr(z,ce,-90),mceImageRotateRight:Jr(z,ce,90),mceImageFlipVertical:Jn(z,ce,"v"),mceImageFlipHorizontal:Jn(z,ce,"h"),mceEditImage:lu(z,ce)},function(ke,Ue){z.addCommand(Ue,ke)})},ie=function(z,ce,ke){z.on("NodeChange",function(Ue){var Gt=ke.get(),Mt=Fe(z,Ue.element);Gt&&!Mt.exists(function(Xt){return Gt.src===Xt.src})&&(Wr(ce),z.editorUpload.uploadImagesAuto(),ke.set(null)),Mt.each(ke.set)})},Se=function(z){var ce=[],ke=function(Mt){return function(){return z.execCommand(Mt)}},Ue=function(){return G(z).exists(function(Mt){return Fe(z,Mt.dom).isSome()})},Gt=function(Mt){var Xt=function($){return Mt.setDisabled(!$)};return Xt(Ue()),ce=ce.concat([Xt]),function(){ce=qa(ce,function($){return $!==Xt})}};z.on("NodeChange",function(){var Mt=Ue();te(ce,function(Xt){return Xt(Mt)})}),z.ui.registry.addButton("rotateleft",{tooltip:"Rotate counterclockwise",icon:"rotate-left",onAction:ke("mceImageRotateLeft"),onSetup:Gt}),z.ui.registry.addButton("rotateright",{tooltip:"Rotate clockwise",icon:"rotate-right",onAction:ke("mceImageRotateRight"),onSetup:Gt}),z.ui.registry.addButton("flipv",{tooltip:"Flip vertically",icon:"flip-vertically",onAction:ke("mceImageFlipVertical"),onSetup:Gt}),z.ui.registry.addButton("fliph",{tooltip:"Flip horizontally",icon:"flip-horizontally",onAction:ke("mceImageFlipHorizontal"),onSetup:Gt}),z.ui.registry.addButton("editimage",{tooltip:"Edit image",icon:"edit-image",onAction:ke("mceEditImage"),onSetup:Gt}),z.ui.registry.addButton("imageoptions",{tooltip:"Image options",icon:"image",onAction:ke("mceImage")}),z.ui.registry.addContextMenu("imagetools",{update:function(Mt){return Fe(z,Mt).map(function(Xt){return{text:"Edit image",icon:"edit-image",onAction:ke("mceEditImage")}}).toArray()}})},Ne=function(z){z.ui.registry.addContextToolbar("imagetools",{items:pa(z),predicate:function(ce){return Fe(z,ce).isSome()},position:"node",scope:"node"})};function De(){on.add("imagetools",function(z){var ce=Nt(0),ke=Nt(null);ni(z,ce),Se(z),Ne(z),ie(z,ce,ke)})}De()})();(function(){var Nt=tinymce.util.Tools.resolve("tinymce.PluginManager"),on=function(re){return re.getParam("insertdatetime_dateformat",re.translate("%Y-%m-%d"))},vn=function(re){return re.getParam("insertdatetime_timeformat",re.translate("%H:%M:%S"))},or=function(re){return re.getParam("insertdatetime_formats",["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"])},Ut=function(re){var Te=or(re);return Te.length>0?Te[0]:vn(re)},Vn=function(re){return re.getParam("insertdatetime_element",!1)},Sn="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),An="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),jt="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),ia="January February March April May June July August September October November December".split(" "),Fr=function(re,Te){if(re=""+re,re.length<Te)for(var qe=0;qe<Te-re.length;qe++)re="0"+re;return re},un=function(re,Te,qe){return qe===void 0&&(qe=new Date),Te=Te.replace("%D","%m/%d/%Y"),Te=Te.replace("%r","%I:%M:%S %p"),Te=Te.replace("%Y",""+qe.getFullYear()),Te=Te.replace("%y",""+qe.getYear()),Te=Te.replace("%m",Fr(qe.getMonth()+1,2)),Te=Te.replace("%d",Fr(qe.getDate(),2)),Te=Te.replace("%H",""+Fr(qe.getHours(),2)),Te=Te.replace("%M",""+Fr(qe.getMinutes(),2)),Te=Te.replace("%S",""+Fr(qe.getSeconds(),2)),Te=Te.replace("%I",""+((qe.getHours()+11)%12+1)),Te=Te.replace("%p",""+(qe.getHours()<12?"AM":"PM")),Te=Te.replace("%B",""+re.translate(ia[qe.getMonth()])),Te=Te.replace("%b",""+re.translate(jt[qe.getMonth()])),Te=Te.replace("%A",""+re.translate(An[qe.getDay()])),Te=Te.replace("%a",""+re.translate(Sn[qe.getDay()])),Te=Te.replace("%%","%"),Te},br=function(re,Te,qe,gt){var pt=re.dom.create("time",{datetime:qe},gt);Te.parentNode.insertBefore(pt,Te),re.dom.remove(Te),re.selection.select(pt,!0),re.selection.collapse(!1)},mr=function(re,Te){if(Vn(re)){var qe=un(re,Te),gt=void 0;/%[HMSIp]/.test(Te)?gt=un(re,"%Y-%m-%dT%H:%M"):gt=un(re,"%Y-%m-%d");var pt=re.dom.getParent(re.selection.getStart(),"time");pt?br(re,pt,gt,qe):re.insertContent('<time datetime="'+gt+'">'+qe+"</time>")}else re.insertContent(un(re,Te))},it=function(re){re.addCommand("mceInsertDate",function(){mr(re,on(re))}),re.addCommand("mceInsertTime",function(){mr(re,vn(re))})},He=function(re){var Te=re,qe=function(){return Te},gt=function(pt){Te=pt};return{get:qe,set:gt}},wn=tinymce.util.Tools.resolve("tinymce.util.Tools"),wt=function(re){var Te=or(re),qe=He(Ut(re));re.ui.registry.addSplitButton("insertdatetime",{icon:"insert-time",tooltip:"Insert date/time",select:function(pt){return pt===qe.get()},fetch:function(pt){pt(wn.map(Te,function(bt){return{type:"choiceitem",text:un(re,bt),value:bt}}))},onAction:function(pt){mr(re,qe.get())},onItemAction:function(pt,bt){qe.set(bt),mr(re,bt)}});var gt=function(pt){return function(){qe.set(pt),mr(re,pt)}};re.ui.registry.addNestedMenuItem("insertdatetime",{icon:"insert-time",text:"Date/time",getSubmenuItems:function(){return wn.map(Te,function(pt){return{type:"menuitem",text:un(re,pt),onAction:gt(pt)}})}})};function Un(){Nt.add("insertdatetime",function(re){it(re),wt(re)})}Un()})();(function(){var Nt=tinymce.util.Tools.resolve("tinymce.PluginManager"),on=tinymce.util.Tools.resolve("tinymce.util.VK"),vn=function($){var ue=typeof $;return $===null?"null":ue==="object"&&(Array.prototype.isPrototypeOf($)||$.constructor&&$.constructor.name==="Array")?"array":ue==="object"&&(String.prototype.isPrototypeOf($)||$.constructor&&$.constructor.name==="String")?"string":ue},or=function($){return function(ue){return vn(ue)===$}},Ut=function($){return function(ue){return typeof ue===$}},Vn=function($){return function(ue){return $===ue}},Sn=or("string"),An=or("array"),jt=Vn(null),ia=Ut("boolean"),Fr=Ut("function"),un=function(){},br=function($){return function(){return $}},mr=function($){return $},it=function($,ue){return $===ue},He=br(!1),wn=br(!0),wt=function(){return Un},Un=function(){var $=function(ze){return ze()},ue=mr,Ce={fold:function(ze,Re){return ze()},isSome:He,isNone:wn,getOr:ue,getOrThunk:$,getOrDie:function(ze){throw new Error(ze||"error: getOrDie called on none.")},getOrNull:br(null),getOrUndefined:br(void 0),or:ue,orThunk:$,map:wt,each:un,bind:wt,exists:He,forall:wn,filter:function(){return wt()},toArray:function(){return[]},toString:br("none()")};return Ce}(),re=function($){var ue=br($),Ce=function(){return Re},ze=function(xt){return xt($)},Re={fold:function(xt,en){return en($)},isSome:wn,isNone:He,getOr:ue,getOrThunk:ue,getOrDie:ue,getOrNull:ue,getOrUndefined:ue,or:Ce,orThunk:Ce,map:function(xt){return re(xt($))},each:function(xt){xt($)},bind:ze,exists:ze,forall:ze,filter:function(xt){return xt($)?Re:Un},toArray:function(){return[$]},toString:function(){return"some("+$+")"}};return Re},Te=function($){return $==null?Un:re($)},qe={some:re,none:wt,from:Te},gt=Array.prototype.indexOf,pt=Array.prototype.push,bt=function($,ue){return gt.call($,ue)},rn=function($,ue){return bt($,ue)>-1},ut=function($,ue){for(var Ce=$.length,ze=new Array(Ce),Re=0;Re<Ce;Re++){var xt=$[Re];ze[Re]=ue(xt,Re)}return ze},Rr=function($,ue){for(var Ce=0,ze=$.length;Ce<ze;Ce++){var Re=$[Ce];ue(Re,Ce)}},me=function($,ue,Ce){return Rr($,function(ze,Re){Ce=ue(Ce,ze,Re)}),Ce},Y=function($){for(var ue=[],Ce=0,ze=$.length;Ce<ze;++Ce){if(!An($[Ce]))throw new Error("Arr.flatten item "+Ce+" was not an array, input: "+$);pt.apply(ue,$[Ce])}return ue},Dn=function($,ue){return Y(ut($,ue))},Aa=function($,ue){for(var Ce=0;Ce<$.length;Ce++){var ze=ue($[Ce],Ce);if(ze.isSome())return ze}return qe.none()},At=function($,ue,Ce){return Ce===void 0&&(Ce=it),$.exists(function(ze){return Ce(ze,ue)})},Oa=function($){for(var ue=[],Ce=function(Re){ue.push(Re)},ze=0;ze<$.length;ze++)$[ze].each(Ce);return ue},Nn=function($,ue){return $?qe.some(ue):qe.none()},D=function($){var ue=$.getParam("link_assume_external_targets",!1);return ia(ue)&&ue?1:Sn(ue)&&(ue==="http"||ue==="https")?ue:0},na=function($){return $.getParam("link_context_toolbar",!1,"boolean")},_t=function($){return $.getParam("link_list")},Kt=function($){return $.getParam("default_link_target")},Ro=function($){return $.getParam("target_list",!0)},Go=function($){return $.getParam("rel_list",[],"array")},ir=function($){return $.getParam("link_class_list",[],"array")},la=function($){return $.getParam("link_title",!0,"boolean")},te=function($){return $.getParam("allow_unsafe_link_target",!1,"boolean")},qa=function($){return $.getParam("link_quicklink",!1,"boolean")},yt=function($){return $.getParam("link_default_protocol","http","string")},Jt=tinymce.util.Tools.resolve("tinymce.util.Tools"),It=function($){return Sn($.value)?$.value:""},$t=function($){return Sn($.text)?$.text:Sn($.title)?$.title:""},rt=function($,ue){var Ce=[];return Jt.each($,function(ze){var Re=$t(ze);if(ze.menu!==void 0){var xt=rt(ze.menu,ue);Ce.push({text:Re,items:xt})}else{var en=ue(ze);Ce.push({text:Re,value:en})}}),Ce},an=function($){return $===void 0&&($=It),function(ue){return qe.from(ue).map(function(Ce){return rt(Ce,$)})}},kn=function($){return an(It)($)},Ze=function($,ue){return function(Ce){return{name:$,type:"listbox",label:ue,items:Ce}}},Wn={sanitize:kn,sanitizeWith:an,createUi:Ze,getValue:It},ma=function(){return ma=Object.assign||function(ue){for(var Ce,ze=1,Re=arguments.length;ze<Re;ze++){Ce=arguments[ze];for(var xt in Ce)Object.prototype.hasOwnProperty.call(Ce,xt)&&(ue[xt]=Ce[xt])}return ue},ma.apply(this,arguments)},dn=Object.keys,qr=Object.hasOwnProperty,Ur=function($,ue){for(var Ce=dn($),ze=0,Re=Ce.length;ze<Re;ze++){var xt=Ce[ze],en=$[xt];ue(en,xt)}},On=function($){return function(ue,Ce){$[Ce]=ue}},ra=function($,ue,Ce,ze){var Re={};return Ur($,function(xt,en){(ue(xt,en)?Ce:ze)(xt,en)}),Re},Po=function($,ue){var Ce={};return ra($,ue,On(Ce),un),Ce},Ko=function($,ue){return qr.call($,ue)},vi=function($,ue){return Ko($,ue)&&$[ue]!==void 0&&$[ue]!==null},No=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Ga=function($){return $&&$.nodeName.toLowerCase()==="a"},Ka=function($){return Ga($)&&!!vo($)},Xo=function($,ue){if($.collapsed)return[];var Ce=$.cloneContents(),ze=new No(Ce.firstChild,Ce),Re=[],xt=Ce.firstChild;do ue(xt)&&Re.push(xt);while(xt=ze.next());return Re},Ba=function($){return/^\w+:/i.test($)},vo=function($){var ue=$.getAttribute("data-mce-href");return ue||$.getAttribute("href")},Ca=function($,ue){var Ce=["noopener"],ze=$?$.split(/\s+/):[],Re=function(tr){return Jt.trim(tr.sort().join(" "))},xt=function(tr){return tr=en(tr),tr.length>0?tr.concat(Ce):Ce},en=function(tr){return tr.filter(function(ga){return Jt.inArray(Ce,ga)===-1})},fn=ue?xt(ze):en(ze);return fn.length>0?Re(fn):""},Yo=function($){return $.replace(/\uFEFF/g,"")},mn=function($,ue){return ue=ue||$.selection.getNode(),eo(ue)?$.dom.select("a[href]",ue)[0]:$.dom.getParent(ue,"a[href]")},Yr=function($,ue){var Ce=ue?ue.innerText||ue.textContent:$.getContent({format:"text"});return Yo(Ce)},mo=function($){return Jt.grep($,Ka).length>0},ti=function($){return Xo($,Ka).length>0},ur=function($){var ue=$.schema.getTextInlineElements(),Ce=function(Re){return Re.nodeType===1&&!Ga(Re)&&!Ko(ue,Re.nodeName.toLowerCase())},ze=Xo($.selection.getRng(),Ce);return ze.length===0},eo=function($){return $&&$.nodeName==="FIGURE"&&/\bimage\b/i.test($.className)},Jo=function($){var ue=["title","rel","class","target"];return me(ue,function(Ce,ze){return $[ze].each(function(Re){Ce[ze]=Re.length>0?Re:null}),Ce},{href:$.href})},Qi=function($,ue){return(ue==="http"||ue==="https")&&!Ba($)?ue+"://"+$:$},Io=function($,ue){var Ce=ma({},ue);if(!(Go($).length>0)&&te($)===!1){var ze=Ca(Ce.rel,Ce.target==="_blank");Ce.rel=ze||null}return qe.from(Ce.target).isNone()&&Ro($)===!1&&(Ce.target=Kt($)),Ce.href=Qi(Ce.href,D($)),Ce},Zo=function($,ue,Ce,ze){Ce.each(function(Re){Ko(ue,"innerText")?ue.innerText=Re:ue.textContent=Re}),$.dom.setAttribs(ue,ze),$.selection.select(ue)},di=function($,ue,Ce,ze){eo(ue)?Sa($,ue,ze):Ce.fold(function(){$.execCommand("mceInsertLink",!1,ze)},function(Re){$.insertContent($.dom.createHTML("a",ze,$.dom.encode(Re)))})},Fi=function($,ue,Ce){var ze=$.selection.getNode(),Re=mn($,ze),xt=Io($,Jo(Ce));$.undoManager.transact(function(){Ce.href===ue.href&&ue.attach(),Re?($.focus(),Zo($,Re,Ce.text,xt)):di($,ze,Ce.text,xt)})},Br=function($){var ue=$.dom,Ce=$.selection,ze=Ce.getBookmark(),Re=Ce.getRng().cloneRange(),xt=ue.getParent(Re.startContainer,"a[href]",$.getBody()),en=ue.getParent(Re.endContainer,"a[href]",$.getBody());xt&&Re.setStartBefore(xt),en&&Re.setEndAfter(en),Ce.setRng(Re),$.execCommand("unlink"),Ce.moveToBookmark(ze)},ua=function($){$.undoManager.transact(function(){var ue=$.selection.getNode();eo(ue)?go($,ue):Br($),$.focus()})},cr=function($){var ue=$.class,Ce=$.href,ze=$.rel,Re=$.target,xt=$.text,en=$.title;return Po({class:ue.getOrNull(),href:Ce,rel:ze.getOrNull(),target:Re.getOrNull(),text:xt.getOrNull(),title:en.getOrNull()},function(fn,tr){return jt(fn)===!1})},to=function($,ue,Ce){$.hasPlugin("rtc",!0)?$.execCommand("createlink",!1,cr(Ce)):Fi($,ue,Ce)},$r=function($){$.hasPlugin("rtc",!0)?$.execCommand("unlink"):ua($)},go=function($,ue){var Ce=$.dom.select("img",ue)[0];if(Ce){var ze=$.dom.getParents(Ce,"a[href]",ue)[0];ze&&(ze.parentNode.insertBefore(Ce,ze),$.dom.remove(ze))}},Sa=function($,ue,Ce){var ze=$.dom.select("img",ue)[0];if(ze){var Re=$.dom.create("a",Ce);ze.parentNode.insertBefore(Re,ze),Re.appendChild(ze)}},Gr=function($){return vi($,"items")},$o=function($,ue){return Aa(ue,function(Ce){return Gr(Ce)?$o($,Ce.items):Nn(Ce.value===$,Ce)})},To=function($,ue,Ce,ze){var Re=ze[ue],xt=$.length>0;return Re!==void 0?$o(Re,Ce).map(function(en){return{url:{value:en.value,meta:{text:xt?$:en.text,attach:un}},text:xt?$:en.text}}):qe.none()},zo=function($,ue){return ue==="link"?$.link:ue==="anchor"?$.anchor:qe.none()},mi=function($,ue){var Ce={text:$.text,title:$.title},ze=function(tr){return Nn(Ce.title.length<=0,qe.from(tr.meta.title).getOr(""))},Re=function(tr){return Nn(Ce.text.length<=0,qe.from(tr.meta.text).getOr(tr.value))},xt=function(tr){var ga=Re(tr.url),fa=ze(tr.url);return ga.isSome()||fa.isSome()?qe.some(ma(ma({},ga.map(function(Va){return{text:Va}}).getOr({})),fa.map(function(Va){return{title:Va}}).getOr({}))):qe.none()},en=function(tr,ga){var fa=zo(ue,ga.name).getOr([]);return To(Ce.text,ga.name,fa,tr)},fn=function(tr,ga){var fa=ga.name;return fa==="url"?xt(tr()):rn(["anchor","link"],fa)?en(tr(),ga):((fa==="text"||fa==="title")&&(Ce[fa]=tr()[fa]),qe.none())};return{onChange:fn}},pa={init:mi,getDelta:To},Ha=tinymce.util.Tools.resolve("tinymce.util.Delay"),pn=tinymce.util.Tools.resolve("tinymce.util.Promise"),Cn=function($,ue,Ce){var ze=$.selection.getRng();Ha.setEditorTimeout($,function(){$.windowManager.confirm(ue,function(Re){$.selection.setRng(ze),Ce(Re)})})},Xn=function($){var ue=$.href,Ce=ue.indexOf("@")>0&&ue.indexOf("/")===-1&&ue.indexOf("mailto:")===-1;return Ce?qe.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:function(ze){return ma(ma({},ze),{href:"mailto:"+ue})}}):qe.none()},Na=function($,ue){return function(Ce){var ze=Ce.href,Re=$===1&&!Ba(ze)||$===0&&/^\s*www(\.|\d\.)/i.test(ze);return Re?qe.some({message:"The URL you entered seems to be an external link. Do you want to add the required "+ue+":// prefix?",preprocess:function(xt){return ma(ma({},xt),{href:ue+"://"+ze})}}):qe.none()}},yu=function($,ue){return Aa([Xn,Na(D($),yt($))],function(Ce){return Ce(ue)}).fold(function(){return pn.resolve(ue)},function(Ce){return new pn(function(ze){Cn($,Ce.message,function(Re){ze(Re?Ce.preprocess(ue):ue)})})})},gi={preprocess:yu},Pi=function($){var ue=$.dom.select("a:not([href])"),Ce=Dn(ue,function(ze){var Re=ze.name||ze.id;return Re?[{text:Re,value:"#"+Re}]:[]});return Ce.length>0?qe.some([{text:"None",value:""}].concat(Ce)):qe.none()},gr={getAnchors:Pi},hi=function($){var ue=ir($);return ue.length>0?Wn.sanitize(ue):qe.none()},Xa={getClasses:hi},ee=tinymce.util.Tools.resolve("tinymce.util.XHR"),we=function($){try{return qe.some(JSON.parse($))}catch(ue){return qe.none()}},Oe=function($){var ue=function(ze){return $.convertURL(ze.value||ze.url,"href")},Ce=_t($);return new pn(function(ze){Sn(Ce)?ee.send({url:Ce,success:function(Re){return ze(we(Re))},error:function(Re){return ze(qe.none())}}):Fr(Ce)?Ce(function(Re){return ze(qe.some(Re))}):ze(qe.from(Ce))}).then(function(ze){return ze.bind(Wn.sanitizeWith(ue)).map(function(Re){if(Re.length>0){var xt=[{text:"None",value:""}];return xt.concat(Re)}else return Re})})},Fe={getLinks:Oe},Dt=function($,ue){var Ce=Go($);if(Ce.length>0){var ze=At(ue,"_blank"),Re=te($)===!1,xt=function(fn){return Ca(Wn.getValue(fn),ze)},en=Re?Wn.sanitizeWith(xt):Wn.sanitize;return en(Ce)}return qe.none()},G={getRels:Dt},le=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],Be=function($){var ue=Ro($);return An(ue)?Wn.sanitize(ue).orThunk(function(){return qe.some(le)}):ue===!1?qe.none():qe.some(le)},Le={getTargets:Be},at=function($,ue,Ce){var ze=$.getAttrib(ue,Ce);return ze!==null&&ze.length>0?qe.some(ze):qe.none()},Rt=function($,ue){var Ce=$.dom,ze=ur($),Re=ze?qe.some(Yr($.selection,ue)):qe.none(),xt=ue?qe.some(Ce.getAttrib(ue,"href")):qe.none(),en=ue?qe.from(Ce.getAttrib(ue,"target")):qe.none(),fn=at(Ce,ue,"rel"),tr=at(Ce,ue,"class"),ga=at(Ce,ue,"title");return{url:xt,text:Re,title:ga,target:en,rel:fn,linkClass:tr}},Zt=function($,ue){return Fe.getLinks($).then(function(Ce){var ze=Rt($,ue);return{anchor:ze,catalogs:{targets:Le.getTargets($),rels:G.getRels($,ze.target),classes:Xa.getClasses($),anchor:gr.getAnchors($),link:Ce},optNode:qe.from(ue),flags:{titleEnabled:la($)}}})},Rn={collect:Zt},Yn=function($,ue){return function(Ce){var ze=Ce.getData();if(!ze.url.value){$r($),Ce.close();return}var Re=function(fn){return qe.from(ze[fn]).filter(function(tr){return!At(ue.anchor[fn],tr)})},xt={href:ze.url.value,text:Re("text"),target:Re("target"),rel:Re("rel"),class:Re("linkClass"),title:Re("title")},en={href:ze.url.value,attach:ze.url.meta!==void 0&&ze.url.meta.attach?ze.url.meta.attach:un};gi.preprocess($,xt).then(function(fn){to($,en,fn)}),Ce.close()}},sr=function($){var ue=mn($);return Rn.collect($,ue)},Wr=function($,ue){var Ce=$.anchor,ze=Ce.url.getOr("");return{url:{value:ze,meta:{original:{value:ze}}},text:Ce.text.getOr(""),title:Ce.title.getOr(""),anchor:ze,link:ze,rel:Ce.rel.getOr(""),target:Ce.target.or(ue).getOr(""),linkClass:Ce.linkClass.getOr("")}},Da=function($,ue,Ce){var ze=[{name:"url",type:"urlinput",filetype:"file",label:"URL"}],Re=$.anchor.text.map(function(){return{name:"text",type:"input",label:"Text to display"}}).toArray(),xt=$.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],en=qe.from(Kt(Ce)),fn=Wr($,en),tr=$.catalogs,ga=pa.init(fn,tr),fa={type:"panel",items:Y([ze,Re,xt,Oa([tr.anchor.map(Wn.createUi("anchor","Anchors")),tr.rels.map(Wn.createUi("rel","Rel")),tr.targets.map(Wn.createUi("target","Open link in...")),tr.link.map(Wn.createUi("link","Link list")),tr.classes.map(Wn.createUi("linkClass","Class"))])])};return{title:"Insert/Edit Link",size:"normal",body:fa,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:fn,onChange:function(Va,Pr){var ba=Pr.name;ga.onChange(Va.getData,{name:ba}).each(function(Ia){Va.setData(Ia)})},onSubmit:ue}},et=function($){var ue=sr($);ue.then(function(Ce){var ze=Yn($,Ce);return Da(Ce,ze,$)}).then(function(Ce){$.windowManager.open(Ce)})},Jr=function($,ue){document.body.appendChild($),$.dispatchEvent(ue),document.body.removeChild($)},Jn=function($){var ue=document.createElement("a");ue.target="_blank",ue.href=$,ue.rel="noreferrer noopener";var Ce=document.createEvent("MouseEvents");Ce.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),Jr(ue,Ce)},Ar=function($,ue){return $.dom.getParent(ue,"a[href]")},io=function($){return Ar($,$.selection.getStart())},wr=function($){return $.altKey===!0&&$.shiftKey===!1&&$.ctrlKey===!1&&$.metaKey===!1},sc=function($,ue){if(ue){var Ce=vo(ue);if(/^#/.test(Ce)){var ze=$.$(Ce);ze.length&&$.selection.scrollIntoView(ze[0],!0)}else Jn(ue.href)}},su=function($){return function(){et($)}},lu=function($){return function(){sc($,io($))}},ni=function($){$.on("click",function(ue){var Ce=Ar($,ue.target);Ce&&on.metaKeyPressed(ue)&&(ue.preventDefault(),sc($,Ce))}),$.on("keydown",function(ue){var Ce=io($);Ce&&ue.keyCode===13&&wr(ue)&&(ue.preventDefault(),sc($,Ce))})},ie=function($,ue){return $.on("NodeChange",ue),function(){return $.off("NodeChange",ue)}},Se=function($){return function(ue){var Ce=function(){return ue.setActive(!$.mode.isReadOnly()&&mn($,$.selection.getNode())!==null)};return Ce(),ie($,Ce)}},Ne=function($){return function(ue){var Ce=function(){return ue.setDisabled(mn($,$.selection.getNode())===null)};return Ce(),ie($,Ce)}},De=function($){return function(ue){var Ce=function(Re){return mo(Re)||ti($.selection.getRng())},ze=$.dom.getParents($.selection.getStart());return ue.setDisabled(!Ce(ze)),ie($,function(Re){return ue.setDisabled(!Ce(Re.parents))})}},z=function($){$.addCommand("mceLink",function(){qa($)?$.fire("contexttoolbar-show",{toolbarKey:"quicklink"}):su($)()})},ce=function($){$.addShortcut("Meta+K","",function(){$.execCommand("mceLink")})},ke=function($){$.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",onAction:su($),onSetup:Se($)}),$.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:lu($),onSetup:Ne($)}),$.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:function(){return $r($)},onSetup:De($)})},Ue=function($){$.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:lu($),onSetup:Ne($)}),$.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:su($)}),$.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:function(){return $r($)},onSetup:De($)})},Gt=function($){var ue="link unlink openlink",Ce="link";$.ui.registry.addContextMenu("link",{update:function(ze){return mo($.dom.getParents(ze,"a"))?ue:Ce}})},Mt=function($){var ue=function(Re){Re.selection.collapse(!1)},Ce=function(Re){var xt=$.selection.getNode();return Re.setDisabled(!mn($,xt)),un},ze=function(Re){var xt=mn($),en=ur($);if(!xt&&en){var fn=Yr($.selection,xt);return qe.some(fn.length>0?fn:Re)}else return qe.none()};$.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:Se($)},label:"Link",predicate:function(Re){return!!mn($,Re)&&na($)},initValue:function(){var Re=mn($);return Re?vo(Re):""},commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:function(Re){var xt=$.selection.getNode();return Re.setActive(!!mn($,xt)),Se($)(Re)},onAction:function(Re){var xt=Re.getValue(),en=ze(xt),fn={href:xt,attach:un};to($,fn,{href:xt,text:en,title:qe.none(),rel:qe.none(),target:qe.none(),class:qe.none()}),ue($),Re.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:Ce,onAction:function(Re){$r($),Re.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:Ce,onAction:function(Re){lu($)(),Re.hide()}}]})};function Xt(){Nt.add("link",function($){ke($),Ue($),Gt($),Mt($),ni($),z($),ce($)})}Xt()})();(function(){var Nt=tinymce.util.Tools.resolve("tinymce.PluginManager"),on=function(E){var I=typeof E;return E===null?"null":I==="object"&&(Array.prototype.isPrototypeOf(E)||E.constructor&&E.constructor.name==="Array")?"array":I==="object"&&(String.prototype.isPrototypeOf(E)||E.constructor&&E.constructor.name==="String")?"string":I},vn=function(E){return function(I){return on(I)===E}},or=function(E){return function(I){return typeof I===E}},Ut=vn("string"),Vn=vn("object"),Sn=vn("array"),An=or("boolean"),jt=or("function"),ia=or("number"),Fr=function(){},un=function(E){return function(){return E}},br=function(E){return E},mr=function(E,I){return E===I},it=function(E){return function(I){return!E(I)}},He=un(!1),wn=un(!0),wt=function(){return Un},Un=function(){var E=function(oe){return oe()},I=br,H={fold:function(oe,Ae){return oe()},isSome:He,isNone:wn,getOr:I,getOrThunk:E,getOrDie:function(oe){throw new Error(oe||"error: getOrDie called on none.")},getOrNull:un(null),getOrUndefined:un(void 0),or:I,orThunk:E,map:wt,each:Fr,bind:wt,exists:He,forall:wn,filter:function(){return wt()},toArray:function(){return[]},toString:un("none()")};return H}(),re=function(E){var I=un(E),H=function(){return Ae},oe=function(St){return St(E)},Ae={fold:function(St,xn){return xn(E)},isSome:wn,isNone:He,getOr:I,getOrThunk:I,getOrDie:I,getOrNull:I,getOrUndefined:I,or:H,orThunk:H,map:function(St){return re(St(E))},each:function(St){St(E)},bind:oe,exists:oe,forall:oe,filter:function(St){return St(E)?Ae:Un},toArray:function(){return[E]},toString:function(){return"some("+E+")"}};return Ae},Te=function(E){return E==null?Un:re(E)},qe={some:re,none:wt,from:Te},gt=Array.prototype.slice,pt=Array.prototype.push,bt=function(E,I){for(var H=E.length,oe=new Array(H),Ae=0;Ae<H;Ae++){var St=E[Ae];oe[Ae]=I(St,Ae)}return oe},rn=function(E,I){for(var H=0,oe=E.length;H<oe;H++){var Ae=E[H];I(Ae,H)}},ut=function(E,I){for(var H=[],oe=0,Ae=E.length;oe<Ae;oe++){var St=E[oe];I(St,oe)&&H.push(St)}return H},Rr=function(E,I){if(E.length===0)return[];for(var H=I(E[0]),oe=[],Ae=[],St=0,xn=E.length;St<xn;St++){var _n=E[St],Tr=I(_n);Tr!==H&&(oe.push(Ae),Ae=[]),H=Tr,Ae.push(_n)}return Ae.length!==0&&oe.push(Ae),oe},me=function(E,I,H){return rn(E,function(oe,Ae){H=I(H,oe,Ae)}),H},Y=function(E,I,H){for(var oe=0,Ae=E.length;oe<Ae;oe++){var St=E[oe];if(I(St,oe))return qe.some(St);if(H(St,oe))break}return qe.none()},Dn=function(E,I){return Y(E,I,He)},Aa=function(E){for(var I=[],H=0,oe=E.length;H<oe;++H){if(!Sn(E[H]))throw new Error("Arr.flatten item "+H+" was not an array, input: "+E);pt.apply(I,E[H])}return I},At=function(E,I){return Aa(bt(E,I))},Oa=function(E){var I=gt.call(E,0);return I.reverse(),I},Nn=function(E,I){return I>=0&&I<E.length?qe.some(E[I]):qe.none()},D=function(E){return Nn(E,0)},na=function(E){return Nn(E,E.length-1)},_t=function(E,I){for(var H=0;H<E.length;H++){var oe=I(E[H],H);if(oe.isSome())return oe}return qe.none()},Kt=function(){return Kt=Object.assign||function(I){for(var H,oe=1,Ae=arguments.length;oe<Ae;oe++){H=arguments[oe];for(var St in H)Object.prototype.hasOwnProperty.call(H,St)&&(I[St]=H[St])}return I},Kt.apply(this,arguments)};function Ro(E,I,H){if(H||arguments.length===2)for(var oe=0,Ae=I.length,St;oe<Ae;oe++)(St||!(oe in I))&&(St||(St=Array.prototype.slice.call(I,0,oe)),St[oe]=I[oe]);return E.concat(St||Array.prototype.slice.call(I))}var Go=function(E){var I=!1,H;return function(){for(var oe=[],Ae=0;Ae<arguments.length;Ae++)oe[Ae]=arguments[Ae];return I||(I=!0,H=E.apply(null,oe)),H}},ir=function(E,I,H,oe){var Ae=E.isiOS()&&/ipad/i.test(H)===!0,St=E.isiOS()&&!Ae,xn=E.isiOS()||E.isAndroid(),_n=xn||oe("(pointer:coarse)"),Tr=Ae||!St&&xn&&oe("(min-device-width:768px)"),Cr=St||xn&&!Tr,fr=I.isSafari()&&E.isiOS()&&/safari/i.test(H)===!1,Tu=!Cr&&!Tr&&!fr;return{isiPad:un(Ae),isiPhone:un(St),isTablet:un(Tr),isPhone:un(Cr),isTouch:un(_n),isAndroid:E.isAndroid,isiOS:E.isiOS,isWebView:un(fr),isDesktop:un(Tu)}},la=function(E,I){for(var H=0;H<E.length;H++){var oe=E[H];if(oe.test(I))return oe}},te=function(E,I){var H=la(E,I);if(!H)return{major:0,minor:0};var oe=function(Ae){return Number(I.replace(H,"$"+Ae))};return Jt(oe(1),oe(2))},qa=function(E,I){var H=String(I).toLowerCase();return E.length===0?yt():te(E,H)},yt=function(){return Jt(0,0)},Jt=function(E,I){return{major:E,minor:I}},It={nu:Jt,detect:qa,unknown:yt},$t=function(E,I){return _t(I.brands,function(H){var oe=H.brand.toLowerCase();return Dn(E,function(Ae){var St;return oe===((St=Ae.brand)===null||St===void 0?void 0:St.toLowerCase())}).map(function(Ae){return{current:Ae.name,version:It.nu(parseInt(H.version,10),0)}})})},rt=function(E,I){var H=String(I).toLowerCase();return Dn(E,function(oe){return oe.search(H)})},an=function(E,I){return rt(E,I).map(function(H){var oe=It.detect(H.versionRegexes,I);return{current:H.name,version:oe}})},kn=function(E,I){return rt(E,I).map(function(H){var oe=It.detect(H.versionRegexes,I);return{current:H.name,version:oe}})},Ze=function(E,I){return E.indexOf(I)!==-1},Wn=function(E){return function(I){return I.replace(E,"")}},ma=Wn(/^\s+|\s+$/g),dn=function(E){return E.length>0},qr=function(E){return!dn(E)},Ur=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,On=function(E){return function(I){return Ze(I,E)}},ra=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(E){return Ze(E,"edge/")&&Ze(E,"chrome")&&Ze(E,"safari")&&Ze(E,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ur],search:function(E){return Ze(E,"chrome")&&!Ze(E,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(E){return Ze(E,"msie")||Ze(E,"trident")}},{name:"Opera",versionRegexes:[Ur,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:On("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:On("firefox")},{name:"Safari",versionRegexes:[Ur,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(E){return(Ze(E,"safari")||Ze(E,"mobile/"))&&Ze(E,"applewebkit")}}],Po=[{name:"Windows",search:On("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(E){return Ze(E,"iphone")||Ze(E,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:On("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:On("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:On("linux"),versionRegexes:[]},{name:"Solaris",search:On("sunos"),versionRegexes:[]},{name:"FreeBSD",search:On("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:On("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Ko={browsers:un(ra),oses:un(Po)},vi="Edge",No="Chrome",Ga="IE",Ka="Opera",Xo="Firefox",Ba="Safari",vo=function(){return Ca({current:void 0,version:It.unknown()})},Ca=function(E){var I=E.current,H=E.version,oe=function(Ae){return function(){return I===Ae}};return{current:I,version:H,isEdge:oe(vi),isChrome:oe(No),isIE:oe(Ga),isOpera:oe(Ka),isFirefox:oe(Xo),isSafari:oe(Ba)}},Yo={unknown:vo,nu:Ca,edge:un(vi),chrome:un(No),ie:un(Ga),opera:un(Ka),firefox:un(Xo),safari:un(Ba)},mn="Windows",Yr="iOS",mo="Android",ti="Linux",ur="OSX",eo="Solaris",Jo="FreeBSD",Qi="ChromeOS",Io=function(){return Zo({current:void 0,version:It.unknown()})},Zo=function(E){var I=E.current,H=E.version,oe=function(Ae){return function(){return I===Ae}};return{current:I,version:H,isWindows:oe(mn),isiOS:oe(Yr),isAndroid:oe(mo),isOSX:oe(ur),isLinux:oe(ti),isSolaris:oe(eo),isFreeBSD:oe(Jo),isChromeOS:oe(Qi)}},di={unknown:Io,nu:Zo,windows:un(mn),ios:un(Yr),android:un(mo),linux:un(ti),osx:un(ur),solaris:un(eo),freebsd:un(Jo),chromeos:un(Qi)},Fi=function(E,I,H){var oe=Ko.browsers(),Ae=Ko.oses(),St=I.bind(function(Tr){return $t(oe,Tr)}).orThunk(function(){return an(oe,E)}).fold(Yo.unknown,Yo.nu),xn=kn(Ae,E).fold(di.unknown,di.nu),_n=ir(xn,St,E,H);return{browser:St,os:xn,deviceType:_n}},Br={detect:Fi},ua=function(E){return window.matchMedia(E).matches},cr=Go(function(){return Br.detect(navigator.userAgent,qe.from(navigator.userAgentData),ua)}),to=function(){return cr()},$r=function(E,I,H){return(E.compareDocumentPosition(I)&H)!=0},go=function(E,I){return $r(E,I,Node.DOCUMENT_POSITION_CONTAINED_BY)},Sa=1,Gr=function(E,I){var H=I||document,oe=H.createElement("div");if(oe.innerHTML=E,!oe.hasChildNodes()||oe.childNodes.length>1)throw console.error("HTML does not have a single root node",E),new Error("HTML must have a single root node");return zo(oe.childNodes[0])},$o=function(E,I){var H=I||document,oe=H.createElement(E);return zo(oe)},To=function(E,I){var H=I||document,oe=H.createTextNode(E);return zo(oe)},zo=function(E){if(E==null)throw new Error("Node cannot be null or undefined");return{dom:E}},mi=function(E,I,H){return qe.from(E.dom.elementFromPoint(I,H)).map(zo)},pa={fromHtml:Gr,fromTag:$o,fromText:To,fromDom:zo,fromPoint:mi},Ha=function(E,I){var H=E.dom;if(H.nodeType!==Sa)return!1;var oe=H;if(oe.matches!==void 0)return oe.matches(I);if(oe.msMatchesSelector!==void 0)return oe.msMatchesSelector(I);if(oe.webkitMatchesSelector!==void 0)return oe.webkitMatchesSelector(I);if(oe.mozMatchesSelector!==void 0)return oe.mozMatchesSelector(I);throw new Error("Browser lacks native selectors")},pn=function(E,I){return E.dom===I.dom},Cn=function(E,I){var H=E.dom,oe=I.dom;return H===oe?!1:H.contains(oe)},Xn=function(E,I){return go(E.dom,I.dom)},Na=function(E,I){return to().browser.isIE()?Xn(E,I):Cn(E,I)},yu=Ha,gi=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),Pi=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),gr=tinymce.util.Tools.resolve("tinymce.util.VK"),hi=Object.keys,Xa=function(E,I){for(var H=hi(E),oe=0,Ae=H.length;oe<Ae;oe++){var St=H[oe],xn=E[St];I(xn,St)}},ee=function(E){return function(I,H){E[H]=I}},we=function(E,I,H,oe){var Ae={};return Xa(E,function(St,xn){(I(St,xn)?H:oe)(St,xn)}),Ae},Oe=function(E,I){var H={};return we(E,I,ee(H),Fr),H};typeof window!="undefined"||Function("return this;")();var Fe=function(E){var I=E.dom.nodeName;return I.toLowerCase()},Dt=function(E){return E.dom.nodeType},G=function(E){return function(I){return Dt(I)===E}},le=G(Sa),Be=function(E){return function(I){return le(I)&&Fe(I)===E}},Le=function(E,I,H){if(Ut(H)||An(H)||ia(H))E.setAttribute(I,H+"");else throw console.error("Invalid call to Attribute.set. Key ",I,":: Value ",H,":: Element ",E),new Error("Attribute value was not simple")},at=function(E,I){var H=E.dom;Xa(I,function(oe,Ae){Le(H,Ae,oe)})},Rt=function(E){return me(E.dom.attributes,function(I,H){return I[H.name]=H.value,I},{})},Zt=function(E){return qe.from(E.dom.parentNode).map(pa.fromDom)},Rn=function(E){return bt(E.dom.childNodes,pa.fromDom)},Yn=function(E,I){var H=E.dom.childNodes;return qe.from(H[I]).map(pa.fromDom)},sr=function(E){return Yn(E,0)},Wr=function(E){return Yn(E,E.dom.childNodes.length-1)},Da=function(E,I){var H=Zt(E);H.each(function(oe){oe.dom.insertBefore(I.dom,E.dom)})},et=function(E,I){E.dom.appendChild(I.dom)},Jr=function(E,I){rn(I,function(H){Da(E,H)})},Jn=function(E,I){rn(I,function(H){et(E,H)})},Ar=function(E){var I=E.dom;I.parentNode!==null&&I.parentNode.removeChild(I)},io=function(E,I){return pa.fromDom(E.dom.cloneNode(I))},wr=function(E){return io(E,!0)},sc=function(E,I){var H=pa.fromTag(I),oe=Rt(E);return at(H,oe),H},su=function(E,I){var H=sc(E,I);Da(E,H);var oe=Rn(E);return Jn(H,oe),Ar(E),H},lu=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),ni=tinymce.util.Tools.resolve("tinymce.util.Tools"),ie=function(E){return function(I){return I&&I.nodeName.toLowerCase()===E}},Se=function(E){return function(I){return I&&E.test(I.nodeName)}},Ne=function(E){return E&&E.nodeType===3},De=Se(/^(OL|UL|DL)$/),z=Se(/^(OL|UL)$/),ce=ie("ol"),ke=Se(/^(LI|DT|DD)$/),Ue=Se(/^(DT|DD)$/),Gt=Se(/^(TH|TD)$/),Mt=ie("br"),Xt=function(E){return E.parentNode.firstChild===E},$=function(E,I){return I&&!!E.schema.getTextBlockElements()[I.nodeName]},ue=function(E,I){return E&&E.nodeName in I},Ce=function(E,I){return Mt(I)?E.isBlock(I.nextSibling)&&!Mt(I.previousSibling):!1},ze=function(E,I,H){var oe=E.isEmpty(I);return H&&E.select("span[data-mce-type=bookmark]",I).length>0?!1:oe},Re=function(E,I){return E.isChildOf(I,E.getRoot())},xt=function(E){return E.getParam("lists_indent_on_tab",!0)},en=function(E){var I=E.getParam("forced_root_block","p");return I===!1?"":I===!0?"p":I},fn=function(E){return E.getParam("forced_root_block_attrs",{})},tr=function(E,I){var H=E.dom,oe=E.schema.getBlockElements(),Ae=H.createFragment(),St=en(E),xn,_n,Tr;if(St&&(_n=H.create(St),_n.tagName===St.toUpperCase()&&H.setAttribs(_n,fn(E)),ue(I.firstChild,oe)||Ae.appendChild(_n)),I)for(;xn=I.firstChild;){var Cr=xn.nodeName;!Tr&&(Cr!=="SPAN"||xn.getAttribute("data-mce-type")!=="bookmark")&&(Tr=!0),ue(xn,oe)?(Ae.appendChild(xn),_n=null):St?(_n||(_n=H.create(St),Ae.appendChild(_n)),_n.appendChild(xn)):Ae.appendChild(xn)}return St?Tr||_n.appendChild(H.create("br",{"data-mce-bogus":"1"})):Ae.appendChild(H.create("br")),Ae},ga=lu.DOM,fa=function(E,I,H){var oe=function(Cr){ni.each(Ae,function(fr){Cr.parentNode.insertBefore(fr,H.parentNode)}),ga.remove(Cr)},Ae=ga.select('span[data-mce-type="bookmark"]',I),St=tr(E,H),xn=ga.createRng();xn.setStartAfter(H),xn.setEndAfter(I);for(var _n=xn.extractContents(),Tr=_n.firstChild;Tr;Tr=Tr.firstChild)if(Tr.nodeName==="LI"&&E.dom.isEmpty(Tr)){ga.remove(Tr);break}E.dom.isEmpty(_n)||ga.insertAfter(_n,I),ga.insertAfter(St,I),ze(E.dom,H.parentNode)&&oe(H.parentNode),ga.remove(H),ze(E.dom,I)&&ga.remove(I)},Va=Be("dd"),Pr=Be("dt"),ba=function(E,I){Va(I)?su(I,"dt"):Pr(I)&&Zt(I).each(function(H){return fa(E,H.dom,I.dom)})},Ia=function(E){Pr(E)&&su(E,"dd")},ju=function(E,I,H){I==="Indent"?rn(H,Ia):rn(H,function(oe){return ba(E,oe)})},Ln=function(E,I){if(Ne(E))return{container:E,offset:I};var H=gi.getNode(E,I);return Ne(H)?{container:H,offset:I>=E.childNodes.length?H.data.length:0}:H.previousSibling&&Ne(H.previousSibling)?{container:H.previousSibling,offset:H.previousSibling.data.length}:H.nextSibling&&Ne(H.nextSibling)?{container:H.nextSibling,offset:0}:{container:E,offset:I}},_f=function(E){var I=E.cloneRange(),H=Ln(E.startContainer,E.startOffset);I.setStart(H.container,H.offset);var oe=Ln(E.endContainer,E.endOffset);return I.setEnd(oe.container,oe.offset),I},hr=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),ho=function(E,I){var H=I||E.selection.getStart(!0);return E.dom.getParent(H,"OL,UL,DL",wu(E,H))},ql=function(E,I){return E&&I.length===1&&I[0]===E},nt=function(E){return ut(E.querySelectorAll("ol,ul,dl"),De)},po=function(E){var I=ho(E),H=E.selection.getSelectedBlocks();return ql(I,H)?nt(I):ut(H,function(oe){return De(oe)&&I!==oe})},rs=function(E,I){var H=ni.map(I,function(oe){var Ae=E.dom.getParent(oe,"li,dd,dt",wu(E,oe));return Ae||oe});return hr.unique(H)},In=function(E){var I=E.selection.getSelectedBlocks();return ut(rs(E,I),ke)},Mf=function(E){return ut(In(E),Ue)},wu=function(E,I){var H=E.dom.getParents(I,"TD,TH");return H.length>0?H[0]:E.getBody()},Eo=function(E,I){var H=E.dom.getParents(I,"ol,ul",wu(E,I));return na(H)},Mv=function(E){var I=Eo(E,E.selection.getStart()),H=ut(E.selection.getSelectedBlocks(),z);return I.toArray().concat(H)},Je=function(E){var I=Mv(E);return as(E,I)},as=function(E,I){var H=bt(I,function(oe){return Eo(E,oe).getOr(oe)});return hr.unique(H)},B=function(E,I,H){return H===void 0&&(H=mr),E.exists(function(oe){return H(oe,I)})},W=function(E,I,H){return E.isSome()&&I.isSome()?qe.some(H(E.getOrDie(),I.getOrDie())):qe.none()},se=function(E,I){var H=I||document,oe=H.createDocumentFragment();return rn(E,function(Ae){oe.appendChild(Ae.dom)}),pa.fromDom(oe)},Ie=function(E,I,H){return E.fire("ListMutation",{action:I,element:H})},Z=function(E){return E.style!==void 0&&jt(E.style.getPropertyValue)},Zn=function(E,I,H){if(!Ut(H))throw console.error("Invalid call to CSS.set. Property ",I,":: Value ",H,":: Element ",E),new Error("CSS value must be a string: "+H);Z(E)&&E.style.setProperty(I,H)},ca=function(E,I,H){var oe=E.dom;Zn(oe,I,H)},$a=function(E,I){et(E.item,I.list)},Oc=function(E){for(var I=1;I<E.length;I++)$a(E[I-1],E[I])},xe=function(E,I){W(na(E),D(I),$a)},bo=function(E,I){var H={list:pa.fromTag(I,E),item:pa.fromTag("li",E)};return et(H.list,H.item),H},Dc=function(E,I,H){for(var oe=[],Ae=0;Ae<H;Ae++)oe.push(bo(E,I.listType));return oe},el=function(E,I){for(var H=0;H<E.length-1;H++)ca(E[H].item,"list-style-type","none");na(E).each(function(oe){at(oe.list,I.listAttributes),at(oe.item,I.itemAttributes),Jn(oe.item,I.content)})},Cu=function(E,I){Fe(E.list)!==I.listType&&(E.list=su(E.list,I.listType)),at(E.list,I.listAttributes)},uo=function(E,I,H){var oe=pa.fromTag("li",E);return at(oe,I),Jn(oe,H),oe},aa=function(E,I){et(E.list,I),E.item=I},Rc=function(E,I,H){var oe=I.slice(0,H.depth);return na(oe).each(function(Ae){var St=uo(E,H.itemAttributes,H.content);aa(Ae,St),Cu(Ae,H)}),oe},va=function(E,I,H){var oe=Dc(E,H,H.depth-I.length);return Oc(oe),el(oe,H),xe(I,oe),I.concat(oe)},Fv=function(E,I){var H=me(I,function(oe,Ae){return Ae.depth>oe.length?va(E,oe,Ae):Rc(E,oe,Ae)},[]);return D(H).map(function(oe){return oe.list})},Bn=function(E){return yu(E,"OL,UL")},os=function(E){return sr(E).exists(Bn)},yo=function(E){return Wr(E).exists(Bn)},Ff=function(E){return E.depth>0},eu=function(E){return E.isSelected},Yh=function(E){var I=Rn(E),H=yo(E)?I.slice(0,-1):I;return bt(H,wr)},Ft=function(E,I,H){return Zt(E).filter(le).map(function(oe){return{depth:I,dirty:!1,isSelected:H,content:Yh(E),itemAttributes:Rt(E),listAttributes:Rt(oe),listType:Fe(oe)}})},lc=function(E,I){switch(E){case"Indent":I.depth++;break;case"Outdent":I.depth--;break;case"Flatten":I.depth=0}I.dirty=!0},W0=function(E,I){E.listType=I.listType,E.listAttributes=Kt({},I.listAttributes)},j0=function(E){E.listAttributes=Oe(E.listAttributes,function(I,H){return H!=="start"})},Gl=function(E,I){var H=E[I].depth,oe=function(St){return St.depth===H&&!St.dirty},Ae=function(St){return St.depth<H};return Y(Oa(E.slice(0,I)),oe,Ae).orThunk(function(){return Y(E.slice(I+1),oe,Ae)})},Kl=function(E){return rn(E,function(I,H){Gl(E,H).fold(function(){I.dirty&&j0(I)},function(oe){return W0(I,oe)})}),E},fc=function(E){var I=E,H=function(){return I},oe=function(Ae){I=Ae};return{get:H,set:oe}},Bo=function(E,I,H,oe){return sr(oe).filter(Bn).fold(function(){I.each(function(xn){pn(xn.start,oe)&&H.set(!0)});var Ae=Ft(oe,E,H.get());I.each(function(xn){pn(xn.end,oe)&&H.set(!1)});var St=Wr(oe).filter(Bn).map(function(xn){return Pf(E,I,H,xn)}).getOr([]);return Ae.toArray().concat(St)},function(Ae){return Pf(E,I,H,Ae)})},Pf=function(E,I,H,oe){return At(Rn(oe),function(Ae){var St=Bn(Ae)?Pf:Bo,xn=E+1;return St(xn,I,H,Ae)})},_a=function(E,I){var H=fc(!1),oe=0;return bt(E,function(Ae){return{sourceList:Ae,entries:Pf(oe,I,H,Ae)}})},Pv=function(E,I){var H=Kl(I);return bt(H,function(oe){var Ae=se(oe.content);return pa.fromDom(tr(E,Ae.dom))})},tl=function(E,I){var H=Kl(I);return Fv(E.contentDocument,H).toArray()},qu=function(E,I){return At(Rr(I,Ff),function(H){var oe=D(H).exists(Ff);return oe?tl(E,H):Pv(E,H)})},Ya=function(E,I){rn(ut(E,eu),function(H){return lc(I,H)})},Wd=function(E){var I=bt(In(E),pa.fromDom);return W(Dn(I,it(os)),Dn(Oa(I),it(os)),function(H,oe){return{start:H,end:oe}})},jd=function(E,I,H){var oe=_a(I,Wd(E));rn(oe,function(Ae){Ya(Ae.entries,H);var St=qu(E,Ae.entries);rn(St,function(xn){Ie(E,H==="Indent"?"IndentList":"OutdentList",xn.dom)}),Jr(Ae.sourceList,St),Ar(Ae.sourceList)})},Su=function(E,I){var H=bt(Je(E),pa.fromDom),oe=bt(Mf(E),pa.fromDom),Ae=!1;if(H.length||oe.length){var St=E.selection.getBookmark();jd(E,H,I),ju(E,I,oe),E.selection.moveToBookmark(St),E.selection.setRng(_f(E.selection.getRng())),E.nodeChanged(),Ae=!0}return Ae},Lo=function(E){return Su(E,"Indent")},qd=function(E){return Su(E,"Outdent")},Es=function(E){return Su(E,"Flatten")},Gd=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager"),Bc=lu.DOM,ks=function(E){var I={},H=function(oe){var Ae=E[oe?"startContainer":"endContainer"],St=E[oe?"startOffset":"endOffset"];if(Ae.nodeType===1){var xn=Bc.create("span",{"data-mce-type":"bookmark"});Ae.hasChildNodes()?(St=Math.min(St,Ae.childNodes.length-1),oe?Ae.insertBefore(xn,Ae.childNodes[St]):Bc.insertAfter(xn,Ae.childNodes[St])):Ae.appendChild(xn),Ae=xn,St=0}I[oe?"startContainer":"endContainer"]=Ae,I[oe?"startOffset":"endOffset"]=St};return H(!0),E.collapsed||H(),I},Nf=function(E){var I=function(oe){var Ae,St=function(Tr){for(var Cr=Tr.parentNode.firstChild,fr=0;Cr;){if(Cr===Tr)return fr;(Cr.nodeType!==1||Cr.getAttribute("data-mce-type")!=="bookmark")&&fr++,Cr=Cr.nextSibling}return-1},xn=Ae=E[oe?"startContainer":"endContainer"],_n=E[oe?"startOffset":"endOffset"];!xn||(xn.nodeType===1&&(_n=St(xn),xn=xn.parentNode,Bc.remove(Ae),!xn.hasChildNodes()&&Bc.isBlock(xn)&&xn.appendChild(Bc.create("br"))),E[oe?"startContainer":"endContainer"]=xn,E[oe?"startOffset":"endOffset"]=_n)};I(!0),I();var H=Bc.createRng();return H.setStart(E.startContainer,E.startOffset),E.endContainer&&H.setEnd(E.endContainer,E.endOffset),_f(H)},ko=function(E){switch(E){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},ri=function(E){return/\btox\-/.test(E.className)},Gu=function(E,I,H){var oe=function(St){var xn=Y(St.parents,De,Gt).filter(function(_n){return _n.nodeName===I&&!ri(_n)}).isSome();H(xn)},Ae=E.dom.getParents(E.selection.getNode());return oe({parents:Ae}),E.on("NodeChange",oe),function(){return E.off("NodeChange",oe)}},Jh=function(E,I,H){var oe=H["list-style-type"]?H["list-style-type"]:null;E.setStyle(I,"list-style-type",oe)},vc=function(E,I){ni.each(I,function(H,oe){E.setAttribute(oe,H)})},As=function(E,I,H){vc(I,H["list-attributes"]),ni.each(E.select("li",I),function(oe){vc(oe,H["list-item-attributes"])})},Nv=function(E,I,H){Jh(E,I,H),As(E,I,H)},pi=function(E,I,H){ni.each(H,function(oe){var Ae;return E.setStyle(I,(Ae={},Ae[oe]="",Ae))})},is=function(E,I,H,oe){var Ae=I[H?"startContainer":"endContainer"],St=I[H?"startOffset":"endOffset"];for(Ae.nodeType===1&&(Ae=Ae.childNodes[Math.min(St,Ae.childNodes.length-1)]||Ae),!H&&Mt(Ae.nextSibling)&&(Ae=Ae.nextSibling);Ae.parentNode!==oe;){if($(E,Ae)||/^(TD|TH)$/.test(Ae.parentNode.nodeName))return Ae;Ae=Ae.parentNode}return Ae},vg=function(E,I,H){for(var oe=[],Ae=E.dom,St=is(E,I,!0,H),xn=is(E,I,!1,H),_n,Tr=[],Cr=St;Cr&&(Tr.push(Cr),Cr!==xn);Cr=Cr.nextSibling);return ni.each(Tr,function(fr){if($(E,fr)){oe.push(fr),_n=null;return}if(Ae.isBlock(fr)||Mt(fr)){Mt(fr)&&Ae.remove(fr),_n=null;return}var Tu=fr.nextSibling;if(Gd.isBookmarkNode(fr)&&(De(Tu)||$(E,Tu)||!Tu&&fr.parentNode===H)){_n=null;return}_n||(_n=Ae.create("p"),fr.parentNode.insertBefore(_n,fr),oe.push(_n)),_n.appendChild(fr)}),oe},bi=function(E,I,H){var oe=E.getStyle(I,"list-style-type"),Ae=H?H["list-style-type"]:"";return Ae=Ae===null?"":Ae,oe===Ae},If=function(E,I,H){var oe=E.selection.getRng(),Ae="LI",St=wu(E,E.selection.getStart(!0)),xn=E.dom;if(xn.getContentEditable(E.selection.getNode())!=="false"){I=I.toUpperCase(),I==="DL"&&(Ae="DT");var _n=ks(oe),Tr=vg(E,oe,St);ni.each(Tr,function(Cr){var fr,Tu=Cr.previousSibling,Ku=Cr.parentNode;ke(Ku)||(Tu&&De(Tu)&&Tu.nodeName===I&&bi(xn,Tu,H)?(fr=Tu,Cr=xn.rename(Cr,Ae),Tu.appendChild(Cr)):(fr=xn.create(I),Cr.parentNode.insertBefore(fr,Cr),fr.appendChild(Cr),Cr=xn.rename(Cr,Ae)),pi(xn,Cr,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),Nv(xn,fr,H),Iv(E.dom,fr))}),E.selection.setRng(Nf(_n))}},$f=function(E,I){return E&&I&&De(E)&&E.nodeName===I.nodeName},Xl=function(E,I,H){var oe=E.getStyle(I,"list-style-type",!0),Ae=E.getStyle(H,"list-style-type",!0);return oe===Ae},Yl=function(E,I){return E.className===I.className},_o=function(E,I,H){return $f(I,H)&&Xl(E,I,H)&&Yl(I,H)},Iv=function(E,I){var H,oe;if(H=I.nextSibling,_o(E,I,H)){for(;oe=H.firstChild;)I.appendChild(oe);E.remove(H)}if(H=I.previousSibling,_o(E,I,H)){for(;oe=H.lastChild;)I.insertBefore(oe,I.firstChild);E.remove(H)}},nl=function(E,I,H,oe){if(I.nodeName!==H){var Ae=E.dom.rename(I,H);Nv(E.dom,Ae,oe),Ie(E,ko(H),Ae)}else Nv(E.dom,I,oe),Ie(E,ko(H),I)},Os=function(E,I,H,oe,Ae){var St=De(I);if(St&&I.nodeName===oe&&!us(Ae))Es(E);else{If(E,oe,Ae);var xn=ks(E.selection.getRng()),_n=St?Ro([I],H):H;ni.each(_n,function(Tr){nl(E,Tr,oe,Ae)}),E.selection.setRng(Nf(xn))}},us=function(E){return"list-style-type"in E},co=function(E,I,H,oe){if(I!==E.getBody())if(I)if(I.nodeName===H&&!us(oe)&&!ri(I))Es(E);else{var Ae=ks(E.selection.getRng());Nv(E.dom,I,oe);var St=E.dom.rename(I,H);Iv(E.dom,St),E.selection.setRng(Nf(Ae)),If(E,H,oe),Ie(E,ko(H),St)}else If(E,H,oe),Ie(E,ko(H),I)},rl=function(E,I,H){var oe=ho(E),Ae=po(E),St=Vn(H)?H:{};Ae.length>0?Os(E,oe,Ae,I,St):co(E,oe,I,St)},dg=lu.DOM,$v=function(E,I){var H=I.parentNode;if(H.nodeName==="LI"&&H.firstChild===I){var oe=H.previousSibling;oe&&oe.nodeName==="LI"?(oe.appendChild(I),ze(E,H)&&dg.remove(H)):dg.setStyle(H,"listStyleType","none")}if(De(H)){var oe=H.previousSibling;oe&&oe.nodeName==="LI"&&oe.appendChild(I)}},Kd=function(E,I){var H=ni.grep(E.select("ol,ul",I));ni.each(H,function(oe){$v(E,oe)})},Xd=function(E,I,H,oe){var Ae=I.startContainer,St=I.startOffset;if(Ne(Ae)&&(H?St<Ae.data.length:St>0))return Ae;var xn=E.schema.getNonEmptyElements();Ae.nodeType===1&&(Ae=gi.getNode(Ae,St));var _n=new Pi(Ae,oe);for(H&&Ce(E.dom,Ae)&&_n.next();Ae=_n[H?"next":"prev2"]();)if(Ae.nodeName==="LI"&&!Ae.hasChildNodes()||xn[Ae.nodeName]||Ne(Ae)&&Ae.data.length>0)return Ae},mg=function(E,I){var H=I.childNodes;return H.length===1&&!De(H[0])&&E.isBlock(H[0])},gg=function(E,I){mg(E,I)&&E.remove(I.firstChild,!0)},hg=function(E,I,H){var oe,Ae=mg(E,H)?H.firstChild:H;if(gg(E,I),!ze(E,I,!0))for(;oe=I.firstChild;)Ae.appendChild(oe)},Ni=function(E,I,H){var oe,Ae=I.parentNode;if(!(!Re(E,I)||!Re(E,H))){De(H.lastChild)&&(oe=H.lastChild),Ae===H.lastChild&&Mt(Ae.previousSibling)&&E.remove(Ae.previousSibling);var St=H.lastChild;St&&Mt(St)&&I.hasChildNodes()&&E.remove(St),ze(E,H,!0)&&E.$(H).empty(),hg(E,I,H),oe&&H.appendChild(oe);var xn=Na(pa.fromDom(H),pa.fromDom(I)),_n=xn?E.getParents(I,De,H):[];E.remove(I),rn(_n,function(Tr){ze(E,Tr)&&Tr!==E.getRoot()&&E.remove(Tr)})}},zf=function(E,I,H){E.dom.$(H).empty(),Ni(E.dom,I,H),E.selection.setCursorLocation(H,0)},Yd=function(E,I,H,oe){var Ae=E.dom;if(Ae.isEmpty(oe))zf(E,H,oe);else{var St=ks(I);Ni(Ae,H,oe),E.selection.setRng(Nf(St))}},Mn=function(E,I,H,oe){var Ae=ks(I);Ni(E.dom,H,oe);var St=Nf(Ae);E.selection.setRng(St)},so=function(E,I){var H=E.dom,oe=E.selection,Ae=oe.getStart(),St=wu(E,Ae),xn=H.getParent(oe.getStart(),"LI",St);if(xn){var _n=xn.parentNode;if(_n===E.getBody()&&ze(H,_n))return!0;var Tr=_f(oe.getRng()),Cr=H.getParent(Xd(E,Tr,I,St),"LI",St);if(Cr&&Cr!==xn)return E.undoManager.transact(function(){I?Yd(E,Tr,Cr,xn):Xt(xn)?qd(E):Mn(E,Tr,xn,Cr)}),!0;if(!Cr&&!I&&Tr.startOffset===0&&Tr.endOffset===0)return E.undoManager.transact(function(){Es(E)}),!0}return!1},Ii=function(E,I,H){var oe=E.getParent(I.parentNode,E.isBlock,H);E.remove(I),oe&&E.isEmpty(oe)&&E.remove(oe)},ai=function(E,I){var H=E.dom,oe=E.selection.getStart(),Ae=wu(E,oe),St=H.getParent(oe,H.isBlock,Ae);if(St&&H.isEmpty(St)){var xn=_f(E.selection.getRng()),_n=H.getParent(Xd(E,xn,I,Ae),"LI",Ae);if(_n)return E.undoManager.transact(function(){Ii(H,St,Ae),Iv(H,_n.parentNode),E.selection.select(_n,!0),E.selection.collapse(I)}),!0}return!1},Jd=function(E,I){return so(E,I)||ai(E,I)},_c=function(E){var I=E.selection.getStart(),H=wu(E,I),oe=E.dom.getParent(I,"LI,DT,DD",H);return oe||In(E).length>0?(E.undoManager.transact(function(){E.execCommand("Delete"),Kd(E.dom,E.getBody())}),!0):!1},pg=function(E,I){return E.selection.isCollapsed()?Jd(E,I):_c(E)},dc=function(E){E.on("keydown",function(I){I.keyCode===gr.BACKSPACE?pg(E,!1)&&I.preventDefault():I.keyCode===gr.DELETE&&pg(E,!0)&&I.preventDefault()})},Ja=function(E){return{backspaceDelete:function(I){pg(E,I)}}},bg=function(E,I){var H=ho(E);E.undoManager.transact(function(){Vn(I.styles)&&E.dom.setStyles(H,I.styles),Vn(I.attrs)&&Xa(I.attrs,function(oe,Ae){return E.dom.setAttrib(H,Ae,oe)})})},gn=function(E){var I=Oa(ma(E).split("")),H=bt(I,function(oe,Ae){var St=oe.toUpperCase().charCodeAt(0)-"A".charCodeAt(0)+1;return Math.pow(26,Ae)*St});return me(H,function(oe,Ae){return oe+Ae},0)},Jl=function(E){if(E--,E<0)return"";var I=E%26,H=Math.floor(E/26),oe=Jl(H),Ae=String.fromCharCode("A".charCodeAt(0)+I);return oe+Ae},yg=function(E){return/^[A-Z]+$/.test(E)},fu=function(E){return/^[a-z]+$/.test(E)},Ho=function(E){return/^[0-9]+$/.test(E)},q0=function(E){return Ho(E)?2:yg(E)?0:fu(E)?1:qr(E)?3:4},cs=function(E){switch(q0(E)){case 2:return qe.some({listStyleType:qe.none(),start:E});case 0:return qe.some({listStyleType:qe.some("upper-alpha"),start:gn(E).toString()});case 1:return qe.some({listStyleType:qe.some("lower-alpha"),start:gn(E).toString()});case 3:return qe.some({listStyleType:qe.none(),start:""});case 4:return qe.none()}},Ua=function(E){var I=parseInt(E.start,10);return B(E.listStyleType,"upper-alpha")?Jl(I):B(E.listStyleType,"lower-alpha")?Jl(I).toLowerCase():E.start},wg=function(E){var I=ho(E);!ce(I)||E.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:Ua({start:E.dom.getAttrib(I,"start","1"),listStyleType:qe.some(E.dom.getStyle(I,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:function(H){var oe=H.getData();cs(oe.start).each(function(Ae){E.execCommand("mceListUpdate",!1,{attrs:{start:Ae.start==="1"?"":Ae.start},styles:{"list-style-type":Ae.listStyleType.getOr("")}})}),H.close()}})},$n=function(E,I){return function(){var H=ho(E);return H&&H.nodeName===I}},ss=function(E){E.addCommand("mceListProps",function(){wg(E)})},G0=function(E){E.on("BeforeExecCommand",function(I){var H=I.command.toLowerCase();H==="indent"?Lo(E):H==="outdent"&&qd(E)}),E.addCommand("InsertUnorderedList",function(I,H){rl(E,"UL",H)}),E.addCommand("InsertOrderedList",function(I,H){rl(E,"OL",H)}),E.addCommand("InsertDefinitionList",function(I,H){rl(E,"DL",H)}),E.addCommand("RemoveList",function(){Es(E)}),ss(E),E.addCommand("mceListUpdate",function(I,H){Vn(H)&&bg(E,H)}),E.addQueryStateHandler("InsertUnorderedList",$n(E,"UL")),E.addQueryStateHandler("InsertOrderedList",$n(E,"OL")),E.addQueryStateHandler("InsertDefinitionList",$n(E,"DL"))},xu=function(E){E.on("keydown",function(I){I.keyCode!==gr.TAB||gr.metaKeyPressed(I)||E.undoManager.transact(function(){(I.shiftKey?qd(E):Lo(E))&&I.preventDefault()})})},K0=function(E){xt(E)&&xu(E),dc(E)},Cg=function(E){var I=function(H){return function(){return E.execCommand(H)}};E.hasPlugin("advlist")||(E.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:I("InsertOrderedList"),onSetup:function(H){return Gu(E,"OL",H.setActive)}}),E.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:I("InsertUnorderedList"),onSetup:function(H){return Gu(E,"UL",H.setActive)}}))},zv=function(E){var I={text:"List properties...",icon:"ordered-list",onAction:function(){return E.execCommand("mceListProps")},onSetup:function(H){return Gu(E,"OL",function(oe){return H.setDisabled(!oe)})}};E.ui.registry.addMenuItem("listprops",I),E.ui.registry.addContextMenu("lists",{update:function(H){var oe=ho(E,H);return ce(oe)?["listprops"]:[]}})};function Zd(){Nt.add("lists",function(E){return E.hasPlugin("rtc",!0)===!1?(K0(E),G0(E)):ss(E),Cg(E),zv(E),Ja(E)})}Zd()})();(function(){var Nt=tinymce.util.Tools.resolve("tinymce.PluginManager"),on=function(){return on=Object.assign||function(we){for(var Oe,Fe=1,Dt=arguments.length;Fe<Dt;Fe++){Oe=arguments[Fe];for(var G in Oe)Object.prototype.hasOwnProperty.call(Oe,G)&&(we[G]=Oe[G])}return we},on.apply(this,arguments)},vn=function(ee){var we=typeof ee;return ee===null?"null":we==="object"&&(Array.prototype.isPrototypeOf(ee)||ee.constructor&&ee.constructor.name==="Array")?"array":we==="object"&&(String.prototype.isPrototypeOf(ee)||ee.constructor&&ee.constructor.name==="String")?"string":we},or=function(ee){return function(we){return vn(we)===ee}},Ut=or("string"),Vn=or("object"),Sn=or("array"),An=function(ee){return ee==null},jt=function(ee){return!An(ee)},ia=function(){},Fr=function(ee){return function(){return ee}},un=function(ee){return ee},br=Fr(!1),mr=Fr(!0),it=function(){return He},He=function(){var ee=function(Fe){return Fe()},we=un,Oe={fold:function(Fe,Dt){return Fe()},isSome:br,isNone:mr,getOr:we,getOrThunk:ee,getOrDie:function(Fe){throw new Error(Fe||"error: getOrDie called on none.")},getOrNull:Fr(null),getOrUndefined:Fr(void 0),or:we,orThunk:ee,map:it,each:ia,bind:it,exists:br,forall:mr,filter:function(){return it()},toArray:function(){return[]},toString:Fr("none()")};return Oe}(),wn=function(ee){var we=Fr(ee),Oe=function(){return Dt},Fe=function(G){return G(ee)},Dt={fold:function(G,le){return le(ee)},isSome:mr,isNone:br,getOr:we,getOrThunk:we,getOrDie:we,getOrNull:we,getOrUndefined:we,or:Oe,orThunk:Oe,map:function(G){return wn(G(ee))},each:function(G){G(ee)},bind:Fe,exists:Fe,forall:Fe,filter:function(G){return G(ee)?Dt:He},toArray:function(){return[ee]},toString:function(){return"some("+ee+")"}};return Dt},wt=function(ee){return ee==null?He:wn(ee)},Un={some:wn,none:it,from:wt},re=Array.prototype.push,Te=function(ee,we){for(var Oe=0,Fe=ee.length;Oe<Fe;Oe++){var Dt=ee[Oe];we(Dt,Oe)}},qe=function(ee){for(var we=[],Oe=0,Fe=ee.length;Oe<Fe;++Oe){if(!Sn(ee[Oe]))throw new Error("Arr.flatten item "+Oe+" was not an array, input: "+ee);re.apply(we,ee[Oe])}return we},gt=function(ee){var we=ee,Oe=function(){return we},Fe=function(Dt){we=Dt};return{get:Oe,set:Fe}},pt=Object.keys,bt=Object.hasOwnProperty,rn=function(ee,we){for(var Oe=pt(ee),Fe=0,Dt=Oe.length;Fe<Dt;Fe++){var G=Oe[Fe],le=ee[G];we(le,G)}},ut=function(ee,we){return Rr(ee,we)?Un.from(ee[we]):Un.none()},Rr=function(ee,we){return bt.call(ee,we)},me=function(ee){return ee.getParam("media_scripts")},Y=function(ee){return ee.getParam("audio_template_callback")},Dn=function(ee){return ee.getParam("video_template_callback")},Aa=function(ee){return ee.getParam("media_live_embeds",!0)},At=function(ee){return ee.getParam("media_filter_html",!0)},Oa=function(ee){return ee.getParam("media_url_resolver")},Nn=function(ee){return ee.getParam("media_alt_source",!0)},D=function(ee){return ee.getParam("media_poster",!0)},na=function(ee){return ee.getParam("media_dimensions",!0)},_t=tinymce.util.Tools.resolve("tinymce.util.Tools"),Kt=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Ro=tinymce.util.Tools.resolve("tinymce.html.SaxParser"),Go=function(ee,we){if(ee){for(var Oe=0;Oe<ee.length;Oe++)if(we.indexOf(ee[Oe].filter)!==-1)return ee[Oe]}},ir=Kt.DOM,la=function(ee){return ee.replace(/px$/,"")},te=function(ee){var we=ee.map.style,Oe=we?ir.parseStyle(we):{};return{type:"ephox-embed-iri",source:ee.map["data-ephox-embed-iri"],altsource:"",poster:"",width:ut(Oe,"max-width").map(la).getOr(""),height:ut(Oe,"max-height").map(la).getOr("")}},qa=function(ee,we){var Oe=gt(!1),Fe={};return Ro({validate:!1,allow_conditional_comments:!0,start:function(Dt,G){if(!Oe.get())if(Rr(G.map,"data-ephox-embed-iri"))Oe.set(!0),Fe=te(G);else{if(!Fe.source&&Dt==="param"&&(Fe.source=G.map.movie),(Dt==="iframe"||Dt==="object"||Dt==="embed"||Dt==="video"||Dt==="audio")&&(Fe.type||(Fe.type=Dt),Fe=_t.extend(G.map,Fe)),Dt==="script"){var le=Go(ee,G.map.src);if(!le)return;Fe={type:"script",source:G.map.src,width:String(le.width),height:String(le.height)}}Dt==="source"&&(Fe.source?Fe.altsource||(Fe.altsource=G.map.src):Fe.source=G.map.src),Dt==="img"&&!Fe.poster&&(Fe.poster=G.map.src)}}}).parse(we),Fe.source=Fe.source||Fe.src||Fe.data,Fe.altsource=Fe.altsource||"",Fe.poster=Fe.poster||"",Fe},yt=function(ee){var we={mp3:"audio/mpeg",m4a:"audio/x-m4a",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"},Oe=ee.toLowerCase().split(".").pop(),Fe=we[Oe];return Fe||""},Jt=tinymce.util.Tools.resolve("tinymce.html.Schema"),It=tinymce.util.Tools.resolve("tinymce.html.Writer"),$t=Kt.DOM,rt=function(ee){return/^[0-9.]+$/.test(ee)?ee+"px":ee},an=function(ee,we){rn(we,function(Oe,Fe){var Dt=""+Oe;if(ee.map[Fe])for(var G=ee.length;G--;){var le=ee[G];le.name===Fe&&(Dt?(ee.map[Fe]=Dt,le.value=Dt):(delete ee.map[Fe],ee.splice(G,1)))}else Dt&&(ee.push({name:Fe,value:Dt}),ee.map[Fe]=Dt)})},kn=function(ee,we){var Oe=we.map.style,Fe=Oe?$t.parseStyle(Oe):{};Fe["max-width"]=rt(ee.width),Fe["max-height"]=rt(ee.height),an(we,{style:$t.serializeStyle(Fe)})},Ze=["source","altsource"],Wn=function(ee,we,Oe){var Fe=It(),Dt=gt(!1),G=0,le;return Ro({validate:!1,allow_conditional_comments:!0,comment:function(Be){Fe.comment(Be)},cdata:function(Be){Fe.cdata(Be)},text:function(Be,Le){Fe.text(Be,Le)},start:function(Be,Le,at){if(!Dt.get())if(Rr(Le.map,"data-ephox-embed-iri"))Dt.set(!0),kn(we,Le);else{switch(Be){case"video":case"object":case"embed":case"img":case"iframe":we.height!==void 0&&we.width!==void 0&&an(Le,{width:we.width,height:we.height});break}if(Oe)switch(Be){case"video":an(Le,{poster:we.poster,src:""}),we.altsource&&an(Le,{src:""});break;case"iframe":an(Le,{src:we.source});break;case"source":if(G<2&&(an(Le,{src:we[Ze[G]],type:we[Ze[G]+"mime"]}),!we[Ze[G]]))return;G++;break;case"img":if(!we.poster)return;le=!0;break}}Fe.start(Be,Le,at)},end:function(Be){if(!Dt.get()){if(Be==="video"&&Oe){for(var Le=0;Le<2;Le++)if(we[Ze[Le]]){var at=[];at.map={},G<=Le&&(an(at,{src:we[Ze[Le]],type:we[Ze[Le]+"mime"]}),Fe.start("source",at,!0))}}if(we.poster&&Be==="object"&&Oe&&!le){var Rt=[];Rt.map={},an(Rt,{src:we.poster,width:we.width,height:we.height}),Fe.start("img",Rt,!0)}}Fe.end(Be)}},Jt({})).parse(ee),Fe.getContent()},ma=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],dn=function(ee){var we=ee.match(/^(https?:\/\/|www\.)(.+)$/i);return we&&we.length>1?we[1]==="www."?"https://":we[1]:"https://"},qr=function(ee,we){for(var Oe=dn(we),Fe=ee.regex.exec(we),Dt=Oe+ee.url,G=function(Be){Dt=Dt.replace("$"+Be,function(){return Fe[Be]?Fe[Be]:""})},le=0;le<Fe.length;le++)G(le);return Dt.replace(/\?$/,"")},Ur=function(ee){var we=ma.filter(function(Oe){return Oe.regex.test(ee)});return we.length>0?_t.extend({},we[0],{url:qr(we[0],ee)}):null},On=function(ee){var we=ee.allowfullscreen?' allowFullscreen="1"':"";return'<iframe src="'+ee.source+'" width="'+ee.width+'" height="'+ee.height+'"'+we+"></iframe>"},ra=function(ee){var we='<object data="'+ee.source+'" width="'+ee.width+'" height="'+ee.height+'" type="application/x-shockwave-flash">';return ee.poster&&(we+='<img src="'+ee.poster+'" width="'+ee.width+'" height="'+ee.height+'" />'),we+="</object>",we},Po=function(ee,we){return we?we(ee):'<audio controls="controls" src="'+ee.source+'">'+(ee.altsource?`
<source src="`+ee.altsource+'"'+(ee.altsourcemime?' type="'+ee.altsourcemime+'"':"")+` />
`:"")+"</audio>"},Ko=function(ee,we){return we?we(ee):'<video width="'+ee.width+'" height="'+ee.height+'"'+(ee.poster?' poster="'+ee.poster+'"':"")+` controls="controls">
<source src="`+ee.source+'"'+(ee.sourcemime?' type="'+ee.sourcemime+'"':"")+` />
`+(ee.altsource?'<source src="'+ee.altsource+'"'+(ee.altsourcemime?' type="'+ee.altsourcemime+'"':"")+` />
`:"")+"</video>"},vi=function(ee){return'<script src="'+ee.source+'"><\/script>'},No=function(ee,we){var Oe=_t.extend({},we);if(!Oe.source&&(_t.extend(Oe,qa(me(ee),Oe.embed)),!Oe.source))return"";Oe.altsource||(Oe.altsource=""),Oe.poster||(Oe.poster=""),Oe.source=ee.convertURL(Oe.source,"source"),Oe.altsource=ee.convertURL(Oe.altsource,"source"),Oe.sourcemime=yt(Oe.source),Oe.altsourcemime=yt(Oe.altsource),Oe.poster=ee.convertURL(Oe.poster,"poster");var Fe=Ur(Oe.source);if(Fe&&(Oe.source=Fe.url,Oe.type=Fe.type,Oe.allowfullscreen=Fe.allowFullscreen,Oe.width=Oe.width||String(Fe.w),Oe.height=Oe.height||String(Fe.h)),Oe.embed)return Wn(Oe.embed,Oe,!0);var Dt=Go(me(ee),Oe.source);Dt&&(Oe.type="script",Oe.width=String(Dt.width),Oe.height=String(Dt.height));var G=Y(ee),le=Dn(ee);return Oe.width=Oe.width||"300",Oe.height=Oe.height||"150",_t.each(Oe,function(Be,Le){Oe[Le]=ee.dom.encode(""+Be)}),Oe.type==="iframe"?On(Oe):Oe.sourcemime==="application/x-shockwave-flash"?ra(Oe):Oe.sourcemime.indexOf("audio")!==-1?Po(Oe,G):Oe.type==="script"?vi(Oe):Ko(Oe,le)},Ga=tinymce.util.Tools.resolve("tinymce.util.Promise"),Ka={},Xo=function(ee,we,Oe){return new Ga(function(Fe,Dt){var G=function(le){return le.html&&(Ka[ee.source]=le),Fe({url:ee.source,html:le.html?le.html:we(ee)})};Ka[ee.source]?G(Ka[ee.source]):Oe({url:ee.source},G,Dt)})},Ba=function(ee,we){return Ga.resolve({html:we(ee),url:ee.source})},vo=function(ee){return function(we){return No(ee,we)}},Ca=function(ee,we){var Oe=Oa(ee);return Oe?Xo(we,vo(ee),Oe):Ba(we,vo(ee))},Yo=function(ee){return Rr(Ka,ee)},mn=function(ee,we){return ut(we,ee).bind(function(Oe){return ut(Oe,"meta")})},Yr=function(ee,we,Oe){return function(Fe){var Dt,G=function(){return ut(ee,Fe)},le=function(){return ut(we,Fe)},Be=function(Rt){return ut(Rt,"value").bind(function(Zt){return Zt.length>0?Un.some(Zt):Un.none()})},Le=function(){return G().bind(function(Rt){return Vn(Rt)?Be(Rt).orThunk(le):le().orThunk(function(){return Un.from(Rt)})})},at=function(){return le().orThunk(function(){return G().bind(function(Rt){return Vn(Rt)?Be(Rt):Un.from(Rt)})})};return Dt={},Dt[Fe]=(Fe===Oe?Le():at()).getOr(""),Dt}},mo=function(ee,we){var Oe={};return ut(ee,"dimensions").each(function(Fe){Te(["width","height"],function(Dt){ut(we,Dt).orThunk(function(){return ut(Fe,Dt)}).each(function(G){return Oe[Dt]=G})})}),Oe},ti=function(ee,we){var Oe=we?mn(we,ee).getOr({}):{},Fe=Yr(ee,Oe,we);return on(on(on(on(on({},Fe("source")),Fe("altsource")),Fe("poster")),Fe("embed")),mo(ee,Oe))},ur=function(ee){var we=on(on({},ee),{source:{value:ut(ee,"source").getOr("")},altsource:{value:ut(ee,"altsource").getOr("")},poster:{value:ut(ee,"poster").getOr("")}});return Te(["width","height"],function(Oe){ut(ee,Oe).each(function(Fe){var Dt=we.dimensions||{};Dt[Oe]=Fe,we.dimensions=Dt})}),we},eo=function(ee){return function(we){var Oe=we&&we.msg?"Media embed handler error: "+we.msg:"Media embed handler threw unknown error.";ee.notificationManager.open({type:"error",text:Oe})}},Jo=function(ee,we){return qa(me(ee),we)},Qi=function(ee){return ee.hasAttribute("data-mce-object")||ee.hasAttribute("data-ephox-embed-iri")},Io=function(ee){var we=ee.selection.getNode(),Oe=Qi(we)?ee.serializer.serialize(we,{selection:!0}):"";return on({embed:Oe},qa(me(ee),Oe))},Zo=function(ee,we){return function(Oe){if(Ut(Oe.url)&&Oe.url.trim().length>0){var Fe=Oe.html,Dt=Jo(we,Fe),G=on(on({},Dt),{source:Oe.url,embed:Fe});ee.setData(ur(G))}}},di=function(ee,we){for(var Oe=ee.dom.select("*[data-mce-object]"),Fe=0;Fe<we.length;Fe++)for(var Dt=Oe.length-1;Dt>=0;Dt--)we[Fe]===Oe[Dt]&&Oe.splice(Dt,1);ee.selection.select(Oe[0])},Fi=function(ee,we){var Oe=ee.dom.select("*[data-mce-object]");ee.insertContent(we),di(ee,Oe),ee.nodeChanged()},Br=function(ee,we,Oe){we.embed=Wn(we.embed,we),we.embed&&(ee.source===we.source||Yo(we.source))?Fi(Oe,we.embed):Ca(Oe,we).then(function(Fe){Fi(Oe,Fe.html)}).catch(eo(Oe))},ua=function(ee){var we=Io(ee),Oe=gt(we),Fe=ur(we),Dt=function(et,Jr){var Jn=ti(Jr.getData(),"source");et.source!==Jn.source&&(Zo(Da,ee)({url:Jn.source,html:""}),Ca(ee,Jn).then(Zo(Da,ee)).catch(eo(ee)))},G=function(et){var Jr=ti(et.getData()),Jn=Jo(ee,Jr.embed);et.setData(ur(Jn))},le=function(et,Jr){var Jn=ti(et.getData(),Jr),Ar=No(ee,Jn);et.setData(ur(on(on({},Jn),{embed:Ar})))},Be=[{name:"source",type:"urlinput",filetype:"media",label:"Source"}],Le=na(ee)?[{type:"sizeinput",name:"dimensions",label:"Constrain proportions",constrain:!0}]:[],at={title:"General",name:"general",items:qe([Be,Le])},Rt={type:"textarea",name:"embed",label:"Paste your embed code below:"},Zt={title:"Embed",items:[Rt]},Rn=[];Nn(ee)&&Rn.push({name:"altsource",type:"urlinput",filetype:"media",label:"Alternative source URL"}),D(ee)&&Rn.push({name:"poster",type:"urlinput",filetype:"image",label:"Media poster (Image URL)"});var Yn={title:"Advanced",name:"advanced",items:Rn},sr=[at,Zt];Rn.length>0&&sr.push(Yn);var Wr={type:"tabpanel",tabs:sr},Da=ee.windowManager.open({title:"Insert/Edit Media",size:"normal",body:Wr,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:function(et){var Jr=ti(et.getData());Br(Oe.get(),Jr,ee),et.close()},onChange:function(et,Jr){switch(Jr.name){case"source":Dt(Oe.get(),et);break;case"embed":G(et);break;case"dimensions":case"altsource":case"poster":le(et,Jr.name);break}Oe.set(ti(et.getData()))},initialData:Fe})},cr=function(ee){var we=function(){ua(ee)};return{showDialog:we}},to=function(ee){var we=function(){ua(ee)};ee.addCommand("mceMedia",we)},$r=tinymce.util.Tools.resolve("tinymce.html.Node"),go=tinymce.util.Tools.resolve("tinymce.Env"),Sa=tinymce.util.Tools.resolve("tinymce.html.DomParser"),Gr=function(ee,we){if(At(ee)===!1)return we;var Oe=It(),Fe;return Ro({validate:!1,allow_conditional_comments:!1,comment:function(Dt){Fe||Oe.comment(Dt)},cdata:function(Dt){Fe||Oe.cdata(Dt)},text:function(Dt,G){Fe||Oe.text(Dt,G)},start:function(Dt,G,le){if(Fe=!0,!(Dt==="script"||Dt==="noscript"||Dt==="svg")){for(var Be=G.length-1;Be>=0;Be--){var Le=G[Be].name;Le.indexOf("on")===0&&(delete G.map[Le],G.splice(Be,1)),Le==="style"&&(G[Be].value=ee.dom.serializeStyle(ee.dom.parseStyle(G[Be].value),Dt))}Oe.start(Dt,G,le),Fe=!1}},end:function(Dt){Fe||Oe.end(Dt)}},Jt({})).parse(we),Oe.getContent()},$o=function(ee){var we=ee.name;return we==="iframe"||we==="video"||we==="audio"},To=function(ee,we,Oe,Fe){Fe===void 0&&(Fe=null);var Dt=ee.attr(Oe);return jt(Dt)?Dt:Rr(we,Oe)?null:Fe},zo=function(ee,we,Oe){var Fe=we.name==="img"||ee.name==="video",Dt=Fe?"300":null,G=ee.name==="audio"?"30":"150",le=Fe?G:null;we.attr({width:To(ee,Oe,"width",Dt),height:To(ee,Oe,"height",le)})},mi=function(ee,we,Oe,Fe){for(var Dt=Sa({forced_root_block:!1,validate:!1},ee.schema).parse(Fe,{context:we});Dt.firstChild;)Oe.append(Dt.firstChild)},pa=function(ee,we){var Oe=we.name,Fe=new $r("img",1);return Fe.shortEnded=!0,pn(ee,we,Fe),zo(we,Fe,{}),Fe.attr({style:we.attr("style"),src:go.transparentSrc,"data-mce-object":Oe,class:"mce-object mce-object-"+Oe}),Fe},Ha=function(ee,we){var Oe=we.name,Fe=new $r("span",1);Fe.attr({contentEditable:"false",style:we.attr("style"),"data-mce-object":Oe,class:"mce-preview-object mce-object-"+Oe}),pn(ee,we,Fe);var Dt=ee.dom.parseStyle(we.attr("style")),G=new $r(Oe,1);if(zo(we,G,Dt),G.attr({src:we.attr("src"),style:we.attr("style"),class:we.attr("class")}),Oe==="iframe")G.attr({allowfullscreen:we.attr("allowfullscreen"),frameborder:"0"});else{var le=["controls","crossorigin","currentTime","loop","muted","poster","preload"];Te(le,function(at){G.attr(at,we.attr(at))});var Be=Fe.attr("data-mce-html");jt(Be)&&mi(ee,Oe,G,Be)}var Le=new $r("span",1);return Le.attr("class","mce-shim"),Fe.append(G),Fe.append(Le),Fe},pn=function(ee,we,Oe){for(var Fe=we.attributes,Dt=Fe.length;Dt--;){var G=Fe[Dt].name,le=Fe[Dt].value;G!=="width"&&G!=="height"&&G!=="style"&&((G==="data"||G==="src")&&(le=ee.convertURL(le,G)),Oe.attr("data-mce-p-"+G,le))}var Be=we.firstChild&&we.firstChild.value;Be&&(Oe.attr("data-mce-html",escape(Gr(ee,Be))),Oe.firstChild=null)},Cn=function(ee){var we=ee.attr("class");return we&&/\btiny-pageembed\b/.test(we)},Xn=function(ee){for(;ee=ee.parent;)if(ee.attr("data-ephox-embed-iri")||Cn(ee))return!0;return!1},Na=function(ee){return function(we){for(var Oe=we.length,Fe,Dt;Oe--;)Fe=we[Oe],!!Fe.parent&&(Fe.parent.attr("data-mce-object")||Fe.name==="script"&&(Dt=Go(me(ee),Fe.attr("src")),!Dt)||(Dt&&(Dt.width&&Fe.attr("width",Dt.width.toString()),Dt.height&&Fe.attr("height",Dt.height.toString())),$o(Fe)&&Aa(ee)&&go.ceFalse?Xn(Fe)||Fe.replace(Ha(ee,Fe)):Xn(Fe)||Fe.replace(pa(ee,Fe))))}},yu=function(ee){ee.on("preInit",function(){var we=ee.schema.getSpecialElements();_t.each("video audio iframe object".split(" "),function(Fe){we[Fe]=new RegExp("</"+Fe+"[^>]*>","gi")});var Oe=ee.schema.getBoolAttrs();_t.each("webkitallowfullscreen mozallowfullscreen allowfullscreen".split(" "),function(Fe){Oe[Fe]={}}),ee.parser.addNodeFilter("iframe,video,audio,object,embed,script",Na(ee)),ee.serializer.addAttributeFilter("data-mce-object",function(Fe,Dt){for(var G=Fe.length,le,Be,Le,at,Rt,Zt,Rn,Yn;G--;)if(le=Fe[G],!!le.parent){for(Rn=le.attr(Dt),Be=new $r(Rn,1),Rn!=="audio"&&Rn!=="script"&&(Yn=le.attr("class"),Yn&&Yn.indexOf("mce-preview-object")!==-1?Be.attr({width:le.firstChild.attr("width"),height:le.firstChild.attr("height")}):Be.attr({width:le.attr("width"),height:le.attr("height")})),Be.attr({style:le.attr("style")}),at=le.attributes,Le=at.length;Le--;){var sr=at[Le].name;sr.indexOf("data-mce-p-")===0&&Be.attr(sr.substr(11),at[Le].value)}Rn==="script"&&Be.attr("type","text/javascript"),Rt=le.attr("data-mce-html"),Rt&&(Zt=new $r("#text",3),Zt.raw=!0,Zt.value=Gr(ee,unescape(Rt)),Be.append(Zt)),le.replace(Be)}})}),ee.on("SetContent",function(){ee.$("span.mce-preview-object").each(function(we,Oe){var Fe=ee.$(Oe);Fe.find("span.mce-shim").length===0&&Fe.append('<span class="mce-shim"></span>')})})},gi=function(ee){ee.on("ResolveName",function(we){var Oe;we.target.nodeType===1&&(Oe=we.target.getAttribute("data-mce-object"))&&(we.name=Oe)})},Pi=function(ee){ee.on("click keyup touchend",function(){var we=ee.selection.getNode();we&&ee.dom.hasClass(we,"mce-preview-object")&&ee.dom.getAttrib(we,"data-mce-selected")&&we.setAttribute("data-mce-selected","2")}),ee.on("ObjectSelected",function(we){var Oe=we.target.getAttribute("data-mce-object");Oe==="script"&&we.preventDefault()}),ee.on("ObjectResized",function(we){var Oe=we.target;if(Oe.getAttribute("data-mce-object")){var Fe=Oe.getAttribute("data-mce-html");Fe&&(Fe=unescape(Fe),Oe.setAttribute("data-mce-html",escape(Wn(Fe,{width:String(we.width),height:String(we.height)}))))}})},gr=function(ee,we){return function(Oe){return ee.selection.selectorChangedWithUnbind(we.join(","),Oe.setActive).unbind}},hi=function(ee){var we=function(){return ee.execCommand("mceMedia")};ee.ui.registry.addToggleButton("media",{tooltip:"Insert/edit media",icon:"embed",onAction:we,onSetup:gr(ee,["img[data-mce-object]","span[data-mce-object]","div[data-ephox-embed-iri]"])}),ee.ui.registry.addMenuItem("media",{icon:"embed",text:"Media...",onAction:we})};function Xa(){Nt.add("media",function(ee){return to(ee),hi(ee),gi(ee),yu(ee),Pi(ee),cr(ee)})}Xa()})();(function(){var Nt=tinymce.util.Tools.resolve("tinymce.PluginManager"),on=tinymce.util.Tools.resolve("tinymce.Env"),vn=tinymce.util.Tools.resolve("tinymce.util.Tools"),or=function(it){return it.getParam("content_style","","string")},Ut=function(it){return it.getParam("content_css_cors",!1,"boolean")},Vn=function(it){var He=it.getParam("body_class","","hash");return He[it.id]||""},Sn=function(it){var He=it.getParam("body_class","","string");return He.indexOf("=")===-1?He:Vn(it)},An=function(it){var He=it.getParam("body_id","","hash");return He[it.id]||He},jt=function(it){var He=it.getParam("body_id","tinymce","string");return He.indexOf("=")===-1?He:An(it)},ia=function(it){var He="",wn=it.dom.encode,wt=or(it);He+='<base href="'+wn(it.documentBaseURI.getURI())+'">';var Un=Ut(it)?' crossorigin="anonymous"':"";vn.each(it.contentCSS,function(ut){He+='<link type="text/css" rel="stylesheet" href="'+wn(it.documentBaseURI.toAbsolute(ut))+'"'+Un+">"}),wt&&(He+='<style type="text/css">'+wt+"</style>");var re=jt(it),Te=Sn(it),qe=on.mac?"e.metaKey":"e.ctrlKey && !e.altKey",gt='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+qe+")) {e.preventDefault();}}}, false);<\/script> ",pt=it.getBody().dir,bt=pt?' dir="'+wn(pt)+'"':"",rn="<!DOCTYPE html><html><head>"+He+'</head><body id="'+wn(re)+'" class="mce-content-body '+wn(Te)+'"'+bt+">"+it.getContent()+gt+"</body></html>";return rn},Fr=function(it){var He=ia(it),wn=it.windowManager.open({title:"Preview",size:"large",body:{type:"panel",items:[{name:"preview",type:"iframe",sandboxed:!0}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{preview:He}});wn.focus("close")},un=function(it){it.addCommand("mcePreview",function(){Fr(it)})},br=function(it){var He=function(){return it.execCommand("mcePreview")};it.ui.registry.addButton("preview",{icon:"preview",tooltip:"Preview",onAction:He}),it.ui.registry.addMenuItem("preview",{icon:"preview",text:"Preview",onAction:He})};function mr(){Nt.add("preview",function(it){un(it),br(it)})}mr()})();(function(){var Nt=function(u){var l=typeof u;return u===null?"null":l==="object"&&(Array.prototype.isPrototypeOf(u)||u.constructor&&u.constructor.name==="Array")?"array":l==="object"&&(String.prototype.isPrototypeOf(u)||u.constructor&&u.constructor.name==="String")?"string":l},on=function(u){return function(l){return Nt(l)===u}},vn=function(u){return function(l){return typeof l===u}},or=function(u){return function(l){return u===l}},Ut=on("string"),Vn=on("object"),Sn=on("array"),An=or(null),jt=vn("boolean"),ia=or(void 0),Fr=function(u){return u==null},un=function(u){return!Fr(u)},br=vn("function"),mr=vn("number"),it=function(){},He=function(u,l){return function(){for(var d=[],h=0;h<arguments.length;h++)d[h]=arguments[h];return u(l.apply(null,d))}},wn=function(u,l){return function(d){return u(l(d))}},wt=function(u){return function(){return u}},Un=function(u){return u},re=function(u,l){return u===l};function Te(u){for(var l=[],d=1;d<arguments.length;d++)l[d-1]=arguments[d];return function(){for(var h=[],y=0;y<arguments.length;y++)h[y]=arguments[y];var x=l.concat(h);return u.apply(null,x)}}var qe=function(u){return function(l){return!u(l)}},gt=function(u){return function(){throw new Error(u)}},pt=wt(!1),bt=wt(!0),rn=function(){return ut},ut=function(){var u=function(h){return h()},l=Un,d={fold:function(h,y){return h()},isSome:pt,isNone:bt,getOr:l,getOrThunk:u,getOrDie:function(h){throw new Error(h||"error: getOrDie called on none.")},getOrNull:wt(null),getOrUndefined:wt(void 0),or:l,orThunk:u,map:rn,each:it,bind:rn,exists:pt,forall:bt,filter:function(){return rn()},toArray:function(){return[]},toString:wt("none()")};return d}(),Rr=function(u){var l=wt(u),d=function(){return y},h=function(x){return x(u)},y={fold:function(x,A){return A(u)},isSome:bt,isNone:pt,getOr:l,getOrThunk:l,getOrDie:l,getOrNull:l,getOrUndefined:l,or:d,orThunk:d,map:function(x){return Rr(x(u))},each:function(x){x(u)},bind:h,exists:h,forall:h,filter:function(x){return x(u)?y:ut},toArray:function(){return[u]},toString:function(){return"some("+u+")"}};return y},me=function(u){return u==null?ut:Rr(u)},Y={some:Rr,none:rn,from:me},Dn=Array.prototype.slice,Aa=Array.prototype.indexOf,At=Array.prototype.push,Oa=function(u,l){return Aa.call(u,l)},Nn=function(u,l){return Oa(u,l)>-1},D=function(u,l){for(var d=0,h=u.length;d<h;d++){var y=u[d];if(l(y,d))return!0}return!1},na=function(u,l){for(var d=[],h=0;h<u;h++)d.push(l(h));return d},_t=function(u,l){for(var d=u.length,h=new Array(d),y=0;y<d;y++){var x=u[y];h[y]=l(x,y)}return h},Kt=function(u,l){for(var d=0,h=u.length;d<h;d++){var y=u[d];l(y,d)}},Ro=function(u,l){for(var d=u.length-1;d>=0;d--){var h=u[d];l(h,d)}},Go=function(u,l){for(var d=[],h=[],y=0,x=u.length;y<x;y++){var A=u[y],P=l(A,y)?d:h;P.push(A)}return{pass:d,fail:h}},ir=function(u,l){for(var d=[],h=0,y=u.length;h<y;h++){var x=u[h];l(x,h)&&d.push(x)}return d},la=function(u,l,d){return Ro(u,function(h,y){d=l(d,h,y)}),d},te=function(u,l,d){return Kt(u,function(h,y){d=l(d,h,y)}),d},qa=function(u,l,d){for(var h=0,y=u.length;h<y;h++){var x=u[h];if(l(x,h))return Y.some(x);if(d(x,h))break}return Y.none()},yt=function(u,l){return qa(u,l,pt)},Jt=function(u,l){for(var d=0,h=u.length;d<h;d++){var y=u[d];if(l(y,d))return Y.some(d)}return Y.none()},It=function(u){for(var l=[],d=0,h=u.length;d<h;++d){if(!Sn(u[d]))throw new Error("Arr.flatten item "+d+" was not an array, input: "+u);At.apply(l,u[d])}return l},$t=function(u,l){return It(_t(u,l))},rt=function(u,l){for(var d=0,h=u.length;d<h;++d){var y=u[d];if(l(y,d)!==!0)return!1}return!0},an=function(u){var l=Dn.call(u,0);return l.reverse(),l},kn=function(u,l){for(var d={},h=0,y=u.length;h<y;h++){var x=u[h];d[String(x)]=l(x,h)}return d},Ze=function(u){return[u]},Wn=function(u,l){var d=Dn.call(u,0);return d.sort(l),d},ma=function(u,l){return l>=0&&l<u.length?Y.some(u[l]):Y.none()},dn=function(u){return ma(u,0)},qr=function(u){return ma(u,u.length-1)},Ur=function(u,l){for(var d=0;d<u.length;d++){var h=l(u[d],d);if(h.isSome())return h}return Y.none()},On=function(){return On=Object.assign||function(l){for(var d,h=1,y=arguments.length;h<y;h++){d=arguments[h];for(var x in d)Object.prototype.hasOwnProperty.call(d,x)&&(l[x]=d[x])}return l},On.apply(this,arguments)};function ra(u,l,d){if(d||arguments.length===2)for(var h=0,y=l.length,x;h<y;h++)(x||!(h in l))&&(x||(x=Array.prototype.slice.call(l,0,h)),x[h]=l[h]);return u.concat(x||Array.prototype.slice.call(l))}var Po=function(u){var l=!1,d;return function(){for(var h=[],y=0;y<arguments.length;y++)h[y]=arguments[y];return l||(l=!0,d=u.apply(null,h)),d}},Ko=function(u,l,d,h){var y=u.isiOS()&&/ipad/i.test(d)===!0,x=u.isiOS()&&!y,A=u.isiOS()||u.isAndroid(),P=A||h("(pointer:coarse)"),V=y||!x&&A&&h("(min-device-width:768px)"),Q=x||A&&!V,pe=l.isSafari()&&u.isiOS()&&/safari/i.test(d)===!1,Xe=!Q&&!V&&!pe;return{isiPad:wt(y),isiPhone:wt(x),isTablet:wt(V),isPhone:wt(Q),isTouch:wt(P),isAndroid:u.isAndroid,isiOS:u.isiOS,isWebView:wt(pe),isDesktop:wt(Xe)}},vi=function(u,l){for(var d=0;d<u.length;d++){var h=u[d];if(h.test(l))return h}},No=function(u,l){var d=vi(u,l);if(!d)return{major:0,minor:0};var h=function(y){return Number(l.replace(d,"$"+y))};return Xo(h(1),h(2))},Ga=function(u,l){var d=String(l).toLowerCase();return u.length===0?Ka():No(u,d)},Ka=function(){return Xo(0,0)},Xo=function(u,l){return{major:u,minor:l}},Ba={nu:Xo,detect:Ga,unknown:Ka},vo=function(u,l){return Ur(l.brands,function(d){var h=d.brand.toLowerCase();return yt(u,function(y){var x;return h===((x=y.brand)===null||x===void 0?void 0:x.toLowerCase())}).map(function(y){return{current:y.name,version:Ba.nu(parseInt(d.version,10),0)}})})},Ca=function(u,l){var d=String(l).toLowerCase();return yt(u,function(h){return h.search(d)})},Yo=function(u,l){return Ca(u,l).map(function(d){var h=Ba.detect(d.versionRegexes,l);return{current:d.name,version:h}})},mn=function(u,l){return Ca(u,l).map(function(d){var h=Ba.detect(d.versionRegexes,l);return{current:d.name,version:h}})},Yr=function(u,l){return u.substring(l)},mo=function(u,l,d){return l===""||u.length>=l.length&&u.substr(d,d+l.length)===l},ti=function(u,l){return eo(u,l)?Yr(u,l.length):u},ur=function(u,l){return u.indexOf(l)!==-1},eo=function(u,l){return mo(u,l,0)},Jo=function(u,l){return mo(u,l,u.length-l.length)},Qi=function(u){return function(l){return l.replace(u,"")}},Io=Qi(/^\s+|\s+$/g),Zo=function(u){return u.length>0},di=function(u){return!Zo(u)},Fi=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Br=function(u){return function(l){return ur(l,u)}},ua=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(u){return ur(u,"edge/")&&ur(u,"chrome")&&ur(u,"safari")&&ur(u,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Fi],search:function(u){return ur(u,"chrome")&&!ur(u,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(u){return ur(u,"msie")||ur(u,"trident")}},{name:"Opera",versionRegexes:[Fi,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Br("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Br("firefox")},{name:"Safari",versionRegexes:[Fi,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(u){return(ur(u,"safari")||ur(u,"mobile/"))&&ur(u,"applewebkit")}}],cr=[{name:"Windows",search:Br("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(u){return ur(u,"iphone")||ur(u,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Br("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Br("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Br("linux"),versionRegexes:[]},{name:"Solaris",search:Br("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Br("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Br("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],to={browsers:wt(ua),oses:wt(cr)},$r="Edge",go="Chrome",Sa="IE",Gr="Opera",$o="Firefox",To="Safari",zo=function(){return mi({current:void 0,version:Ba.unknown()})},mi=function(u){var l=u.current,d=u.version,h=function(y){return function(){return l===y}};return{current:l,version:d,isEdge:h($r),isChrome:h(go),isIE:h(Sa),isOpera:h(Gr),isFirefox:h($o),isSafari:h(To)}},pa={unknown:zo,nu:mi,edge:wt($r),chrome:wt(go),ie:wt(Sa),opera:wt(Gr),firefox:wt($o),safari:wt(To)},Ha="Windows",pn="iOS",Cn="Android",Xn="Linux",Na="OSX",yu="Solaris",gi="FreeBSD",Pi="ChromeOS",gr=function(){return hi({current:void 0,version:Ba.unknown()})},hi=function(u){var l=u.current,d=u.version,h=function(y){return function(){return l===y}};return{current:l,version:d,isWindows:h(Ha),isiOS:h(pn),isAndroid:h(Cn),isOSX:h(Na),isLinux:h(Xn),isSolaris:h(yu),isFreeBSD:h(gi),isChromeOS:h(Pi)}},Xa={unknown:gr,nu:hi,windows:wt(Ha),ios:wt(pn),android:wt(Cn),linux:wt(Xn),osx:wt(Na),solaris:wt(yu),freebsd:wt(gi),chromeos:wt(Pi)},ee=function(u,l,d){var h=to.browsers(),y=to.oses(),x=l.bind(function(V){return vo(h,V)}).orThunk(function(){return Yo(h,u)}).fold(pa.unknown,pa.nu),A=mn(y,u).fold(Xa.unknown,Xa.nu),P=Ko(A,x,u,d);return{browser:x,os:A,deviceType:P}},we={detect:ee},Oe=function(u){return window.matchMedia(u).matches},Fe=Po(function(){return we.detect(navigator.userAgent,Y.from(navigator.userAgentData),Oe)}),Dt=function(){return Fe()},G=function(u,l,d){return(u.compareDocumentPosition(l)&d)!=0},le=function(u,l){return G(u,l,Node.DOCUMENT_POSITION_CONTAINED_BY)},Be=8,Le=9,at=11,Rt=1,Zt=3,Rn=function(u,l){var d=l||document,h=d.createElement("div");if(h.innerHTML=u,!h.hasChildNodes()||h.childNodes.length>1)throw console.error("HTML does not have a single root node",u),new Error("HTML must have a single root node");return Wr(h.childNodes[0])},Yn=function(u,l){var d=l||document,h=d.createElement(u);return Wr(h)},sr=function(u,l){var d=l||document,h=d.createTextNode(u);return Wr(h)},Wr=function(u){if(u==null)throw new Error("Node cannot be null or undefined");return{dom:u}},Da=function(u,l,d){return Y.from(u.dom.elementFromPoint(l,d)).map(Wr)},et={fromHtml:Rn,fromTag:Yn,fromText:sr,fromDom:Wr,fromPoint:Da},Jr=function(u,l){var d=u.dom;if(d.nodeType!==Rt)return!1;var h=d;if(h.matches!==void 0)return h.matches(l);if(h.msMatchesSelector!==void 0)return h.msMatchesSelector(l);if(h.webkitMatchesSelector!==void 0)return h.webkitMatchesSelector(l);if(h.mozMatchesSelector!==void 0)return h.mozMatchesSelector(l);throw new Error("Browser lacks native selectors")},Jn=function(u){return u.nodeType!==Rt&&u.nodeType!==Le&&u.nodeType!==at||u.childElementCount===0},Ar=function(u,l){var d=l===void 0?document:l.dom;return Jn(d)?[]:_t(d.querySelectorAll(u),et.fromDom)},io=function(u,l){var d=l===void 0?document:l.dom;return Jn(d)?Y.none():Y.from(d.querySelector(u)).map(et.fromDom)},wr=function(u,l){return u.dom===l.dom},sc=function(u,l){var d=u.dom,h=l.dom;return d===h?!1:d.contains(h)},su=function(u,l){return le(u.dom,l.dom)},lu=function(u,l){return Dt().browser.isIE()?su(u,l):sc(u,l)},ni=Jr,ie=Object.keys,Se=Object.hasOwnProperty,Ne=function(u,l){for(var d=ie(u),h=0,y=d.length;h<y;h++){var x=d[h],A=u[x];l(A,x)}},De=function(u,l){return z(u,function(d,h){return{k:h,v:l(d,h)}})},z=function(u,l){var d={};return Ne(u,function(h,y){var x=l(h,y);d[x.k]=x.v}),d},ce=function(u){return function(l,d){u[d]=l}},ke=function(u,l,d,h){var y={};return Ne(u,function(x,A){(l(x,A)?d:h)(x,A)}),y},Ue=function(u,l){var d={};return ke(u,l,ce(d),it),d},Gt=function(u,l){var d=[];return Ne(u,function(h,y){d.push(l(h,y))}),d},Mt=function(u){return Gt(u,Un)},Xt=function(u){return ie(u).length},$=function(u,l){return ue(u,l)?Y.from(u[l]):Y.none()},ue=function(u,l){return Se.call(u,l)},Ce=function(u,l){return ue(u,l)&&u[l]!==void 0&&u[l]!==null},ze=function(u){for(var l in u)if(Se.call(u,l))return!1;return!0},Re=["tfoot","thead","tbody","colgroup"],xt=function(u){return Nn(Re,u)},en=function(u,l){return{rows:u,columns:l}},fn=function(u,l){return{row:u,column:l}},tr=function(u,l,d){return{element:u,rowspan:l,colspan:d}},ga=function(u,l,d,h){return{element:u,rowspan:l,colspan:d,isNew:h}},fa=function(u,l,d,h,y,x){return{element:u,rowspan:l,colspan:d,row:h,column:y,isLocked:x}},Va=function(u,l,d){return{element:u,cells:l,section:d}},Pr=function(u,l,d,h){return{element:u,cells:l,section:d,isNew:h}},ba=function(u,l,d){return{element:u,isNew:l,isLocked:d}},Ia=function(u,l,d,h){return{element:u,cells:l,section:d,isNew:h}},ju=function(u,l,d,h){return{startRow:u,startCol:l,finishRow:d,finishCol:h}},Ln=function(u,l,d){return{element:u,colspan:l,column:d}},_f=function(u,l){return{element:u,columns:l}};typeof window!="undefined"||Function("return this;")();var hr=function(u){var l=u.dom.nodeName;return l.toLowerCase()},ho=function(u){return u.dom.nodeType},ql=function(u){return function(l){return ho(l)===u}},nt=function(u){return ho(u)===Be||hr(u)==="#comment"},po=ql(Rt),rs=ql(Zt),In=ql(Le),Mf=ql(at),wu=function(u){return function(l){return po(l)&&hr(l)===u}},Eo=function(u){return et.fromDom(u.dom.ownerDocument)},Mv=function(u){return In(u)?u:Eo(u)},Je=function(u){return et.fromDom(Mv(u).dom.defaultView)},as=function(u){return Y.from(u.dom.parentNode).map(et.fromDom)},B=function(u,l){for(var d=br(l)?l:pt,h=u.dom,y=[];h.parentNode!==null&&h.parentNode!==void 0;){var x=h.parentNode,A=et.fromDom(x);if(y.push(A),d(A)===!0)break;h=x}return y},W=function(u){return Y.from(u.dom.offsetParent).map(et.fromDom)},se=function(u){return Y.from(u.dom.previousSibling).map(et.fromDom)},Ie=function(u){return Y.from(u.dom.nextSibling).map(et.fromDom)},Z=function(u){return _t(u.dom.childNodes,et.fromDom)},Zn=function(u,l){var d=u.dom.childNodes;return Y.from(d[l]).map(et.fromDom)},ca=function(u){return Zn(u,0)},$a=function(u){return Mf(u)&&un(u.dom.host)},Oc=br(Element.prototype.attachShadow)&&br(Node.prototype.getRootNode),xe=wt(Oc),bo=Oc?function(u){return et.fromDom(u.dom.getRootNode())}:Mv,Dc=function(u){var l=bo(u);return $a(l)?Y.some(l):Y.none()},el=function(u){return et.fromDom(u.dom.host)},Cu=function(u){if(xe()&&un(u.target)){var l=et.fromDom(u.target);if(po(l)&&uo(l)&&u.composed&&u.composedPath){var d=u.composedPath();if(d)return dn(d)}}return Y.from(u.target)},uo=function(u){return un(u.dom.shadowRoot)},aa=function(u){var l=rs(u)?u.dom.parentNode:u.dom;if(l==null||l.ownerDocument===null)return!1;var d=l.ownerDocument;return Dc(et.fromDom(l)).fold(function(){return d.body.contains(l)},wn(aa,el))},Rc=function(){return va(et.fromDom(document))},va=function(u){var l=u.dom.body;if(l==null)throw new Error("Body is not available yet");return et.fromDom(l)},Fv=function(u,l,d){return ir(B(u,d),l)},Bn=function(u,l){return ir(Z(u),l)},os=function(u,l){var d=[];return Kt(Z(u),function(h){l(h)&&(d=d.concat([h])),d=d.concat(os(h,l))}),d},yo=function(u,l,d){return Fv(u,function(h){return Jr(h,l)},d)},Ff=function(u,l){return Bn(u,function(d){return Jr(d,l)})},eu=function(u,l){return Ar(l,u)};function Yh(u,l,d,h,y){return u(d,h)?Y.some(d):br(y)&&y(d)?Y.none():l(d,h,y)}var Ft=function(u,l,d){for(var h=u.dom,y=br(d)?d:pt;h.parentNode;){h=h.parentNode;var x=et.fromDom(h);if(l(x))return Y.some(x);if(y(x))break}return Y.none()},lc=function(u,l,d){var h=function(y,x){return x(y)};return Yh(h,Ft,u,l,d)},W0=function(u,l){var d=function(y){return l(et.fromDom(y))},h=yt(u.dom.childNodes,d);return h.map(et.fromDom)},j0=function(u,l){var d=function(h){for(var y=0;y<h.childNodes.length;y++){var x=et.fromDom(h.childNodes[y]);if(l(x))return Y.some(x);var A=d(h.childNodes[y]);if(A.isSome())return A}return Y.none()};return d(u.dom)},Gl=function(u,l,d){return Ft(u,function(h){return Jr(h,l)},d)},Kl=function(u,l){return W0(u,function(d){return Jr(d,l)})},fc=function(u,l){return io(l,u)},Bo=function(u,l,d){var h=function(y,x){return Jr(y,x)};return Yh(h,Gl,u,l,d)},Pf=function(u,l,d){if(Ut(d)||jt(d)||mr(d))u.setAttribute(l,d+"");else throw console.error("Invalid call to Attribute.set. Key ",l,":: Value ",d,":: Element ",u),new Error("Attribute value was not simple")},_a=function(u,l,d){Pf(u.dom,l,d)},Pv=function(u,l){var d=u.dom;Ne(l,function(h,y){Pf(d,y,h)})},tl=function(u,l){var d=u.dom.getAttribute(l);return d===null?void 0:d},qu=function(u,l){return Y.from(tl(u,l))},Ya=function(u,l){u.dom.removeAttribute(l)},Wd=function(u){return te(u.dom.attributes,function(l,d){return l[d.name]=d.value,l},{})},jd=function(u,l,d){return d===void 0&&(d=re),u.exists(function(h){return d(h,l)})},Su=function(u){for(var l=[],d=function(y){l.push(y)},h=0;h<u.length;h++)u[h].each(d);return l},Lo=function(u,l,d){return u.isSome()&&l.isSome()?Y.some(d(u.getOrDie(),l.getOrDie())):Y.none()},qd=function(u,l){return u!=null?l(u):Y.none()},Es=function(u){return u.bind(Un)},Gd=function(u,l){return u?Y.some(l):Y.none()},Bc=function(u){return u.style!==void 0&&br(u.style.getPropertyValue)},ks=function(u,l,d){if(!Ut(d))throw console.error("Invalid call to CSS.set. Property ",l,":: Value ",d,":: Element ",u),new Error("CSS value must be a string: "+d);Bc(u)&&u.style.setProperty(l,d)},Nf=function(u,l){Bc(u)&&u.style.removeProperty(l)},ko=function(u,l,d){var h=u.dom;ks(h,l,d)},ri=function(u,l){var d=u.dom;Ne(l,function(h,y){ks(d,y,h)})},Gu=function(u,l){var d=u.dom,h=window.getComputedStyle(d),y=h.getPropertyValue(l);return y===""&&!aa(u)?Jh(d,l):y},Jh=function(u,l){return Bc(u)?u.style.getPropertyValue(l):""},vc=function(u,l){var d=u.dom,h=Jh(d,l);return Y.from(h).filter(function(y){return y.length>0})},As=function(u,l){var d=u.dom;Nf(d,l),jd(qu(u,"style").map(Io),"")&&Ya(u,"style")},Nv=function(u,l){var d=u.dom,h=l.dom;Bc(d)&&Bc(h)&&(h.style.cssText=d.style.cssText)},pi=function(u,l,d){return d===void 0&&(d=0),qu(u,l).map(function(h){return parseInt(h,10)}).getOr(d)},is=function(u,l){return pi(u,l,1)},vg=function(u){return is(u,"colspan")>1},bi=function(u){return is(u,"rowspan")>1},If=function(u,l){return parseInt(Gu(u,l),10)},$f=wt(10),Xl=wt(10),Yl=function(u,l){return _o(u,l,bt)},_o=function(u,l,d){return $t(Z(u),function(h){return Jr(h,l)?d(h)?[h]:[]:_o(h,l,d)})},Iv=function(u,l,d){if(d===void 0&&(d=pt),d(l))return Y.none();if(Nn(u,hr(l)))return Y.some(l);var h=function(y){return Jr(y,"table")||d(y)};return Gl(l,u.join(","),h)},nl=function(u,l){return Iv(["td","th"],u,l)},Os=function(u){return Yl(u,"th,td")},us=function(u){return Jr(u,"colgroup")?Ff(u,"col"):$t(dg(u),function(l){return Ff(l,"col")})},co=function(u,l){return Bo(u,"table",l)},rl=function(u){return Yl(u,"tr")},dg=function(u){return co(u).fold(wt([]),function(l){return Ff(l,"colgroup")})},$v=function(u,l){return _t(u,function(d){if(hr(d)==="colgroup"){var h=_t(us(d),function(y){var x=pi(y,"span",1);return tr(y,1,x)});return Va(d,h,"colgroup")}else{var h=_t(Os(d),function(x){var A=pi(x,"rowspan",1),P=pi(x,"colspan",1);return tr(x,A,P)});return Va(d,h,l(d))}})},Kd=function(u){return as(u).map(function(l){var d=hr(l);return xt(d)?d:"tbody"}).getOr("tbody")},Xd=function(u){var l=rl(u),d=dg(u),h=ra(ra([],d),l);return $v(h,Kd)},mg=function(u,l){return $v(u,function(){return l})},gg=function(u,l,d){var h=u.cells,y=h.slice(0,l),x=h.slice(l),A=y.concat(d).concat(x);return zf(u,A)},hg=function(u,l,d){return gg(u,l,[d])},Ni=function(u,l,d){var h=u.cells;h[l]=d},zf=function(u,l){return Ia(u.element,l,u.section,u.isNew)},Yd=function(u,l){var d=u.cells,h=_t(d,l);return Ia(u.element,h,u.section,u.isNew)},Mn=function(u,l){return u.cells[l]},so=function(u,l){return Mn(u,l).element},Ii=function(u){return u.cells.length},ai=function(u){var l=Go(u,function(d){return d.section==="colgroup"});return{rows:l.fail,cols:l.pass}},Jd=function(u,l,d){var h=_t(u.cells,d);return Ia(l(u.element),h,u.section,!0)},_c="data-snooker-locked-cols",pg=function(u){return qu(u,_c).bind(function(l){return Y.from(l.match(/\d+/g))}).map(function(l){return kn(l,bt)})},dc=function(u){var l=te(ai(u).rows,function(h,y){return Kt(y.cells,function(x,A){x.isLocked&&(h[A]=!0)}),h},{}),d=Gt(l,function(h,y){return parseInt(y,10)});return Wn(d)},Ja=function(u,l){return u+","+l},bg=function(u,l,d){return Y.from(u.access[Ja(l,d)])},gn=function(u,l,d){var h=Jl(u,function(y){return d(l,y.element)});return h.length>0?Y.some(h[0]):Y.none()},Jl=function(u,l){var d=$t(u.all,function(h){return h.cells});return ir(d,l)},yg=function(u){var l={},d=0;return Kt(u.cells,function(h){var y=h.colspan;na(y,function(x){var A=d+x;l[A]=Ln(h.element,y,A)}),d+=y}),l},fu=function(u){var l={},d=[],h={},y=[],x=dn(u).map(function(Xe){return Xe.element}).bind(co),A=x.bind(pg).getOr({}),P=0,V=0,Q=0;Kt(u,function(Xe){if(Xe.section==="colgroup")h=yg(Xe),y=[_f(Xe.element,Mt(h))];else{var ht=[];Kt(Xe.cells,function(tt){for(var Ye=0;l[Ja(Q,Ye)]!==void 0;)Ye++;for(var qt=Ce(A,Ye.toString()),Wt=fa(tt.element,tt.rowspan,tt.colspan,Q,Ye,qt),rr=0;rr<tt.colspan;rr++)for(var oa=0;oa<tt.rowspan;oa++){var Fn=Q+oa,er=Ye+rr,_r=Ja(Fn,er);l[_r]=Wt,V=Math.max(V,er+1)}ht.push(Wt)}),P++,d.push(Va(Xe.element,ht,Xe.section)),Q++}});var pe=en(P,V);return{grid:pe,access:l,all:d,columns:h,colgroups:y}},Ho=function(u){var l=Xd(u);return fu(l)},q0=function(u){return $t(u.all,function(l){return l.cells})},cs=function(u){return Mt(u.columns)},Ua=function(u){return ie(u.columns).length>0},wg=function(u,l){return Y.from(u.columns[l])},$n={fromTable:Ho,generate:fu,getAt:bg,findItem:gn,filterItems:Jl,justCells:q0,justColumns:cs,hasColumns:Ua,getColumnAt:wg},ss=function(u,l){var d=l.column,h=l.column+l.colspan-1,y=l.row,x=l.row+l.rowspan-1;return d<=u.finishCol&&h>=u.startCol&&y<=u.finishRow&&x>=u.startRow},G0=function(u,l){return l.column>=u.startCol&&l.column+l.colspan-1<=u.finishCol&&l.row>=u.startRow&&l.row+l.rowspan-1<=u.finishRow},xu=function(u,l){for(var d=!0,h=Te(G0,l),y=l.startRow;y<=l.finishRow;y++)for(var x=l.startCol;x<=l.finishCol;x++)d=d&&$n.getAt(u,y,x).exists(h);return d?Y.some(l):Y.none()},K0=function(u,l){return ju(Math.min(u.row,l.row),Math.min(u.column,l.column),Math.max(u.row+u.rowspan-1,l.row+l.rowspan-1),Math.max(u.column+u.colspan-1,l.column+l.colspan-1))},Cg=function(u,l,d){var h=$n.findItem(u,l,wr),y=$n.findItem(u,d,wr);return h.bind(function(x){return y.map(function(A){return K0(x,A)})})},zv=function(u,l,d){return Cg(u,l,d).bind(function(h){return xu(u,h)})},Zd=function(u,l,d,h){return $n.findItem(u,l,wr).bind(function(y){var x=d>0?y.row+y.rowspan-1:y.row,A=h>0?y.column+y.colspan-1:y.column,P=$n.getAt(u,x+d,A+h);return P.map(function(V){return V.element})})},E=function(u,l,d){return Cg(u,l,d).map(function(h){var y=$n.filterItems(u,Te(ss,h));return _t(y,function(x){return x.element})})},I=function(u,l){var d=function(h,y){return lu(y,h)};return $n.findItem(u,l,d).map(function(h){return h.element})},H=function(u,l,d){return co(u).bind(function(h){var y=xn(h);return Zd(y,u,l,d)})},oe=function(u,l,d){var h=xn(u);return E(h,l,d)},Ae=function(u,l,d,h,y){var x=xn(u),A=wr(u,d)?Y.some(l):I(x,l),P=wr(u,y)?Y.some(h):I(x,h);return A.bind(function(V){return P.bind(function(Q){return E(x,V,Q)})})},St=function(u,l,d){var h=xn(u);return zv(h,l,d)},xn=$n.fromTable,_n=function(u,l){var d=as(u);d.each(function(h){h.dom.insertBefore(l.dom,u.dom)})},Tr=function(u,l){var d=Ie(u);d.fold(function(){var h=as(u);h.each(function(y){fr(y,l)})},function(h){_n(h,l)})},Cr=function(u,l){var d=ca(u);d.fold(function(){fr(u,l)},function(h){u.dom.insertBefore(l.dom,h.dom)})},fr=function(u,l){u.dom.appendChild(l.dom)},Tu=function(u,l,d){Zn(u,d).fold(function(){fr(u,l)},function(h){_n(h,l)})},Ku=function(u,l){_n(u,l),fr(l,u)},Zh=function(u,l){Kt(l,function(d){_n(u,d)})},X0=function(u,l){Kt(l,function(d,h){var y=h===0?u:l[h-1];Tr(y,d)})},ls=function(u,l){Kt(l,function(d){fr(u,d)})},al=function(u){u.dom.textContent="",Kt(Z(u),function(l){Qo(l)})},Qo=function(u){var l=u.dom;l.parentNode!==null&&l.parentNode.removeChild(l)},xT=function(u){var l=Z(u);l.length>0&&Zh(u,l),Qo(u)},Sg=function(u,l){var d=function(x){if(!u(x))throw new Error("Can only get "+l+" value of a "+l+" node");return h(x).getOr("")},h=function(x){return u(x)?Y.from(x.dom.nodeValue):Y.none()},y=function(x,A){if(!u(x))throw new Error("Can only set raw "+l+" value of a "+l+" node");x.dom.nodeValue=A};return{get:d,getOption:h,set:y}},Qh=Sg(rs,"text"),ol=function(u){return Qh.get(u)},Lf=function(u){return Qh.getOption(u)},xg=function(u,l){return Qh.set(u,l)},TT=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];function Hf(){var u=function(Q){return et.fromDom(Q.dom.cloneNode(!1))},l=function(Q){return Mv(Q).dom},d=function(Q){return po(Q)?hr(Q)==="body"?!0:Nn(TT,hr(Q)):!1},h=function(Q){return po(Q)?Nn(["br","img","hr","input"],hr(Q)):!1},y=function(Q){return po(Q)&&tl(Q,"contenteditable")==="false"},x=function(Q,pe){return Q.dom.compareDocumentPosition(pe.dom)},A=function(Q,pe){var Xe=Wd(Q);Pv(pe,Xe)},P=function(Q){var pe=hr(Q);return Nn(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],pe)},V=function(Q){return po(Q)?qu(Q,"lang"):Y.none()};return{up:wt({selector:Gl,closest:Bo,predicate:Ft,all:B}),down:wt({selector:eu,predicate:os}),styles:wt({get:Gu,getRaw:vc,set:ko,remove:As}),attrs:wt({get:tl,set:_a,remove:Ya,copyTo:A}),insert:wt({before:_n,after:Tr,afterAll:X0,append:fr,appendAll:ls,prepend:Cr,wrap:Ku}),remove:wt({unwrap:xT,remove:Qo}),create:wt({nu:et.fromTag,clone:u,text:et.fromText}),query:wt({comparePosition:x,prevSibling:se,nextSibling:Ie}),property:wt({children:Z,name:hr,parent:as,document:l,isText:rs,isComment:nt,isElement:po,isSpecial:P,getLanguage:V,getText:ol,setText:xg,isBoundary:d,isEmptyTag:h,isNonEditable:y}),eq:wr,is:ni}}var Qd=function(u,l,d,h){var y=d[0],x=d.slice(1);return h(u,l,y,x)},ET=function(u,l,d){return d.length>0?Qd(u,l,d,Mo):Y.none()},Mo=function(u,l,d,h){var y=l(u,d);return la(h,function(x,A){var P=l(u,A);return iw(u,x,P)},y)},iw=function(u,l,d){return l.bind(function(h){return d.filter(Te(u.eq,h))})},Vf=function(u,l){return Te(u.eq,l)},Y0=function(u,l,d,h){h===void 0&&(h=pt);var y=[l].concat(u.up().all(l)),x=[d].concat(u.up().all(d)),A=function(pe){var Xe=Jt(pe,h);return Xe.fold(function(){return pe},function(ht){return pe.slice(0,ht+1)})},P=A(y),V=A(x),Q=yt(P,function(pe){return D(V,Vf(u,pe))});return{firstpath:P,secondpath:V,shared:Q}},Uf=ET,Ds=Y0,Xu=Hf(),Wf=function(u,l){return Uf(Xu,function(d,h){return u(h)},l)},Tg=function(u,l,d){return Ds(Xu,u,l,d)},il=function(u){return Gl(u,"table")},jf=function(u,l,d){var h=function(y){return function(x){return d!==void 0&&d(x)||wr(x,y)}};return wr(u,l)?Y.some({boxes:Y.some([u]),start:u,finish:l}):il(u).bind(function(y){return il(l).bind(function(x){if(wr(y,x))return Y.some({boxes:oe(y,u,l),start:u,finish:l});if(lu(y,x)){var A=yo(l,"td,th",h(y)),P=A.length>0?A[A.length-1]:l;return Y.some({boxes:Ae(y,u,y,l,x),start:u,finish:P})}else if(lu(x,y)){var A=yo(u,"td,th",h(x)),V=A.length>0?A[A.length-1]:u;return Y.some({boxes:Ae(x,u,y,l,x),start:u,finish:V})}else return Tg(u,l).shared.bind(function(Q){return Bo(Q,"table",d).bind(function(pe){var Xe=yo(l,"td,th",h(pe)),ht=Xe.length>0?Xe[Xe.length-1]:l,tt=yo(u,"td,th",h(pe)),Ye=tt.length>0?tt[tt.length-1]:u;return Y.some({boxes:Ae(pe,u,y,l,x),start:Ye,finish:ht})})})})})},em=function(u,l){var d=eu(u,l);return d.length>0?Y.some(d):Y.none()},qf=function(u,l){return yt(u,function(d){return Jr(d,l)})},Eg=function(u,l,d){return fc(u,l).bind(function(h){return fc(u,d).bind(function(y){return Wf(il,[h,y]).map(function(x){return{first:h,last:y,table:x}})})})},kT=function(u,l){return Gl(u,"table").bind(function(d){return fc(d,l).bind(function(h){return jf(h,u).bind(function(y){return y.boxes.map(function(x){return{boxes:x,start:y.start,finish:y.finish}})})})})},J0=function(u,l,d,h,y){return qf(u,y).bind(function(x){return H(x,l,d).bind(function(A){return kT(A,h)})})},Gf=function(u,l){return em(u,l)},ul=function(u,l,d){return Eg(u,l,d).bind(function(h){var y=function(V){return wr(u,V)},x="thead,tfoot,tbody,table",A=Gl(h.first,x,y),P=Gl(h.last,x,y);return A.bind(function(V){return P.bind(function(Q){return wr(V,Q)?St(h.table,h.first,h.last):Y.none()})})})},Lv=function(u){if(!Sn(u))throw new Error("cases must be an array");if(u.length===0)throw new Error("there must be at least one case");var l=[],d={};return Kt(u,function(h,y){var x=ie(h);if(x.length!==1)throw new Error("one and only one name per case");var A=x[0],P=h[A];if(d[A]!==void 0)throw new Error("duplicate key detected:"+A);if(A==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Sn(P))throw new Error("case arguments must be an array");l.push(A),d[A]=function(){for(var V=[],Q=0;Q<arguments.length;Q++)V[Q]=arguments[Q];var pe=V.length;if(pe!==P.length)throw new Error("Wrong number of arguments to case "+A+". Expected "+P.length+" ("+P+"), got "+pe);var Xe=function(ht){var tt=ie(ht);if(l.length!==tt.length)throw new Error("Wrong number of arguments to match. Expected: "+l.join(",")+`
Actual: `+tt.join(","));var Ye=rt(l,function(qt){return Nn(tt,qt)});if(!Ye)throw new Error("Not all branches were specified when using match. Specified: "+tt.join(", ")+`
Required: `+l.join(", "));return ht[A].apply(null,V)};return{fold:function(){for(var ht=[],tt=0;tt<arguments.length;tt++)ht[tt]=arguments[tt];if(ht.length!==u.length)throw new Error("Wrong number of arguments to fold. Expected "+u.length+", got "+ht.length);var Ye=ht[y];return Ye.apply(null,V)},match:Xe,log:function(ht){console.log(ht,{constructors:l,constructor:A,params:V})}}}}),d},mc={generate:Lv},yi=mc.generate([{none:[]},{multiple:["elements"]},{single:["element"]}]),tm=function(u,l,d,h){return u.fold(l,d,h)},Z0=yi.none,ep=yi.multiple,Q0=yi.single,uw=function(u,l,d){var h=function(){return Gf(u(),d).fold(function(){return l().fold(Z0,Q0)},function(y){return ep(y)})};return{get:h}},eb=tinymce.util.Tools.resolve("tinymce.PluginManager"),zr=function(u,l){return et.fromDom(u.dom.cloneNode(l))},sn=function(u){return zr(u,!1)},Mc=function(u){return zr(u,!0)},tp=function(u,l){var d=et.fromTag(l),h=Wd(u);return Pv(d,h),d},np=function(u,l){var d=tp(u,l),h=Z(Mc(u));return ls(d,h),d},wi=function(u,l){var d=tp(u,l);_n(u,d);var h=Z(u);return ls(d,h),Qo(u),d},xa=function(u,l){var d=function(P,V){if(!mr(V)&&!V.match(/^[0-9]+$/))throw new Error(u+".set accepts only positive integer values. Value was "+V);var Q=P.dom;Bc(Q)&&(Q.style[u]=V+"px")},h=function(P){var V=l(P);if(V<=0||V===null){var Q=Gu(P,u);return parseFloat(Q)||0}return V},y=h,x=function(P,V){return te(V,function(Q,pe){var Xe=Gu(P,pe),ht=Xe===void 0?0:parseInt(Xe,10);return isNaN(ht)?Q:Q+ht},0)},A=function(P,V,Q){var pe=x(P,Q),Xe=V>pe?V-pe:0;return Xe};return{set:d,get:h,getOuter:y,aggregate:x,max:A}},tb=xa("width",function(u){return u.dom.offsetWidth}),fs=function(u){return tb.get(u)},rp=function(u){return tb.getOuter(u)},ot=function(u,l){l===void 0&&(l=bt);var d=u.grid,h=na(d.columns,Un),y=na(d.rows,Un);return _t(h,function(x){var A=function(){return $t(y,function(Q){return $n.getAt(u,Q,x).filter(function(pe){return pe.column===x}).toArray()})},P=function(Q){return Q.colspan===1&&l(Q.element)},V=function(){return $n.getAt(u,0,x)};return ap(A,P,V)})},ap=function(u,l,d){var h=u(),y=yt(h,l),x=y.orThunk(function(){return Y.from(h[0]).orThunk(d)});return x.map(function(A){return A.element})},cw=function(u){var l=u.grid,d=na(l.rows,Un),h=na(l.columns,Un);return _t(d,function(y){var x=function(){return $t(h,function(V){return $n.getAt(u,y,V).filter(function(Q){return Q.row===y}).fold(wt([]),function(Q){return[Q]})})},A=function(V){return V.rowspan===1},P=function(){return $n.getAt(u,y,0)};return ap(x,A,P)})},op=function(u,l){if(l<0||l>=u.length-1)return Y.none();var d=u[l].fold(function(){var y=an(u.slice(0,l));return Ur(y,function(x,A){return x.map(function(P){return{value:P,delta:A+1}})})},function(y){return Y.some({value:y,delta:0})}),h=u[l+1].fold(function(){var y=u.slice(l+1);return Ur(y,function(x,A){return x.map(function(P){return{value:P,delta:A+1}})})},function(y){return Y.some({value:y,delta:1})});return d.bind(function(y){return h.map(function(x){var A=x.delta+y.delta;return Math.abs(x.value-y.value)/A})})},Zl=function(u,l){return function(d){return nm(d)==="rtl"?l:u}},nm=function(u){return Gu(u,"direction")==="rtl"?"rtl":"ltr"},Fc=xa("height",function(u){var l=u.dom;return aa(u)?l.getBoundingClientRect().height:l.offsetHeight}),cl=function(u){return Fc.get(u)},ip=function(u){return Fc.getOuter(u)},vs=function(u,l){var d=function(h,y){return vs(u+h,l+y)};return{left:u,top:l,translate:d}},Ta=vs,Rs=function(u){var l=u.getBoundingClientRect();return Ta(l.left,l.top)},Kf=function(u,l){return u!==void 0?u:l!==void 0?l:0},Pc=function(u){var l=u.dom.ownerDocument,d=l.body,h=l.defaultView,y=l.documentElement;if(d===u.dom)return Ta(d.offsetLeft,d.offsetTop);var x=Kf(h==null?void 0:h.pageYOffset,y.scrollTop),A=Kf(h==null?void 0:h.pageXOffset,y.scrollLeft),P=Kf(y.clientTop,d.clientTop),V=Kf(y.clientLeft,d.clientLeft);return Nc(u).translate(A-V,x-P)},Nc=function(u){var l=u.dom,d=l.ownerDocument,h=d.body;return h===l?Ta(h.offsetLeft,h.offsetTop):aa(u)?Rs(l):Ta(0,0)},kg=function(u,l){return{row:u,y:l}},Ag=function(u,l){return{col:u,x:l}},gc=function(u){var l=Pc(u);return l.left+rp(u)},Ci=function(u){return Pc(u).left},sw=function(u,l){return Ag(u,Ci(l))},lw=function(u,l){return Ag(u,gc(l))},Wa=function(u){return Pc(u).top},Hv=function(u,l){return kg(u,Wa(l))},sl=function(u,l){return kg(u,Wa(l)+ip(l))},rm=function(u,l,d){if(d.length===0)return[];var h=_t(d.slice(1),function(x,A){return x.map(function(P){return u(A,P)})}),y=d[d.length-1].map(function(x){return l(d.length-1,x)});return h.concat([y])},Si=function(u){return-u},Xf={delta:Un,positions:function(u){return rm(Hv,sl,u)},edge:Wa},Vv={delta:Un,edge:Ci,positions:function(u){return rm(sw,lw,u)}},Ic={delta:Si,edge:gc,positions:function(u){return rm(lw,sw,u)}},Yu=Zl(Vv,Ic),am={delta:function(u,l){return Yu(l).delta(u,l)},positions:function(u,l){return Yu(l).positions(u,l)},edge:function(u){return Yu(u).edge(u)}},nb={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},up=function(){var u="[0-9]+",l="[+-]?"+u,d="[eE]"+l,h="\\.",y=function(P){return"(?:"+P+")?"},x=["Infinity",u+h+y(u)+y(d),h+u+y(d),u+y(d)].join("|"),A="[+-]?(?:"+x+")";return new RegExp("^("+A+")(.*)$")}(),fw=function(u,l){return D(l,function(d){return D(nb[d],function(h){return u===h})})},rb=function(u,l){var d=Y.from(up.exec(u));return d.bind(function(h){var y=Number(h[1]),x=h[2];return fw(x,l)?Y.some({value:y,unit:x}):Y.none()})},om=function(){var u=Dt().browser;return u.isIE()||u.isEdge()},cp=function(u,l){var d=parseFloat(u);return isNaN(d)?l:d},$i=function(u,l,d){return cp(Gu(u,l),d)},im=function(u){var l=u.dom.getBoundingClientRect().height,d=Gu(u,"box-sizing");if(d==="border-box")return l;var h=$i(u,"padding-top",0),y=$i(u,"padding-bottom",0),x=$i(u,"border-top-width",0),A=$i(u,"border-bottom-width",0),P=x+A;return l-h-y-P},vw=function(u){var l=u.dom.getBoundingClientRect().width,d=Gu(u,"box-sizing");if(d==="border-box")return l;var h=$i(u,"padding-left",0),y=$i(u,"padding-right",0),x=$i(u,"border-left-width",0),A=$i(u,"border-right-width",0),P=x+A;return l-h-y-P},ab=function(u){return om()?im(u):$i(u,"height",cl(u))},ob=function(u){return om()?vw(u):$i(u,"width",fs(u))},sp=/(\d+(\.\d+)?)%/,ib=/(\d+(\.\d+)?)px|em/,lp=function(u,l){var d=W(u).getOr(va(Eo(u)));return l(u)/l(d)*100},ub=function(u,l){ko(u,"width",l+"px")},dw=function(u,l){ko(u,"width",l+"%")},Ju=function(u,l){ko(u,"height",l+"px")},ll=function(u){return vc(u,"height").getOrThunk(function(){return ab(u)+"px"})},AT=function(u,l,d,h){var y=co(u).map(function(x){var A=d(x);return Math.floor(l/100*A)}).getOr(l);return h(u,y),y},fp=function(u,l,d,h){var y=parseInt(u,10);return Jo(u,"%")&&hr(l)!=="table"?AT(l,y,d,h):y},cb=function(u){var l=ll(u);return l?fp(l,u,cl,Ju):cl(u)},Yf=function(u,l,d){var h=d(u),y=is(u,l);return h/y},Uv=function(u){var l=vc(u,"width");return l.fold(function(){return Y.from(tl(u,"width"))},function(d){return Y.some(d)})},Og=function(u,l){return u/l.pixelWidth()*100},sb=function(u,l,d){var h=sp.exec(l);if(h!==null)return parseFloat(h[1]);var y=ob(u);return Og(y,d)},Bs=function(u,l){var d=Uv(u);return d.fold(function(){var h=fs(u);return Og(h,l)},function(h){return sb(u,h,l)})},OT=function(u,l){return u/100*l.pixelWidth()},mw=function(u,l,d){var h=ib.exec(l);if(h!==null)return parseInt(h[1],10);var y=sp.exec(l);if(y!==null){var x=parseFloat(y[1]);return OT(x,d)}return ob(u)},kr=function(u,l){var d=Uv(u);return d.fold(function(){return ob(u)},function(h){return mw(u,h,l)})},Dg=function(u){return Yf(u,"rowspan",cb)},Eu=function(u){var l=Uv(u);return l.bind(function(d){return rb(d,["fixed","relative","empty"])})},$c=function(u,l,d){ko(u,"width",l+d)},gw=function(u){return fs(u)+"px"},zi=function(u){return lp(u,fs)+"%"},Zu=function(u){return Uv(u).exists(function(l){return sp.test(l)})},DT=function(u){return Uv(u).exists(function(l){return ib.test(l)})},hw=function(u){return Uv(u).isNone()},Jf=wt(sp),pw=wt(ib),bw=wu("col"),yw=function(u,l,d){return vc(u,l).getOrThunk(function(){return d(u)+"px"})},ww=function(u,l){var d=function(h){return bw(h)?fs(h):kr(h,l)};return yw(u,"width",d)},bn=function(u){return yw(u,"height",Dg)},RT=function(u){return _t($n.justColumns(u),function(l){return Y.from(l.element)})},Rg=function(u,l){return vc(u,l).isSome()},vp=function(u){return!bw(u)||Rg(u,"width")},dp=function(u,l,d,h,y,x){return u.filter(h).fold(function(){return x(op(d,l))},function(A){return y(A)})},lb=function(u,l,d,h,y){var x=ot(u,function(Q){return Rg(Q,"width")}),A=$n.hasColumns(u)?RT(u):x,P=[Y.some(am.edge(l))].concat(_t(am.positions(x,l),function(Q){return Q.map(function(pe){return pe.x})})),V=qe(vg);return _t(A,function(Q,pe){return dp(Q,pe,P,V,function(Xe){if(vp(Xe))return d(Xe,y);var ht=qd(x[pe],Un);return dp(ht,pe,P,V,function(tt){return h(Y.some(fs(tt)))},h)},h)})},mp=function(u){return u.map(function(l){return l+"px"}).getOr("")},_s=function(u,l,d){return lb(u,l,ww,mp,d)},um=function(u,l,d){return lb(u,l,Bs,function(h){return h.fold(function(){return d.minCellWidth()},function(y){return y/d.pixelWidth()*100})},d)},fb=function(u,l,d){return lb(u,l,kr,function(h){return h.getOrThunk(d.minCellWidth)},d)},cm=function(u,l,d,h,y){var x=cw(u),A=[Y.some(d.edge(l))].concat(_t(d.positions(x,l),function(P){return P.map(function(V){return V.y})}));return _t(x,function(P,V){return dp(P,V,A,qe(bi),h,y)})},vb=function(u,l,d){return cm(u,l,d,Dg,function(h){return h.getOrThunk(Xl)})},Cw=function(u,l,d){return cm(u,l,d,bn,mp)},fl=function(u){var l=u,d=function(){return l},h=function(y){l=y};return{get:d,set:h}},Bg=function(u){var l=function(){return fs(u)},d=wt(0),h=function(y,x){return fb(y,u,x)};return{width:l,pixelWidth:l,getWidths:h,getCellDelta:d,singleColumnWidth:wt([0]),minCellWidth:d,setElementWidth:it,adjustTableWidth:it,isRelative:!0,label:"none"}},gp=function(u,l){var d=fl(parseFloat(u)),h=fl(fs(l)),y=function(Q){return Q/h.get()*100},x=function(Q,pe){return[100-Q]},A=function(){return $f()/h.get()*100},P=function(Q){var pe=d.get(),Xe=Q/100*pe,ht=pe+Xe;dw(l,ht),d.set(ht),h.set(fs(l))},V=function(Q,pe){return um(Q,l,pe)};return{width:d.get,pixelWidth:h.get,getWidths:V,getCellDelta:y,singleColumnWidth:x,minCellWidth:A,setElementWidth:dw,adjustTableWidth:P,isRelative:!0,label:"percent"}},hp=function(u,l){var d=fl(u),h=d.get,y=Un,x=function(V,Q){var pe=Math.max($f(),V+Q);return[pe-V]},A=function(V){var Q=h()+V;ub(l,Q),d.set(Q)},P=function(V,Q){return fb(V,l,Q)};return{width:h,pixelWidth:h,getWidths:P,getCellDelta:y,singleColumnWidth:x,minCellWidth:$f,setElementWidth:ub,adjustTableWidth:A,isRelative:!1,label:"pixel"}},Sw=function(u,l){var d=Jf().exec(l);if(d!==null)return gp(d[1],u);var h=pw().exec(l);if(h!==null){var y=parseInt(h[1],10);return hp(y,u)}var x=fs(u);return hp(x,u)},Wv=function(u){var l=Uv(u);return l.fold(function(){return Bg(u)},function(d){return Sw(u,d)})},Iu={getTableSize:Wv,pixelSize:hp,percentageSize:gp,noneSize:Bg},Ms=function(u,l,d,h,y,x){return{minRow:u,minCol:l,maxRow:d,maxCol:h,allCells:y,selectedCells:x}},tu=function(u,l){var d=u.grid.columns,h=u.grid.rows,y=h,x=d,A=0,P=0,V=[],Q=[];return Ne(u.access,function(pe){if(V.push(pe),l(pe)){Q.push(pe);var Xe=pe.row,ht=Xe+pe.rowspan-1,tt=pe.column,Ye=tt+pe.colspan-1;Xe<y?y=Xe:ht>A&&(A=ht),tt<x?x=tt:Ye>P&&(P=Ye)}}),Ms(y,x,A,P,V,Q)},ku=function(u,l,d){var h=u[d].element,y=et.fromTag("td");fr(y,et.fromTag("br"));var x=l?fr:Cr;x(h,y)},db=function(u,l,d,h){for(var y=l.grid.columns,x=l.grid.rows,A=0;A<x;A++)for(var P=!1,V=0;V<y;V++)if(!(A<d.minRow||A>d.maxRow||V<d.minCol||V>d.maxCol)){var Q=$n.getAt(l,A,V).filter(h).isNone();Q?ku(u,P,A):P=!0}},xw=function(u,l,d,h){Ne(d.columns,function(A){(A.column<l.minCol||A.column>l.maxCol)&&Qo(A.element)});var y=ir(Yl(u,"tr"),function(A){return A.dom.childElementCount===0});Kt(y,Qo),(l.minCol===l.maxCol||l.minRow===l.maxRow)&&Kt(Yl(u,"th,td"),function(A){Ya(A,"rowspan"),Ya(A,"colspan")}),Ya(u,_c),Ya(u,"data-snooker-col-series");var x=Iu.getTableSize(u);x.adjustTableWidth(h)},Tw=function(u,l,d,h){if(h.minCol===0&&l.grid.columns===h.maxCol+1)return 0;var y=fb(l,u,d),x=te(y,function(Q,pe){return Q+pe},0),A=te(y.slice(h.minCol,h.maxCol+1),function(Q,pe){return Q+pe},0),P=A/x*d.pixelWidth(),V=P-d.pixelWidth();return d.getCellDelta(V)},Za=function(u,l){var d=function(ht){return Jr(ht.element,l)},h=Mc(u),y=Xd(h),x=Iu.getTableSize(u),A=$n.generate(y),P=tu(A,d),V="th:not("+l+"),td:not("+l+")",Q=_o(h,"th,td",function(ht){return Jr(ht,V)});Kt(Q,Qo),db(y,A,P,d);var pe=$n.fromTable(u),Xe=Tw(u,pe,x,P);return xw(h,P,A,Xe),h},BT="\xA0",vl=function(u){return hr(u)==="img"?1:Lf(u).fold(function(){return Z(u).length},function(l){return l.length})},Zf=function(u){return Lf(u).filter(function(l){return l.trim().length!==0||l.indexOf(BT)>-1}).isSome()},Ew=["img","br"],pp=function(u){var l=Zf(u);return l||Nn(Ew,hr(u))},bp=function(u){return j0(u,pp)},jv=function(u){return _T(u,pp)},_T=function(u,l){var d=function(h){for(var y=Z(h),x=y.length-1;x>=0;x--){var A=y[x];if(l(A))return Y.some(A);var P=d(A);if(P.isSome())return P}return Y.none()};return d(u)},MT={scope:["row","col"]},mb=function(u){return function(){var l=et.fromTag("td",u.dom);return fr(l,et.fromTag("br",u.dom)),l}},kw=function(u){return function(){return et.fromTag("col",u.dom)}},Aw=function(u){return function(){return et.fromTag("colgroup",u.dom)}},Ow=function(u){return function(){return et.fromTag("tr",u.dom)}},gb=function(u,l,d){var h=np(u,l);return Ne(d,function(y,x){y===null?Ya(h,x):_a(h,x,y)}),h},yp=function(u){return u},Fs=function(u,l,d){var h=bp(u);return h.map(function(y){var x=d.join(","),A=yo(y,x,function(P){return wr(P,u)});return la(A,function(P,V){var Q=sn(V);return Ya(Q,"contenteditable"),fr(P,Q),Q},l)}).getOr(l)},ds=function(u,l){Ne(MT,function(d,h){return qu(u,h).filter(function(y){return Nn(d,y)}).each(function(y){return _a(l,h,y)})})},hb=function(u,l,d){var h=function(A,P){Nv(A.element,P),As(P,"height"),A.colspan!==1&&As(P,"width")},y=function(A){var P=et.fromTag(hr(A.element),l.dom),V=d.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),Q=V.length>0?Fs(A.element,P,V):P;return fr(Q,et.fromTag("br")),h(A,P),ds(A.element,P),u(A.element,P),P},x=function(A){var P=et.fromTag(hr(A.element),l.dom);return h(A,P),u(A.element,P),P};return{col:x,colgroup:Aw(l),row:Ow(l),cell:y,replace:gb,gap:mb(l)}},qv=function(u){return{col:kw(u),colgroup:Aw(u),row:Ow(u),cell:mb(u),replace:yp,gap:mb(u)}},Li=function(u,l){var d=l||document,h=d.createElement("div");return h.innerHTML=u,Z(et.fromDom(h))},Ra=function(u){return _t(u,et.fromDom)},wp=function(u){return u.nodeName.toLowerCase()},dl=function(u){return et.fromDom(u.getBody())},sm=function(u){return u.getBoundingClientRect().width},Cp=function(u){return u.getBoundingClientRect().height},zc=function(u){return function(l){return wr(l,dl(u))}},Sp=function(u){return u?u.replace(/px$/,""):""},Au=function(u){return/^\d+(\.\d+)?$/.test(u)?u+"px":u},ms=function(u){Ya(u,"data-mce-style");var l=function(d){return Ya(d,"data-mce-style")};Kt(Os(u),l),Kt(us(u),l)},no=function(u,l){var d=u.dom.getStyle(l,"width")||u.dom.getAttrib(l,"width");return Y.from(d).filter(Zo)},hc=function(u){return/^(\d+(\.\d+)?)%$/.test(u)},wo=function(u){return/^(\d+(\.\d+)?)px$/.test(u)},Co=function(u){return et.fromDom(u.selection.getStart())},Lc=function(u){return et.fromDom(u.selection.getEnd())},vu=function(u){return tm(u.get(),wt([]),Un,Ze)},FT=function(u){var l=function(y,x){return qu(y,x).exists(function(A){return parseInt(A,10)>1})},d=function(y){return l(y,"rowspan")||l(y,"colspan")},h=vu(u);return h.length>0&&rt(h,d)?Y.some(h):Y.none()},pc=function(u,l,d){return tm(l.get(),Y.none,function(h){return h.length<=1?Y.none():ul(u,d.firstSelectedSelector,d.lastSelectedSelector).map(function(y){return{bounds:y,cells:h}})},Y.none)},xi="data-mce-selected",Ou="td["+xi+"],th["+xi+"]",ml="["+xi+"]",lm="data-mce-first-selected",Dw="td["+lm+"],th["+lm+"]",xp="data-mce-last-selected",_g="td["+xp+"],th["+xp+"]",Gv=ml,Hi={selected:xi,selectedSelector:Ou,firstSelected:lm,firstSelectedSelector:Dw,lastSelected:xp,lastSelectedSelector:_g},gl=function(u){return{element:u,mergable:Y.none(),unmergable:Y.none(),selection:[u]}},Mg=function(u,l,d){return{element:d,mergable:pc(l,u,Hi),unmergable:FT(u),selection:vu(u)}},hl=function(u,l,d){return{element:u,clipboard:l,generators:d}},Rw=function(u,l,d,h){return{selection:vu(u),clipboard:d,generators:h}},yr=function(u){return co(u).bind(function(l){return Gf(l,Hi.firstSelectedSelector)}).fold(wt(u),function(l){return l[0]})},bc=function(u){return function(l,d){var h=hr(l),y=h==="col"||h==="colgroup"?yr(l):l;return Bo(y,u,d)}},Kv=bc("th,td,caption"),oi=bc("th,td"),fm=function(u){return vu(u)},Zr=function(u,l){var d=oi(u),h=d.bind(function(y){return co(y)}).map(function(y){return rl(y)});return Lo(d,h,function(y,x){return ir(x,function(A){return D(Ra(A.dom.cells),function(P){return tl(P,l)==="1"||wr(P,y)})})}).getOr([])},Xv=function(u){return co(u[0]).map(function(l){var d=Za(l,Gv);return ms(d),[d]})},pb=function(u,l){return _t(l,function(d){return u.selection.serializer.serialize(d.dom,{})}).join("")},Ma=function(u){return _t(u,function(l){return l.dom.innerText}).join("")},Ql=function(u,l,d){u.on("BeforeGetContent",function(h){var y=function(x){h.preventDefault(),Xv(x).each(function(A){h.content=h.format==="text"?Ma(A):pb(u,A)})};h.selection===!0&&tm(l.get(),it,y,it)}),u.on("BeforeSetContent",function(h){if(h.selection===!0&&h.paste===!0){var y=fm(l);dn(y).each(function(x){co(x).each(function(A){var P=ir(Li(h.content),function(ht){return hr(ht)!=="meta"}),V=wu("table");if(P.length===1&&V(P[0])){h.preventDefault();var Q=et.fromDom(u.getDoc()),pe=qv(Q),Xe=hl(x,P[0],pe);d.pasteCells(A,Xe).each(function(){u.focus()})}})})}})},Qf=mc.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),pl=On({},Qf),PT=function(u,l){return u.length===0?pl.none():u.length===1?pl.only(0):l===0?pl.left(0,1):l===u.length-1?pl.right(l-1,l):l>0&&l<u.length-1?pl.middle(l-1,l,l+1):pl.none()},NT=function(u,l,d,h,y){var x=u.slice(0),A=PT(u,l),P=wt(_t(x,wt(0))),V=function(ht){return h.singleColumnWidth(x[ht],d)},Q=function(ht,tt){return y.calcLeftEdgeDeltas(x,ht,tt,d,h.minCellWidth(),h.isRelative)},pe=function(ht,tt,Ye){return y.calcMiddleDeltas(x,ht,tt,Ye,d,h.minCellWidth(),h.isRelative)},Xe=function(ht,tt){return y.calcRightEdgeDeltas(x,ht,tt,d,h.minCellWidth(),h.isRelative)};return A.fold(P,V,Q,pe,Xe)},Bw=function(u,l,d){for(var h=0,y=u;y<l;y++)h+=d[y]!==void 0?d[y]:0;return h},Tp=function(u,l){var d=$n.justCells(u);return _t(d,function(h){var y=Bw(h.column,h.column+h.colspan,l);return{element:h.element,width:y,colspan:h.colspan}})},IT=function(u,l){var d=$n.justColumns(u);return _t(d,function(h,y){return{element:h.element,width:l[y],colspan:h.colspan}})},$T=function(u,l){var d=$n.justCells(u);return _t(d,function(h){var y=Bw(h.row,h.row+h.rowspan,l);return{element:h.element,height:y,rowspan:h.rowspan}})},bb=function(u,l){return _t(u.all,function(d,h){return{element:d.element,height:l[h]}})},zT=function(u){return la(u,function(l,d){return l+d},0)},yb=function(u,l){return $n.hasColumns(u)?IT(u,l):Tp(u,l)},bl=function(u,l,d){var h=yb(u,l);Kt(h,function(y){d.setElementWidth(y.element,y.width)})},Ps=function(u,l,d,h,y){var x=$n.fromTable(u),A=y.getCellDelta(l),P=y.getWidths(x,y),V=d===x.grid.columns-1,Q=h.clampTableDelta(P,d,A,y.minCellWidth(),V),pe=NT(P,d,Q,y,h),Xe=_t(pe,function(ht,tt){return ht+P[tt]});bl(x,Xe,y),h.resizeTable(y.adjustTableWidth,Q,V)},ev=function(u,l,d,h){var y=$n.fromTable(u),x=vb(y,u,h),A=_t(x,function(pe,Xe){return d===Xe?Math.max(l+pe,Xl()):pe}),P=$T(y,A),V=bb(y,A);Kt(V,function(pe){Ju(pe.element,pe.height)}),Kt(P,function(pe){Ju(pe.element,pe.height)});var Q=zT(A);Ju(u,Q)},Ea=function(u,l,d,h,y){var x=$n.generate(l),A=h.getWidths(x,h),P=h.pixelWidth(),V=y.calcRedestributedWidths(A,P,d.pixelDelta,h.isRelative),Q=V.newSizes,pe=V.delta;bl(x,Q,h),h.adjustTableWidth(pe)},nu=function(u,l,d,h){var y=$n.generate(l),x=h.getWidths(y,h);bl(y,x,h)},So=function(u){return _t(u,wt(0))},Ep=function(u,l,d,h,y){return y(u.slice(0,l)).concat(h).concat(y(u.slice(d)))},kp=function(u){return function(l,d,h,y){if(u(h)){var x=Math.max(y,l[d]-Math.abs(h)),A=Math.abs(x-l[d]);return h>=0?A:-A}else return h}},Ti=kp(function(u){return u<0}),Hc=kp(bt),Ap=function(){var u=function(P,V,Q,pe,Xe){var ht=Ti(P,V,pe,Xe);return Ep(P,V,Q+1,[ht,0],So)},l=function(P,V,Q,pe){var Xe=(100+Q)/100,ht=Math.max(pe,(P[V]+Q)/Xe);return _t(P,function(tt,Ye){var qt=Ye===V?ht:tt/Xe;return qt-tt})},d=function(P,V,Q,pe,Xe,ht){return ht?l(P,V,pe,Xe):u(P,V,Q,pe,Xe)},h=function(P,V,Q,pe,Xe,ht,tt){return d(P,Q,pe,Xe,ht,tt)},y=function(P,V){return P(V)},x=function(P,V,Q,pe,Xe,ht){if(ht)return l(P,Q,pe,Xe);var tt=Ti(P,Q,pe,Xe);return So(P.slice(0,Q)).concat([tt])},A=function(P,V,Q,pe){if(pe){var Xe=V+Q,ht=Xe/V,tt=_t(P,function(Ye){return Ye/ht});return{delta:ht*100-100,newSizes:tt}}else return{delta:Q,newSizes:P}};return{resizeTable:y,clampTableDelta:Ti,calcLeftEdgeDeltas:d,calcMiddleDeltas:h,calcRightEdgeDeltas:x,calcRedestributedWidths:A}},Fg=function(){var u=function(A,P,V,Q,pe){var Xe=Q>=0?V:P,ht=Hc(A,Xe,Q,pe);return Ep(A,P,V+1,[ht,-ht],So)},l=function(A,P,V,Q,pe,Xe){return u(A,V,Q,pe,Xe)},d=function(A,P,V){V&&A(P)},h=function(A,P,V,Q,pe,Xe){if(Xe)return So(A);var ht=Q/A.length;return _t(A,wt(ht))},y=function(A,P,V,Q,pe){if(pe){if(V>=0)return V;var Xe=te(A,function(ht,tt){return ht+tt-Q},0);return Math.max(-Xe,V)}else return Ti(A,P,V,Q)},x=function(A,P,V,Q){return{delta:0,newSizes:A}};return{resizeTable:d,clampTableDelta:y,calcLeftEdgeDeltas:u,calcMiddleDeltas:l,calcRightEdgeDeltas:h,calcRedestributedWidths:x}},Qa=function(u,l){var d=Y.from(u.dom.documentElement).map(et.fromDom).getOr(u);return{parent:wt(d),view:wt(u),origin:wt(Ta(0,0)),isResizable:l}},wb=function(u,l,d){var h=function(){return Pc(l)};return{parent:wt(l),view:wt(u),origin:h,isResizable:d}},vm=function(u,l,d){return{parent:wt(l),view:wt(u),origin:wt(Ta(0,0)),isResizable:d}},yl={only:Qa,detached:wb,body:vm},wl=mc.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),Yv=function(u,l,d){var h=d.substring(0,d.length-u.length),y=parseFloat(h);return h===y.toString()?l(y):wl.invalid(d)},Cb=function(u){return Jo(u,"%")?Yv("%",wl.percent,u):Jo(u,"px")?Yv("px",wl.pixels,u):wl.invalid(u)},ii=On(On({},wl),{from:Cb}),dm=function(u,l){return _t(u,function(d){var h=ii.from(d);return h.fold(function(){return d},function(y){var x=y/l*100;return x+"%"},function(y){return y+"%"})})},Sb=function(u,l,d){var h=d/l;return _t(u,function(y){var x=ii.from(y);return x.fold(function(){return y},function(A){return A*h+"px"},function(A){return A/100*d+"px"})})},LT=function(u,l){var d=u.fold(function(){return wt("")},function(h){var y=h/l;return wt(y+"px")},function(){var h=100/l;return wt(h+"%")});return na(l,d)},_w=function(u,l,d){return u.fold(function(){return l},function(h){return Sb(l,d,h)},function(h){return dm(l,d)})},mm=function(u,l,d){var h=ii.from(d),y=rt(u,function(x){return x==="0px"})?LT(h,u.length):_w(h,u,l);return HT(y)},Op=function(u,l){return u.length===0?l:la(u,function(d,h){return ii.from(h).fold(wt(0),Un,Un)+d},0)},Pg=function(u,l){var d=Math.floor(u);return{value:d+l,remainder:u-d}},xb=function(u,l){return ii.from(u).fold(wt(u),function(d){return d+l+"px"},function(d){return d+l+"%"})},HT=function(u){if(u.length===0)return u;var l=la(u,function(h,y){var x=ii.from(y).fold(function(){return{value:y,remainder:0}},function(A){return Pg(A,"px")},function(A){return{value:A+"%",remainder:0}});return{output:[x.value].concat(h.output),remainder:h.remainder+x.remainder}},{output:[],remainder:0}),d=l.output;return d.slice(0,d.length-1).concat([xb(d[d.length-1],Math.round(l.remainder))])},Ns=ii.from,Jv=function(u,l,d){Kt(l,function(h){var y=u.slice(h.column,h.colspan+h.column),x=Op(y,$f());ko(h.element,"width",x+d)})},Mw=function(u,l,d){Kt(l,function(h,y){var x=Op([u[y]],$f());ko(h.element,"width",x+d)})},Tb=function(u,l,d,h){Kt(d,function(y){var x=u.slice(y.row,y.rowspan+y.row),A=Op(x,Xl());ko(y.element,"height",A+h)}),Kt(l,function(y,x){ko(y.element,"height",u[x])})},Eb=function(u){return Ns(u).fold(wt("px"),wt("px"),wt("%"))},kb=function(u,l,d,h){var y=$n.fromTable(u),x=y.all,A=$n.justCells(y),P=$n.justColumns(y);l.each(function(V){var Q=Eb(V),pe=fs(u),Xe=_s(y,u,h),ht=mm(Xe,pe,V);$n.hasColumns(y)?Mw(ht,P,Q):Jv(ht,A,Q),ko(u,"width",V)}),d.each(function(V){var Q=Eb(V),pe=cl(u),Xe=Cw(y,u,Xf),ht=mm(Xe,pe,V);Tb(ht,x,A,Q),ko(u,"height",V)})},Fw=Zu,Pw=DT,Dp=hw,Ab=zi,Du=function(u){var l=$n.fromTable(u);return l.grid},gs=function(u){var l=[],d=function(x){if(x===void 0)throw new Error("Event bind error: undefined handler");l.push(x)},h=function(x){l=ir(l,function(A){return A!==x})},y=function(){for(var x=[],A=0;A<arguments.length;A++)x[A]=arguments[A];var P={};Kt(u,function(V,Q){P[V]=x[Q]}),Kt(l,function(V){V(P)})};return{bind:d,unbind:h,trigger:y}},Zv=function(u){var l=De(u,function(h){return{bind:h.bind,unbind:h.unbind}}),d=De(u,function(h){return h.trigger});return{registry:l,trigger:d}},du=function(u,l){var d=null,h=function(){An(d)||(clearTimeout(d),d=null)},y=function(){for(var x=[],A=0;A<arguments.length;A++)x[A]=arguments[A];h(),d=setTimeout(function(){d=null,u.apply(null,x)},l)};return{cancel:h,throttle:y}},Ao=function(u){return u.slice(0).sort()},tv=function(u,l){throw new Error("All required keys ("+Ao(u).join(", ")+") were not specified. Specified keys were: "+Ao(l).join(", ")+".")},Is=function(u){throw new Error("Unsupported keys for object: "+Ao(u).join(", "))},Ob=function(u,l){if(!Sn(l))throw new Error("The "+u+" fields must be an array. Was: "+l+".");Kt(l,function(d){if(!Ut(d))throw new Error("The value "+d+" in the "+u+" fields was not a string.")})},Rp=function(u,l){throw new Error("All values need to be of type: "+l+". Keys ("+Ao(u).join(", ")+") were not.")},Db=function(u){var l=Ao(u),d=yt(l,function(h,y){return y<l.length-1&&h===l[y+1]});d.each(function(h){throw new Error("The field: "+h+" occurs more than once in the combined fields: ["+l.join(", ")+"].")})},vr=function(u,l){return Ng(u,l,{validate:br,label:"function"})},Ng=function(u,l,d){if(l.length===0)throw new Error("You must specify at least one required field.");return Ob("required",l),Db(l),function(h){var y=ie(h),x=rt(l,function(P){return Nn(y,P)});x||tv(l,y),u(l,y);var A=ir(l,function(P){return!d.validate(h[P],P)});return A.length>0&&Rp(A,d.label),h}},Nw=function(u,l){var d=ir(l,function(h){return!Nn(u,h)});d.length>0&&Is(d)},nv=function(u){return vr(Nw,u)},VT=nv(["compare","extract","mutate","sink"]),ru=nv(["element","start","stop","destroy"]),hs=nv(["forceDrop","drop","move","delayDrop"]),gm=function(){var u=Y.none(),l=function(){u=Y.none()},d=function(x,A){var P=u.map(function(V){return x.compare(V,A)});return u=Y.some(A),P},h=function(x,A){var P=A.extract(x);P.each(function(V){var Q=d(A,V);Q.each(function(pe){y.trigger.move(pe)})})},y=Zv({move:gs(["info"])});return{onEvent:h,reset:l,events:y.registry}},Fa=function(){var u=Zv({move:gs(["info"])});return{onEvent:it,reset:it,events:u.registry}},UT=function(){var u=Fa(),l=gm(),d=u,h=function(){d.reset(),d=l},y=function(){d.reset(),d=u},x=function(P,V){d.onEvent(P,V)},A=function(){return d===l};return{on:h,off:y,isOn:A,onEvent:x,events:l.events}},ef=function(u,l,d){var h=!1,y=Zv({start:gs([]),stop:gs([])}),x=UT(),A=function(){tt.stop(),x.isOn()&&(x.off(),y.trigger.stop())},P=du(A,200),V=function(qt){tt.start(qt),x.on(),y.trigger.start()},Q=function(qt){P.cancel(),x.onEvent(qt,l)};x.events.move.bind(function(qt){l.mutate(u,qt.info)});var pe=function(){h=!0},Xe=function(){h=!1},ht=function(qt){return function(){for(var Wt=[],rr=0;rr<arguments.length;rr++)Wt[rr]=arguments[rr];h&&qt.apply(null,Wt)}},tt=l.sink(hs({forceDrop:A,drop:ht(A),move:ht(Q),delayDrop:ht(P.throttle)}),d),Ye=function(){tt.destroy()};return{element:tt.element,go:V,on:pe,off:Xe,destroy:Ye,events:y.registry}},Iw=function(u,l,d,h,y,x,A){return{target:u,x:l,y:d,stop:h,prevent:y,kill:x,raw:A}},Qv=function(u){var l=et.fromDom(Cu(u).getOr(u.target)),d=function(){return u.stopPropagation()},h=function(){return u.preventDefault()},y=He(h,d);return Iw(l,u.clientX,u.clientY,d,h,y,u)},Bp=function(u,l){return function(d){u(d)&&l(Qv(d))}},_p=function(u,l,d,h,y){var x=Bp(d,h);return u.dom.addEventListener(l,x,y),{unbind:Te(tf,u,l,x,y)}},$w=function(u,l,d,h){return _p(u,l,d,h,!1)},tf=function(u,l,d,h){u.dom.removeEventListener(l,d,h)},Ru=bt,hm=function(u,l,d){return $w(u,l,Ru,d)},ed=Qv,td=function(u,l){var d=tl(u,l);return d===void 0||d===""?[]:d.split(" ")},Mp=function(u,l,d){var h=td(u,l),y=h.concat([d]);return _a(u,l,y.join(" ")),!0},Fp=function(u,l,d){var h=ir(td(u,l),function(y){return y!==d});return h.length>0?_a(u,l,h.join(" ")):Ya(u,l),!1},Pp=function(u){return u.dom.classList!==void 0},WT=function(u){return td(u,"class")},jT=function(u,l){return Mp(u,"class",l)},Np=function(u,l){return Fp(u,"class",l)},Qu=function(u,l){Pp(u)?u.dom.classList.add(l):jT(u,l)},Ip=function(u){var l=Pp(u)?u.dom.classList:WT(u);l.length===0&&Ya(u,"class")},Kr=function(u,l){if(Pp(u)){var d=u.dom.classList;d.remove(l)}else Np(u,l);Ip(u)},xo=function(u,l){return Pp(u)&&u.dom.classList.contains(l)},Ei=function(u){var l=u.replace(/\./g,"-"),d=function(h){return l+"-"+h};return{resolve:d}},Rb=Ei("ephox-dragster"),sa=Rb.resolve,$p=function(u){var l=On({layerClass:sa("blocker")},u),d=et.fromTag("div");_a(d,"role","presentation"),ri(d,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Qu(d,sa("blocker")),Qu(d,l.layerClass);var h=wt(d),y=function(){Qo(d)};return{element:h,destroy:y}},Bb=function(u,l){return Ta(l.left-u.left,l.top-u.top)},ui=function(u){return Y.some(Ta(u.x,u.y))},rv=function(u,l){u.mutate(l.left,l.top)},qT=function(u,l){var d=$p(l),h=hm(d.element(),"mousedown",u.forceDrop),y=hm(d.element(),"mouseup",u.drop),x=hm(d.element(),"mousemove",u.move),A=hm(d.element(),"mouseout",u.delayDrop),P=function(){d.destroy(),y.unbind(),x.unbind(),A.unbind(),h.unbind()},V=function(pe){fr(pe,d.element())},Q=function(){Qo(d.element())};return ru({element:d.element,start:V,stop:Q,destroy:P})},zp=VT({compare:Bb,extract:ui,sink:qT,mutate:rv}),GT=function(u,l){l===void 0&&(l={});var d=l.mode!==void 0?l.mode:zp;return ef(u,d,l)},Ig=function(u){return Bo(u,"[contenteditable]")},pm=function(u,l){return l===void 0&&(l=!1),!Dt().browser.isIE()&&aa(u)?u.dom.isContentEditable:Ig(u).fold(wt(l),function(d){return nd(d)==="true"})},nd=function(u){return u.dom.contentEditable},_b=Ei("ephox-snooker"),$g=_b.resolve,Mb=function(){var u=Zv({drag:gs(["xDelta","yDelta"])}),l=function(d,h){u.trigger.drag(d,h)};return{mutate:l,events:u.registry}},Fb=function(){var u=Zv({drag:gs(["xDelta","yDelta","target"])}),l=Y.none(),d=Mb();d.events.drag.bind(function(x){l.each(function(A){u.trigger.drag(x.xDelta,x.yDelta,A)})});var h=function(x){l=Y.some(x)},y=function(){return l};return{assign:h,get:y,mutate:d.mutate,events:u.registry}},$u=function(u,l,d,h,y){var x=et.fromTag("div");return ri(x,{position:"absolute",left:l-h/2+"px",top:d+"px",height:y+"px",width:h+"px"}),Pv(x,{"data-column":u,role:"presentation"}),x},av=function(u,l,d,h,y){var x=et.fromTag("div");return ri(x,{position:"absolute",left:l+"px",top:d-y/2+"px",height:y+"px",width:h+"px"}),Pv(x,{"data-row":u,role:"presentation"}),x},Bu=$g("resizer-bar"),zg=$g("resizer-rows"),ci=$g("resizer-cols"),zw=7,ov=function(u,l){return $t(u.all,function(d,h){return l(d.element)?[h]:[]})},Lw=function(u,l){var d=[];return na(u.grid.columns,function(h){var y=$n.getColumnAt(u,h).map(function(x){return x.element});y.forall(l)&&d.push(h)}),ir(d,function(h){var y=$n.filterItems(u,function(x){return x.column===h});return rt(y,function(x){return l(x.element)})})},Lp=function(u){var l=eu(u.parent(),"."+Bu);Kt(l,Qo)},Pb=function(u,l,d){var h=u.origin();Kt(l,function(y){y.each(function(x){var A=d(h,x);Qu(A,Bu),fr(u.parent(),A)})})},Nb=function(u,l,d,h){Pb(u,l,function(y,x){var A=$u(x.col,x.x-y.left,d.top-y.top,zw,h);return Qu(A,ci),A})},Hp=function(u,l,d,h){Pb(u,l,function(y,x){var A=av(x.row,d.left-y.left,x.y-y.top,h,zw);return Qu(A,zg),A})},Ib=function(u,l,d,h,y){var x=Pc(d),A=l.isResizable,P=h.length>0?Xf.positions(h,d):[],V=P.length>0?ov(u,A):[],Q=ir(P,function(tt,Ye){return D(V,function(qt){return Ye===qt})});Hp(l,Q,x,rp(d));var pe=y.length>0?am.positions(y,d):[],Xe=pe.length>0?Lw(u,A):[],ht=ir(pe,function(tt,Ye){return D(Xe,function(qt){return Ye===qt})});Nb(l,ht,x,ip(d))},Vp=function(u,l){if(Lp(u),u.isResizable(l)){var d=$n.fromTable(l),h=cw(d),y=ot(d);Ib(d,u,l,h,y)}},Hw=function(u,l){var d=eu(u.parent(),"."+Bu);Kt(d,l)},au=function(u){Hw(u,function(l){ko(l,"display","none")})},ou=function(u){Hw(u,function(l){ko(l,"display","block")})},_u=function(u){return xo(u,zg)},Mu=function(u){return xo(u,ci)},Vi=$g("resizer-bar-dragging"),Ui=function(u){var l=Fb(),d=GT(l,{}),h=Y.none(),y=function(Ye,qt){return Y.from(tl(Ye,qt))};l.events.drag.bind(function(Ye){y(Ye.target,"data-row").each(function(qt){var Wt=If(Ye.target,"top");ko(Ye.target,"top",Wt+Ye.yDelta+"px")}),y(Ye.target,"data-column").each(function(qt){var Wt=If(Ye.target,"left");ko(Ye.target,"left",Wt+Ye.xDelta+"px")})});var x=function(Ye,qt){var Wt=If(Ye,qt),rr=pi(Ye,"data-initial-"+qt,0);return Wt-rr};d.events.stop.bind(function(){l.get().each(function(Ye){h.each(function(qt){y(Ye,"data-row").each(function(Wt){var rr=x(Ye,"top");Ya(Ye,"data-initial-top"),tt.trigger.adjustHeight(qt,rr,parseInt(Wt,10))}),y(Ye,"data-column").each(function(Wt){var rr=x(Ye,"left");Ya(Ye,"data-initial-left"),tt.trigger.adjustWidth(qt,rr,parseInt(Wt,10))}),Vp(u,qt)})})});var A=function(Ye,qt){tt.trigger.startAdjust(),l.assign(Ye),_a(Ye,"data-initial-"+qt,If(Ye,qt)),Qu(Ye,Vi),ko(Ye,"opacity","0.2"),d.go(u.parent())},P=hm(u.parent(),"mousedown",function(Ye){_u(Ye.target)&&A(Ye.target,"top"),Mu(Ye.target)&&A(Ye.target,"left")}),V=function(Ye){return wr(Ye,u.view())},Q=function(Ye){return Bo(Ye,"table",V).filter(pm)},pe=hm(u.view(),"mouseover",function(Ye){Q(Ye.target).fold(function(){aa(Ye.target)&&Lp(u)},function(qt){h=Y.some(qt),Vp(u,qt)})}),Xe=function(){P.unbind(),pe.unbind(),d.destroy(),Lp(u)},ht=function(Ye){Vp(u,Ye)},tt=Zv({adjustHeight:gs(["table","delta","row"]),adjustWidth:gs(["table","delta","column"]),startAdjust:gs([])});return{destroy:Xe,refresh:ht,on:d.on,off:d.off,hideBars:Te(au,u),showBars:Te(ou,u),events:tt.registry}},Up=function(u,l,d){var h=Xf,y=am,x=Ui(u),A=Zv({beforeResize:gs(["table","type"]),afterResize:gs(["table","type"]),startDrag:gs([])});return x.events.adjustHeight.bind(function(P){var V=P.table;A.trigger.beforeResize(V,"row");var Q=h.delta(P.delta,V);ev(V,Q,P.row,h),A.trigger.afterResize(V,"row")}),x.events.startAdjust.bind(function(P){A.trigger.startDrag()}),x.events.adjustWidth.bind(function(P){var V=P.table;A.trigger.beforeResize(V,"col");var Q=y.delta(P.delta,V),pe=d(V);Ps(V,Q,P.column,l,pe),A.trigger.afterResize(V,"col")}),{on:x.on,off:x.off,hideBars:x.hideBars,showBars:x.showBars,destroy:x.destroy,events:A.registry}},Wp={create:Up},iv=function(u,l){return u.fire("newrow",{node:l})},nf=function(u,l){return u.fire("newcell",{node:l})},$b=function(u,l,d,h,y){u.fire("ObjectResizeStart",{target:l,width:d,height:h,origin:y})},Vw=function(u,l,d,h,y){u.fire("ObjectResized",{target:l,width:d,height:h,origin:y})},jp=function(u,l,d,h,y){u.fire("TableSelectionChange",{cells:l,start:d,finish:h,otherCells:y})},uv=function(u){u.fire("TableSelectionClear")},ec=function(u,l,d){u.fire("TableModified",On(On({},d),{table:l}))},Lg={structure:!1,style:!0},ki={structure:!0,style:!1},qp={structure:!0,style:!0},cv="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",Hg={"border-collapse":"collapse",width:"100%"},KT=na(5,function(u){var l=u+1+"px";return{title:l,value:l}}),Uw=_t(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],function(u){return{title:u,value:u.toLowerCase()}}),XT=function(u){if(ym(u)){var l=u.getBody().offsetWidth;return On(On({},Hg),{width:l+"px"})}else return Ge(u)?Ue(Hg,function(d,h){return h!=="width"}):Hg},YT={border:"1"},Gp="preservetable",Pt=function(u){return u.getParam("table_sizing_mode","auto")},zb=function(u){return u.getParam("table_responsive_width")},si=function(u){return u.getParam("table_border_widths",KT,"array")},rd=function(u){return u.getParam("table_border_styles",Uw,"array")},Kp=function(u){return u.getParam("table_default_attributes",YT,"object")},ad=function(u){return u.getParam("table_default_styles",XT(u),"object")},yc=function(u){return u.getParam("table_resize_bars",!0,"boolean")},Ww=function(u){return u.getParam("table_tab_navigation",!0,"boolean")},bm=function(u){return u.getParam("table_cell_advtab",!0,"boolean")},Vg=function(u){return u.getParam("table_row_advtab",!0,"boolean")},Fu=function(u){return u.getParam("table_advtab",!0,"boolean")},jw=function(u){return u.getParam("table_appearance_options",!0,"boolean")},Xp=function(u){return u.getParam("table_grid",!0,"boolean")},tc=function(u){return u.getParam("table_style_by_css",!1,"boolean")},Vc=function(u){return u.getParam("table_cell_class_list",[],"array")},Lb=function(u){return u.getParam("table_row_class_list",[],"array")},Wi=function(u){return u.getParam("table_class_list",[],"array")},Cl=function(u){return Pt(u)==="relative"||zb(u)===!0},ym=function(u){return Pt(u)==="fixed"||zb(u)===!1},Ge=function(u){return Pt(u)==="responsive"},Ug=function(u){return u.getParam("table_toolbar",cv)},qw=function(u){return u.getParam("table_use_colgroups",!1,"boolean")},Yp=function(u){var l="section",d=u.getParam("table_header_type",l,"string"),h=["section","cells","sectionCells","auto"];return Nn(h,d)?d:l},Wg=function(u){var l=["preservetable","resizetable"],d=u.getParam("table_column_resizing",Gp,"string");return yt(l,function(h){return h===d}).getOr(Gp)},Uc=function(u){return Wg(u)==="preservetable"},Hb=function(u){return Wg(u)==="resizetable"},Vb=function(u){var l=u.getParam("table_clone_elements");return Ut(l)?Y.some(l.split(/[ ,]/)):Array.isArray(l)?Y.some(l):Y.none()},Gw=function(u){var l=u.getParam("object_resizing",!0);return Ut(l)?l==="table":l},Jp=function(u){return u.getParam("table_background_color_map",[],"array")},Kw=function(u){return u.getParam("table_border_color_map",[],"array")},od=function(u,l){if(Cl(u)){var d=no(u,l.dom).filter(hc).getOrThunk(function(){return Ab(l)});return Iu.percentageSize(d,l)}else return ym(u)?Iu.pixelSize(fs(l),l):Iu.getTableSize(l)},Zp=function(u){Ya(u,"width")},Ub=function(u,l){var d=zi(u);kb(u,Y.some(d),Y.none(),l),Zp(u)},JT=function(u,l){var d=gw(u);kb(u,Y.some(d),Y.none(),l),Zp(u)},jg=function(u){As(u,"width");var l=us(u),d=l.length>0?l:Os(u);Kt(d,function(h){As(h,"width"),Zp(h)}),Zp(u)},qg=function(u,l){var d=od(u,l);Ub(l,d)},Wb=function(u,l){var d=od(u,l);JT(l,d)},jb=jg,Qp=function(u){var l=$n.fromTable(u);$n.hasColumns(l)||Kt(Os(u),function(d){var h=Gu(d,"width");ko(d,"width",h),Ya(d,"width")})},ZT=function(){var u=et.fromTag("div");return ri(u,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),fr(Rc(),u),u},e1=function(u,l){return u.inline?yl.body(dl(u),ZT(),l):yl.only(et.fromDom(u.getDoc()),l)},QT=function(u,l){u.inline&&Qo(l.parent())},Sl="bar-",ro=function(u){return tl(u,"data-mce-resize")!=="false"},qb=function(u){var l=Y.none(),d=Y.none(),h=Y.none(),y,x,A=function(Ye){return Ye.nodeName==="TABLE"},P=function(){return d},V=function(){return h.getOr(yl.only(et.fromDom(u.getBody()),ro))},Q=function(Ye){return od(u,Ye)},pe=function(){return Uc(u)?Fg():Ap()},Xe=function(Ye){return Du(Ye).columns},ht=function(Ye,qt,Wt){var rr=Jo(qt,"e");if(x===""&&qg(u,Ye),Wt!==y&&x!==""){ko(Ye,"width",x);var oa=pe(),Fn=Q(Ye),er=Uc(u)||rr?Xe(Ye)-1:0;Ps(Ye,Wt-y,er,oa,Fn)}else if(hc(x)){var _r=parseFloat(x.replace("%","")),Ir=Wt*_r/y;ko(Ye,"width",Ir+"%")}wo(x)&&Qp(Ye)},tt=function(){d.each(function(Ye){Ye.destroy()}),h.each(function(Ye){QT(u,Ye)})};return u.on("init",function(){var Ye=e1(u,ro);if(h=Y.some(Ye),Gw(u)&&yc(u)){var qt=pe(),Wt=Wp.create(Ye,qt,Q);Wt.on(),Wt.events.startDrag.bind(function(rr){l=Y.some(u.selection.getRng())}),Wt.events.beforeResize.bind(function(rr){var oa=rr.table.dom;$b(u,oa,sm(oa),Cp(oa),Sl+rr.type)}),Wt.events.afterResize.bind(function(rr){var oa=rr.table,Fn=oa.dom;ms(oa),l.each(function(er){u.selection.setRng(er),u.focus()}),Vw(u,Fn,sm(Fn),Cp(Fn),Sl+rr.type),u.undoManager.add()}),d=Y.some(Wt)}}),u.on("ObjectResizeStart",function(Ye){var qt=Ye.target;if(A(qt)){var Wt=et.fromDom(qt);Kt(u.dom.select(".mce-clonedresizable"),function(rr){u.dom.addClass(rr,"mce-"+Wg(u)+"-columns")}),!Pw(Wt)&&ym(u)?Wb(u,Wt):!Fw(Wt)&&Cl(u)&&qg(u,Wt),Dp(Wt)&&eo(Ye.origin,Sl)&&qg(u,Wt),y=Ye.width,x=Ge(u)?"":no(u,qt).getOr("")}}),u.on("ObjectResized",function(Ye){var qt=Ye.target;if(A(qt)){var Wt=et.fromDom(qt),rr=Ye.origin;eo(rr,"corner-")&&ht(Wt,rr,Ye.width),ms(Wt),ec(u,Wt.dom,Lg)}}),u.on("SwitchMode",function(){P().each(function(Ye){u.mode.isReadOnly()?Ye.hideBars():Ye.showBars()})}),{lazyResize:P,lazyWire:V,destroy:tt}},ji=function(u,l){return{element:u,offset:l}},Gg=function(u,l,d){return u.property().isText(l)&&u.property().getText(l).trim().length===0||u.property().isComment(l)?d(l).bind(function(h){return Gg(u,h,d).orThunk(function(){return Y.some(h)})}):Y.none()},t1=function(u,l){if(u.property().isText(l))return u.property().getText(l).length;var d=u.property().children(l);return d.length},Gb=function(u,l){var d=Gg(u,l,u.query().prevSibling).getOr(l);if(u.property().isText(d))return ji(d,t1(u,d));var h=u.property().children(d);return h.length>0?Gb(u,h[h.length-1]):ji(d,t1(u,d))},n1=Gb,Xw=Hf(),Yw=function(u){return n1(Xw,u)},eE=function(u,l){var d=is(u,"colspan");if(d===1){var h=Eu(u);h.each(function(y){var x=y.value/2;$c(u,x,y.unit),$c(l,x,y.unit)})}},Jw=wu("th"),tE=function(u,l){return u&&l?"sectionCells":u?"section":"cells"},Zw=function(u){var l=u.section==="thead",d=jd(r1(u.cells),"th");return l||d?{type:"header",subType:tE(l,d)}:u.section==="tfoot"?{type:"footer"}:{type:"body"}},r1=function(u){var l=ir(u,function(d){return Jw(d.element)});return l.length===0?Y.some("td"):l.length===u.length?Y.some("th"):Y.none()},nE=function(u){var l=_t(u,function(x){return Zw(x).type}),d=Nn(l,"header"),h=Nn(l,"footer");if(!d&&!h)return Y.some("body");var y=Nn(l,"body");return d&&!y&&!h?Y.some("header"):!d&&!y&&h?Y.some("footer"):Y.none()},rE=function(u){return Ur(u.all,function(l){var d=Zw(l);return d.type==="header"?Y.from(d.subType):Y.none()})},Kb=function(u,l,d){return ba(d(u.element,l),!0,u.isLocked)},Xb=function(u,l){return u.section!==l?Ia(u.element,u.cells,l,u.isNew):u},Qw=function(){return{transformRow:Xb,transformCell:function(u,l,d){var h=d(u.element,l),y=hr(h)!=="td"?wi(h,"td"):h;return ba(y,u.isNew,u.isLocked)}}},Yb=function(){return{transformRow:Xb,transformCell:Kb}},eC=function(){return{transformRow:function(u,l){var d=l==="thead"?"tbody":l;return Xb(u,d)},transformCell:Kb}},iu=function(){return{transformRow:Un,transformCell:Kb}},Kg=function(u,l){var d=$n.fromTable(u),h=rE(d).getOr(l);switch(h){case"section":return Qw();case"sectionCells":return Yb();case"cells":return eC()}},sv={getTableSectionType:Kg,section:Qw,sectionCells:Yb,cells:eC,fallback:iu},wm=function(u,l,d,h){d===h?Ya(u,l):_a(u,l,d)},tC=function(u,l,d){qr(Ff(u,l)).fold(function(){return Cr(u,d)},function(h){return Tr(h,d)})},aE=function(u,l){var d=Kl(u,l).getOrThunk(function(){var h=et.fromTag(l,Eo(u).dom);return l==="thead"?tC(u,"caption,colgroup",h):l==="colgroup"?tC(u,"caption",h):fr(u,h),h});return al(d),d},oE=function(u,l){var d=[],h=[],y=function(tt){return _t(tt,function(Ye){Ye.isNew&&d.push(Ye.element);var qt=Ye.element;return al(qt),Kt(Ye.cells,function(Wt){Wt.isNew&&h.push(Wt.element),wm(Wt.element,"colspan",Wt.colspan,1),wm(Wt.element,"rowspan",Wt.rowspan,1),fr(qt,Wt.element)}),qt})},x=function(tt){return $t(tt,function(Ye){return _t(Ye.cells,function(qt){return wm(qt.element,"span",qt.colspan,1),qt.element})})},A=function(tt,Ye){var qt=aE(u,Ye),Wt=Ye==="colgroup"?x:y,rr=Wt(tt);ls(qt,rr)},P=function(tt){Kl(u,tt).each(Qo)},V=function(tt,Ye){tt.length>0?A(tt,Ye):P(Ye)},Q=[],pe=[],Xe=[],ht=[];return Kt(l,function(tt){switch(tt.section){case"thead":Q.push(tt);break;case"tbody":pe.push(tt);break;case"tfoot":Xe.push(tt);break;case"colgroup":ht.push(tt);break}}),V(ht,"colgroup"),V(Q,"thead"),V(pe,"tbody"),V(Xe,"tfoot"),{newRows:d,newCells:h}},Cm=function(u){return _t(u,function(l){var d=sn(l.element);return Kt(l.cells,function(h){var y=Mc(h.element);wm(y,"colspan",h.colspan,1),wm(y,"rowspan",h.rowspan,1),fr(d,y)}),d})},a1=function(u,l){return _t(u,function(d){return Mn(d,l)})},Xg=function(u,l){return u[l]},o1=function(u,l){if(u.length===0)return 0;var d=u[0],h=Jt(u,function(y){return!l(d.element,y.element)});return h.getOr(u.length)},iE=function(u,l,d,h){var y=Xg(u,l).cells.slice(d),x=o1(y,h),A=a1(u,d).slice(l),P=o1(A,h);return{colspan:x,rowspan:P}},xl=function(u,l){var d=_t(u,function(y){return _t(y.cells,pt)}),h=function(y,x,A,P){for(var V=y;V<y+A;V++)for(var Q=x;Q<x+P;Q++)d[V][Q]=!0};return _t(u,function(y,x){var A=$t(y.cells,function(P,V){if(d[x][V]===!1){var Q=iE(u,x,V,l);return h(x,V,Q.rowspan,Q.colspan),[ga(P.element,Q.rowspan,Q.colspan,P.isNew)]}else return[]});return Pr(y.element,A,y.section,y.isNew)})},id=function(u,l,d){var h=[];Kt(u.colgroups,function(pe){var Xe=_t(pe.columns,function(ht){return ba(ht.element,d,!1)});h.push(Ia(pe.element,Xe,"colgroup",d))});for(var y=0;y<u.grid.rows;y++){for(var x=[],A=0;A<u.grid.columns;A++){var P=$n.getAt(u,y,A).map(function(pe){return ba(pe.element,d,pe.isLocked)}).getOrThunk(function(){return ba(l.gap(),!0,!1)});x.push(P)}var V=u.all[y],Q=Ia(V.element,x,V.section,d);h.push(Q)}return h},uE=function(u,l){return id(u,l,!1)},$s=function(u){return xl(u,wr)},Sm=function(u,l){return Ur(u.all,function(d){return yt(d.cells,function(h){return wr(l,h.element)})})},Jb=function(u,l,d){var h=_t(l.selection,function(x){return nl(x).bind(function(A){return Sm(u,A)}).filter(d)}),y=Su(h);return Gd(y.length>0,y)},qi=function(u,l,d,h,y){return function(x,A,P,V,Q){var pe=$n.fromTable(A),Xe=Y.from(Q==null?void 0:Q.section).getOrThunk(sv.fallback),ht=l(pe,P).map(function(tt){var Ye=uE(pe,V),qt=u(Ye,tt,wr,y(V),Xe),Wt=dc(qt.grid),rr=$s(qt.grid);return{info:tt,grid:rr,cursor:qt.cursor,lockedColumns:Wt}});return ht.bind(function(tt){var Ye=oE(A,tt.grid),qt=Y.from(Q==null?void 0:Q.sizing).getOrThunk(function(){return Iu.getTableSize(A)}),Wt=Y.from(Q==null?void 0:Q.resize).getOrThunk(Fg);return d(A,tt.grid,tt.info,{sizing:qt,resize:Wt,section:Xe}),h(A),Vp(x,A),Ya(A,_c),tt.lockedColumns.length>0&&_a(A,_c,tt.lockedColumns.join(",")),Y.some({cursor:tt.cursor,newRows:Ye.newRows,newCells:Ye.newCells})})}},nC=function(u,l){return nl(l.element).bind(function(d){return Sm(u,d).map(function(h){var y=On(On({},h),{generators:l.generators,clipboard:l.clipboard});return y})})},i1=function(u,l){return Jb(u,l,bt).map(function(d){return{cells:d,generators:l.generators,clipboard:l.clipboard}})},rC=function(u,l){return l.mergable},aC=function(u,l){return l.unmergable},Tl=function(u,l){return Jb(u,l,bt)},El=function(u,l){return Jb(u,l,function(d){return!d.isLocked})},oC=function(u,l){return Sm(u,l).exists(function(d){return!d.isLocked})},Zb=function(u,l){return rt(l,function(d){return oC(u,d)})},iC=function(u,l){return rC(u,l).filter(function(d){return Zb(u,d.cells)})},Qb=function(u,l){return aC(u,l).filter(function(d){return Zb(u,d)})},cE=function(u,l,d,h){var y=ai(u).rows;if(y.length===0)return u;for(var x=l.startRow;x<=l.finishRow;x++)for(var A=l.startCol;A<=l.finishCol;A++){var P=y[x],V=Mn(P,A).isLocked;Ni(P,A,ba(h(),!1,V))}return u},ey=function(u,l,d,h){for(var y=ai(u).rows,x=!0,A=0;A<y.length;A++)for(var P=0;P<Ii(y[0]);P++){var V=y[A],Q=Mn(V,P),pe=Q.element,Xe=d(pe,l);Xe===!0&&x===!1?Ni(V,P,ba(h(),!0,Q.isLocked)):Xe===!0&&(x=!1)}return u},ty=function(u,l){return te(u,function(d,h){return D(d,function(y){return l(y.element,h.element)})?d:d.concat([h])},[])},uC=function(u,l,d,h){return l>0&&l<u[0].cells.length&&Kt(u,function(y){var x=y.cells[l-1],A=y.cells[l],P=d(A.element,x.element);P&&Ni(y,l,ba(h(),!0,A.isLocked))}),u},Yg=function(u,l,d,h){var y=ai(u).rows;if(l>0&&l<y.length){var x=y[l-1].cells,A=ty(x,d);Kt(A,function(P){for(var V=Y.none(),Q=l;Q<y.length;Q++)for(var pe=function(ht){var tt=y[Q],Ye=Mn(tt,ht),qt=d(Ye.element,P.element);qt&&(V.isNone()&&(V=Y.some(h())),V.each(function(Wt){Ni(tt,ht,ba(Wt,!0,Ye.isLocked))}))},Xe=0;Xe<Ii(y[0]);Xe++)pe(Xe)})}return u},xm=function(u){var l=function(Xe){return xm(u)},d=function(Xe){return xm(u)},h=function(Xe){return xm(Xe(u))},y=function(Xe){return xm(u)},x=function(Xe){Xe(u)},A=function(Xe){return Xe(u)},P=function(Xe,ht){return ht(u)},V=function(Xe){return Xe(u)},Q=function(Xe){return Xe(u)},pe=function(){return Y.some(u)};return{isValue:bt,isError:pt,getOr:wt(u),getOrThunk:wt(u),getOrDie:wt(u),or:l,orThunk:d,fold:P,map:h,mapError:y,each:x,bind:A,exists:V,forall:Q,toOptional:pe}},rf=function(u){var l=function(Q){return Q()},d=function(){return gt(String(u))()},h=Un,y=function(Q){return Q()},x=function(Q){return rf(u)},A=function(Q){return rf(Q(u))},P=function(Q){return rf(u)},V=function(Q,pe){return Q(u)};return{isValue:pt,isError:bt,getOr:Un,getOrThunk:l,getOrDie:d,or:h,orThunk:y,fold:V,map:x,mapError:A,each:it,bind:P,exists:pt,forall:bt,toOptional:Y.none}},sE=function(u,l){return u.fold(function(){return rf(l)},xm)},cC={value:xm,error:rf,fromOption:sE},ny=function(u,l,d){if(u.row>=l.length||u.column>Ii(l[0]))return cC.error("invalid start address out of table bounds, row: "+u.row+", column: "+u.column);var h=l.slice(u.row),y=h[0].cells.slice(u.column),x=Ii(d[0]),A=d.length;return cC.value({rowDelta:h.length-A,colDelta:y.length-x})},u1=function(u,l){var d=Ii(u[0]),h=Ii(l[0]);return{rowDelta:0,colDelta:d-h}},sC=function(u,l){var d=u.length,h=l.length;return{rowDelta:d-h,colDelta:0}},ry=function(u,l,d,h){var y=l.section==="colgroup"?d.col:d.cell;return na(u,function(x){return ba(y(),!0,h(x))})},lE=function(u,l,d,h){var y=u[u.length-1];return u.concat(na(l,function(){var x=y.section==="colgroup"?d.colgroup:d.row,A=Jd(y,x,Un),P=ry(A.cells.length,A,d,function(V){return ue(h,V.toString())});return zf(A,P)}))},fE=function(u,l,d,h){return _t(u,function(y){var x=ry(l,y,d,pt);return gg(y,h,x)})},vE=function(u,l,d){return _t(u,function(h){return te(d,function(y,x){var A=ry(1,h,l,bt)[0];return hg(y,x,A)},h)})},Jg=function(u,l,d){var h=l.colDelta<0?fE:Un,y=l.rowDelta<0?lE:Un,x=dc(u),A=Ii(u[0]),P=D(x,function(pe){return pe===A-1}),V=h(u,Math.abs(l.colDelta),d,P?A-1:A),Q=dc(V);return y(V,Math.abs(l.rowDelta),d,kn(Q,bt))},c1=function(u,l,d,h){var y=Mn(u[l],d),x=Te(h,y.element),A=u[l];return u.length>1&&Ii(A)>1&&(d>0&&x(so(A,d-1))||d<A.cells.length-1&&x(so(A,d+1))||l>0&&x(so(u[l-1],d))||l<u.length-1&&x(so(u[l+1],d)))},dE=function(u,l,d,h,y,x){for(var A=u.row,P=u.column,V=d.length,Q=Ii(d[0]),pe=A+V,Xe=P+Q+x.length,ht=kn(x,bt),tt=A;tt<pe;tt++)for(var Ye=0,qt=P;qt<Xe;qt++){if(ht[qt]){Ye++;continue}c1(l,tt,qt,y)&&ey(l,so(l[tt],qt),y,h.cell);var Wt=qt-P-Ye,rr=Mn(d[tt-A],Wt),oa=rr.element,Fn=h.replace(oa);Ni(l[tt],qt,ba(Fn,!0,rr.isLocked))}return l},mE=function(u,l,d){var h=Ii(l[0]),y=ai(l).cols.length+u.row,x=na(h-u.column,function(P){return P+u.column}),A=yt(x,function(P){return rt(d,function(V){return V!==P})}).getOr(h-1);return{row:y,column:A}},lC=function(u,l,d){return ir(d,function(h){return h>=u.column&&h<=Ii(l[0])+u.column})},gE=function(u,l,d,h,y){var x=dc(l),A=mE(u,l,x),P=ai(d).rows,V=lC(A,P,x),Q=ny(A,l,P);return Q.map(function(pe){var Xe=On(On({},pe),{colDelta:pe.colDelta-V.length}),ht=Jg(l,Xe,h),tt=dc(ht),Ye=lC(A,P,tt);return dE(A,ht,P,h,y,Ye)})},fC=function(u,l,d,h,y){uC(l,u,y,h.cell);var x=sC(d,l),A=Jg(d,x,h),P=sC(l,A),V=Jg(l,P,h);return _t(V,function(Q,pe){return gg(Q,u,A[pe].cells)})},s1=function(u,l,d,h,y){Yg(l,u,y,h.cell);var x=dc(l),A=u1(l,d),P=On(On({},A),{colDelta:A.colDelta-x.length}),V=Jg(l,P,h),Q=ai(V),pe=Q.cols,Xe=Q.rows,ht=dc(V),tt=u1(d,l),Ye=On(On({},tt),{colDelta:tt.colDelta+ht.length}),qt=vE(d,h,ht),Wt=Jg(qt,Ye,h);return pe.concat(Xe.slice(0,u)).concat(Wt).concat(Xe.slice(u,Xe.length))},hE=function(u,l,d,h){return Jd(u,function(y){return h(y,d)},l)},Tm=function(u,l,d,h,y){var x=ai(u),A=x.rows,P=x.cols,V=A.slice(0,l),Q=A.slice(l),pe=hE(A[d],function(Xe,ht){var tt=l>0&&l<A.length&&h(so(A[l-1],ht),so(A[l],ht)),Ye=tt?Mn(A[l],ht):ba(y(Xe.element,h),!0,Xe.isLocked);return Ye},h,y);return P.concat(V).concat([pe]).concat(Q)},pE=function(u,l,d,h,y,x,A){if(d==="colgroup"||!h){var P=Mn(u,y);return ba(A(P.element,x),!0,!1)}else return Mn(u,l)},vC=function(u,l,d,h,y){return _t(u,function(x){var A=l>0&&l<Ii(x)&&h(so(x,l-1),so(x,l)),P=pE(x,l,x.section,A,d,h,y);return hg(x,l,P)})},dC=function(u,l){return $t(u,function(d){var h=d.cells,y=la(l,function(x,A){return A>=0&&A<x.length?x.slice(0,A).concat(x.slice(A+1)):x},h);return y.length>0?[Ia(d.element,y,d.section,d.isNew)]:[]})},mC=function(u,l,d){var h=ai(u),y=h.rows,x=h.cols;return x.concat(y.slice(0,l)).concat(y.slice(d+1))},ay=function(u,l,d){return ba(d(u.element,l),!0,u.isLocked)},l1=function(u,l,d,h,y){var x=function(A){return D(l,function(P){return d(A.element,P.element)})};return _t(u,function(A){return Yd(A,function(P){return x(P)?y(P,d,h):P})})},oy=function(u,l,d,h){return so(u[l],d)!==void 0&&l>0&&h(so(u[l-1],d),so(u[l],d))},ud=function(u,l,d){return l>0&&d(so(u,l-1),so(u,l))},f1=function(u,l,d,h){var y=ai(u).rows,x=$t(y,function(A,P){var V=oy(y,P,l,d)||ud(A,l,d);return V?[]:[Mn(A,l)]});return l1(u,x,d,h,ay)},gC=function(u,l,d,h,y,x){var A=ai(u),P=A.cols,V=A.rows,Q=V[l],pe=$t(Q.cells,function(ht,tt){var Ye=oy(V,l,tt,h)||ud(Q,tt,h);return Ye?[]:[ht]}),Xe=ra([],V);return Xe[l]=x.transformRow(Q,d),l1(P.concat(Xe),pe,h,y,x.transformCell)},hC=function(u,l,d,h,y){var x=ai(u).rows,A=x[l],P=Mn(A,d);return l1(u,[P],h,y,ay)},Em=function(u){var l=function(d,h){var y=D(d,function(x){return x.column===h.column});return y?d:d.concat([h])};return te(u,l,[]).sort(function(d,h){return d.column-h.column})},iy=wu("col"),pC=wu("colgroup"),uy=function(u){return hr(u)==="tr"||pC(u)},cd=function(u){var l=pi(u,"colspan",1),d=pi(u,"rowspan",1);return{element:u,colspan:l,rowspan:d}},v1=function(u,l){l===void 0&&(l=cd);var d=function(P){return iy(P.element)?u.col(P):u.cell(P)},h=function(P){return pC(P.element)?u.colgroup(P):u.row(P)},y=function(P){if(uy(P))return h({element:P});var V=d(l(P));return x=Y.some({item:P,replacement:V}),V},x=Y.none(),A=function(P,V){return x.fold(function(){return y(P)},function(Q){return V(P,Q.item)?Q.replacement:y(P)})};return{getOrInit:A}},bE=function(u,l){return function(d){var h=[],y=function(P,V){return yt(h,function(Q){return V(Q.item,P)})},x=function(P){var V=ia(l)?{}:{scope:l},Q=d.replace(P,u,V);return h.push({item:P,sub:Q}),Q},A=function(P,V){return uy(P)||iy(P)?P:y(P,V).fold(function(){return x(P)},function(Q){return V(P,Q.item)?Q.sub:x(P)})};return{replaceOrInit:A}}},bC=function(u){return qu(u,"scope").map(function(l){return l.substr(0,3)})},yE=function(u){var l=function(h){var y=bC(h);return y.each(function(x){return _a(h,"scope",x)}),function(){var x=u.cell({element:h,colspan:1,rowspan:1});return As(x,"width"),As(h,"width"),y.each(function(A){return _a(x,"scope",A)}),x}},d=function(h){var y=function(){var x=Su(_t(h,bC));if(x.length===0)return Y.none();var A=x[0],P=["row","col"],V=D(x,function(Q){return Q!==A&&Nn(P,Q)});return V?Y.none():Y.from(A)};return As(h[0],"width"),y().fold(function(){return Ya(h[0],"scope")},function(x){return _a(h[0],"scope",x+"group")}),wt(h[0])};return{unmerge:l,merge:d}},Gi={modification:v1,transform:bE,merging:yE},yC=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],wE=function(u,l){var d=u.property().name(l);return Nn(["ol","ul"],d)},zu=function(u,l){var d=u.property().name(l);return Nn(yC,d)},wC=function(u,l){return Nn(["br","img","hr","input"],u.property().name(l))},sd=Hf(),af=function(u){return zu(sd,u)},d1=function(u){return wE(sd,u)},CE=function(u){return wC(sd,u)},SE=function(u){var l=function(V){return hr(V)==="br"},d=function(V){return rt(V,function(Q){return l(Q)||rs(Q)&&ol(Q).trim().length===0})},h=function(V){return hr(V)==="li"||Ft(V,d1).isSome()},y=function(V){return Ie(V).map(function(Q){return af(Q)?!0:CE(Q)?hr(Q)!=="img":!1}).getOr(!1)},x=function(V){return jv(V).bind(function(Q){var pe=y(Q);return as(Q).map(function(Xe){return pe===!0||h(Xe)||l(Q)||af(Xe)&&!wr(V,Xe)?[]:[et.fromTag("br")]})}).getOr([])},A=function(){var V=$t(u,function(Q){var pe=Z(Q);return d(pe)?[]:pe.concat(x(Q))});return V.length===0?[et.fromTag("br")]:V},P=A();al(u[0]),ls(u[0],P)},m1=function(u){return pm(u,!0)},cy=function(u){var l=Os(u);l.length===0&&Qo(u)},lv=function(u,l){return{grid:u,cursor:l}},xE=function(u){return Ur(u,function(l){return Ur(l.cells,function(d){var h=d.element;return Gd(m1(h),h)})})},ld=function(u,l,d){var h,y,x=ai(u).rows;return Y.from((y=(h=x[l])===null||h===void 0?void 0:h.cells[d])===null||y===void 0?void 0:y.element).filter(m1).orThunk(function(){return xE(x)})},ei=function(u,l,d){var h=ld(u,l,d);return lv(u,h)},fd=function(u){var l=function(d,h){var y=D(d,function(x){return x.row===h.row});return y?d:d.concat([h])};return te(u,l,[]).sort(function(d,h){return d.row-h.row})},km=function(u,l,d,h){var y=l[0].row,x=fd(l),A=la(x,function(P,V){var Q=Tm(P.grid,y,V.row+P.delta,d,h.getOrInit);return{grid:Q,delta:P.delta+1}},{grid:u,delta:0}).grid;return ei(A,y,l[0].column)},zs=function(u,l,d,h){var y=fd(l),x=y[y.length-1],A=x.row+x.rowspan,P=la(y,function(V,Q){return Tm(V,A,Q.row,d,h.getOrInit)},u);return ei(P,A,l[0].column)},Ls=function(u,l,d,h){var y=l.details,x=Em(y),A=x[0].column,P=la(x,function(V,Q){var pe=vC(V.grid,A,Q.column+V.delta,d,h.getOrInit);return{grid:pe,delta:V.delta+1}},{grid:u,delta:0}).grid;return ei(P,y[0].row,A)},g1=function(u,l,d,h){var y=l.details,x=y[y.length-1],A=x.column+x.colspan,P=Em(y),V=la(P,function(Q,pe){return vC(Q,A,pe.column,d,h.getOrInit)},u);return ei(V,y[0].row,A)},sy=function(u,l,d,h){var y=function(P,V){return f1(P,V.column,d,h.replaceOrInit)},x=Em(l),A=te(x,y,u);return ei(A,l[0].row,l[0].column)},CC=function(u,l,d,h){var y=function(A,P){return hC(A,P.row,P.column,d,h.replaceOrInit)},x=te(l,y,u);return ei(x,l[0].row,l[0].column)},ly=function(u,l,d,h){var y=function(P,V){return f1(P,V.column,d,h.replaceOrInit)},x=Em(l),A=te(x,y,u);return ei(A,l[0].row,l[0].column)},Am=function(u,l,d,h){var y=function(A,P){return hC(A,P.row,P.column,d,h.replaceOrInit)},x=te(l,y,u);return ei(x,l[0].row,l[0].column)},fv=function(u){return function(l,d,h,y,x){var A=function(Q,pe){return gC(Q,pe.row,u,h,y.replaceOrInit,x)},P=fd(d),V=te(P,A,l);return ei(V,d[0].row,d[0].column)}},h1=fv("thead"),fy=fv("tbody"),Om=fv("tfoot"),p1=function(u,l,d,h){var y=Em(l.details),x=dC(u,_t(y,function(P){return P.column})),A=x.length>0?x[0].cells.length-1:0;return ei(x,y[0].row,Math.min(y[0].column,A))},TE=function(u,l,d,h){var y=fd(l),x=mC(u,y[0].row,y[y.length-1].row),A=x.length>0?x.length-1:0;return ei(x,Math.min(l[0].row,A),l[0].column)},vy=function(u,l,d,h){var y=l.cells;SE(y);var x=cE(u,l.bounds,d,h.merge(y));return lv(x,Y.from(y[0]))},b1=function(u,l,d,h){var y=function(A,P){return ey(A,P,d,h.unmerge(P))},x=la(l,y,u);return lv(x,Y.from(l[0]))},Ki=function(u,l,d,h){var y=function(V,Q){var pe=$n.fromTable(V);return id(pe,Q,!0)},x=y(l.clipboard,l.generators),A=fn(l.row,l.column),P=gE(A,u,x,l.generators,d);return P.fold(function(){return lv(u,Y.some(l.element))},function(V){return ei(V,l.row,l.column)})},y1=function(u,l,d){var h=mg(u,d.section),y=$n.generate(h);return id(y,l,!0)},kl=function(u,l,d,h){var y=ai(u).rows,x=l.cells[0].column,A=y[l.cells[0].row],P=y1(l.clipboard,l.generators,A),V=fC(x,u,P,l.generators,d);return ei(V,l.cells[0].row,l.cells[0].column)},SC=function(u,l,d,h){var y=ai(u).rows,x=l.cells[l.cells.length-1].column+l.cells[l.cells.length-1].colspan,A=y[l.cells[0].row],P=y1(l.clipboard,l.generators,A),V=fC(x,u,P,l.generators,d);return ei(V,l.cells[0].row,l.cells[0].column)},dy=function(u,l,d,h){var y=ai(u).rows,x=l.cells[0].row,A=y[x],P=y1(l.clipboard,l.generators,A),V=s1(x,u,P,l.generators,d);return ei(V,l.cells[0].row,l.cells[0].column)},Dm=function(u,l,d,h){var y=ai(u).rows,x=l.cells[l.cells.length-1].row+l.cells[l.cells.length-1].rowspan,A=y[l.cells[0].row],P=y1(l.clipboard,l.generators,A),V=s1(x,u,P,l.generators,d);return ei(V,l.cells[0].row,l.cells[0].column)},my=function(u,l){var d=$n.fromTable(u),h=Tl(d,l);return h.bind(function(y){var x=y[y.length-1],A=y[0].column,P=x.column+x.colspan,V=It(_t(d.all,function(Q){return ir(Q.cells,function(pe){return pe.column>=A&&pe.column<P})}));return r1(V)}).getOr("")},Zg=function(u,l){var d=$n.fromTable(u),h=Tl(d,l);return h.bind(r1).getOr("")},EE=function(u,l){var d=$n.fromTable(u),h=Tl(d,l);return h.bind(function(y){var x=y[y.length-1],A=y[0].row,P=x.row+x.rowspan,V=d.all.slice(A,P);return nE(V)}).getOr("")},w1=function(u,l,d,h){return nu(u,l,d,h.sizing)},C1=function(u,l,d,h){return Ea(u,l,d,h.sizing,h.resize)},xC=function(u,l){return D(l,function(d){return d.column===0&&d.isLocked})},S1=function(u,l){return D(l,function(d){return d.column+d.colspan>=u.grid.columns&&d.isLocked})},lo=function(u,l){var d=ot(u),h=Em(l);return te(h,function(y,x){var A=d[x.column],P=A.map(rp).getOr(0);return y+P},0)},Qg=function(u){return function(l,d){return Tl(l,d).filter(function(h){var y=u?xC:S1;return!y(l,h)}).map(function(h){return{details:h,pixelDelta:lo(l,h)}})}},x1=function(u,l){return El(u,l).map(function(d){return{details:d,pixelDelta:-lo(u,d)}})},T1=function(u){return function(l,d){return i1(l,d).filter(function(h){var y=u?xC:S1;return!y(l,h.cells)})}},TC=qi(km,Tl,it,it,Gi.modification),gy=qi(zs,Tl,it,it,Gi.modification),vd=qi(Ls,Qg(!0),C1,it,Gi.modification),EC=qi(g1,Qg(!1),C1,it,Gi.modification),wc=qi(p1,x1,C1,cy,Gi.modification),Al=qi(TE,Tl,it,cy,Gi.modification),hy=qi(sy,El,it,it,Gi.transform("th","row")),vv=qi(ly,El,it,it,Gi.transform("td",null)),Hs=qi(h1,El,it,it,Gi.transform("th","col")),Vs=qi(fy,El,it,it,Gi.transform("td",null)),Pu=qi(Om,El,it,it,Gi.transform("td",null)),Us=qi(CC,El,it,it,Gi.transform("th")),py=qi(Am,El,it,it,Gi.transform("td")),Ol=qi(vy,iC,w1,it,Gi.merging),dd=qi(b1,Qb,w1,it,Gi.merging),kC=qi(Ki,nC,w1,it,Gi.modification),AC=qi(kl,T1(!0),it,it,Gi.modification),kE=qi(SC,T1(!1),it,it,Gi.modification),AE=qi(dy,i1,it,it,Gi.modification),OC=qi(Dm,i1,it,it,Gi.modification),DC=my,RC=Zg,BC=EE,_C=function(u,l,d){var h=function(Di){return hr(dl(Di))==="table"},y=function(Di){return h(u)===!1||Du(Di).rows>1},x=function(Di){return h(u)===!1||Du(Di).columns>1},A=Vb(u),P=Hb(u)?it:eE,V=function(Di){switch(Yp(u)){case"section":return sv.section();case"sectionCells":return sv.sectionCells();case"cells":return sv.cells();default:return sv.getTableSectionType(Di,"section")}},Q=function(Di,u0){return u0.cursor.fold(function(){var Bd=Os(Di);return dn(Bd).filter(aa).map(function(Nl){l.clear(Di);var Ks=u.dom.createRng();return Ks.selectNode(Nl.dom),u.selection.setRng(Ks),_a(Nl,"data-mce-selected","1"),Ks})},function(Bd){var Nl=Yw(Bd),Ks=u.dom.createRng();return Ks.setStart(Nl.element.dom,Nl.offset),Ks.setEnd(Nl.element.dom,Nl.offset),u.selection.setRng(Ks),l.clear(Di),Y.some(Ks)})},pe=function(Di,u0,Bd,Nl,Ks){return function(mf,D3,xh){xh===void 0&&(xh=!1),ms(mf);var US=Nl(),Cv=et.fromDom(u.getDoc()),m2=hb(Bd,Cv,A),R3={sizing:od(u,mf),resize:Hb(u)?Ap():Fg(),section:V(mf)};return u0(mf)?Di(US,mf,D3,m2,R3).bind(function(za){Kt(za.newRows,function(_d){iv(u,_d.dom)}),Kt(za.newCells,function(_d){nf(u,_d.dom)});var Sv=Q(mf,za);return aa(mf)&&(ms(mf),xh||ec(u,mf.dom,Ks)),Sv.map(function(_d){return{rng:_d,effect:Ks}})}):Y.none()}},Xe=pe(Al,y,it,d,ki),ht=pe(wc,x,it,d,ki),tt=pe(TC,bt,it,d,ki),Ye=pe(gy,bt,it,d,ki),qt=pe(vd,bt,P,d,ki),Wt=pe(EC,bt,P,d,ki),rr=pe(Ol,bt,it,d,ki),oa=pe(dd,bt,it,d,ki),Fn=pe(AC,bt,it,d,ki),er=pe(kE,bt,it,d,ki),_r=pe(AE,bt,it,d,ki),Ir=pe(OC,bt,it,d,ki),Oi=pe(kC,bt,it,d,qp),gu=pe(Us,bt,it,d,ki),rc=pe(py,bt,it,d,ki),jr=pe(hy,bt,it,d,ki),Gn=pe(vv,bt,it,d,ki),Mr=pe(Hs,bt,it,d,ki),ka=pe(Vs,bt,it,d,ki),fo=pe(Pu,bt,it,d,ki),hu=RC,qs=DC,Gs=BC;return{deleteRow:Xe,deleteColumn:ht,insertRowsBefore:tt,insertRowsAfter:Ye,insertColumnsBefore:qt,insertColumnsAfter:Wt,mergeCells:rr,unmergeCells:oa,pasteColsBefore:Fn,pasteColsAfter:er,pasteRowsBefore:_r,pasteRowsAfter:Ir,pasteCells:Oi,makeCellsHeader:gu,unmakeCellsHeader:rc,makeColumnsHeader:jr,unmakeColumnsHeader:Gn,makeRowsHeader:Mr,makeRowsBody:ka,makeRowsFooter:fo,getTableRowType:Gs,getTableCellType:hu,getTableColType:qs}},OE={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},MC=function(){return et.fromTag("th")},FC=function(){return et.fromTag("td")},by=function(){return et.fromTag("col")},PC=function(u,l,d,h){for(var y=et.fromTag("tr"),x=0;x<u;x++){var A=h<l||x<d?MC():FC();x<d&&_a(A,"scope","row"),h<l&&_a(A,"scope","col"),fr(A,et.fromTag("br")),fr(y,A)}return y},DE=function(u){var l=et.fromTag("colgroup");return na(u,function(){return fr(l,by())}),l},Or=function(u,l,d,h){return na(u,function(y){return PC(l,d,h,y)})},md=function(u,l,d,h,y,x){x===void 0&&(x=OE);var A=et.fromTag("table"),P=y!=="cells";ri(A,x.styles),Pv(A,x.attributes),x.colGroups&&fr(A,DE(l));var V=Math.min(u,d);if(P&&d>0){var Q=et.fromTag("thead");fr(A,Q);var pe=y==="sectionCells"?V:0,Xe=Or(d,l,pe,h);ls(Q,Xe)}var ht=et.fromTag("tbody");fr(A,ht);var tt=P?u-V:u,Ye=P?0:d,qt=Or(tt,l,Ye,h);return ls(ht,qt),A},Rm=function(u){return u.dom.innerHTML},yy=function(u){var l=et.fromTag("div"),d=et.fromDom(u.dom.cloneNode(!0));return fr(l,d),Rm(l)},RE=function(u,l){u.selection.select(l.dom,!0),u.selection.collapse(!0)},nc=function(u,l){fc(l,"td,th").each(Te(RE,u))},BE=function(u,l){Kt(eu(l,"tr"),function(d){iv(u,d.dom),Kt(eu(d,"th,td"),function(h){nf(u,h.dom)})})},gd=function(u){return Ut(u)&&u.indexOf("%")!==-1},of=function(u,l,d,h,y){var x=ad(u),A={styles:x,attributes:Kp(u),colGroups:qw(u)};return u.undoManager.ignore(function(){var P=md(d,l,y,h,Yp(u),A);_a(P,"data-mce-id","__mce");var V=yy(P);u.insertContent(V),u.addVisual()}),fc(dl(u),'table[data-mce-id="__mce"]').map(function(P){return ym(u)?Wb(u,P):Ge(u)?jb(P):(Cl(u)||gd(x.width))&&qg(u,P),ms(P),Ya(P,"data-mce-id"),BE(u,P),nc(u,P),P.dom}).getOr(null)},eh=function(u,l,d,h,y){h===void 0&&(h={});var x=function(V){return mr(V)&&V>0};if(x(l)&&x(d)){var A=h.headerRows||0,P=h.headerColumns||0;return of(u,d,l,P,A)}else return console.error(y),null},th=function(u){return function(){return u().fold(function(){return[]},function(l){return _t(l,function(d){return d.dom})})}},NC=function(u){return function(l){var d=l.length>0?Y.some(Ra(l)):Y.none();u(d)}},IC=function(u){return function(l,d,h){h===void 0&&(h={});var y=eh(u,d,l,h,"Invalid values for insertTable - rows and columns values are required to insert a table.");return u.undoManager.add(),y}},wy=function(u,l,d,h){return{insertTable:IC(u),setClipboardRows:NC(l.setRows),getClipboardRows:th(l.getRows),setClipboardCols:NC(l.setColumns),getClipboardCols:th(l.getColumns),resizeHandler:d,selectionTargets:h}},E1=function(u,l,d){var h=pi(u,l,1);d===1||h<=1?Ya(u,l):_a(u,l,Math.min(d,h))},Bm=function(u,l,d){if($n.hasColumns(u)){var h=ir($n.justColumns(u),function(A){return A.column>=l&&A.column<d}),y=_t(h,function(A){var P=Mc(A.element);return E1(P,"span",d-l),P}),x=et.fromTag("colgroup");return ls(x,y),[x]}else return[]},k1=function(u,l,d){return _t(u.all,function(h){var y=ir(h.cells,function(P){return P.column>=l&&P.column<d}),x=_t(y,function(P){var V=Mc(P.element);return E1(V,"colspan",d-l),V}),A=et.fromTag("tr");return ls(A,x),A})},_E=function(u,l){var d=$n.fromTable(u),h=El(d,l);return h.map(function(y){var x=y[y.length-1],A=y[0].column,P=x.column+x.colspan,V=Bm(d,A,P),Q=k1(d,A,P);return ra(ra([],V),Q)})},Dl=function(u,l,d){var h=$n.fromTable(u),y=Tl(h,l);return y.bind(function(x){var A=id(h,d,!1),P=ai(A).rows,V=P.slice(x[0].row,x[x.length-1].row+x[x.length-1].rowspan),Q=$t(V,function(Xe){var ht=ir(Xe.cells,function(tt){return!tt.isLocked});return ht.length>0?[On(On({},Xe),{cells:ht})]:[]}),pe=$s(Q);return Gd(pe.length>0,pe)}).map(function(x){return Cm(x)})},A1=tinymce.util.Tools.resolve("tinymce.util.Tools"),_m=function(u,l,d){var h=u.select("td,th",l),y,x=function(A,P){for(var V=0;V<P.length;V++){var Q=u.getStyle(P[V],d);if(typeof A=="undefined"&&(A=Q),A!==Q)return""}return A};return x(y,h)},hd=function(u,l,d){d&&u.formatter.apply("align"+d,{},l)},$C=function(u,l,d){d&&u.formatter.apply("valign"+d,{},l)},Mm=function(u,l){A1.each("left center right".split(" "),function(d){u.formatter.remove("align"+d,{},l)})},ME=function(u,l){A1.each("top middle bottom".split(" "),function(d){u.formatter.remove("valign"+d,{},l)})},Cy=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],Rl=function(u){return{value:u}},Cc=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Xi=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,FE=function(u){return Cc.test(u)||Xi.test(u)},Sy=function(u){return ti(u,"#").toUpperCase()},Fm=function(u){return FE(u)?Y.some({value:Sy(u)}):Y.none()},O1=function(u){var l=u.toString(16);return(l.length===1?"0"+l:l).toUpperCase()},xy=function(u){var l=O1(u.red)+O1(u.green)+O1(u.blue);return Rl(l)},PE=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/,NE=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/,Vt=function(u,l,d,h){return{red:u,green:l,blue:d,alpha:h}},Vo=function(u,l,d,h){var y=parseInt(u,10),x=parseInt(l,10),A=parseInt(d,10),P=parseFloat(h);return Vt(y,x,A,P)},D1=function(u){if(u==="transparent")return Y.some(Vt(0,0,0,0));var l=PE.exec(u);if(l!==null)return Y.some(Vo(l[1],l[2],l[3],"1"));var d=NE.exec(u);return d!==null?Y.some(Vo(d[1],d[2],d[3],d[4])):Y.none()},Ai=function(u){return Fm(u).orThunk(function(){return D1(u).map(xy)}).getOrThunk(function(){var l=document.createElement("canvas");l.height=1,l.width=1;var d=l.getContext("2d");d.clearRect(0,0,l.width,l.height),d.fillStyle="#FFFFFF",d.fillStyle=u,d.fillRect(0,0,1,1);var h=d.getImageData(0,0,1,1).data,y=h[0],x=h[1],A=h[2],P=h[3];return xy(Vt(y,x,A,P))})},Sc=function(u){var l=fl(Y.none()),d=function(){return l.get().each(u)},h=function(){d(),l.set(Y.none())},y=function(){return l.get().isSome()},x=function(){return l.get()},A=function(P){d(),l.set(Y.some(P))};return{clear:h,isSet:y,get:x,set:A}},Ty=function(){return Sc(function(u){return u.unbind()})},pd=function(){var u=Sc(it),l=function(d){return u.get().each(d)};return On(On({},u),{on:l})},R1=function(u,l,d,h){return function(y){var x=Ty(),A=di(h),P=function(){var V=fm(l),Q=function(pe){return u.formatter.match(d,{value:h},pe.dom,A)};A?(y.setActive(!D(V,Q)),x.set(u.formatter.formatChanged(d,function(pe){return y.setActive(!pe)},!0))):(y.setActive(rt(V,Q)),x.set(u.formatter.formatChanged(d,y.setActive,!1,{value:h})))};return u.initialized?P():u.on("init",P),x.clear}},Pm=function(u){return Ce(u,"menu")},Nm=function(u){return _t(u,function(l){var d=l.text||l.title;return Pm(l)?{text:d,items:Nm(l.menu)}:{text:d,value:l.value}})},Wc=function(u,l,d,h,y){return _t(d,function(x){var A=x.text||x.title;return Pm(x)?{type:"nestedmenuitem",text:A,getSubmenuItems:function(){return Wc(u,l,x.menu,h,y)}}:{text:A,type:"togglemenuitem",onAction:function(){return y(x.value)},onSetup:R1(u,l,h,x.value)}})},Bl=function(u,l){return function(d){var h;u.execCommand("mceTableApplyCellStyle",!1,(h={},h[l]=d,h))}},bd=function(u){return $t(u,function(l){return Pm(l)?[On(On({},l),{menu:bd(l.menu)})]:Zo(l.value)?[l]:[]})},nh=function(u,l,d,h,y){return function(x){return x(Wc(u,l,d,h,y))}},rh=function(u,l,d){var h=_t(l,function(y){return{text:y.title,value:"#"+Ai(y.value).value,type:"choiceitem"}});return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:h.length>0?h:void 0,allowCustomColors:!1},onAction:function(y){var x,A=y.value==="remove"?"":y.value;u.execCommand("mceTableApplyCellStyle",!1,(x={},x[d]=A,x))}}]},zC=function(u){return function(){var l=u.queryCommandValue("mceTableRowType"),d=l==="header"?"body":"header";u.execCommand("mceTableRowType",!1,{type:d})}},Ey=function(u){return function(){var l=u.queryCommandValue("mceTableColType"),d=l==="th"?"td":"th";u.execCommand("mceTableColType",!1,{type:d})}},ah=function(u){var l=Nm(Vc(u));return l.length>0?Y.some({name:"class",type:"listbox",label:"Class",items:l}):Y.none()},uf=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:Cy}],dv=function(u){return uf.concat(ah(u).toArray())},Im=function(u,l){var d=[{text:"Select...",value:""}],h=[{name:"borderstyle",type:"listbox",label:"Border style",items:d.concat(Nm(rd(u)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}],y={name:"borderwidth",type:"input",label:"Border width"},x=l==="cell"?[y].concat(h):h;return{title:"Advanced",name:"advanced",items:x}},B1=function(u){return function(l,d){var h=l.dom,y=function(P,V){(!u||V)&&h.setAttrib(d,P,V)},x=function(P,V){(!u||V)&&h.setStyle(d,P,V)},A=function(P,V){(!u||V)&&(V===""?l.formatter.remove(P,{value:null},d,!0):l.formatter.apply(P,{value:V},d))};return{setAttrib:y,setStyle:x,setFormat:A}}},mv={normal:B1(!1),ifTruthy:B1(!0)},cf=function(u){return function(l){return eo(l,"rgb")?u.toHex(l):l}},gv=function(u,l){var d=et.fromDom(l);return{borderwidth:vc(d,"border-width").getOr(""),borderstyle:vc(d,"border-style").getOr(""),bordercolor:vc(d,"border-color").map(cf(u)).getOr(""),backgroundcolor:vc(d,"background-color").map(cf(u)).getOr("")}},_1=function(u){var l=u[0],d=u.slice(1);return Kt(d,function(h){Kt(ie(l),function(y){Ne(h,function(x,A){var P=l[y];P!==""&&y===A&&P!==x&&(l[y]="")})})}),l},oh=function(u,l,d,h){return yt(u,function(y){return!ia(d.formatter.matchNode(h,l+y))}).getOr("")},ih=Te(oh,["left","center","right"],"align"),ky=Te(oh,["top","middle","bottom"],"valign"),LC=function(u,l){var d=ad(u),h=Kp(u),y=function(pe){return{borderstyle:$(d,"border-style").getOr(""),bordercolor:cf(pe)($(d,"border-color").getOr("")),backgroundcolor:cf(pe)($(d,"background-color").getOr(""))}},x={height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""},A=function(){var pe=d["border-width"];return tc(u)&&pe?{border:pe}:$(h,"border").fold(function(){return{}},function(Xe){return{border:Xe}})},P=l?y(u.dom):{},V=function(){var pe=$(d,"border-spacing").or($(h,"cellspacing")).fold(function(){return{}},function(ht){return{cellspacing:ht}}),Xe=$(d,"border-padding").or($(h,"cellpadding")).fold(function(){return{}},function(ht){return{cellpadding:ht}});return On(On({},pe),Xe)},Q=On(On(On(On(On(On({},x),d),h),P),A()),V());return Q},HC=function(u){return co(et.fromDom(u)).map(function(l){var d={selection:Ra(u.cells)};return BC(l,d)}).getOr("")},Ay=function(u,l,d){var h=function(P,V){var Q=vc(et.fromDom(V),"border-width");return tc(u)&&Q.isSome()?Q.getOr(""):P.getAttrib(V,"border")||_m(u.dom,V,"border-width")||_m(u.dom,V,"border")},y=u.dom,x=tc(u)?y.getStyle(l,"border-spacing")||y.getAttrib(l,"cellspacing"):y.getAttrib(l,"cellspacing")||y.getStyle(l,"border-spacing"),A=tc(u)?_m(y,l,"padding")||y.getAttrib(l,"cellpadding"):y.getAttrib(l,"cellpadding")||_m(y,l,"padding");return On({width:y.getStyle(l,"width")||y.getAttrib(l,"width"),height:y.getStyle(l,"height")||y.getAttrib(l,"height"),cellspacing:x,cellpadding:A,border:h(y,l),caption:!!y.select("caption",l)[0],class:y.getAttrib(l,"class",""),align:ih(u,l)},d?gv(y,l):{})},M1=function(u,l,d){var h=u.dom;return On({height:h.getStyle(l,"height")||h.getAttrib(l,"height"),class:h.getAttrib(l,"class",""),type:HC(l),align:ih(u,l)},d?gv(h,l):{})},uu=function(u,l,d,h){var y=u.dom,x=h.getOr(l),A=function(P,V){return y.getStyle(P,V)||y.getAttrib(P,V)};return On({width:A(x,"width"),height:A(l,"height"),scope:y.getAttrib(l,"scope"),celltype:wp(l),class:y.getAttrib(l,"class",""),halign:ih(u,l),valign:ky(u,l)},d?gv(y,l):{})},jc=function(u,l){var d=$n.fromTable(u),h=$n.justCells(d),y=ir(h,function(x){return D(l,function(A){return wr(x.element,A)})});return _t(y,function(x){return{element:x.element.dom,column:$n.getColumnAt(d,x.column).map(function(A){return A.element.dom})}})},ps=function(u,l,d){u.setAttrib("scope",d.scope),u.setAttrib("class",d.class),u.setStyle("height",Au(d.height)),l.setStyle("width",Au(d.width))},F1=function(u,l){u.setFormat("tablecellbackgroundcolor",l.backgroundcolor),u.setFormat("tablecellbordercolor",l.bordercolor),u.setFormat("tablecellborderstyle",l.borderstyle),u.setFormat("tablecellborderwidth",Au(l.borderwidth))},Oy=function(u,l,d){var h=l.length===1;Kt(l,function(y){var x=y.element,A=h?mv.normal(u,x):mv.ifTruthy(u,x),P=y.column.map(function(V){return h?mv.normal(u,V):mv.ifTruthy(u,V)}).getOr(A);ps(A,P,d),bm(u)&&F1(A,d),h&&(Mm(u,x),ME(u,x)),d.halign&&hd(u,x,d.halign),d.valign&&$C(u,x,d.valign)})},VC=function(u,l){u.execCommand("mceTableCellType",!1,{type:l.celltype,no_events:!0})},yd=function(u,l,d,h){var y=Ue(h,function(x,A){return d[A]!==x});Xt(y)>0&&l.length>=1&&co(l[0]).each(function(x){var A=jc(x,l),P=Xt(Ue(y,function(Q,pe){return pe!=="scope"&&pe!=="celltype"}))>0,V=ue(y,"celltype");(P||ue(y,"scope"))&&Oy(u,A,h),V&&VC(u,h),ec(u,x.dom,{structure:V,style:P})})},uh=function(u,l,d,h){var y=h.getData();h.close(),u.undoManager.transact(function(){yd(u,l,d,y),u.focus()})},ch=function(u,l){var d=co(l[0]).map(function(h){return _t(jc(h,l),function(y){return uu(u,y.element,bm(u),y.column)})});return _1(d.getOrDie())},IE=function(u,l){var d=fm(l);if(d.length!==0){var h=ch(u,d),y={type:"tabpanel",tabs:[{title:"General",name:"general",items:dv(u)},Im(u,"cell")]},x={type:"panel",items:[{type:"grid",columns:2,items:dv(u)}]};u.windowManager.open({title:"Cell Properties",size:"normal",body:bm(u)?y:x,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:h,onSubmit:Te(uh,u,d,h)})}},Dy=function(u){var l=Nm(Lb(u));return l.length>0?Y.some({name:"class",type:"listbox",label:"Class",items:l}):Y.none()},UC=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],Ry=function(u){return UC.concat(Dy(u).toArray())},By=function(u,l){u.setAttrib("class",l.class),u.setStyle("height",Au(l.height))},_y=function(u,l){u.setStyle("background-color",l.backgroundcolor),u.setStyle("border-color",l.bordercolor),u.setStyle("border-style",l.borderstyle)},ya=function(u,l,d,h){var y=l.length===1;Kt(l,function(x){var A=y?mv.normal(u,x):mv.ifTruthy(u,x);By(A,d),Vg(u)&&_y(A,d),d.align!==h.align&&(Mm(u,x),hd(u,x,d.align))})},_l=function(u,l){u.execCommand("mceTableRowType",!1,{type:l.type,no_events:!0})},WC=function(u,l,d,h){var y=Ue(h,function(P,V){return d[V]!==P});if(Xt(y)>0){var x=ue(y,"type"),A=x?Xt(y)>1:!0;A&&ya(u,l,h,d),x&&_l(u,h),co(et.fromDom(l[0])).each(function(P){return ec(u,P.dom,{structure:x,style:A})})}},jC=function(u,l,d,h){var y=h.getData();h.close(),u.undoManager.transact(function(){WC(u,l,d,y),u.focus()})},qC=function(u){var l=Zr(Co(u),Hi.selected);if(l.length!==0){var d=_t(l,function(A){return M1(u,A.dom,Vg(u))}),h=_1(d),y={type:"tabpanel",tabs:[{title:"General",name:"general",items:Ry(u)},Im(u,"row")]},x={type:"panel",items:[{type:"grid",columns:2,items:Ry(u)}]};u.windowManager.open({title:"Row Properties",size:"normal",body:Vg(u)?y:x,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:h,onSubmit:Te(jC,u,_t(l,function(A){return A.dom}),h)})}},P1=function(u,l,d){var h=d?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],y=[{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}],x=jw(u)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],A=[{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}],P=l.length>0?[{type:"listbox",name:"class",label:"Class",items:l}]:[];return h.concat(y).concat(x).concat(A).concat(P)},sh=function(u,l,d,h){if(l.tagName==="TD"||l.tagName==="TH")Ut(d)?u.setStyle(l,d,h):u.setStyle(l,d);else if(l.children)for(var y=0;y<l.children.length;y++)sh(u,l.children[y],d,h)},lh=function(u,l,d){var h=u.dom,y={},x={};if(y.class=d.class,x.height=Au(d.height),h.getAttrib(l,"width")&&!tc(u)?y.width=Sp(d.width):x.width=Au(d.width),tc(u)?(x["border-width"]=Au(d.border),x["border-spacing"]=Au(d.cellspacing)):(y.border=d.border,y.cellpadding=d.cellpadding,y.cellspacing=d.cellspacing),tc(u)&&l.children)for(var A=0;A<l.children.length;A++)sh(h,l.children[A],{"border-width":Au(d.border),padding:Au(d.cellpadding)}),Fu(u)&&sh(h,l.children[A],{"border-color":d.bordercolor});Fu(u)&&(x["background-color"]=d.backgroundcolor,x["border-color"]=d.bordercolor,x["border-style"]=d.borderstyle),y.style=h.serializeStyle(On(On({},ad(u)),x)),h.setAttribs(l,On(On({},Kp(u)),y))},qn=function(u,l,d,h){var y=u.dom,x=h.getData(),A=Ue(x,function(P,V){return d[V]!==P});h.close(),x.class===""&&delete x.class,u.undoManager.transact(function(){if(!l){var P=parseInt(x.cols,10)||1,V=parseInt(x.rows,10)||1;l=of(u,P,V,0,0)}if(Xt(A)>0){lh(u,l,x);var Q=y.select("caption",l)[0];(Q&&!x.caption||!Q&&x.caption)&&u.execCommand("mceTableToggleCaption"),x.align===""?Mm(u,l):hd(u,l,x.align)}if(u.focus(),u.addVisual(),Xt(A)>0){var pe=ue(A,"caption"),Xe=pe?Xt(A)>1:!0;ec(u,l,{structure:pe,style:Xe})}})},GC=function(u,l){var d=u.dom,h,y=LC(u,Fu(u));l===!1?(h=d.getParent(u.selection.getStart(),"table",u.getBody()),h?y=Ay(u,h,Fu(u)):Fu(u)&&(y.borderstyle="",y.bordercolor="",y.backgroundcolor="")):(y.cols="1",y.rows="1",Fu(u)&&(y.borderstyle="",y.bordercolor="",y.backgroundcolor=""));var x=Nm(Wi(u));x.length>0&&y.class&&(y.class=y.class.replace(/\s*mce\-item\-table\s*/g,""));var A={type:"grid",columns:2,items:P1(u,x,l)},P=function(){return{type:"panel",items:[A]}},V=function(){return{type:"tabpanel",tabs:[{title:"General",name:"general",items:[A]},Im(u,"table")]}},Q=Fu(u)?V():P();u.windowManager.open({title:"Table Properties",size:"normal",body:Q,onSubmit:Te(qn,u,h,y),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:y})},fh=function(u){return Kv(Co(u),zc(u))},$E=function(u){return oi(Co(u),zc(u))},My=function(u,l,d,h,y){var x=zc(u),A=function(){return fh(u).each(function(Fn){co(Fn,x).filter(qe(x)).each(function(er){var _r=et.fromText("");if(Tr(er,_r),Qo(er),u.dom.isEmpty(u.getBody()))u.setContent(""),u.selection.setCursorLocation();else{var Ir=u.dom.createRng();Ir.setStart(_r.dom,0),Ir.setEnd(_r.dom,0),u.selection.setRng(Ir),u.nodeChanged()}})})},P=function(Fn){return fh(u).each(function(er){var _r=Ge(u)||ym(u)||Cl(u);_r||co(er,x).each(function(Ir){Fn==="relative"&&!Fw(Ir)?qg(u,Ir):Fn==="fixed"&&!Pw(Ir)?Wb(u,Ir):Fn==="responsive"&&!Dp(Ir)&&jb(Ir),ms(Ir),ec(u,Ir.dom,ki)})})},V=function(Fn){return co(Fn,x)},Q=function(Fn){return $E(u).bind(function(er){return V(er).map(function(_r){return Fn(_r,er)})})},pe=function(Fn,er){Q(function(_r){u.formatter.toggle("tableclass",{value:er},_r.dom),ec(u,_r.dom,Lg)})},Xe=function(Fn,er){Q(function(_r){var Ir=fm(h),Oi=rt(Ir,function(rc){return u.formatter.match("tablecellclass",{value:er},rc.dom)}),gu=Oi?u.formatter.remove:u.formatter.apply;Kt(Ir,function(rc){return gu("tablecellclass",{value:er},rc.dom)}),ec(u,_r.dom,Lg)})},ht=function(){fh(u).each(function(Fn){co(Fn,x).each(function(er){Kl(er,"caption").fold(function(){var _r=et.fromTag("caption");fr(_r,et.fromText("Caption")),Tu(er,_r,0),u.selection.setCursorLocation(_r.dom,0)},function(_r){wu("caption")(Fn)&&io("td",er).each(function(Ir){return u.selection.setCursorLocation(Ir.dom,0)}),Qo(_r)}),ec(u,er.dom,ki)})})},tt=function(Fn){u.focus()},Ye=function(Fn,er){return er===void 0&&(er=!1),Q(function(_r,Ir){var Oi=Mg(h,_r,Ir);Fn(_r,Oi,er).each(tt)})},qt=function(){return Q(function(Fn,er){var _r=Mg(h,Fn,er),Ir=hb(it,et.fromDom(u.getDoc()),Y.none());return Dl(Fn,_r,Ir)})},Wt=function(){return Q(function(Fn,er){var _r=Mg(h,Fn,er);return _E(Fn,_r)})},rr=function(Fn,er){return er().each(function(_r){var Ir=_t(_r,function(Oi){return Mc(Oi)});Q(function(Oi,gu){var rc=qv(et.fromDom(u.getDoc())),jr=Rw(h,gu,Ir,rc);Fn(Oi,jr).each(tt)})})},oa=function(Fn){return function(er,_r){return $(_r,"type").each(function(Ir){Ye(Fn(Ir),_r.no_events)})}};Ne({mceTableSplitCells:function(){return Ye(l.unmergeCells)},mceTableMergeCells:function(){return Ye(l.mergeCells)},mceTableInsertRowBefore:function(){return Ye(l.insertRowsBefore)},mceTableInsertRowAfter:function(){return Ye(l.insertRowsAfter)},mceTableInsertColBefore:function(){return Ye(l.insertColumnsBefore)},mceTableInsertColAfter:function(){return Ye(l.insertColumnsAfter)},mceTableDeleteCol:function(){return Ye(l.deleteColumn)},mceTableDeleteRow:function(){return Ye(l.deleteRow)},mceTableCutCol:function(){return Wt().each(function(Fn){y.setColumns(Fn),Ye(l.deleteColumn)})},mceTableCutRow:function(){return qt().each(function(Fn){y.setRows(Fn),Ye(l.deleteRow)})},mceTableCopyCol:function(){return Wt().each(function(Fn){return y.setColumns(Fn)})},mceTableCopyRow:function(){return qt().each(function(Fn){return y.setRows(Fn)})},mceTablePasteColBefore:function(){return rr(l.pasteColsBefore,y.getColumns)},mceTablePasteColAfter:function(){return rr(l.pasteColsAfter,y.getColumns)},mceTablePasteRowBefore:function(){return rr(l.pasteRowsBefore,y.getRows)},mceTablePasteRowAfter:function(){return rr(l.pasteRowsAfter,y.getRows)},mceTableDelete:A,mceTableCellToggleClass:Xe,mceTableToggleClass:pe,mceTableToggleCaption:ht,mceTableSizingMode:function(Fn,er){return P(er)},mceTableCellType:oa(function(Fn){return Fn==="th"?l.makeCellsHeader:l.unmakeCellsHeader}),mceTableColType:oa(function(Fn){return Fn==="th"?l.makeColumnsHeader:l.unmakeColumnsHeader}),mceTableRowType:oa(function(Fn){switch(Fn){case"header":return l.makeRowsHeader;case"footer":return l.makeRowsFooter;default:return l.makeRowsBody}})},function(Fn,er){return u.addCommand(er,Fn)}),Ne({mceTableProps:Te(GC,u,!1),mceTableRowProps:Te(qC,u),mceTableCellProps:Te(IE,u,h)},function(Fn,er){return u.addCommand(er,function(){return Fn()})}),u.addCommand("mceInsertTable",function(Fn,er){Vn(er)&&ie(er).length>0?eh(u,er.rows,er.columns,er.options,"Invalid values for mceInsertTable - rows and columns values are required to insert a table."):GC(u,!0)}),u.addCommand("mceTableApplyCellStyle",function(Fn,er){var _r=function(gu){return"tablecell"+gu.toLowerCase().replace("-","")};if(!!Vn(er)){var Ir=fm(h);if(Ir.length!==0){var Oi=Ue(er,function(gu,rc){return u.formatter.has(_r(rc))&&Ut(gu)});ze(Oi)||(Ne(Oi,function(gu,rc){Kt(Ir,function(jr){mv.normal(u,jr.dom).setFormat(_r(rc),gu)})}),V(Ir[0]).each(function(gu){return ec(u,gu.dom,Lg)}))}}})},zE=function(u,l,d){var h=zc(u),y=function(x){return oi(Co(u)).bind(function(A){return co(A,h).map(function(P){var V=Mg(d,P,A);return x(P,V)})}).getOr("")};Ne({mceTableRowType:function(){return y(l.getTableRowType)},mceTableCellType:function(){return y(l.getTableCellType)},mceTableColType:function(){return y(l.getTableColType)}},function(x,A){return u.addQueryValueHandler(A,x)})},KC=function(){var u=pd(),l=pd();return{getRows:u.get,setRows:function(d){d.fold(u.clear,u.set),l.clear()},clearRows:u.clear,getColumns:l.get,setColumns:function(d){d.fold(l.clear,l.set),u.clear()},clearColumns:l.clear}},N1={remove_similar:!0,inherit:!1},hv=On({selector:"td,th"},N1),LE={tablecellbackgroundcolor:On({styles:{backgroundColor:"%value"}},hv),tablecellverticalalign:On({styles:{"vertical-align":"%value"}},hv),tablecellbordercolor:On({styles:{borderColor:"%value"}},hv),tablecellclass:On({classes:["%value"]},hv),tableclass:On({selector:"table",classes:["%value"]},N1),tablecellborderstyle:On({styles:{borderStyle:"%value"}},hv),tablecellborderwidth:On({styles:{borderWidth:"%value"}},hv)},xc=function(u){u.formatter.register(LE)},mu=mc.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),pv=function(u){return u===void 0&&(u=void 0),mu.none(u)},vh=On(On({},mu),{none:pv}),Fy=function(u,l,d,h,y){y===void 0&&(y=bt);var x=h===1;if(!x&&d<=0)return vh.first(u[0]);if(x&&d>=u.length-1)return vh.last(u[u.length-1]);var A=d+h,P=u[A];return y(P)?vh.middle(l,P):Fy(u,l,A,h,y)},Py=function(u,l){return co(u,l).bind(function(d){var h=Os(d),y=Jt(h,function(x){return wr(u,x)});return y.map(function(x){return{index:x,all:h}})})},Dr=function(u,l,d){var h=Py(u,d);return h.fold(function(){return vh.none(u)},function(y){return Fy(y.all,u,y.index,1,l)})},HE=function(u,l,d){var h=Py(u,d);return h.fold(function(){return vh.none()},function(y){return Fy(y.all,u,y.index,-1,l)})},I1=function(u,l,d,h){return{start:u,soffset:l,finish:d,foffset:h}},bv={create:I1},$m=mc.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),$1=function(u,l,d,h){return u.fold(l,d,h)},z1=function(u){return u.fold(Un,Un,Un)},dh=$m.before,VE=$m.on,UE=$m.after,cu={before:dh,on:VE,after:UE,cata:$1,getStart:z1},wd=mc.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),XC=function(u){return wd.exact(u.start,u.soffset,u.finish,u.foffset)},WE=function(u){return u.match({domRange:function(l){return et.fromDom(l.startContainer)},relative:function(l,d){return cu.getStart(l)},exact:function(l,d,h,y){return l}})},jE=wd.domRange,qE=wd.relative,GE=wd.exact,Ny=function(u){var l=WE(u);return Je(l)},KE=bv.create,Tn={domRange:jE,relative:qE,exact:GE,exactFromRange:XC,getWin:Ny,range:KE},YC=function(u,l){var d=u.document.createRange();return d.selectNode(l.dom),d},JC=function(u,l){var d=u.document.createRange();return XE(d,l),d},XE=function(u,l){return u.selectNodeContents(l.dom)},mh=function(u,l){l.fold(function(d){u.setStartBefore(d.dom)},function(d,h){u.setStart(d.dom,h)},function(d){u.setStartAfter(d.dom)})},ZC=function(u,l){l.fold(function(d){u.setEndBefore(d.dom)},function(d,h){u.setEnd(d.dom,h)},function(d){u.setEndAfter(d.dom)})},Iy=function(u,l,d){var h=u.document.createRange();return mh(h,l),ZC(h,d),h},L1=function(u,l,d,h,y){var x=u.document.createRange();return x.setStart(l.dom,d),x.setEnd(h.dom,y),x},QC=function(u){return{left:u.left,top:u.top,right:u.right,bottom:u.bottom,width:u.width,height:u.height}},$y=function(u){var l=u.getClientRects(),d=l.length>0?l[0]:u.getBoundingClientRect();return d.width>0||d.height>0?Y.some(d).map(QC):Y.none()},Cd=mc.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),zy=function(u,l,d){return l(et.fromDom(d.startContainer),d.startOffset,et.fromDom(d.endContainer),d.endOffset)},Ly=function(u,l){return l.match({domRange:function(d){return{ltr:wt(d),rtl:Y.none}},relative:function(d,h){return{ltr:Po(function(){return Iy(u,d,h)}),rtl:Po(function(){return Y.some(Iy(u,h,d))})}},exact:function(d,h,y,x){return{ltr:Po(function(){return L1(u,d,h,y,x)}),rtl:Po(function(){return Y.some(L1(u,y,x,d,h))})}}})},Hy=function(u,l){var d=l.ltr();if(d.collapsed){var h=l.rtl().filter(function(y){return y.collapsed===!1});return h.map(function(y){return Cd.rtl(et.fromDom(y.endContainer),y.endOffset,et.fromDom(y.startContainer),y.startOffset)}).getOrThunk(function(){return zy(u,Cd.ltr,d)})}else return zy(u,Cd.ltr,d)},H1=function(u,l){var d=Ly(u,l);return Hy(u,d)},Vy=function(u,l){var d=H1(u,l);return d.match({ltr:function(h,y,x,A){var P=u.document.createRange();return P.setStart(h.dom,y),P.setEnd(x.dom,A),P},rtl:function(h,y,x,A){var P=u.document.createRange();return P.setStart(x.dom,A),P.setEnd(h.dom,y),P}})};Cd.ltr,Cd.rtl;var YE=function(u,l,d,h,y){if(y===0)return 0;if(l===h)return y-1;for(var x=h,A=1;A<y;A++){var P=u(A),V=Math.abs(l-P.left);if(d<=P.bottom){if(d<P.top||V>x)return A-1;x=V}}return 0},Uy=function(u,l,d){return l>=u.left&&l<=u.right&&d>=u.top&&d<=u.bottom},JE=function(u,l,d,h,y){var x=function(Q){var pe=u.dom.createRange();return pe.setStart(l.dom,Q),pe.collapse(!0),pe},A=function(Q){var pe=x(Q);return pe.getBoundingClientRect()},P=ol(l).length,V=YE(A,d,h,y.right,P);return x(V)},V1=function(u,l,d,h){var y=u.dom.createRange();y.selectNode(l.dom);var x=y.getClientRects(),A=Ur(x,function(P){return Uy(P,d,h)?Y.some(P):Y.none()});return A.map(function(P){return JE(u,l,d,h,P)})},Qr=function(u,l,d,h){var y=u.dom.createRange(),x=Z(l);return Ur(x,function(A){return y.selectNode(A.dom),Uy(y.getBoundingClientRect(),d,h)?eS(u,A,d,h):Y.none()})},eS=function(u,l,d,h){return rs(l)?V1(u,l,d,h):Qr(u,l,d,h)},sf=function(u,l,d,h){var y=u.dom.createRange();y.selectNode(l.dom);var x=y.getBoundingClientRect(),A=Math.max(x.left,Math.min(x.right,d)),P=Math.max(x.top,Math.min(x.bottom,h));return eS(u,l,A,P)},qc=!0,U1=!1,Lu=function(u,l){return l-u.left<u.right-l?qc:U1},gh=function(u,l,d){var h=u.dom.createRange();return h.selectNode(l.dom),h.collapse(d),h},Sd=function(u,l,d){var h=u.dom.createRange();h.selectNode(l.dom);var y=h.getBoundingClientRect(),x=Lu(y,d),A=x===qc?bp:jv;return A(l).map(function(P){return gh(u,P,x)})},W1=function(u,l,d){var h=l.dom.getBoundingClientRect(),y=Lu(h,d);return Y.some(gh(u,l,y))},zm=function(u,l,d){var h=Z(l).length===0?W1:Sd;return h(u,l,d)},ZE=function(u,l,d){var h,y;return Y.from((y=(h=u.dom).caretPositionFromPoint)===null||y===void 0?void 0:y.call(h,l,d)).bind(function(x){if(x.offsetNode===null)return Y.none();var A=u.dom.createRange();return A.setStart(x.offsetNode,x.offset),A.collapse(),Y.some(A)})},QE=function(u,l,d){var h,y;return Y.from((y=(h=u.dom).caretRangeFromPoint)===null||y===void 0?void 0:y.call(h,l,d))},e3=function(u,l,d,h){var y=u.dom.createRange();y.selectNode(l.dom);var x=y.getBoundingClientRect(),A=Math.max(x.left,Math.min(x.right,d)),P=Math.max(x.top,Math.min(x.bottom,h));return sf(u,l,A,P)},t3=function(u,l,d){return et.fromPoint(u,l,d).bind(function(h){var y=function(){return zm(u,h,l)};return Z(h).length===0?y():e3(u,h,l,d).orThunk(y)})},Er=function(){return document.caretPositionFromPoint?ZE:document.caretRangeFromPoint?QE:t3}(),Ws=function(u,l,d){var h=et.fromDom(u.document);return Er(h,l,d).map(function(y){return bv.create(et.fromDom(y.startContainer),y.startOffset,et.fromDom(y.endContainer),y.endOffset)})},lf=function(u,l){var d=hr(u);return d==="input"?cu.after(u):Nn(["br","img"],d)?l===0?cu.before(u):cu.after(u):cu.on(u,l)},tS=function(u,l){var d=u.fold(cu.before,lf,cu.after),h=l.fold(cu.before,lf,cu.after);return Tn.relative(d,h)},xd=function(u,l,d,h){var y=lf(u,l),x=lf(d,h);return Tn.relative(y,x)},Nr=function(u){return u.match({domRange:function(l){var d=et.fromDom(l.startContainer),h=et.fromDom(l.endContainer);return xd(d,l.startOffset,h,l.endOffset)},relative:tS,exact:xd})},n3=function(u,l,d,h){var y=Eo(u),x=y.dom.createRange();return x.setStart(u.dom,l),x.setEnd(d.dom,h),x},nS=function(u,l,d,h){var y=n3(u,l,d,h),x=wr(u,d)&&l===h;return y.collapsed&&!x},yv=function(u){return Y.from(u.getSelection())},Wy=function(u,l){yv(u).each(function(d){d.removeAllRanges(),d.addRange(l)})},Td=function(u,l,d,h,y){var x=L1(u,l,d,h,y);Wy(u,x)},Ed=function(u,l,d,h,y,x){l.collapse(d.dom,h),l.extend(y.dom,x)},j1=function(u,l){return H1(u,l).match({ltr:function(d,h,y,x){Td(u,d,h,y,x)},rtl:function(d,h,y,x){yv(u).each(function(A){if(A.setBaseAndExtent)A.setBaseAndExtent(d.dom,h,y.dom,x);else if(A.extend)try{Ed(u,A,d,h,y,x)}catch(P){Td(u,y,x,d,h)}else Td(u,y,x,d,h)})}})},q1=function(u,l,d,h,y){var x=xd(l,d,h,y);j1(u,x)},jy=function(u,l,d){var h=tS(l,d);j1(u,h)},rS=function(u){var l=Tn.getWin(u).dom,d=function(y,x,A,P){return L1(l,y,x,A,P)},h=Nr(u);return H1(l,h).match({ltr:d,rtl:d})},Lm=function(u){if(u.rangeCount>0){var l=u.getRangeAt(0),d=u.getRangeAt(u.rangeCount-1);return Y.some(bv.create(et.fromDom(l.startContainer),l.startOffset,et.fromDom(d.endContainer),d.endOffset))}else return Y.none()},Hm=function(u){if(u.anchorNode===null||u.focusNode===null)return Lm(u);var l=et.fromDom(u.anchorNode),d=et.fromDom(u.focusNode);return nS(l,u.anchorOffset,d,u.focusOffset)?Y.some(bv.create(l,u.anchorOffset,d,u.focusOffset)):Lm(u)},aS=function(u,l,d){d===void 0&&(d=!0);var h=d?JC:YC,y=h(u,l);Wy(u,y)},oS=function(u){return yv(u).filter(function(l){return l.rangeCount>0}).bind(Hm)},hh=function(u){return oS(u).map(function(l){return Tn.exact(l.start,l.soffset,l.finish,l.foffset)})},r3=function(u,l){var d=Vy(u,l);return $y(d)},qy=function(u,l,d){return Ws(u,l,d)},iS=function(u){yv(u).each(function(l){return l.removeAllRanges()})},a3=tinymce.util.Tools.resolve("tinymce.util.VK"),Gy=function(u,l,d){return G1(u,l,Dr(d,pm))},uS=function(u,l,d){return G1(u,l,HE(d,pm))},Ky=function(u,l){var d=Tn.exact(l,0,l,0);return rS(d)},G1=function(u,l,d){return d.fold(Y.none,Y.none,function(h,y){return bp(y).map(function(x){return Ky(u,x)})},function(h){return u.execCommand("mceTableInsertRowAfter"),Gy(u,l,h)})},Xy=["table","li","dl"],cS=function(u,l,d){if(u.keyCode===a3.TAB){var h=dl(l),y=function(P){var V=hr(P);return wr(P,h)||Nn(Xy,V)},x=l.selection.getRng(),A=et.fromDom(u.shiftKey?x.startContainer:x.endContainer);nl(A,y).each(function(P){u.preventDefault(),co(P,y).each(d.clear),l.selection.collapse(u.shiftKey);var V=u.shiftKey?uS:Gy,Q=V(l,y,P);Q.each(function(pe){l.selection.setRng(pe)})})}},sS=function(u,l){return{selection:u,kill:l}},js={create:sS},Vm=function(u,l,d,h){return{start:cu.on(u,l),finish:cu.on(d,h)}},lS={create:Vm},Yy=function(u,l){var d=Vy(u,l);return bv.create(et.fromDom(d.startContainer),d.startOffset,et.fromDom(d.endContainer),d.endOffset)},kd=lS.create,fS=function(u,l,d,h,y,x,A){return wr(d,y)&&h===x?Y.none():Bo(d,"td,th",l).bind(function(P){return Bo(y,"td,th",l).bind(function(V){return Jy(u,l,P,V,A)})})},Jy=function(u,l,d,h,y){return wr(d,h)?Y.none():jf(d,h,l).bind(function(x){var A=x.boxes.getOr([]);return A.length>1?(y(u,A,x.start,x.finish),Y.some(js.create(Y.some(kd(d,0,d,vl(d))),!0))):Y.none()})},vS=function(u,l,d,h,y){var x=function(A){return y.clearBeforeUpdate(d),y.selectRange(d,A.boxes,A.start,A.finish),A.boxes};return J0(h,u,l,y.firstSelectedSelector,y.lastSelectedSelector).map(x)},K1=function(u,l){return{item:u,mode:l}},Zy=function(u,l,d,h){return h===void 0&&(h=Um),u.property().parent(l).map(function(y){return K1(y,h)})},Um=function(u,l,d,h){return h===void 0&&(h=ph),d.sibling(u,l).map(function(y){return K1(y,h)})},ph=function(u,l,d,h){h===void 0&&(h=ph);var y=u.property().children(l),x=d.first(y);return x.map(function(A){return K1(A,h)})},dS=[{current:Zy,next:Um,fallback:Y.none()},{current:Um,next:ph,fallback:Y.some(Zy)},{current:ph,next:ph,fallback:Y.some(Um)}],X1=function(u,l,d,h,y){y===void 0&&(y=dS);var x=yt(y,function(A){return A.current===d});return x.bind(function(A){return A.current(u,l,h,A.next).orThunk(function(){return A.fallback.bind(function(P){return X1(u,l,P,h)})})})},o3=function(){var u=function(d,h){return d.query().prevSibling(h)},l=function(d){return d.length>0?Y.some(d[d.length-1]):Y.none()};return{sibling:u,first:l}},i3=function(){var u=function(d,h){return d.query().nextSibling(h)},l=function(d){return d.length>0?Y.some(d[0]):Y.none()};return{sibling:u,first:l}},mS={left:o3,right:i3},Qy=function(u,l,d,h,y,x){var A=X1(u,l,h,y);return A.bind(function(P){return x(P.item)?Y.none():d(P.item)?Y.some(P.item):Qy(u,P.item,d,P.mode,y,x)})},Ml=function(u,l,d,h){return Qy(u,l,d,Um,mS.left(),h)},gS=function(u,l,d,h){return Qy(u,l,d,Um,mS.right(),h)},hS=function(u){return function(l){return u.property().children(l).length===0}},Y1=function(u,l,d){return e2(u,l,hS(u),d)},pS=function(u,l,d){return t2(u,l,hS(u),d)},e2=Ml,t2=gS,bh=Hf(),n2=function(u,l){return Y1(bh,u,l)},bS=function(u,l){return pS(bh,u,l)},J1=function(u,l,d){return e2(bh,u,l,d)},u3=function(u,l,d){return t2(bh,u,l,d)},r2=function(u,l,d){return Ft(u,l,d).isSome()},Wm=mc.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),Z1=function(u,l,d){var h=u.getRect(l),y=u.getRect(d);return y.right>h.left&&y.left<h.right},yS=function(u){return Bo(u,"tr")},a2=function(u,l,d,h,y,x,A){return Bo(h,"td,th",A).bind(function(P){return Bo(l,"td,th",A).map(function(V){return wr(P,V)?wr(h,P)&&vl(P)===y?x(V):Wm.none("in same cell"):Wf(yS,[P,V]).fold(function(){return Z1(u,V,P)?Wm.success():x(V)},function(Q){return x(V)})})}).getOr(Wm.none("default"))},Gc=function(u,l,d,h,y){return u.fold(l,d,h,y)},jm=On(On({},Wm),{verify:a2,cata:Gc}),o2=function(u,l,d,h){return{parent:u,children:l,element:d,index:h}},c3=function(u){return as(u).bind(function(l){var d=Z(l);return s3(d,u).map(function(h){return o2(l,d,u,h)})})},s3=function(u,l){return Jt(u,Te(wr,l))},qm=function(u){return hr(u)==="br"},Q1=function(u,l,d){return l(u,d).bind(function(h){return rs(h)&&ol(h).trim().length===0?Q1(h,l,d):Y.some(h)})},wS=function(u,l,d){return d.traverse(l).orThunk(function(){return Q1(l,d.gather,u)}).map(d.relative)},CS=function(u,l){return Zn(u,l).filter(qm).orThunk(function(){return Zn(u,l-1).filter(qm)})},e0=function(u,l,d,h){return CS(l,d).bind(function(y){return h.traverse(y).fold(function(){return Q1(y,h.gather,u).map(h.relative)},function(x){return c3(x).map(function(A){return cu.on(A.parent,A.index)})})})},l3=function(u,l,d,h){var y=qm(l)?wS(u,l,h):e0(u,l,d,h);return y.map(function(x){return{start:x,finish:x}})},i2=function(u){return jm.cata(u,function(l){return Y.none()},function(){return Y.none()},function(l){return Y.some(ji(l,0))},function(l){return Y.some(ji(l,vl(l)))})},t0=function(u,l){return{left:u.left,top:u.top+l,right:u.right,bottom:u.bottom+l}},Ad=function(u,l){return{left:u.left,top:u.top-l,right:u.right,bottom:u.bottom-l}},SS=function(u,l,d){return{left:u.left+l,top:u.top+d,right:u.right+l,bottom:u.bottom+d}},xS=function(u){return u.top},f3=function(u){return u.bottom},v3=function(u,l,d){return d>=0&&d<vl(l)?u.getRangedRect(l,d,l,d+1):d>0?u.getRangedRect(l,d-1,l,d):Y.none()},n0=function(u){return{left:u.left,top:u.top,right:u.right,bottom:u.bottom}},TS=function(u,l){return Y.some(u.getRect(l))},ES=function(u,l,d){return po(l)?TS(u,l).map(n0):rs(l)?v3(u,l,d).map(n0):Y.none()},kS=function(u,l){return po(l)?TS(u,l).map(n0):rs(l)?u.getRangedRect(l,0,l,vl(l)).map(n0):Y.none()},Kc=5,u2=100,bs=mc.generate([{none:[]},{retry:["caret"]}]),Gm=function(u,l){return u.left<l.left||Math.abs(l.right-u.left)<1||u.left>l.right},c2=function(u,l,d){return lc(l,af).fold(pt,function(h){return kS(u,h).exists(function(y){return Gm(d,y)})})},AS=function(u,l,d,h,y){var x=t0(y,Kc);return Math.abs(d.bottom-h.bottom)<1||d.top>y.bottom?bs.retry(x):d.top===y.bottom?bs.retry(t0(y,1)):c2(u,l,y)?bs.retry(SS(x,Kc,0)):bs.none()},s2=function(u,l,d,h,y){var x=Ad(y,Kc);return Math.abs(d.top-h.top)<1||d.bottom<y.top?bs.retry(x):d.bottom===y.top?bs.retry(Ad(y,1)):c2(u,l,y)?bs.retry(SS(x,Kc,0)):bs.none()},d3={point:xS,adjuster:s2,move:Ad,gather:n2},m3={point:f3,adjuster:AS,move:t0,gather:bS},OS=function(u,l,d){return u.elementFromPoint(l,d).filter(function(h){return hr(h)==="table"}).isSome()},g3=function(u,l,d,h,y){return yh(u,l,d,l.move(h,Kc),y)},yh=function(u,l,d,h,y){return y===0?Y.some(h):OS(u,h.left,l.point(h))?g3(u,l,d,h,y-1):u.situsFromPoint(h.left,l.point(h)).bind(function(x){return x.start.fold(Y.none,function(A){return kS(u,A).bind(function(P){return l.adjuster(u,A,P,d,h).fold(Y.none,function(V){return yh(u,l,d,V,y-1)})}).orThunk(function(){return Y.some(h)})},Y.none)})},r0=function(u,l){return u.situsFromPoint(l.left,l.bottom+Kc)},l2=function(u,l){return u.situsFromPoint(l.left,l.top-Kc)},h3=function(u,l,d){return u.point(l)>d.getInnerHeight()?Y.some(u.point(l)-d.getInnerHeight()):u.point(l)<0?Y.some(-u.point(l)):Y.none()},ff=function(u,l,d){var h=u.move(d,Kc),y=yh(l,u,d,h,u2).getOr(h);return h3(u,y,l).fold(function(){return l.situsFromPoint(y.left,u.point(y))},function(x){return l.scrollBy(0,x),l.situsFromPoint(y.left,u.point(y)-x)})},Km={tryUp:Te(ff,d3),tryDown:Te(ff,m3),ieTryUp:l2,ieTryDown:r0,getJumpSize:wt(Kc)},DS=20,p3=function(u,l,d){return u.getSelection().bind(function(h){return l3(l,h.finish,h.foffset,d).fold(function(){return Y.some(ji(h.finish,h.foffset))},function(y){var x=u.fromSitus(y),A=jm.verify(u,h.finish,h.foffset,x.finish,x.foffset,d.failure,l);return i2(A)})})},f2=function(u,l,d,h,y,x){return x===0?Y.none():RS(u,l,d,h,y).bind(function(A){var P=u.fromSitus(A),V=jm.verify(u,d,h,P.finish,P.foffset,y.failure,l);return jm.cata(V,function(){return Y.none()},function(){return Y.some(A)},function(Q){return wr(d,Q)&&h===0?Od(u,d,h,Ad,y):f2(u,l,Q,0,y,x-1)},function(Q){return wr(d,Q)&&h===vl(Q)?Od(u,d,h,t0,y):f2(u,l,Q,vl(Q),y,x-1)})})},Od=function(u,l,d,h,y){return ES(u,l,d).bind(function(x){return Dd(u,y,h(x,Km.getJumpSize()))})},Dd=function(u,l,d){var h=Dt().browser;return h.isChrome()||h.isSafari()||h.isFirefox()||h.isEdge()?l.otherRetry(u,d):h.isIE()?l.ieRetry(u,d):Y.none()},RS=function(u,l,d,h,y){return ES(u,d,h).bind(function(x){return Dd(u,y,x)})},BS=function(u,l,d){return p3(u,l,d).bind(function(h){return f2(u,l,h.element,h.offset,d,DS).map(u.fromSitus)})},wv=function(u,l){return r2(u,function(d){return as(d).exists(function(h){return wr(h,l)})})},vf=function(u,l,d,h,y){return Bo(h,"td,th",l).bind(function(x){return Bo(x,"table",l).bind(function(A){return wv(y,A)?BS(u,l,d).bind(function(P){return Bo(P.finish,"td,th",l).map(function(V){return{start:x,finish:V,range:P}})}):Y.none()})})},_S=function(u,l,d,h,y,x){return Dt().browser.isIE()?Y.none():x(h,l).orThunk(function(){return vf(u,l,d,h,y).map(function(A){var P=A.range;return js.create(Y.some(kd(P.start,P.soffset,P.finish,P.foffset)),!0)})})},b3=function(u,l){return Bo(u,"tr",l).bind(function(d){return Bo(d,"table",l).bind(function(h){var y=eu(h,"tr");return wr(d,y[0])?J1(h,function(x){return jv(x).isSome()},l).map(function(x){var A=vl(x);return js.create(Y.some(kd(x,A,x,A)),!0)}):Y.none()})})},Rd=function(u,l){return Bo(u,"tr",l).bind(function(d){return Bo(d,"table",l).bind(function(h){var y=eu(h,"tr");return wr(d,y[y.length-1])?u3(h,function(x){return bp(x).isSome()},l).map(function(x){return js.create(Y.some(kd(x,0,x,0)),!0)}):Y.none()})})},MS=function(u,l,d,h,y,x,A){return vf(u,d,h,y,x).bind(function(P){return Jy(l,d,P.start,P.finish,A)})},FS=function(u,l){return Bo(u,"td,th",l)},y3=function(u,l,d,h){var y=pd(),x=y.clear,A=function(pe){y.on(function(Xe){h.clearBeforeUpdate(l),FS(pe.target,d).each(function(ht){jf(Xe,ht,d).each(function(tt){var Ye=tt.boxes.getOr([]);if(Ye.length===1){var qt=Ye[0],Wt=nd(qt)==="false",rr=jd(Ig(pe.target),qt,wr);Wt&&rr&&(h.selectRange(l,Ye,qt,qt),u.selectContents(qt))}else Ye.length>1&&(h.selectRange(l,Ye,tt.start,tt.finish),u.selectContents(ht))})})})},P=function(pe){h.clear(l),FS(pe.target,d).each(y.set)},V=function(pe){A(pe)},Q=function(pe){A(pe),x()};return{clearstate:x,mousedown:P,mouseover:V,mouseup:Q}},Pn={traverse:Ie,gather:bS,relative:cu.before,otherRetry:Km.tryDown,ieRetry:Km.ieTryDown,failure:jm.failedDown},Fl={traverse:se,gather:n2,relative:cu.before,otherRetry:Km.tryUp,ieRetry:Km.ieTryUp,failure:jm.failedUp},Pl=function(u){return function(l){return l===u}},a0=Pl(38),wh=Pl(40),Ch=function(u){return u>=37&&u<=40},Xm={isBackward:Pl(37),isForward:Pl(39)},v2={isBackward:Pl(39),isForward:Pl(37)},w3=function(u){var l=u!==void 0?u.dom:document,d=l.body.scrollLeft||l.documentElement.scrollLeft,h=l.body.scrollTop||l.documentElement.scrollTop;return Ta(d,h)},C3=function(u,l,d){var h=d!==void 0?d.dom:document,y=h.defaultView;y&&y.scrollBy(u,l)},nr=function(u){var l=function(Wt,rr){return et.fromPoint(et.fromDom(u.document),Wt,rr)},d=function(Wt){return Wt.dom.getBoundingClientRect()},h=function(Wt,rr,oa,Fn){var er=Tn.exact(Wt,rr,oa,Fn);return r3(u,er)},y=function(){return hh(u).map(function(Wt){return Yy(u,Wt)})},x=function(Wt){var rr=Tn.relative(Wt.start,Wt.finish);return Yy(u,rr)},A=function(Wt,rr){return qy(u,Wt,rr).map(function(oa){return lS.create(oa.start,oa.soffset,oa.finish,oa.foffset)})},P=function(){iS(u)},V=function(Wt){Wt===void 0&&(Wt=!1),hh(u).each(function(rr){return rr.fold(function(oa){return oa.collapse(Wt)},function(oa,Fn){var er=Wt?oa:Fn;jy(u,er,er)},function(oa,Fn,er,_r){var Ir=Wt?oa:er,Oi=Wt?Fn:_r;q1(u,Ir,Oi,Ir,Oi)})})},Q=function(Wt){aS(u,Wt,!1)},pe=function(Wt){aS(u,Wt)},Xe=function(Wt){q1(u,Wt.start,Wt.soffset,Wt.finish,Wt.foffset)},ht=function(Wt,rr){jy(u,Wt,rr)},tt=function(){return u.innerHeight},Ye=function(){var Wt=w3(et.fromDom(u.document));return Wt.top},qt=function(Wt,rr){C3(Wt,rr,et.fromDom(u.document))};return{elementFromPoint:l,getRect:d,getRangedRect:h,getSelection:y,fromSitus:x,situsFromPoint:A,clearSelection:P,collapseSelection:V,setSelection:Xe,setRelativeSelection:ht,selectNode:Q,selectContents:pe,getInnerHeight:tt,getScrollY:Ye,scrollBy:qt}},df=function(u,l){return{rows:u,cols:l}},lr=function(u,l,d,h){var y=nr(u),x=y3(y,l,d,h);return{clearstate:x.clearstate,mousedown:x.mousedown,mouseover:x.mouseover,mouseup:x.mouseup}},o0=function(u,l,d,h){var y=nr(u),x=function(){return h.clear(l),Y.none()},A=function(V,Q,pe,Xe,ht,tt){var Ye=V.raw,qt=Ye.which,Wt=Ye.shiftKey===!0,rr=em(l,h.selectedSelector).fold(function(){return wh(qt)&&Wt?Te(MS,y,l,d,Pn,Xe,Q,h.selectRange):a0(qt)&&Wt?Te(MS,y,l,d,Fl,Xe,Q,h.selectRange):wh(qt)?Te(_S,y,d,Pn,Xe,Q,Rd):a0(qt)?Te(_S,y,d,Fl,Xe,Q,b3):Y.none},function(oa){var Fn=function(er){return function(){var _r=Ur(er,function(Ir){return vS(Ir.rows,Ir.cols,l,oa,h)});return _r.fold(function(){return Eg(l,h.firstSelectedSelector,h.lastSelectedSelector).map(function(Ir){var Oi=wh(qt)||tt.isForward(qt)?cu.after:cu.before;return y.setRelativeSelection(cu.on(Ir.first,0),Oi(Ir.table)),h.clear(l),js.create(Y.none(),!0)})},function(Ir){return Y.some(js.create(Y.none(),!0))})}};return wh(qt)&&Wt?Fn([df(1,0)]):a0(qt)&&Wt?Fn([df(-1,0)]):tt.isBackward(qt)&&Wt?Fn([df(0,-1),df(-1,0)]):tt.isForward(qt)&&Wt?Fn([df(0,1),df(1,0)]):Ch(qt)&&Wt===!1?x:Y.none});return rr()},P=function(V,Q,pe,Xe,ht){return em(l,h.selectedSelector).fold(function(){var tt=V.raw,Ye=tt.which,qt=tt.shiftKey===!0;return qt===!1?Y.none():Ch(Ye)?fS(l,d,Q,pe,Xe,ht,h.selectRange):Y.none()},Y.none)};return{keydown:A,keyup:P}},S3=function(u,l,d,h){var y=nr(u);return function(x,A){h.clearBeforeUpdate(l),jf(x,A,d).each(function(P){var V=P.boxes.getOr([]);h.selectRange(l,V,P.start,P.finish),y.selectContents(A),y.collapseSelection()})}},x3=function(u,l){Kt(l,function(d){Kr(u,d)})},PS=function(u){return function(l){Qu(l,u)}},NS=function(u){return function(l){x3(l,u)}},IS=function(u){var l=PS(u.selected),d=NS([u.selected,u.lastSelected,u.firstSelected]),h=function(x){var A=eu(x,u.selectedSelector);Kt(A,d)},y=function(x,A,P,V){h(x),Kt(A,l),Qu(P,u.firstSelected),Qu(V,u.lastSelected)};return{clearBeforeUpdate:h,clear:h,selectRange:y,selectedSelector:u.selectedSelector,firstSelectedSelector:u.firstSelectedSelector,lastSelectedSelector:u.lastSelectedSelector}},$S=function(u,l,d){var h=function(V){Ya(V,u.selected),Ya(V,u.firstSelected),Ya(V,u.lastSelected)},y=function(V){_a(V,u.selected,"1")},x=function(V){A(V),d()},A=function(V){var Q=eu(V,u.selectedSelector);Kt(Q,h)},P=function(V,Q,pe,Xe){x(V),Kt(Q,y),_a(pe,u.firstSelected,"1"),_a(Xe,u.lastSelected,"1"),l(Q,pe,Xe)};return{clearBeforeUpdate:A,clear:x,selectRange:P,selectedSelector:u.selectedSelector,firstSelectedSelector:u.firstSelectedSelector,lastSelectedSelector:u.lastSelectedSelector}},T3={byClass:IS,byAttr:$S},Qn=function(u,l){var d=u.slice(0,l[l.length-1].row+1),h=$s(d);return $t(h,function(y){var x=y.cells.slice(0,l[l.length-1].column+1);return _t(x,function(A){return A.element})})},E3=function(u,l){var d=u.slice(l[0].row+l[0].rowspan-1,u.length),h=$s(d);return $t(h,function(y){var x=y.cells.slice(l[0].column+l[0].colspan-1,y.cells.length);return _t(x,function(A){return A.element})})},zS=function(u,l,d){var h=$n.fromTable(u),y=Tl(h,l);return y.map(function(x){var A=id(h,d,!1),P=Qn(A,x),V=E3(A,x);return{upOrLeftCells:P,downOrRightCells:V}})},LS=tinymce.util.Tools.resolve("tinymce.Env"),i0=function(u){return xo(et.fromDom(u.target),"ephox-snooker-resizer-bar")===!1};function Sh(u,l,d){var h=function(A,P,V){d.targets().each(function(Q){var pe=co(P);pe.each(function(Xe){var ht=Vb(u),tt=hb(it,et.fromDom(u.getDoc()),ht),Ye=zS(Xe,Q,tt);jp(u,A,P,V,Ye)})})},y=function(){return uv(u)},x=T3.byAttr(Hi,h,y);return u.on("init",function(A){var P=u.getWin(),V=dl(u),Q=zc(u),pe=function(){var jr=u.selection,Gn=et.fromDom(jr.getStart()),Mr=et.fromDom(jr.getEnd()),ka=Wf(co,[Gn,Mr]);ka.fold(function(){return x.clear(V)},it)},Xe=lr(P,V,Q,x),ht=o0(P,V,Q,x),tt=S3(P,V,Q,x),Ye=function(jr){return jr.raw.shiftKey===!0};u.on("TableSelectorChange",function(jr){return tt(jr.start,jr.finish)});var qt=function(jr,Gn){!Ye(jr)||(Gn.kill&&jr.kill(),Gn.selection.each(function(Mr){var ka=Tn.relative(Mr.start,Mr.finish),fo=Vy(P,ka);u.selection.setRng(fo)}))},Wt=function(jr){var Gn=ed(jr);if(Gn.raw.shiftKey&&Ch(Gn.raw.which)){var Mr=u.selection.getRng(),ka=et.fromDom(Mr.startContainer),fo=et.fromDom(Mr.endContainer);ht.keyup(Gn,ka,Mr.startOffset,fo,Mr.endOffset).each(function(hu){qt(Gn,hu)})}},rr=function(jr){var Gn=ed(jr);l().each(function(qs){return qs.hideBars()});var Mr=u.selection.getRng(),ka=et.fromDom(Mr.startContainer),fo=et.fromDom(Mr.endContainer),hu=Zl(Xm,v2)(et.fromDom(u.selection.getStart()));ht.keydown(Gn,ka,Mr.startOffset,fo,Mr.endOffset,hu).each(function(qs){qt(Gn,qs)}),l().each(function(qs){return qs.showBars()})},oa=function(jr){return jr.button===0},Fn=function(jr){return jr.buttons===void 0||LS.browser.isEdge()&&jr.buttons===0?!0:(jr.buttons&1)!=0},er=function(jr){Xe.clearstate()},_r=function(jr){oa(jr)&&i0(jr)&&Xe.mousedown(ed(jr))},Ir=function(jr){Fn(jr)&&i0(jr)&&Xe.mouseover(ed(jr))},Oi=function(jr){oa(jr)&&i0(jr)&&Xe.mouseup(ed(jr))},gu=function(){var jr=fl(et.fromDom(V)),Gn=fl(0),Mr=function(ka){var fo=et.fromDom(ka.target);if(hr(fo)==="td"||hr(fo)==="th"){var hu=jr.get(),qs=Gn.get();wr(hu,fo)&&ka.timeStamp-qs<300&&(ka.preventDefault(),tt(fo,fo))}jr.set(fo),Gn.set(ka.timeStamp)};return{touchEnd:Mr}},rc=gu();u.on("dragstart",er),u.on("mousedown",_r),u.on("mouseover",Ir),u.on("mouseup",Oi),u.on("touchend",rc.touchEnd),u.on("keyup",Wt),u.on("keydown",rr),u.on("NodeChange",pe)}),{clear:x.clear}}var HS=function(u,l){return Kl(u,l).isSome()},Ym=function(u,l){var d=fl(Y.none()),h=fl([]),y=Y.none(),x=wu("caption"),A=function(Gn){return y.forall(function(Mr){return!Mr[Gn]})},P=function(){return Kv(Co(u),zc(u))},V=function(){return Kv(Lc(u),zc(u))},Q=function(){return P().bind(function(Gn){return Es(Lo(co(Gn),V().bind(co),function(Mr,ka){return wr(Mr,ka)?x(Gn)?Y.some(gl(Gn)):Y.some(Mg(l,Mr,Gn)):Y.none()}))})},pe=function(Gn){var Mr=co(Gn.element);return Mr.map(function(ka){var fo=$n.fromTable(ka),hu=Tl(fo,Gn).getOr([]),qs=te(hu,function(Gs,Di){return Di.isLocked&&(Gs.onAny=!0,Di.column===0?Gs.onFirst=!0:Di.column+Di.colspan>=fo.grid.columns&&(Gs.onLast=!0)),Gs},{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:iC(fo,Gn).isSome(),unmergeable:Qb(fo,Gn).isSome(),locked:qs}})},Xe=function(){d.set(Po(Q)()),y=d.get().bind(pe),Kt(h.get(),function(Gn){return Gn()})},ht=function(Gn){return Gn(),h.set(h.get().concat([Gn])),function(){h.set(ir(h.get(),function(Mr){return Mr!==Gn}))}},tt=function(Gn,Mr){return ht(function(){return d.get().fold(function(){Gn.setDisabled(!0)},function(ka){Gn.setDisabled(Mr(ka))})})},Ye=function(Gn,Mr,ka){return ht(function(){return d.get().fold(function(){Gn.setDisabled(!0),Gn.setActive(!1)},function(fo){Gn.setDisabled(Mr(fo)),Gn.setActive(ka(fo))})})},qt=function(Gn){return y.exists(function(Mr){return Mr.locked[Gn]})},Wt=function(Gn){return tt(Gn,function(Mr){return!1})},rr=function(Gn){return tt(Gn,function(Mr){return x(Mr.element)})},oa=function(Gn){return function(Mr){return tt(Mr,function(ka){return x(ka.element)||qt(Gn)})}},Fn=function(Gn){return function(Mr){return tt(Mr,function(ka){return x(ka.element)||Gn().isNone()})}},er=function(Gn,Mr){return function(ka){return tt(ka,function(fo){return x(fo.element)||Gn().isNone()||qt(Mr)})}},_r=function(Gn){return tt(Gn,function(Mr){return A("mergeable")})},Ir=function(Gn){return tt(Gn,function(Mr){return A("unmergeable")})},Oi=function(Gn){return Ye(Gn,pt,function(Mr){var ka=co(Mr.element,zc(u));return ka.exists(function(fo){return HS(fo,"caption")})})},gu=function(Gn,Mr){return function(ka){return Ye(ka,function(fo){return x(fo.element)},function(){return u.queryCommandValue(Gn)===Mr})}},rc=gu("mceTableRowType","header"),jr=gu("mceTableColType","th");return u.on("NodeChange ExecCommand TableSelectorChange",Xe),{onSetupTable:Wt,onSetupCellOrRow:rr,onSetupColumn:oa,onSetupPasteable:Fn,onSetupPasteableColumn:er,onSetupMergeable:_r,onSetupUnmergeable:Ir,resetTargets:Xe,onSetupTableWithCaption:Oi,onSetupTableRowHeaders:rc,onSetupTableColumnHeaders:jr,targets:d.get}},VS=function(u,l,d,h){u.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",fetch:function(P){return P("inserttable | cell row column | advtablesort | tableprops deletetable")}});var y=function(P){return function(){return u.execCommand(P)}};u.ui.registry.addButton("tableprops",{tooltip:"Table properties",onAction:y("mceTableProps"),icon:"table",onSetup:d.onSetupTable}),u.ui.registry.addButton("tabledelete",{tooltip:"Delete table",onAction:y("mceTableDelete"),icon:"table-delete-table",onSetup:d.onSetupTable}),u.ui.registry.addButton("tablecellprops",{tooltip:"Cell properties",onAction:y("mceTableCellProps"),icon:"table-cell-properties",onSetup:d.onSetupCellOrRow}),u.ui.registry.addButton("tablemergecells",{tooltip:"Merge cells",onAction:y("mceTableMergeCells"),icon:"table-merge-cells",onSetup:d.onSetupMergeable}),u.ui.registry.addButton("tablesplitcells",{tooltip:"Split cell",onAction:y("mceTableSplitCells"),icon:"table-split-cells",onSetup:d.onSetupUnmergeable}),u.ui.registry.addButton("tableinsertrowbefore",{tooltip:"Insert row before",onAction:y("mceTableInsertRowBefore"),icon:"table-insert-row-above",onSetup:d.onSetupCellOrRow}),u.ui.registry.addButton("tableinsertrowafter",{tooltip:"Insert row after",onAction:y("mceTableInsertRowAfter"),icon:"table-insert-row-after",onSetup:d.onSetupCellOrRow}),u.ui.registry.addButton("tabledeleterow",{tooltip:"Delete row",onAction:y("mceTableDeleteRow"),icon:"table-delete-row",onSetup:d.onSetupCellOrRow}),u.ui.registry.addButton("tablerowprops",{tooltip:"Row properties",onAction:y("mceTableRowProps"),icon:"table-row-properties",onSetup:d.onSetupCellOrRow}),u.ui.registry.addButton("tableinsertcolbefore",{tooltip:"Insert column before",onAction:y("mceTableInsertColBefore"),icon:"table-insert-column-before",onSetup:d.onSetupColumn("onFirst")}),u.ui.registry.addButton("tableinsertcolafter",{tooltip:"Insert column after",onAction:y("mceTableInsertColAfter"),icon:"table-insert-column-after",onSetup:d.onSetupColumn("onLast")}),u.ui.registry.addButton("tabledeletecol",{tooltip:"Delete column",onAction:y("mceTableDeleteCol"),icon:"table-delete-column",onSetup:d.onSetupColumn("onAny")}),u.ui.registry.addButton("tablecutrow",{tooltip:"Cut row",icon:"cut-row",onAction:y("mceTableCutRow"),onSetup:d.onSetupCellOrRow}),u.ui.registry.addButton("tablecopyrow",{tooltip:"Copy row",icon:"duplicate-row",onAction:y("mceTableCopyRow"),onSetup:d.onSetupCellOrRow}),u.ui.registry.addButton("tablepasterowbefore",{tooltip:"Paste row before",icon:"paste-row-before",onAction:y("mceTablePasteRowBefore"),onSetup:d.onSetupPasteable(h.getRows)}),u.ui.registry.addButton("tablepasterowafter",{tooltip:"Paste row after",icon:"paste-row-after",onAction:y("mceTablePasteRowAfter"),onSetup:d.onSetupPasteable(h.getRows)}),u.ui.registry.addButton("tablecutcol",{tooltip:"Cut column",icon:"cut-column",onAction:y("mceTableCutCol"),onSetup:d.onSetupColumn("onAny")}),u.ui.registry.addButton("tablecopycol",{tooltip:"Copy column",icon:"duplicate-column",onAction:y("mceTableCopyCol"),onSetup:d.onSetupColumn("onAny")}),u.ui.registry.addButton("tablepastecolbefore",{tooltip:"Paste column before",icon:"paste-column-before",onAction:y("mceTablePasteColBefore"),onSetup:d.onSetupPasteableColumn(h.getColumns,"onFirst")}),u.ui.registry.addButton("tablepastecolafter",{tooltip:"Paste column after",icon:"paste-column-after",onAction:y("mceTablePasteColAfter"),onSetup:d.onSetupPasteableColumn(h.getColumns,"onLast")}),u.ui.registry.addButton("tableinsertdialog",{tooltip:"Insert table",onAction:y("mceInsertTable"),icon:"table"});var x=bd(Wi(u));x.length!==0&&u.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:nh(u,l,x,"tableclass",function(P){return u.execCommand("mceTableToggleClass",!1,P)}),onSetup:d.onSetupTable});var A=bd(Vc(u));A.length!==0&&u.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:nh(u,l,A,"tablecellclass",function(P){return u.execCommand("mceTableCellToggleClass",!1,P)}),onSetup:d.onSetupCellOrRow}),u.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:nh(u,l,Cy,"tablecellverticalalign",Bl(u,"vertical-align")),onSetup:d.onSetupCellOrRow}),u.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:nh(u,l,si(u),"tablecellborderwidth",Bl(u,"border-width")),onSetup:d.onSetupCellOrRow}),u.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:nh(u,l,rd(u),"tablecellborderstyle",Bl(u,"border-style")),onSetup:d.onSetupCellOrRow}),u.ui.registry.addToggleButton("tablecaption",{tooltip:"Table caption",onAction:y("mceTableToggleCaption"),icon:"table-caption",onSetup:d.onSetupTableWithCaption}),u.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:function(P){return P(rh(u,Jp(u),"background-color"))},onSetup:d.onSetupCellOrRow}),u.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:function(P){return P(rh(u,Kw(u),"border-color"))},onSetup:d.onSetupCellOrRow}),u.ui.registry.addToggleButton("tablerowheader",{tooltip:"Row header",icon:"table-top-header",onAction:zC(u),onSetup:d.onSetupTableRowHeaders}),u.ui.registry.addToggleButton("tablecolheader",{tooltip:"Column header",icon:"table-left-header",onAction:Ey(u),onSetup:d.onSetupTableColumnHeaders})},d2=function(u){var l=function(h){return u.dom.is(h,"table")&&u.getBody().contains(h)},d=Ug(u);d.length>0&&u.ui.registry.addContextToolbar("table",{predicate:l,items:d,scope:"node",position:"node"})},k3=function(u,l,d,h){var y=function(tt){return function(){return u.execCommand(tt)}},x=function(tt){u.execCommand("mceInsertTable",!1,{rows:tt.numRows,columns:tt.numColumns})},A={text:"Table properties",onSetup:d.onSetupTable,onAction:y("mceTableProps")},P={text:"Delete table",icon:"table-delete-table",onSetup:d.onSetupTable,onAction:y("mceTableDelete")};u.ui.registry.addMenuItem("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",onAction:y("mceTableInsertRowBefore"),onSetup:d.onSetupCellOrRow}),u.ui.registry.addMenuItem("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",onAction:y("mceTableInsertRowAfter"),onSetup:d.onSetupCellOrRow}),u.ui.registry.addMenuItem("tabledeleterow",{text:"Delete row",icon:"table-delete-row",onAction:y("mceTableDeleteRow"),onSetup:d.onSetupCellOrRow}),u.ui.registry.addMenuItem("tablerowprops",{text:"Row properties",icon:"table-row-properties",onAction:y("mceTableRowProps"),onSetup:d.onSetupCellOrRow}),u.ui.registry.addMenuItem("tablecutrow",{text:"Cut row",icon:"cut-row",onAction:y("mceTableCutRow"),onSetup:d.onSetupCellOrRow}),u.ui.registry.addMenuItem("tablecopyrow",{text:"Copy row",icon:"duplicate-row",onAction:y("mceTableCopyRow"),onSetup:d.onSetupCellOrRow}),u.ui.registry.addMenuItem("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",onAction:y("mceTablePasteRowBefore"),onSetup:d.onSetupPasteable(h.getRows)}),u.ui.registry.addMenuItem("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",onAction:y("mceTablePasteRowAfter"),onSetup:d.onSetupPasteable(h.getRows)});var V={type:"nestedmenuitem",text:"Row",getSubmenuItems:wt("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")};u.ui.registry.addMenuItem("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",onAction:y("mceTableInsertColBefore"),onSetup:d.onSetupColumn("onFirst")}),u.ui.registry.addMenuItem("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",onAction:y("mceTableInsertColAfter"),onSetup:d.onSetupColumn("onLast")}),u.ui.registry.addMenuItem("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",onAction:y("mceTableDeleteCol"),onSetup:d.onSetupColumn("onAny")}),u.ui.registry.addMenuItem("tablecutcolumn",{text:"Cut column",icon:"cut-column",onAction:y("mceTableCutCol"),onSetup:d.onSetupColumn("onAny")}),u.ui.registry.addMenuItem("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",onAction:y("mceTableCopyCol"),onSetup:d.onSetupColumn("onAny")}),u.ui.registry.addMenuItem("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",onAction:y("mceTablePasteColBefore"),onSetup:d.onSetupPasteableColumn(h.getColumns,"onFirst")}),u.ui.registry.addMenuItem("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",onAction:y("mceTablePasteColAfter"),onSetup:d.onSetupPasteableColumn(h.getColumns,"onLast")});var Q={type:"nestedmenuitem",text:"Column",getSubmenuItems:wt("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")};u.ui.registry.addMenuItem("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",onAction:y("mceTableCellProps"),onSetup:d.onSetupCellOrRow}),u.ui.registry.addMenuItem("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",onAction:y("mceTableMergeCells"),onSetup:d.onSetupMergeable}),u.ui.registry.addMenuItem("tablesplitcells",{text:"Split cell",icon:"table-split-cells",onAction:y("mceTableSplitCells"),onSetup:d.onSetupUnmergeable});var pe={type:"nestedmenuitem",text:"Cell",getSubmenuItems:wt("tablecellprops tablemergecells tablesplitcells")};Xp(u)===!1?u.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:y("mceInsertTable")}):u.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"inserttable",onAction:x}]}}),u.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:y("mceInsertTable")}),u.ui.registry.addMenuItem("tableprops",A),u.ui.registry.addMenuItem("deletetable",P),u.ui.registry.addNestedMenuItem("row",V),u.ui.registry.addNestedMenuItem("column",Q),u.ui.registry.addNestedMenuItem("cell",pe),u.ui.registry.addContextMenu("table",{update:function(){return d.resetTargets(),d.targets().fold(wt(""),function(tt){return hr(tt.element)==="caption"?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"})}});var Xe=bd(Wi(u));Xe.length!==0&&u.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:function(){return Wc(u,l,Xe,"tableclass",function(tt){return u.execCommand("mceTableToggleClass",!1,tt)})},onSetup:d.onSetupTable});var ht=bd(Vc(u));ht.length!==0&&u.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:function(){return Wc(u,l,ht,"tablecellclass",function(tt){return u.execCommand("mceTableCellToggleClass",!1,tt)})},onSetup:d.onSetupCellOrRow}),u.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:function(){return Wc(u,l,Cy,"tablecellverticalalign",Bl(u,"vertical-align"))},onSetup:d.onSetupCellOrRow}),u.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:function(){return Wc(u,l,si(u),"tablecellborderwidth",Bl(u,"border-width"))},onSetup:d.onSetupCellOrRow}),u.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:function(){return Wc(u,l,rd(u),"tablecellborderstyle",Bl(u,"border-style"))},onSetup:d.onSetupCellOrRow}),u.ui.registry.addToggleMenuItem("tablecaption",{icon:"table-caption",text:"Table caption",onAction:y("mceTableToggleCaption"),onSetup:d.onSetupTableWithCaption}),u.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:function(){return rh(u,Jp(u),"background-color")},onSetup:d.onSetupCellOrRow}),u.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:function(){return rh(u,Kw(u),"border-color")},onSetup:d.onSetupCellOrRow}),u.ui.registry.addToggleMenuItem("tablerowheader",{text:"Row header",icon:"table-top-header",onAction:zC(u),onSetup:d.onSetupTableRowHeaders}),u.ui.registry.addToggleMenuItem("tablecolheader",{text:"Column header",icon:"table-left-header",onAction:Ey(u),onSetup:d.onSetupTableColumnHeaders})},A3=function(u){var l=uw(function(){return dl(u)},function(){return oi(Co(u),zc(u))},Hi.selectedSelector),d=Ym(u,l),h=qb(u),y=Sh(u,h.lazyResize,d),x=_C(u,y,h.lazyWire),A=KC();return My(u,x,y,l,A),zE(u,x,l),Ql(u,l,x),k3(u,l,d,A),VS(u,l,d,A),d2(u),u.on("PreInit",function(){u.serializer.addTempAttr(Hi.firstSelected),u.serializer.addTempAttr(Hi.lastSelected),xc(u)}),Ww(u)&&u.on("keydown",function(P){cS(P,u,y)}),u.on("remove",function(){h.destroy()}),wy(u,A,h,d)};function O3(){eb.add("table",A3)}O3()})();(function(){var Nt=tinymce.util.Tools.resolve("tinymce.PluginManager");function on(){Nt.add("textcolor",function(){console.warn("Text color plugin is now built in to the core editor, please remove it from your editor configuration")})}on()})();(function(){var Nt=tinymce.util.Tools.resolve("tinymce.PluginManager"),on=function(It){return It},vn=function(){return vn=Object.assign||function($t){for(var rt,an=1,kn=arguments.length;an<kn;an++){rt=arguments[an];for(var Ze in rt)Object.prototype.hasOwnProperty.call(rt,Ze)&&($t[Ze]=rt[Ze])}return $t},vn.apply(this,arguments)},or="\uFEFF",Ut=function(It){return It.replace(/\uFEFF/g,"")},Vn=function(It,$t){for(var rt=It.length,an=new Array(rt),kn=0;kn<rt;kn++){var Ze=It[kn];an[kn]=$t(Ze,kn)}return an},Sn="[!-#%-*,-\\/:;?@\\[-\\]_{}\xA1\xAB\xB7\xBB\xBF;\xB7\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1361-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u3008\u3009\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30\u2E31\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]",An={aletter:"[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F3\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u10A0-\u10C5\u10D0-\u10FA\u10FC\u1100-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F0\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1A00-\u1A16\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BC0-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u24B6-\u24E9\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2D00-\u2D25\u2D30-\u2D65\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u303B\u303C\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790\uA791\uA7A0-\uA7A9\uA7FA-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFFA0-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]",midnumlet:"[-'\\.\u2018\u2019\u2024\uFE52\uFF07\uFF0E]",midletter:"[:\xB7\xB7\u05F4\u2027\uFE13\uFE55\uFF1A]",midnum:"[\xB1+*/,;;\u0589\u060C\u060D\u066C\u07F8\u2044\uFE10\uFE14\uFE50\uFE54\uFF0C\uFF1B]",numeric:"[0-9\u0660-\u0669\u066B\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u1090-\u1099\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\uA620-\uA629\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uAA50-\uAA59\uABF0-\uABF9]",cr:"\\r",lf:"\\n",newline:"[\v\f\x85\u2028\u2029]",extend:"[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0900-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C01-\u0C03\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C82\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D02\u0D03\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B6-\u17D3\u17DD\u180B-\u180D\u18A9\u1920-\u192B\u1930-\u193B\u19B0-\u19C0\u19C8\u19C9\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAA\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2\u1DC0-\u1DE6\u1DFC-\u1DFF\u200C\u200D\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA67C\uA67D\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C4\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE26\uFF9E\uFF9F]",format:"[\xAD\u0600-\u0603\u06DD\u070F\u17B4\u17B5\u200E\u200F\u202A-\u202E\u2060-\u2064\u206A-\u206F\uFEFF\uFFF9-\uFFFB]",katakana:"[\u3031-\u3035\u309B\u309C\u30A0-\u30FA\u30FC-\u30FF\u31F0-\u31FF\u32D0-\u32FE\u3300-\u3357\uFF66-\uFF9D]",extendnumlet:"[=_\u203F\u2040\u2054\uFE33\uFE34\uFE4D-\uFE4F\uFF3F\u2200-\u22FF<>]",punctuation:Sn},jt={ALETTER:0,MIDNUMLET:1,MIDLETTER:2,MIDNUM:3,NUMERIC:4,CR:5,LF:6,NEWLINE:7,EXTEND:8,FORMAT:9,KATAKANA:10,EXTENDNUMLET:11,AT:12,OTHER:13},ia=[new RegExp(An.aletter),new RegExp(An.midnumlet),new RegExp(An.midletter),new RegExp(An.midnum),new RegExp(An.numeric),new RegExp(An.cr),new RegExp(An.lf),new RegExp(An.newline),new RegExp(An.extend),new RegExp(An.format),new RegExp(An.katakana),new RegExp(An.extendnumlet),new RegExp("@")],Fr="",un=new RegExp("^"+An.punctuation+"$"),br=/^\s+$/,mr=ia,it=jt.OTHER,He=function(It){for(var $t=it,rt=mr.length,an=0;an<rt;++an){var kn=mr[an];if(kn&&kn.test(It)){$t=an;break}}return $t},wn=function(It){var $t={};return function(rt){if($t[rt])return $t[rt];var an=It(rt);return $t[rt]=an,an}},wt=function(It){var $t=wn(He);return Vn(It,$t)},Un=function(It,$t){var rt=It[$t],an=It[$t+1];if($t<0||$t>It.length-1&&$t!==0||rt===jt.ALETTER&&an===jt.ALETTER)return!1;var kn=It[$t+2];if(rt===jt.ALETTER&&(an===jt.MIDLETTER||an===jt.MIDNUMLET||an===jt.AT)&&kn===jt.ALETTER)return!1;var Ze=It[$t-1];return(rt===jt.MIDLETTER||rt===jt.MIDNUMLET||an===jt.AT)&&an===jt.ALETTER&&Ze===jt.ALETTER||(rt===jt.NUMERIC||rt===jt.ALETTER)&&(an===jt.NUMERIC||an===jt.ALETTER)||(rt===jt.MIDNUM||rt===jt.MIDNUMLET)&&an===jt.NUMERIC&&Ze===jt.NUMERIC||rt===jt.NUMERIC&&(an===jt.MIDNUM||an===jt.MIDNUMLET)&&kn===jt.NUMERIC||rt===jt.EXTEND||rt===jt.FORMAT||Ze===jt.EXTEND||Ze===jt.FORMAT||an===jt.EXTEND||an===jt.FORMAT||rt===jt.CR&&an===jt.LF?!1:rt===jt.NEWLINE||rt===jt.CR||rt===jt.LF||an===jt.NEWLINE||an===jt.CR||an===jt.LF?!0:!(rt===jt.KATAKANA&&an===jt.KATAKANA||an===jt.EXTENDNUMLET&&(rt===jt.ALETTER||rt===jt.NUMERIC||rt===jt.KATAKANA||rt===jt.EXTENDNUMLET)||rt===jt.EXTENDNUMLET&&(an===jt.ALETTER||an===jt.NUMERIC||an===jt.KATAKANA)||rt===jt.AT)},re=Fr,Te=br,qe=un,gt=function(It){return It==="http"||It==="https"},pt=function(It,$t){var rt;for(rt=$t;rt<It.length&&!Te.test(It[rt]);rt++);return rt},bt=function(It,$t){var rt=pt(It,$t+1),an=It.slice($t+1,rt).join(re);return an.substr(0,3)==="://"?rt:$t},rn=function(It,$t,rt,an){for(var kn=[],Ze=[],Wn=0;Wn<rt.length;++Wn)if(Ze.push(It[Wn]),Un(rt,Wn)){var ma=$t[Wn];if((an.includeWhitespace||!Te.test(ma))&&(an.includePunctuation||!qe.test(ma))){var dn=Wn-Ze.length+1,qr=Wn+1,Ur=$t.slice(dn,qr).join(re);if(gt(Ur)){var On=bt($t,Wn),ra=It.slice(qr,On);Array.prototype.push.apply(Ze,ra),Wn=On}kn.push(Ze)}Ze=[]}return kn},ut=function(){return{includeWhitespace:!1,includePunctuation:!1}},Rr=function(It,$t,rt){rt=vn(vn({},ut()),rt);for(var an=[],kn=[],Ze=0;Ze<It.length;Ze++){var Wn=$t(It[Ze]);Wn!==or&&(an.push(It[Ze]),kn.push(Wn))}var ma=wt(kn);return rn(an,kn,ma,rt)},me=Rr,Y=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Dn=function(It,$t){for(var rt=$t.getBlockElements(),an=$t.getShortEndedElements(),kn=function(dn){return rt[dn.nodeName]||an[dn.nodeName]},Ze=[],Wn="",ma=new Y(It,It);It=ma.next();)It.nodeType===3?Wn+=Ut(It.data):kn(It)&&Wn.length&&(Ze.push(Wn),Wn="");return Wn.length&&Ze.push(Wn),Ze},Aa=function(It){return It.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length},At=function(It,$t){var rt=Dn(It,$t).join(`
`);return me(rt.split(""),on).length},Oa=function(It,$t){var rt=Dn(It,$t).join("");return Aa(rt)},Nn=function(It,$t){var rt=Dn(It,$t).join("").replace(/\s/g,"");return Aa(rt)},D=function(It,$t){return function(){return $t(It.getBody(),It.schema)}},na=function(It,$t){return function(){return $t(It.selection.getRng().cloneContents(),It.schema)}},_t=function(It){return D(It,At)},Kt=function(It){return{body:{getWordCount:_t(It),getCharacterCount:D(It,Oa),getCharacterCountWithoutSpaces:D(It,Nn)},selection:{getWordCount:na(It,At),getCharacterCount:na(It,Oa),getCharacterCountWithoutSpaces:na(It,Nn)},getCount:_t(It)}},Ro=function(It,$t){It.windowManager.open({title:"Word Count",body:{type:"panel",items:[{type:"table",header:["Count","Document","Selection"],cells:[["Words",String($t.body.getWordCount()),String($t.selection.getWordCount())],["Characters (no spaces)",String($t.body.getCharacterCountWithoutSpaces()),String($t.selection.getCharacterCountWithoutSpaces())],["Characters",String($t.body.getCharacterCount()),String($t.selection.getCharacterCount())]]}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}]})},Go=function(It,$t){It.addCommand("mceWordCount",function(){return Ro(It,$t)})},ir=tinymce.util.Tools.resolve("tinymce.util.Delay"),la=function(It,$t){It.fire("wordCountUpdate",{wordCount:{words:$t.body.getWordCount(),characters:$t.body.getCharacterCount(),charactersWithoutSpaces:$t.body.getCharacterCountWithoutSpaces()}})},te=function(It,$t){la(It,$t)},qa=function(It,$t,rt){var an=ir.debounce(function(){return te(It,$t)},rt);It.on("init",function(){te(It,$t),ir.setEditorTimeout(It,function(){It.on("SetContent BeforeAddUndo Undo Redo ViewUpdate keyup",an)},0)})},yt=function(It){var $t=function(){return It.execCommand("mceWordCount")};It.ui.registry.addButton("wordcount",{tooltip:"Word count",icon:"character-count",onAction:$t}),It.ui.registry.addMenuItem("wordcount",{text:"Word count",icon:"character-count",onAction:$t})};function Jt(It){It===void 0&&(It=300),Nt.add("wordcount",function($t){var rt=Kt($t);return Go($t,rt),yt($t),qa($t,rt,It),rt})}Jt()})();(function(){var Nt=tinymce.util.Tools.resolve("tinymce.PluginManager"),on=function(An,jt){An.focus(),An.undoManager.transact(function(){An.setContent(jt)}),An.selection.setCursorLocation(),An.nodeChanged()},vn=function(An){return An.getContent({source_view:!0})},or=function(An){var jt=vn(An);An.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:jt},onSubmit:function(ia){on(An,ia.getData().code),ia.close()}})},Ut=function(An){An.addCommand("mceCodeEditor",function(){or(An)})},Vn=function(An){var jt=function(){return An.execCommand("mceCodeEditor")};An.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:jt}),An.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:jt})};function Sn(){Nt.add("code",function(An){return Ut(An),Vn(An),{}})}Sn()})();(function(){var Nt=function(G){var le=G,Be=function(){return le},Le=function(at){le=at};return{get:Be,set:Le}},on=tinymce.util.Tools.resolve("tinymce.PluginManager"),vn=function(){return vn=Object.assign||function(le){for(var Be,Le=1,at=arguments.length;Le<at;Le++){Be=arguments[Le];for(var Rt in Be)Object.prototype.hasOwnProperty.call(Be,Rt)&&(le[Rt]=Be[Rt])}return le},vn.apply(this,arguments)},or=function(G){var le=typeof G;return G===null?"null":le==="object"&&(Array.prototype.isPrototypeOf(G)||G.constructor&&G.constructor.name==="Array")?"array":le==="object"&&(String.prototype.isPrototypeOf(G)||G.constructor&&G.constructor.name==="String")?"string":le},Ut=function(G){return function(le){return or(le)===G}},Vn=function(G){return function(le){return typeof le===G}},Sn=Ut("string"),An=Ut("array"),jt=Vn("boolean"),ia=Vn("number"),Fr=function(){},un=function(G){return function(){return G}},br=function(G){return G},mr=un(!1),it=un(!0),He="[!-#%-*,-\\/:;?@\\[-\\]_{}\xA1\xAB\xB7\xBB\xBF;\xB7\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1361-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u3008\u3009\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30\u2E31\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]",wn=un(He),wt=function(){return Un},Un=function(){var G=function(Le){return Le()},le=br,Be={fold:function(Le,at){return Le()},isSome:mr,isNone:it,getOr:le,getOrThunk:G,getOrDie:function(Le){throw new Error(Le||"error: getOrDie called on none.")},getOrNull:un(null),getOrUndefined:un(void 0),or:le,orThunk:G,map:wt,each:Fr,bind:wt,exists:mr,forall:it,filter:function(){return wt()},toArray:function(){return[]},toString:un("none()")};return Be}(),re=function(G){var le=un(G),Be=function(){return at},Le=function(Rt){return Rt(G)},at={fold:function(Rt,Zt){return Zt(G)},isSome:it,isNone:mr,getOr:le,getOrThunk:le,getOrDie:le,getOrNull:le,getOrUndefined:le,or:Be,orThunk:Be,map:function(Rt){return re(Rt(G))},each:function(Rt){Rt(G)},bind:Le,exists:Le,forall:Le,filter:function(Rt){return Rt(G)?at:Un},toArray:function(){return[G]},toString:function(){return"some("+G+")"}};return at},Te=function(G){return G==null?Un:re(G)},qe={some:re,none:wt,from:Te},gt=wn,pt=tinymce.util.Tools.resolve("tinymce.util.Tools"),bt=Array.prototype.slice,rn=Array.prototype.push,ut=function(G,le){for(var Be=G.length,Le=new Array(Be),at=0;at<Be;at++){var Rt=G[at];Le[at]=le(Rt,at)}return Le},Rr=function(G,le){for(var Be=0,Le=G.length;Be<Le;Be++){var at=G[Be];le(at,Be)}},me=function(G,le){for(var Be=G.length-1;Be>=0;Be--){var Le=G[Be];le(Le,Be)}},Y=function(G,le){if(G.length===0)return[];for(var Be=le(G[0]),Le=[],at=[],Rt=0,Zt=G.length;Rt<Zt;Rt++){var Rn=G[Rt],Yn=le(Rn);Yn!==Be&&(Le.push(at),at=[]),Be=Yn,at.push(Rn)}return at.length!==0&&Le.push(at),Le},Dn=function(G,le,Be){return Rr(G,function(Le,at){Be=le(Be,Le,at)}),Be},Aa=function(G){for(var le=[],Be=0,Le=G.length;Be<Le;++Be){if(!An(G[Be]))throw new Error("Arr.flatten item "+Be+" was not an array, input: "+G);rn.apply(le,G[Be])}return le},At=function(G,le){return Aa(ut(G,le))},Oa=function(G,le){var Be=bt.call(G,0);return Be.sort(le),Be},Nn=Object.hasOwnProperty,D=function(G,le){return Nn.call(G,le)};typeof window!="undefined"||Function("return this;")();var na=9,_t=11,Kt=1,Ro=3,Go=function(G){return G.dom.nodeType},ir=function(G){return function(le){return Go(le)===G}},la=ir(Ro),te=function(G,le,Be){if(Sn(Be)||jt(Be)||ia(Be))G.setAttribute(le,Be+"");else throw console.error("Invalid call to Attribute.set. Key ",le,":: Value ",Be,":: Element ",G),new Error("Attribute value was not simple")},qa=function(G,le,Be){te(G.dom,le,Be)},yt=function(G,le,Be){return(G.compareDocumentPosition(le)&Be)!=0},Jt=function(G,le){return yt(G,le,Node.DOCUMENT_POSITION_PRECEDING)},It=function(G,le){var Be=le||document,Le=Be.createElement("div");if(Le.innerHTML=G,!Le.hasChildNodes()||Le.childNodes.length>1)throw console.error("HTML does not have a single root node",G),new Error("HTML must have a single root node");return an(Le.childNodes[0])},$t=function(G,le){var Be=le||document,Le=Be.createElement(G);return an(Le)},rt=function(G,le){var Be=le||document,Le=Be.createTextNode(G);return an(Le)},an=function(G){if(G==null)throw new Error("Node cannot be null or undefined");return{dom:G}},kn=function(G,le,Be){return qe.from(G.dom.elementFromPoint(le,Be)).map(an)},Ze={fromHtml:It,fromTag:$t,fromText:rt,fromDom:an,fromPoint:kn},Wn=function(G){return G.nodeType!==Kt&&G.nodeType!==na&&G.nodeType!==_t||G.childElementCount===0},ma=function(G,le){var Be=le===void 0?document:le.dom;return Wn(Be)?[]:ut(Be.querySelectorAll(G),Ze.fromDom)},dn=function(G){return qe.from(G.dom.parentNode).map(Ze.fromDom)},qr=function(G){return ut(G.dom.childNodes,Ze.fromDom)},Ur=function(G,le){return{element:G,offset:le}},On=function(G,le){var Be=qr(G);return Be.length>0&&le<Be.length?Ur(Be[le],0):Ur(G,le)},ra=function(G,le){var Be=dn(G);Be.each(function(Le){Le.dom.insertBefore(le.dom,G.dom)})},Po=function(G,le){G.dom.appendChild(le.dom)},Ko=function(G,le){ra(G,le),Po(le,G)},vi=function(G,le){var Be=function(Rt){if(!G(Rt))throw new Error("Can only get "+le+" value of a "+le+" node");return Le(Rt).getOr("")},Le=function(Rt){return G(Rt)?qe.from(Rt.dom.nodeValue):qe.none()},at=function(Rt,Zt){if(!G(Rt))throw new Error("Can only set raw "+le+" value of a "+le+" node");Rt.dom.nodeValue=Zt};return{get:Be,getOption:Le,set:at}},No=vi(la,"text"),Ga=function(G){return No.get(G)},Ka=function(G,le){return ma(le,G)},Xo=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Ba=function(G,le){return G.isBlock(le)||D(G.schema.getShortEndedElements(),le.nodeName)},vo=function(G,le){return G.getContentEditable(le)==="false"},Ca=function(G,le){return G.getContentEditable(le)==="true"&&G.getContentEditableParent(le.parentNode)==="false"},Yo=function(G,le){return!G.isBlock(le)&&D(G.schema.getWhiteSpaceElements(),le.nodeName)},mn=function(G,le){return Ba(G,le)||vo(G,le)||Yo(G,le)||Ca(G,le)},Yr=function(G){return G.nodeType===3},mo=function(){return{sOffset:0,fOffset:0,elements:[]}},ti=function(G,le){return On(Ze.fromDom(G),le)},ur=function(G,le,Be,Le,at,Rt){Rt===void 0&&(Rt=!0);for(var Zt=Rt?le(!1):Be;Zt;){var Rn=vo(G,Zt);if(Rn||Yo(G,Zt)){var Yn=Rn?Le.cef(Zt):Le.boundary(Zt);if(Yn)break;Zt=le(!0);continue}else if(Ba(G,Zt)){if(Le.boundary(Zt))break}else Yr(Zt)&&Le.text(Zt);if(Zt===at)break;Zt=le(!1)}},eo=function(G,le,Be,Le,at){if(!mn(G,Be)){var Rt=G.getParent(Le,G.isBlock),Zt=new Xo(Be,Rt),Rn=at?Zt.next.bind(Zt):Zt.prev.bind(Zt);ur(G,Rn,Be,{boundary:it,cef:it,text:function(Yn){at?le.fOffset+=Yn.length:le.sOffset+=Yn.length,le.elements.push(Ze.fromDom(Yn))}})}},Jo=function(G,le,Be,Le,at,Rt){Rt===void 0&&(Rt=!0);var Zt=new Xo(Be,le),Rn=[],Yn=mo();eo(G,Yn,Be,le,!1);var sr=function(){return Yn.elements.length>0&&(Rn.push(Yn),Yn=mo()),!1};return ur(G,Zt.next.bind(Zt),Be,{boundary:sr,cef:function(Wr){return sr(),at&&Rn.push.apply(Rn,at.cef(Wr)),!1},text:function(Wr){Yn.elements.push(Ze.fromDom(Wr)),at&&at.text(Wr,Yn)}},Le,Rt),Le&&eo(G,Yn,Le,le,!0),sr(),Rn},Qi=function(G,le){var Be=ti(le.startContainer,le.startOffset),Le=Be.element.dom,at=ti(le.endContainer,le.endOffset),Rt=at.element.dom;return Jo(G,le.commonAncestorContainer,Le,Rt,{text:function(Zt,Rn){Zt===Rt?Rn.fOffset+=Zt.length-at.offset:Zt===Le&&(Rn.sOffset+=Be.offset)},cef:function(Zt){var Rn=At(Ka(Ze.fromDom(Zt),"*[contenteditable=true]"),function(Yn){var sr=Yn.dom;return Jo(G,sr,sr)});return Oa(Rn,function(Yn,sr){return Jt(Yn.elements[0].dom,sr.elements[0].dom)?1:-1})}},!1)},Io=function(G,le){return le.collapsed?[]:Qi(G,le)},Zo=function(G,le){var Be=G.createRng();return Be.selectNode(le),Io(G,Be)},di=function(G,le){return At(le,function(Be){return Zo(G,Be)})},Fi=function(G,le,Be,Le){Be===void 0&&(Be=0),Le===void 0&&(Le=G.length);var at=le.regex;at.lastIndex=Be;for(var Rt=[],Zt;Zt=at.exec(G);){var Rn=Zt[le.matchIndex],Yn=Zt.index+Zt[0].indexOf(Rn),sr=Yn+Rn.length;if(sr>Le)break;Rt.push({start:Yn,finish:sr}),at.lastIndex=sr}return Rt},Br=function(G,le){var Be=Dn(G,function(Le,at){var Rt=Ga(at),Zt=Le.last,Rn=Zt+Rt.length,Yn=At(le,function(sr,Wr){return sr.start<Rn&&sr.finish>Zt?[{element:at,start:Math.max(Zt,sr.start)-Zt,finish:Math.min(Rn,sr.finish)-Zt,matchId:Wr}]:[]});return{results:Le.results.concat(Yn),last:Rn}},{results:[],last:0}).results;return Y(Be,function(Le){return Le.matchId})},ua=function(G,le){return At(le,function(Be){var Le=Be.elements,at=ut(Le,Ga).join(""),Rt=Fi(at,G,Be.sOffset,at.length-Be.fOffset);return Br(Le,Rt)})},cr=function(G,le){me(G,function(Be,Le){me(Be,function(at){var Rt=Ze.fromDom(le.cloneNode(!1));qa(Rt,"data-mce-index",Le);var Zt=at.element.dom;if(Zt.length===at.finish&&at.start===0)Ko(at.element,Rt);else{Zt.length!==at.finish&&Zt.splitText(at.finish);var Rn=Zt.splitText(at.start);Ko(Ze.fromDom(Rn),Rt)}})})},to=function(G,le,Be,Le){var at=Zo(G,Be),Rt=ua(le,at);return cr(Rt,Le),Rt.length},$r=function(G,le,Be,Le){var at=Be.getBookmark(),Rt=G.select("td[data-mce-selected],th[data-mce-selected]"),Zt=Rt.length>0?di(G,Rt):Io(G,Be.getRng()),Rn=ua(le,Zt);return cr(Rn,Le),Be.moveToBookmark(at),Rn.length},go=function(G){var le=G.getAttribute("data-mce-index");return typeof le=="number"?""+le:le},Sa=function(G,le,Be,Le){var at=G.dom.create("span",{"data-mce-bogus":1});at.className="mce-match-marker";var Rt=G.getBody();return Na(G,le,!1),Le?$r(G.dom,Be,G.selection,at):to(G.dom,Be,Rt,at)},Gr=function(G){var le=G.parentNode;G.firstChild&&le.insertBefore(G.firstChild,G),G.parentNode.removeChild(G)},$o=function(G,le){var Be=[],Le=pt.toArray(G.getBody().getElementsByTagName("span"));if(Le.length)for(var at=0;at<Le.length;at++){var Rt=go(Le[at]);Rt===null||!Rt.length||Rt===le.toString()&&Be.push(Le[at])}return Be},To=function(G,le,Be){var Le=le.get(),at=Le.index,Rt=G.dom;Be=Be!==!1,Be?at+1===Le.count?at=0:at++:at-1==-1?at=Le.count-1:at--,Rt.removeClass($o(G,Le.index),"mce-match-marker-selected");var Zt=$o(G,at);return Zt.length?(Rt.addClass($o(G,at),"mce-match-marker-selected"),G.selection.scrollIntoView(Zt[0]),at):-1},zo=function(G,le){var Be=le.parentNode;G.remove(le),G.isEmpty(Be)&&G.remove(Be)},mi=function(G,le){var Be=G.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&").replace(/\s/g,"[^\\S\\r\\n\\uFEFF]"),Le="("+Be+")";return le?"(?:^|\\s|"+gt()+")"+Le+("(?=$|\\s|"+gt()+")"):Le},pa=function(G,le,Be,Le,at,Rt){var Zt=mi(Be,at),Rn={regex:new RegExp(Zt,Le?"g":"gi"),matchIndex:1},Yn=Sa(G,le,Rn,Rt);if(Yn){var sr=To(G,le,!0);le.set({index:sr,count:Yn,text:Be,matchCase:Le,wholeWord:at,inSelection:Rt})}return Yn},Ha=function(G,le){var Be=To(G,le,!0);le.set(vn(vn({},le.get()),{index:Be}))},pn=function(G,le){var Be=To(G,le,!1);le.set(vn(vn({},le.get()),{index:Be}))},Cn=function(G){var le=go(G);return le!==null&&le.length>0},Xn=function(G,le,Be,Le,at){var Rt=le.get(),Zt=Rt.index,Rn,Yn=Zt;Le=Le!==!1;for(var sr=G.getBody(),Wr=pt.grep(pt.toArray(sr.getElementsByTagName("span")),Cn),Da=0;Da<Wr.length;Da++){var et=go(Wr[Da]),Jr=Rn=parseInt(et,10);if(at||Jr===Rt.index){for(Be.length?(Wr[Da].firstChild.nodeValue=Be,Gr(Wr[Da])):zo(G.dom,Wr[Da]);Wr[++Da];)if(Jr=parseInt(go(Wr[Da]),10),Jr===Rn)zo(G.dom,Wr[Da]);else{Da--;break}Le&&Yn--}else Rn>Zt&&Wr[Da].setAttribute("data-mce-index",String(Rn-1))}return le.set(vn(vn({},Rt),{count:at?0:Rt.count-1,index:Yn})),Le?Ha(G,le):pn(G,le),!at&&le.get().count>0},Na=function(G,le,Be){for(var Le,at,Rt=le.get(),Zt=pt.toArray(G.getBody().getElementsByTagName("span")),Rn=0;Rn<Zt.length;Rn++){var Yn=go(Zt[Rn]);Yn!==null&&Yn.length&&(Yn===Rt.index.toString()&&(Le||(Le=Zt[Rn].firstChild),at=Zt[Rn].firstChild),Gr(Zt[Rn]))}if(le.set(vn(vn({},Rt),{index:-1,count:0,text:""})),Le&&at){var sr=G.dom.createRng();return sr.setStart(Le,0),sr.setEnd(at,at.data.length),Be!==!1&&G.selection.setRng(sr),sr}},yu=function(G,le){return le.get().count>1},gi=function(G,le){return le.get().count>1},Pi=function(G,le){var Be=function(Rn){return Na(G,le,Rn)},Le=function(Rn,Yn,sr,Wr){return Wr===void 0&&(Wr=!1),pa(G,le,Rn,Yn,sr,Wr)},at=function(){return Ha(G,le)},Rt=function(){return pn(G,le)},Zt=function(Rn,Yn,sr){return Xn(G,le,Rn,Yn,sr)};return{done:Be,find:Le,next:at,prev:Rt,replace:Zt}},gr=function(G){var le=Nt(qe.none()),Be=function(){return le.get().each(G)},Le=function(){Be(),le.set(qe.none())},at=function(){return le.get().isSome()},Rt=function(){return le.get()},Zt=function(Rn){Be(),le.set(qe.some(Rn))};return{clear:Le,isSet:at,get:Rt,set:Zt}},hi=function(){var G=gr(Fr),le=function(Be){return G.get().each(Be)};return vn(vn({},G),{on:le})},Xa=tinymce.util.Tools.resolve("tinymce.Env"),ee=function(G,le){var Be=hi();G.undoManager.add();var Le=pt.trim(G.selection.getContent({format:"text"})),at=function(Jn){var Ar=yu(G,le)?Jn.enable:Jn.disable;Ar("next");var io=gi(G,le)?Jn.enable:Jn.disable;io("prev")},Rt=function(Jn){var Ar=Jn.getData(),io=le.get();le.set(vn(vn({},io),{matchCase:Ar.matchcase,wholeWord:Ar.wholewords,inSelection:Ar.inselection}))},Zt=function(Jn,Ar){var io=["replace","replaceall","prev","next"],wr=Ar?Jn.disable:Jn.enable;Rr(io,wr)},Rn=function(Jn){G.windowManager.alert("Could not find the specified string.",function(){Jn.focus("findtext")})},Yn=function(Jn,Ar){Xa.browser.isSafari()&&Xa.deviceType.isTouch()&&(Ar==="find"||Ar==="replace"||Ar==="replaceall")&&Jn.focus(Ar)},sr=function(Jn){Na(G,le,!1),Zt(Jn,!0),at(Jn)},Wr=function(Jn){var Ar=Jn.getData(),io=le.get();if(!Ar.findtext.length){sr(Jn);return}if(io.text===Ar.findtext&&io.matchCase===Ar.matchcase&&io.wholeWord===Ar.wholewords)Ha(G,le);else{var wr=pa(G,le,Ar.findtext,Ar.matchcase,Ar.wholewords,Ar.inselection);wr<=0&&Rn(Jn),Zt(Jn,wr===0)}at(Jn)},Da=le.get(),et={findtext:Le,replacetext:"",wholewords:Da.wholeWord,matchcase:Da.matchCase,inselection:Da.inSelection},Jr={title:"Find and Replace",size:"normal",body:{type:"panel",items:[{type:"bar",items:[{type:"input",name:"findtext",placeholder:"Find",maximized:!0,inputMode:"search"},{type:"button",name:"prev",text:"Previous",icon:"action-prev",disabled:!0,borderless:!0},{type:"button",name:"next",text:"Next",icon:"action-next",disabled:!0,borderless:!0}]},{type:"input",name:"replacetext",placeholder:"Replace with",inputMode:"search"}]},buttons:[{type:"menu",name:"options",icon:"preferences",tooltip:"Preferences",align:"start",items:[{type:"togglemenuitem",name:"matchcase",text:"Match case"},{type:"togglemenuitem",name:"wholewords",text:"Find whole words only"},{type:"togglemenuitem",name:"inselection",text:"Find in selection"}]},{type:"custom",name:"find",text:"Find",primary:!0},{type:"custom",name:"replace",text:"Replace",disabled:!0},{type:"custom",name:"replaceall",text:"Replace all",disabled:!0}],initialData:et,onChange:function(Jn,Ar){Ar.name==="findtext"&&le.get().count>0&&sr(Jn)},onAction:function(Jn,Ar){var io=Jn.getData();switch(Ar.name){case"find":Wr(Jn);break;case"replace":Xn(G,le,io.replacetext)?at(Jn):sr(Jn);break;case"replaceall":Xn(G,le,io.replacetext,!0,!0),sr(Jn);break;case"prev":pn(G,le),at(Jn);break;case"next":Ha(G,le),at(Jn);break;case"matchcase":case"wholewords":case"inselection":Rt(Jn),sr(Jn);break}Yn(Jn,Ar.name)},onSubmit:function(Jn){Wr(Jn),Yn(Jn,"find")},onClose:function(){G.focus(),Na(G,le),G.undoManager.add()}};Be.set(G.windowManager.open(Jr,{inline:"toolbar"}))},we=function(G,le){G.addCommand("SearchReplace",function(){ee(G,le)})},Oe=function(G,le){return function(){ee(G,le)}},Fe=function(G,le){G.ui.registry.addMenuItem("searchreplace",{text:"Find and replace...",shortcut:"Meta+F",onAction:Oe(G,le),icon:"search"}),G.ui.registry.addButton("searchreplace",{tooltip:"Find and replace",onAction:Oe(G,le),icon:"search"}),G.shortcuts.add("Meta+F","",Oe(G,le))};function Dt(){on.add("searchreplace",function(G){var le=Nt({index:-1,count:0,text:"",matchCase:!1,wholeWord:!1,inSelection:!1});return we(G,le),Fe(G,le),Pi(G,le)})}Dt()})();const uW={class:"editor"},cW={props:{modelValue:{type:String,default:""},setting:{type:Object,default:()=>{}},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(Nt,{emit:on}){const vn=Nt,or=CI({language_url:"tinymce/langs/zh_CN.js",language:"zh_CN",skin_url:"tinymce/skins/ui/oxide",min_height:250,max_height:600,selector:"textarea",plugins:"autolink autoresize contextmenu fullscreen hr image imagetools insertdatetime link lists media preview table textcolor wordcount code searchreplace",toolbar:"undo redo | formatselect | bold italic strikethrough forecolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | hr link image media table insertdatetime searchreplace removeformat | preview code fullscreen",branding:!1,menubar:!1,toolbar_mode:"sliding",insertdatetime_formats:["%Y\u5E74%m\u6708%d\u65E5","%H\u70B9%M\u5206%S\u79D2","%Y-%m-%d","%H:%M:%S"],images_upload_handler:(Sn,An)=>{const jt="data:image/jpeg;base64,"+Sn.base64();An(jt)}}),Ut=CI(vn.modelValue),Vn=HU(()=>Object.assign(or.value,vn.setting));return AB(()=>Ut.value,Sn=>{on("update:modelValue",Sn)}),AB(()=>vn.modelValue,Sn=>{Ut.value=Sn}),d$(()=>{jU.init({})}),(Sn,An)=>(g$(),h$("div",uW,[SI(p$(iW),{modelValue:Ut.value,"onUpdate:modelValue":An[0]||(An[0]=jt=>Ut.value=jt),init:p$(Vn),disabled:Nt.disabled},null,8,["modelValue","init","disabled"])]))}};var sW=b$(cW,[["__scopeId","data-v-030733c6"]]);const lW={name:"ComponentExampleEditor",data(){return{form:{content:"<h1>Fantastic-admin</h1>"}}}},fW=["innerHTML"];function vW(Nt,on,vn,or,Ut,Vn){const Sn=sW,An=WU;return g$(),h$("div",null,[SI(An,{title:"\u5BCC\u6587\u672C\u7F16\u8F91\u5668"},{default:VU(()=>[SI(Sn,{modelValue:Ut.form.content,"onUpdate:modelValue":on[0]||(on[0]=jt=>Ut.form.content=jt)},null,8,["modelValue"]),UU("div",{class:"preview",innerHTML:Ut.form.content},null,8,fW)]),_:1})])}var hW=b$(lW,[["render",vW],["__scopeId","data-v-2237f4dc"]]);export{hW as default};
