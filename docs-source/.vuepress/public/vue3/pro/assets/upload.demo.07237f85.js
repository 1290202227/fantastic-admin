
/**
 * 由 Fantastic-admin 提供技术支持
 * https://hooray.gitee.io/fantastic-admin/
 * Powered by Fantastic-admin
 * https://hooray.github.io/fantastic-admin/
 */
    
import{_ as K}from"./index.6f334b18.js";import{_ as L}from"./index.7bd676ce.js";import{_ as q}from"./index.a48661b9.js";import{$ as F,r as _,l as d,H as y,V as R,U as D,m as C,Z as S,L as z,I as a,J as O,K as I,Y as N,s as o,n as $,M as B,O as U,h as E,S as H}from"./vendor.5a8f5a39.js";import{_ as V}from"./plugin-vue_export-helper.5a098b48.js";const k=e=>(B("data-v-6a57666a"),e=e(),U(),e),J={class:"upload-container"},P={class:"mask"},Y={class:"actions"},Z=["onClick"],G=k(()=>a("i",{class:"el-icon-zoom-in"},null,-1)),Q=[G],W=["onClick"],X=k(()=>a("i",{class:"el-icon-delete"},null,-1)),ee=[X],te=["onClick"],se=k(()=>a("i",{class:"el-icon-back"},null,-1)),ae=[se],ie=["onClick"],le=k(()=>a("i",{class:"el-icon-right"},null,-1)),ne=[le],oe=k(()=>a("i",{class:"el-icon-plus"},null,-1)),ce=[oe],re={key:0,class:"el-upload__tip"},ue={style:{display:"inline-block"}},de={props:{action:{type:String,required:!0},headers:{type:Object,default:()=>{}},data:{type:Object,default:()=>{}},name:{type:String,default:"file"},url:{type:Array,default:()=>[]},max:{type:Number,default:3},size:{type:Number,default:2},width:{type:Number,default:150},height:{type:Number,default:150},placeholder:{type:String,default:""},notip:{type:Boolean,default:!1},ext:{type:Array,default:()=>["jpg","png","gif","bmp"]}},emits:["update:url","on-success"],setup(e,{emit:c}){const l=e,{proxy:h}=E(),t=F({dialogImageIndex:0,imageViewerVisible:!1,progress:{preview:"",percent:0}});function g(s){t.value.dialogImageIndex=s,t.value.imageViewerVisible=!0}function x(){t.value.imageViewerVisible=!1}function r(s){let u=l.url;u.splice(s,1),c("update:url",u)}function n(s,u){let i=l.url;u=="left"&&s!=0&&(i[s]=i.splice(s-1,1,i[s])[0]),u=="right"&&s!=i.length-1&&(i[s]=i.splice(s+1,1,i[s])[0]),c("update:url",i)}function f(s){const u=s.name.split("."),i=u[u.length-1],w=l.ext.indexOf(i)>=0,b=s.size/1024/1024<l.size;return w||h.$message.error(`\u4E0A\u4F20\u56FE\u7247\u53EA\u652F\u6301 ${l.ext.join(" / ")} \u683C\u5F0F\uFF01`),b||h.$message.error(`\u4E0A\u4F20\u56FE\u7247\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7 ${l.size}MB\uFF01`),w&&b&&(t.value.progress.preview=URL.createObjectURL(s)),w&&b}function p(s){t.value.progress.percent=~~s.percent,t.value.progress.percent==100&&(t.value.progress.preview="",t.value.progress.percent=0)}function v(s){c("on-success",s)}return(s,u)=>{const i=_("el-image"),w=_("el-progress"),b=_("el-upload"),T=_("el-alert"),M=_("el-image-viewer");return d(),y("div",J,[(d(!0),y(R,null,D(e.url,(A,m)=>(d(),y("div",{key:m,class:"images"},[m<e.max?(d(),C(i,{key:0,src:A,style:S(`width:${e.width}px;height:${e.height}px;`),fit:"cover"},null,8,["src","style"])):z("v-if",!0),a("div",P,[a("div",Y,[a("span",{title:"\u9884\u89C8",onClick:j=>g(m)},Q,8,Z),a("span",{title:"\u79FB\u9664",onClick:j=>r(m)},ee,8,W),O(a("span",{title:"\u5DE6\u79FB",class:N({disabled:m==0}),onClick:j=>n(m,"left")},ae,10,te),[[I,e.url.length>1]]),O(a("span",{title:"\u53F3\u79FB",class:N({disabled:m==e.url.length-1}),onClick:j=>n(m,"right")},ne,10,ie),[[I,e.url.length>1]])])])]))),128)),O(o(b,{"show-file-list":!1,headers:e.headers,action:e.action,data:t.value,name:e.name,"before-upload":f,"on-progress":p,"on-success":v,drag:"",class:"images-upload"},{default:$(()=>[a("div",{class:"image-slot",style:S(`width:${e.width}px;height:${e.height}px;`)},ce,4),O(a("div",{class:"progress",style:S(`width:${e.width}px;height:${e.height}px;`)},[o(i,{src:t.value.progress.preview,style:S(`width:${e.width}px;height:${e.height}px;`),fit:"fill"},null,8,["src","style"]),o(w,{type:"circle",width:Math.min(e.width,e.height)*.8,percentage:t.value.progress.percent},null,8,["width","percentage"])],4),[[I,t.value.progress.percent]])]),_:1},8,["headers","action","data","name"]),[[I,e.url.length<e.max]]),e.notip?z("v-if",!0):(d(),y("div",re,[a("div",ue,[o(T,{title:`\u4E0A\u4F20\u56FE\u7247\u652F\u6301 ${e.ext.join(" / ")} \u683C\u5F0F\uFF0C\u5355\u5F20\u56FE\u7247\u5927\u5C0F\u4E0D\u8D85\u8FC7 ${e.size}MB\uFF0C\u5EFA\u8BAE\u56FE\u7247\u5C3A\u5BF8\u4E3A ${e.width}*${e.height}\uFF0C\u4E14\u56FE\u7247\u6570\u91CF\u4E0D\u8D85\u8FC7 ${e.max} \u5F20`,type:"info","show-icon":"",closable:!1},null,8,["title"])])])),t.value.imageViewerVisible?(d(),C(M,{key:1,"url-list":e.url,"initial-index":t.value.dialogImageIndex,onClose:x},null,8,["url-list","initial-index"])):z("v-if",!0)])}}};var pe=V(de,[["__scopeId","data-v-6a57666a"]]);const me=e=>(B("data-v-6c490d82"),e=e(),U(),e),he=me(()=>a("div",{class:"slot"},[a("i",{class:"el-icon-upload"}),a("div",{class:"el-upload__text"},[H("\u5C06\u6587\u4EF6\u62D6\u5230\u6B64\u5904\uFF0C\u6216"),a("em",null,"\u70B9\u51FB\u4E0A\u4F20")])],-1)),ge={key:0,class:"el-upload__tip"},fe={style:{display:"inline-block"}},_e={props:{action:{type:String,required:!0},headers:{type:Object,default:()=>{}},data:{type:Object,default:()=>{}},name:{type:String,default:"file"},size:{type:Number,default:2},max:{type:Number,default:3},files:{type:Array,default:()=>[]},notip:{type:Boolean,default:!1},ext:{type:Array,default:()=>["zip","rar"]}},emits:["on-success"],setup(e,{emit:c}){const l=e,{proxy:h}=E();function t(r){const n=r.name.split("."),f=n[n.length-1],p=l.ext.indexOf(f)>=0,v=r.size/1024/1024<l.size;return p||h.$message.error(`\u4E0A\u4F20\u6587\u4EF6\u53EA\u652F\u6301 ${l.ext.join(" / ")} \u683C\u5F0F\uFF01`),v||h.$message.error(`\u4E0A\u4F20\u6587\u4EF6\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7 ${l.size}MB\uFF01`),p&&v}function g(){h.$message.warning("\u6587\u4EF6\u4E0A\u4F20\u8D85\u8FC7\u9650\u5236")}function x(r,n){c("on-success",r,n)}return(r,n)=>{const f=_("el-alert"),p=_("el-upload");return d(),C(p,{action:e.action,data:e.data,name:e.name,"before-upload":t,"on-exceed":g,"on-success":x,"file-list":e.files,limit:e.max,drag:""},{tip:$(()=>[e.notip?z("v-if",!0):(d(),y("div",ge,[a("div",fe,[o(f,{title:`\u4E0A\u4F20\u6587\u4EF6\u652F\u6301 ${e.ext.join(" / ")} \u683C\u5F0F\uFF0C\u5355\u4E2A\u6587\u4EF6\u5927\u5C0F\u4E0D\u8D85\u8FC7 ${e.size}MB\uFF0C\u4E14\u6587\u4EF6\u6570\u91CF\u4E0D\u8D85\u8FC7 ${e.max} \u4E2A`,type:"info","show-icon":"",closable:!1},null,8,["title"])])]))]),default:$(()=>[he]),_:1},8,["action","data","name","file-list","limit"])}}};var ve=V(_e,[["__scopeId","data-v-6c490d82"]]);const ye={data(){return{image:"",images:["https://picsum.photos/400","https://picsum.photos/600","https://picsum.photos/500"],files:[{name:"\u6D4B\u8BD5\u6587\u4EF6.zip",url:"http://images.lookbi.com/uploads/apply/96/d8521fc691e472eec91a170201866e7d.zip"}]}},methods:{handleSuccess1(e){e.error==""?this.image=e.data.path:this.$message.warning(e.error)},handleSuccess2(e){e.error==""?this.images.push(e.data.path):this.$message.warning(e.error)},handleSuccess3(e,c){this.files.push({name:c.name,url:e.error==""?e.data.path:""}),this.$nextTick(()=>{e.error!=""&&(this.$message.warning(e.error),this.files.pop())})}}};function $e(e,c,l,h,t,g){const x=K,r=L,n=q,f=pe,p=ve;return d(),y("div",null,[o(x,{title:"\u4E0A\u4F20",content:"ImageUpload / ImagesUpload / FileUpload"}),o(n,{title:"\u5355\u56FE\u4E0A\u4F20"},{default:$(()=>[o(r,{url:t.image,"onUpdate:url":c[0]||(c[0]=v=>t.image=v),action:"http://scrm.1daas.com/api/upload/upload",name:"image",width:250,height:150,data:{token:"TKE615916022101558"},onOnSuccess:g.handleSuccess1},null,8,["url","onOnSuccess"])]),_:1}),o(n,{title:"\u591A\u56FE\u4E0A\u4F20\uFF08\u9ED8\u8BA4\u6700\u591A3\u5F20\uFF09"},{default:$(()=>[o(f,{url:t.images,action:"http://scrm.1daas.com/api/upload/upload",name:"image",data:{token:"TKE615916022101558"},onOnSuccess:g.handleSuccess2},null,8,["url","onOnSuccess"])]),_:1}),o(n,{title:"\u6587\u4EF6\u4E0A\u4F20\uFF08\u9ED8\u8BA4\u6700\u591A3\u4E2A\uFF09"},{default:$(()=>[o(p,{files:t.files,action:"http://scrm.1daas.com/api/upload/upload",name:"image",data:{token:"TKE615916022101558"},onOnSuccess:g.handleSuccess3},null,8,["files","onOnSuccess"])]),_:1})])}var ze=V(ye,[["render",$e]]);export{ze as default};
