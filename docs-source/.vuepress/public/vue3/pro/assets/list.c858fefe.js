
/**
 * 由 Fantastic-admin 提供技术支持
 * https://hooray.gitee.io/fantastic-admin/
 * Powered by Fantastic-admin
 * https://hooray.github.io/fantastic-admin/
 */
    
import{_ as e}from"./index.9fbc5cc3.js";import{_ as a}from"./index.f3c9e14e.js";import{_ as l}from"./index.a2f5d395.js";import{_ as o}from"./index.c535d87f.js";import{ai as t,a0 as s,$ as n,o as r,a1 as d,r as i,am as u,l as c,H as m,s as p,n as f,Q as h,J as g,K as v,m as b,L as _,q as w,S as x,M as y,O as M,h as C,I as $}from"./vendor.e59ac5d6.js";import{g as k,p as V,o as z,a as L,b as P}from"./pagination.acaa0357.js";import U from"./index.e07ccfea.js";import{_ as j}from"./plugin-vue_export-helper.5a098b48.js";import"./index.b19184db.js";const K=e=>(y("data-v-041c4c04"),e=e(),M(),e),S=x("新增管理员"),E=x("全部"),R=x("男"),D=x("女"),A=x("保密"),B=x("筛 选"),G=x("批量操作"),I=x("男"),O=x("女"),q=x("保密"),H=x("编辑"),J=x(" 更多操作"),N=K((()=>$("i",{class:"el-icon-arrow-down el-icon--right"},null,-1))),Q=x("重置密码"),T=x("删除"),F=t({name:"PagesExampleManagerList"});var W=j(Object.assign(F,{setup:function(t){const{proxy:x}=C(),y=s(),M=n({loading:!1,formMode:"router",formModeProps:{visible:!1,id:""},search:{account:"",name:"",mobile:"",sex:""},searchMore:!1,batch:{enable:!0,selectionDataList:[]},dataList:[]});function $(){M.value.loading=!0;let e=k();M.value.search.account&&(e.account=M.value.search.account),M.value.search.name&&(e.name=M.value.search.name),M.value.search.mobile&&(e.mobile=M.value.search.mobile),""!=M.value.search.sex&&(e.sex=M.value.search.sex),x.$api.get("pages_example/manager/list",{baseURL:"/mock/",params:e}).then((e=>{M.value.loading=!1,M.value.dataList=e.data.list,V.value.total=e.data.total}))}function j(e){z(e).then((()=>$()))}function K(e){L(e).then((()=>$()))}function F(e,a){P(e,a).then((()=>$()))}function W(){"router"===M.value.formMode?y.push({name:"pagesExampleGeneralManagerCreate"}):(M.value.formModeProps.id="",M.value.formModeProps.visible=!0)}function X(e,a){switch(e){case"resetPassword":!function(e){x.$confirm(`确认将「${e.account}」的密码重置为 “123456” 吗？`,"确认信息").then((()=>{x.$api.post("pages_example/manager/password/reset",{id:e.id},{baseURL:"/mock/"}).then((()=>{x.$message.success({message:"模拟重置成功",center:!0})}))})).catch((()=>{}))}(a);break;case"delete":!function(e){x.$confirm(`确认删除「${e.account}」管理员吗？`,"确认信息").then((()=>{x.$api.post("pages_example/manager/delete",{id:e.id},{baseURL:"/mock/"}).then((()=>{$(),x.$message.success({message:"模拟删除成功",center:!0})}))})).catch((()=>{}))}(a)}}return r((()=>{$(),"router"===M.value.formMode&&x.$eventBus.on("get-data-list",(()=>{$()}))})),d((()=>{"router"===M.value.formMode&&x.$eventBus.off("get-data-list")})),(t,s)=>{const n=e,r=i("el-button"),d=i("el-input"),C=i("el-form-item"),k=i("el-col"),z=i("el-row"),L=i("el-radio-button"),P=i("el-radio-group"),Y=i("el-form"),Z=a,ee=l,ae=i("el-table-column"),le=i("el-tag"),oe=i("el-switch"),te=i("el-dropdown-item"),se=i("el-dropdown-menu"),ne=i("el-dropdown"),re=i("el-table"),de=i("el-pagination"),ie=o,ue=u("loading");return c(),m("div",null,[p(n,{title:"管理员管理",content:"页面数据为 Mock 示例数据，非真实数据。"}),p(ie,null,{default:f((()=>[p(r,{type:"primary",icon:"el-icon-plus",onClick:W},{default:f((()=>[S])),_:1}),p(Z,{"show-more":"",onToggle:s[4]||(s[4]=e=>M.value.searchMore=e)},{default:f((()=>[p(Y,{model:M.value.search,size:"small","label-width":"100px","label-suffix":"："},{default:f((()=>[p(z,null,{default:f((()=>[p(k,{md:8},{default:f((()=>[p(C,{label:"帐号"},{default:f((()=>[p(d,{modelValue:M.value.search.account,"onUpdate:modelValue":s[0]||(s[0]=e=>M.value.search.account=e),placeholder:"请输入帐号，支持模糊查询",clearable:"",onKeydown:h($,["enter"]),onClear:$},null,8,["modelValue","onKeydown"])])),_:1})])),_:1}),p(k,{md:8},{default:f((()=>[p(C,{label:"姓名"},{default:f((()=>[p(d,{modelValue:M.value.search.name,"onUpdate:modelValue":s[1]||(s[1]=e=>M.value.search.name=e),placeholder:"请输入姓名，支持模糊查询",clearable:"",onKeydown:h($,["enter"]),onClear:$},null,8,["modelValue","onKeydown"])])),_:1})])),_:1}),p(k,{md:8},{default:f((()=>[p(C,{label:"手机号"},{default:f((()=>[p(d,{modelValue:M.value.search.mobile,"onUpdate:modelValue":s[2]||(s[2]=e=>M.value.search.mobile=e),placeholder:"请输入手机号",clearable:"",onKeydown:h($,["enter"]),onClear:$},null,8,["modelValue","onKeydown"])])),_:1})])),_:1})])),_:1}),g(p(z,null,{default:f((()=>[p(k,{md:8},{default:f((()=>[p(C,{label:"性别"},{default:f((()=>[p(P,{modelValue:M.value.search.sex,"onUpdate:modelValue":s[3]||(s[3]=e=>M.value.search.sex=e),onChange:$},{default:f((()=>[p(L,{label:""},{default:f((()=>[E])),_:1}),p(L,{label:"1"},{default:f((()=>[R])),_:1}),p(L,{label:"0"},{default:f((()=>[D])),_:1}),p(L,{label:"2"},{default:f((()=>[A])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1},512),[[v,M.value.searchMore]]),p(C,null,{default:f((()=>[p(r,{type:"primary",icon:"el-icon-search",onClick:$},{default:f((()=>[B])),_:1})])),_:1})])),_:1},8,["model"])])),_:1}),M.value.batch.enable?(c(),b(ee,{key:0,data:M.value.dataList,"selection-data":M.value.batch.selectionDataList,onCheckAll:s[5]||(s[5]=e=>t.$refs.table.toggleAllSelection()),onCheckNull:s[6]||(s[6]=e=>t.$refs.table.clearSelection())},{default:f((()=>[p(r,{size:"small"},{default:f((()=>[G])),_:1})])),_:1},8,["data","selection-data"])):_("v-if",!0),g(p(re,{ref:(e,a)=>{a.table=e},class:"list-table",data:M.value.dataList,border:"",stripe:"","highlight-current-row":"",onSortChange:F,onSelectionChange:s[7]||(s[7]=e=>M.value.batch.selectionDataList=e)},{default:f((()=>[M.value.batch.enable?(c(),b(ae,{key:0,type:"selection",align:"center",fixed:""})):_("v-if",!0),p(ae,{prop:"account",sortable:"",label:"帐号"}),p(ae,{prop:"name",label:"姓名",width:"100",align:"center"}),p(ae,{prop:"sex",label:"性别",width:"100",align:"center"},{default:f((e=>[1==e.row.sex?(c(),b(le,{key:0,type:"success",size:"small"},{default:f((()=>[I])),_:1})):0==e.row.sex?(c(),b(le,{key:1,type:"warning",size:"small"},{default:f((()=>[O])),_:1})):(c(),b(le,{key:2,type:"info",size:"small"},{default:f((()=>[q])),_:1}))])),_:1}),p(ae,{prop:"mobile",label:"手机号",width:"150",align:"center"}),p(ae,{label:"状态",width:"100",align:"center"},{default:f((e=>[p(oe,{modelValue:e.row.status,"onUpdate:modelValue":a=>e.row.status=a,onChange:a=>{return l=a,o=e.row,void x.$confirm(`确认${l?"启用":"停用"}「${o.account}」吗？`,"确认信息").then((()=>{x.$api.post("pages_example/manager/change/status",{id:o.id,status:l},{baseURL:"/mock/"}).then((()=>{x.$message.success({message:`模拟${l?"启用":"停用"}成功`,center:!0})}))})).catch((()=>{o.status=!l}));var l,o}},null,8,["modelValue","onUpdate:modelValue","onChange"])])),_:1}),p(ae,{label:"操作",width:"200",align:"center",fixed:"right"},{default:f((e=>[p(r,{type:"primary",size:"mini",plain:"",onClick:a=>{return l=e.row,void("router"===M.value.formMode?y.push({name:"pagesExampleGeneralManagerEdit",params:{id:l.id}}):(M.value.formModeProps.id=l.id,M.value.formModeProps.visible=!0));var l}},{default:f((()=>[H])),_:2},1032,["onClick"]),p(ne,{onCommand:a=>X(a,e.row)},{dropdown:f((()=>[p(se,null,{default:f((()=>[p(te,{command:"resetPassword"},{default:f((()=>[Q])),_:1}),p(te,{command:"delete",divided:""},{default:f((()=>[T])),_:1})])),_:1})])),default:f((()=>[p(r,{size:"mini"},{default:f((()=>[J,N])),_:1})])),_:2},1032,["onCommand"])])),_:1})])),_:1},8,["data"]),[[ue,M.value.loading]]),p(de,{"current-page":w(V).page,total:w(V).total,"page-size":w(V).size,"page-sizes":w(V).sizes,layout:w(V).layout,"hide-on-single-page":!1,class:"pagination",background:"",onCurrentChange:K,onSizeChange:j},null,8,["current-page","total","page-size","page-sizes","layout"])])),_:1}),["dialog","drawer"].includes(M.value.formMode)?(c(),b(U,{key:0,id:M.value.formModeProps.id,modelValue:M.value.formModeProps.visible,"onUpdate:modelValue":s[8]||(s[8]=e=>M.value.formModeProps.visible=e),mode:M.value.formMode,onSuccess:$},null,8,["id","modelValue","mode"])):_("v-if",!0)])}}}),[["__scopeId","data-v-041c4c04"]]);export{W as default};
