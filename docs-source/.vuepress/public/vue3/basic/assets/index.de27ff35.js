
/**
 * name: Fantastic-admin
 * homepage: https://hooray.gitee.io/fantastic-admin/
 */
    
import{t as e,u as s,r as t,o as i,k as r,n as l,q as a,c as o,D as p,l as n,z as c,w as d,v as h,s as u}from"./vendor.e2e92bee.js";const g={name:"ImageUpload",props:{action:{type:String,required:!0},headers:{type:Object,default:()=>{}},data:{type:Object,default:()=>{}},name:{type:String,default:"file"},url:{type:String,default:""},size:{type:Number,default:2},width:{type:Number,default:150},height:{type:Number,default:150},placeholder:{type:String,default:""},notip:{type:Boolean,default:!1},ext:{type:Array,default:()=>["jpg","png","gif","bmp"]}},emits:["update:url","on-success"],data:()=>({imageViewerVisible:!1,progress:{preview:"",percent:0}}),methods:{remove(){this.$emit("update:url","")},beforeUpload(e){const s=e.name.split("."),t=s[s.length-1],i=this.ext.indexOf(t)>=0,r=e.size/1024/1024<this.size;return i||this.$message.error(`上传图片只支持 ${this.ext.join(" / ")} 格式！`),r||this.$message.error(`上传图片大小不能超过 ${this.size}MB！`),i&&r&&(this.progress.preview=URL.createObjectURL(e)),i&&r},onProgress(e){this.progress.percent=~~e.percent,100==this.progress.percent&&setTimeout((()=>{this.progress.preview="",this.progress.percent=0}),1e3)},onSuccess(e){this.$emit("on-success",e)}}};e("data-v-d07cb184");const m={class:"upload-container"},f=n("div",{class:"image-slot"},[n("i",{class:"el-icon-plus"})],-1),y={key:1,class:"image"},w={class:"mask"},v={class:"actions"},b=[n("i",{class:"el-icon-zoom-in"},null,-1)],$=[n("i",{class:"el-icon-delete"},null,-1)],x={key:0,class:"el-upload__tip"},k={style:{display:"inline-block"}};s(),g.render=function(e,s,g,V,j,z){const _=t("el-image"),S=t("el-progress"),U=t("el-upload"),O=t("el-alert"),B=t("el-image-viewer");return i(),r("div",m,[l(U,{"show-file-list":!1,headers:g.headers,action:g.action,data:g.data,name:g.name,"before-upload":z.beforeUpload,"on-progress":z.onProgress,"on-success":z.onSuccess,drag:""},{default:a((()=>[""===g.url?(i(),o(_,{key:0,src:""===g.url?g.placeholder:g.url,style:p(`width:${g.width}px;height:${g.height}px;`),fit:"fill"},{error:a((()=>[f])),_:1},8,["src","style"])):(i(),r("div",y,[l(_,{src:g.url,style:p(`width:${g.width}px;height:${g.height}px;`),fit:"fill"},null,8,["src","style"]),n("div",w,[n("div",v,[n("span",{title:"预览",onClick:s[0]||(s[0]=c((e=>j.imageViewerVisible=!0),["stop"]))},b),n("span",{title:"移除",onClick:s[1]||(s[1]=c(((...e)=>z.remove&&z.remove(...e)),["stop"]))},$)])])])),d(n("div",{class:"progress",style:p(`width:${g.width}px;height:${g.height}px;`)},[l(_,{src:j.progress.preview,style:p(`width:${g.width}px;height:${g.height}px;`),fit:"fill"},null,8,["src","style"]),l(S,{type:"circle",width:.8*Math.min(g.width,g.height),percentage:j.progress.percent},null,8,["width","percentage"])],4),[[h,j.progress.percent]])])),_:1},8,["headers","action","data","name","before-upload","on-progress","on-success"]),g.notip?u("v-if",!0):(i(),r("div",x,[n("div",k,[l(O,{title:`上传图片支持 ${g.ext.join(" / ")} 格式，且图片大小不超过 ${g.size}MB，建议图片尺寸为 ${g.width}*${g.height}`,type:"info","show-icon":"",closable:!1},null,8,["title"])])])),j.imageViewerVisible?(i(),o(B,{key:1,"url-list":[g.url],onClose:s[2]||(s[2]=()=>{j.imageViewerVisible=!1})},null,8,["url-list"])):u("v-if",!0)])},g.__scopeId="data-v-d07cb184";export{g as _};
