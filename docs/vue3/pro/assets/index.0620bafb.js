
/**
 * 由 Fantastic-admin 提供技术支持
 * https://hooray.gitee.io/fantastic-admin/
 * Powered by Fantastic-admin
 * https://hooray.github.io/fantastic-admin/
 */
    
import{_ as e}from"./index.9fbc5cc3.js";import{_ as l}from"./index.c535d87f.js";import{$ as a,k as o,r as t,l as u,H as n,s as i,n as m,q as d,S as r,P as s,V as h,U as _,m as f}from"./vendor.e59ac5d6.js";import"./plugin-vue_export-helper.5a098b48.js";const p={setup(p){const c=a([{name:"站点管理",module:"station",authorization_list:[{name:"查看列表",module:"list"},{name:"查看详情",module:"info"},{name:"停用",module:"disabled"},{name:"编辑",module:"edit"},{name:"启用",module:"enable"}]},{name:"部门管理",module:"department",authorization_list:[{name:"查看列表",module:"list"},{name:"查看详情",module:"info"},{name:"删除",module:"delete"},{name:"编辑",module:"edit"},{name:"新增",module:"new"}]},{name:"职位管理",module:"department_job",authorization_list:[{name:"查看列表",module:"list"},{name:"查看详情",module:"info"},{name:"新增",module:"new"},{name:"编辑",module:"edit"},{name:"删除",module:"delete"}]},{name:"角色管理",module:"role",authorization_list:[{name:"查看列表",module:"list"},{name:"查看详情",module:"info"},{name:"删除",module:"delete"},{name:"编辑",module:"edit"},{name:"新增",module:"new"}]},{name:"管理员管理",module:"admin_manager",authorization_list:[{name:"查看列表",module:"list"},{name:"查看详情",module:"info"},{name:"编辑权限",module:"authorization_edit"},{name:"查看权限详情",module:"authorization_info"},{name:"删除",module:"delete"},{name:"停用",module:"disabled"},{name:"编辑",module:"edit"},{name:"启用",module:"enable"},{name:"新增",module:"new"},{name:"重置密码",module:"reset"}]}]),v=a({name:"",brief:"",authorization_list:[]}),b=a({name:[{required:!0,message:"请输入名称",trigger:"blur"}],authorization_list:[{validator:(e,l,a)=>{0==l.length?a(new Error("至少选择一个权限")):a()},trigger:"change"}]}),z=o((()=>{let e=[];return c.value.forEach((l=>{let a=[];l.authorization_list.forEach((e=>{v.value.authorization_list.includes(`${l.module}.${e.module}`)&&a.push(`${l.module}.${e.module}`)})),e.push({checkAll:a.length==l.authorization_list.length,indeterminate:a.length>0&&a.length<l.authorization_list.length})})),e}));return(a,o)=>{const p=e,g=t("el-input"),$=t("el-form-item"),w=t("el-checkbox"),x=t("el-table-column"),V=t("el-checkbox-group"),k=t("el-table"),U=t("el-form"),j=t("el-col"),E=t("el-row"),y=l;return u(),n("div",null,[i(p,{title:"权限",content:"该页面生成的权限格式，可直接用于本项目的权限模式"}),i(y,null,{default:m((()=>[i(E,null,{default:m((()=>[i(j,{md:24,lg:18},{default:m((()=>[i(U,{model:v.value,rules:b.value,"label-width":"120px","label-suffix":"："},{default:m((()=>[i($,{label:"名称",prop:"name"},{default:m((()=>[i(g,{modelValue:v.value.name,"onUpdate:modelValue":o[0]||(o[0]=e=>v.value.name=e),placeholder:"请输入角色名称"},null,8,["modelValue"])])),_:1}),i($,{label:"简介"},{default:m((()=>[i(g,{modelValue:v.value.brief,"onUpdate:modelValue":o[1]||(o[1]=e=>v.value.brief=e),type:"textarea",autosize:{minRows:2,maxRows:6},placeholder:"请输入角色简介"},null,8,["modelValue"])])),_:1}),i($,{label:"权限",prop:"authorization_list"},{default:m((()=>[i(k,{data:c.value,border:"",stripe:"","highlight-current-row":"",style:{"line-height":"normal"}},{default:m((()=>[i(x,{prop:"name",width:"200",label:"模块"},{default:m((e=>[i(w,{modelValue:d(z)[e.$index].checkAll,"onUpdate:modelValue":l=>d(z)[e.$index].checkAll=l,indeterminate:d(z)[e.$index].indeterminate,onChange:l=>{return a=l,o=e.$index,void(a?c.value[o].authorization_list.forEach((e=>{v.value.authorization_list.includes(`${c.value[o].module}.${e.module}`)||v.value.authorization_list.push(`${c.value[o].module}.${e.module}`)})):c.value[o].authorization_list.forEach((e=>{v.value.authorization_list=v.value.authorization_list.filter((l=>l!=`${c.value[o].module}.${e.module}`))})));var a,o}},{default:m((()=>[r(s(e.row.name),1)])),_:2},1032,["modelValue","onUpdate:modelValue","indeterminate","onChange"])])),_:1}),i(x,{label:"权限"},{default:m((e=>[i(V,{modelValue:v.value.authorization_list,"onUpdate:modelValue":o[2]||(o[2]=e=>v.value.authorization_list=e)},{default:m((()=>[(u(!0),n(h,null,_(e.row.authorization_list,(l=>(u(),f(w,{key:`${e.row.module}.${l.module}`,label:`${e.row.module}.${l.module}`},{default:m((()=>[r(s(l.name),1)])),_:2},1032,["label"])))),128))])),_:2},1032,["modelValue"])])),_:1})])),_:1},8,["data"])])),_:1})])),_:1},8,["model","rules"])])),_:1})])),_:1})])),_:1})])}}};export{p as default};
