
/**
 * name: Fantastic-admin
 * homepage: https://hooray.gitee.io/fantastic-admin/
 */
    
import{_ as e}from"./index.ffbd20e5.js";import{_ as a}from"./index.173e2cfe.js";import{_ as t}from"./index.9065914f.js";import{_ as o}from"./index.f03e52fd.js";import{H as l,I as s,r as n,an as i,l as r,J as d,s as c,n as m,P as u,L as h,M as p,m as g,S as f,R as b,K as _}from"./vendor.7707186e.js";import{p as C}from"./pagination.d272f1b1.js";import w from"./index.1491598a.js";import"./index.d9873d66.js";const x={name:"PagesExampleManagerList",components:{FormMode:w},mixins:[C],data:()=>({formMode:"router",formModeProps:{visible:!1,id:""},search:{account:"",name:"",mobile:"",sex:""},searchMore:!1,batch:{enable:!0,selectionDataList:[]},dataList:[]}),mounted(){this.getDataList(),"router"===this.formMode&&this.$eventBus.on("get-data-list",(()=>{this.getDataList()}))},beforeUnmount(){"router"===this.formMode&&this.$eventBus.off("get-data-list")},methods:{getDataList(){this.loading=!0;let e=this.getParams();this.search.account&&(e.account=this.search.account),this.search.name&&(e.name=this.search.name),this.search.mobile&&(e.mobile=this.search.mobile),""!=this.search.sex&&(e.sex=this.search.sex),this.$api.get("pages_example/manager/list",{baseURL:"/mock/",params:e}).then((e=>{this.loading=!1,this.dataList=e.data.list,this.pagination.total=e.data.total}))},onCreate(){"router"===this.formMode?this.$router.push({name:"pagesExampleGeneralManagerCreate"}):(this.formModeProps.id="",this.formModeProps.visible=!0)},onEdit(e){"router"===this.formMode?this.$router.push({name:"pagesExampleGeneralManagerEdit",params:{id:e.id}}):(this.formModeProps.id=e.id,this.formModeProps.visible=!0)},onChangeStatus(e,a){this.$confirm(`确认${e?"启用":"停用"}「${a.account}」吗？`,"确认信息").then((()=>{this.$api.post("pages_example/manager/change/status",{id:a.id,status:e},{baseURL:"/mock/"}).then((()=>{this.$message.success({message:`模拟${e?"启用":"停用"}成功`,center:!0})}))})).catch((()=>{a.status=!e}))},onResetPassword(e){this.$confirm(`确认将「${e.account}」的密码重置为 “123456” 吗？`,"确认信息").then((()=>{this.$api.post("pages_example/manager/password/reset",{id:e.id},{baseURL:"/mock/"}).then((()=>{this.$message.success({message:"模拟重置成功",center:!0})}))})).catch((()=>{}))},onDel(e){this.$confirm(`确认删除「${e.account}」管理员吗？`,"确认信息").then((()=>{this.$api.post("pages_example/manager/delete",{id:e.id},{baseURL:"/mock/"}).then((()=>{this.getDataList(),this.$message.success({message:"模拟删除成功",center:!0})}))})).catch((()=>{}))},handleMoreOperating(e,a){switch(e){case"resetPassword":this.onResetPassword(a);break;case"delete":this.onDel(a)}}}};l("data-v-301dcc9c");const M=b("新增管理员"),L=b("全部"),y=b("男"),k=b("女"),$=b("保密"),V=b("筛 选"),D=b("批量操作"),z=b("男"),v=b("女"),P=b("保密"),S=b("编辑"),U=b(" 更多操作"),j=_("i",{class:"el-icon-arrow-down el-icon--right"},null,-1),K=b("重置密码"),R=b("删除");s(),x.render=function(l,s,b,_,C,w){const x=e,E=n("el-button"),A=n("el-input"),B=n("el-form-item"),F=n("el-col"),G=n("el-row"),I=n("el-radio-button"),O=n("el-radio-group"),H=n("el-form"),J=a,N=t,T=n("el-table-column"),q=n("el-tag"),Q=n("el-switch"),W=n("el-dropdown-item"),X=n("el-dropdown-menu"),Y=n("el-dropdown"),Z=n("el-table"),ee=n("el-pagination"),ae=o,te=n("FormMode"),oe=i("loading");return r(),d("div",null,[c(x,{title:"管理员管理",content:"页面数据为 Mock 示例数据，非真实数据。"}),c(ae,null,{default:m((()=>[c(E,{type:"primary",icon:"el-icon-plus",onClick:w.onCreate},{default:m((()=>[M])),_:1},8,["onClick"]),c(J,{"show-more":"",onToggle:s[4]||(s[4]=e=>C.searchMore=e)},{default:m((()=>[c(H,{model:C.search,size:"small","label-width":"100px","label-suffix":"："},{default:m((()=>[c(G,null,{default:m((()=>[c(F,{md:8},{default:m((()=>[c(B,{label:"帐号"},{default:m((()=>[c(A,{modelValue:C.search.account,"onUpdate:modelValue":s[0]||(s[0]=e=>C.search.account=e),placeholder:"请输入帐号，支持模糊查询",clearable:"",onKeydown:u(w.getDataList,["enter"]),onClear:w.getDataList},null,8,["modelValue","onKeydown","onClear"])])),_:1})])),_:1}),c(F,{md:8},{default:m((()=>[c(B,{label:"姓名"},{default:m((()=>[c(A,{modelValue:C.search.name,"onUpdate:modelValue":s[1]||(s[1]=e=>C.search.name=e),placeholder:"请输入姓名，支持模糊查询",clearable:"",onKeydown:u(w.getDataList,["enter"]),onClear:w.getDataList},null,8,["modelValue","onKeydown","onClear"])])),_:1})])),_:1}),c(F,{md:8},{default:m((()=>[c(B,{label:"手机号"},{default:m((()=>[c(A,{modelValue:C.search.mobile,"onUpdate:modelValue":s[2]||(s[2]=e=>C.search.mobile=e),placeholder:"请输入手机号",clearable:"",onKeydown:u(w.getDataList,["enter"]),onClear:w.getDataList},null,8,["modelValue","onKeydown","onClear"])])),_:1})])),_:1})])),_:1}),h(c(G,null,{default:m((()=>[c(F,{md:8},{default:m((()=>[c(B,{label:"性别"},{default:m((()=>[c(O,{modelValue:C.search.sex,"onUpdate:modelValue":s[3]||(s[3]=e=>C.search.sex=e),onChange:w.getDataList},{default:m((()=>[c(I,{label:""},{default:m((()=>[L])),_:1}),c(I,{label:"1"},{default:m((()=>[y])),_:1}),c(I,{label:"0"},{default:m((()=>[k])),_:1}),c(I,{label:"2"},{default:m((()=>[$])),_:1})])),_:1},8,["modelValue","onChange"])])),_:1})])),_:1})])),_:1},512),[[p,C.searchMore]]),c(B,null,{default:m((()=>[c(E,{type:"primary",icon:"el-icon-search",onClick:w.getDataList},{default:m((()=>[V])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])])),_:1}),C.batch.enable?(r(),g(N,{key:0,data:C.dataList,"selection-data":C.batch.selectionDataList,onCheckAll:s[5]||(s[5]=e=>l.$refs.table.toggleAllSelection()),onCheckNull:s[6]||(s[6]=e=>l.$refs.table.clearSelection())},{default:m((()=>[c(E,{size:"small"},{default:m((()=>[D])),_:1})])),_:1},8,["data","selection-data"])):f("v-if",!0),h(c(Z,{ref:"table",class:"list-table",data:C.dataList,border:"",stripe:"","highlight-current-row":"",onSortChange:l.onSortChange,onSelectionChange:s[7]||(s[7]=e=>C.batch.selectionDataList=e)},{default:m((()=>[C.batch.enable?(r(),g(T,{key:0,type:"selection",align:"center",fixed:""})):f("v-if",!0),c(T,{prop:"account",sortable:"",label:"帐号"}),c(T,{prop:"name",label:"姓名",width:"100",align:"center"}),c(T,{prop:"sex",label:"性别",width:"100",align:"center"},{default:m((e=>[1==e.row.sex?(r(),g(q,{key:0,type:"success",size:"small"},{default:m((()=>[z])),_:1})):0==e.row.sex?(r(),g(q,{key:1,type:"warning",size:"small"},{default:m((()=>[v])),_:1})):(r(),g(q,{key:2,type:"info",size:"small"},{default:m((()=>[P])),_:1}))])),_:1}),c(T,{prop:"mobile",label:"手机号",width:"150",align:"center"}),c(T,{label:"状态",width:"100",align:"center"},{default:m((e=>[c(Q,{modelValue:e.row.status,"onUpdate:modelValue":a=>e.row.status=a,onChange:a=>w.onChangeStatus(a,e.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])])),_:1}),c(T,{label:"操作",width:"200",align:"center",fixed:"right"},{default:m((e=>[c(E,{type:"primary",size:"mini",plain:"",onClick:a=>w.onEdit(e.row)},{default:m((()=>[S])),_:2},1032,["onClick"]),c(Y,{onCommand:a=>w.handleMoreOperating(a,e.row)},{dropdown:m((()=>[c(X,null,{default:m((()=>[c(W,{command:"resetPassword"},{default:m((()=>[K])),_:1}),c(W,{command:"delete",divided:""},{default:m((()=>[R])),_:1})])),_:1})])),default:m((()=>[c(E,{size:"mini"},{default:m((()=>[U,j])),_:1})])),_:2},1032,["onCommand"])])),_:1})])),_:1},8,["data","onSortChange"]),[[oe,l.loading]]),c(ee,{"current-page":l.pagination.page,total:l.pagination.total,"page-size":l.pagination.size,"page-sizes":l.pagination.sizes,layout:l.pagination.layout,"hide-on-single-page":!1,class:"pagination",background:"",onCurrentChange:l.onCurrentChange,onSizeChange:l.onSizeChange},null,8,["current-page","total","page-size","page-sizes","layout","onCurrentChange","onSizeChange"])])),_:1}),["dialog","drawer"].includes(C.formMode)?(r(),g(te,{key:0,id:C.formModeProps.id,modelValue:C.formModeProps.visible,"onUpdate:modelValue":s[8]||(s[8]=e=>C.formModeProps.visible=e),mode:C.formMode,onSuccess:w.getDataList},null,8,["id","modelValue","mode","onSuccess"])):f("v-if",!0)])},x.__scopeId="data-v-301dcc9c";export{x as default};
