
/**
 * name: Fantastic-admin
 * homepage: https://hooray.gitee.io/fantastic-admin/
 */
    
import{_ as e}from"./index.c1f75aed.js";import{_ as a}from"./index.2beb756b.js";import{_ as t}from"./index.7203ffb0.js";import{_ as o}from"./index.29752973.js";import{p as l}from"./pagination.ed16acc9.js";import s from"./index.288c9da1.js";import{x as n,y as i,r,ae as d,o as c,z as m,i as u,w as h,G as p,B as g,D as f,h as b,J as _,I as w,A as C}from"./vendor.b5a7373b.js";import"./index.1bafa7e0.js";const x={name:"PagesExampleManagerList",components:{FormMode:s},mixins:[l],data:()=>({formMode:"router",formModeProps:{visible:!1,id:""},search:{account:"",name:"",mobile:"",sex:""},searchMore:!1,batch:{enable:!0,selectionDataList:[]},dataList:[]}),mounted(){this.getDataList(),"router"===this.formMode&&this.$eventBus.on("get-data-list",(()=>{this.getDataList()}))},beforeUnmount(){"router"===this.formMode&&this.$eventBus.off("get-data-list")},methods:{getDataList(){this.loading=!0;let e=this.getParams();this.search.account&&(e.account=this.search.account),this.search.name&&(e.name=this.search.name),this.search.mobile&&(e.mobile=this.search.mobile),""!=this.search.sex&&(e.sex=this.search.sex),this.$api.get("pages_example/manager/list",{baseURL:"/mock/",params:e}).then((e=>{this.loading=!1,this.dataList=e.data.list,this.pagination.total=e.data.total}))},onCreate(){"router"===this.formMode?this.$router.push({name:"pagesExampleGeneralManagerCreate"}):(this.formModeProps.id="",this.formModeProps.visible=!0)},onEdit(e){"router"===this.formMode?this.$router.push({name:"pagesExampleGeneralManagerEdit",params:{id:e.id}}):(this.formModeProps.id=e.id,this.formModeProps.visible=!0)},onChangeStatus(e,a){this.$confirm(`确认${e?"启用":"停用"}「${a.account}」吗？`,"确认信息").then((()=>{this.$api.post("pages_example/manager/change/status",{id:a.id,status:e},{baseURL:"/mock/"}).then((()=>{this.$message.success({message:`模拟${e?"启用":"停用"}成功`,center:!0})}))})).catch((()=>{a.status=!e}))},onResetPassword(e){this.$confirm(`确认将「${e.account}」的密码重置为 “123456” 吗？`,"确认信息").then((()=>{this.$api.post("pages_example/manager/password/reset",{id:e.id},{baseURL:"/mock/"}).then((()=>{this.$message.success({message:"模拟重置成功",center:!0})}))})).catch((()=>{}))},onDel(e){this.$confirm(`确认删除「${e.account}」管理员吗？`,"确认信息").then((()=>{this.$api.post("pages_example/manager/delete",{id:e.id},{baseURL:"/mock/"}).then((()=>{this.getDataList(),this.$message.success({message:"模拟删除成功",center:!0})}))})).catch((()=>{}))},handleMoreOperating(e,a){switch(e){case"resetPassword":this.onResetPassword(a);break;case"delete":this.onDel(a)}}}};n("data-v-a735b442");const y=w("新增管理员"),M=w("全部"),L=w("男"),k=w("女"),$=w("保密"),D=w("筛 选"),V=w("批量操作"),z=w("男"),v=w("女"),P=w("保密"),S=w("编辑"),U=w(" 更多操作"),j=C("i",{class:"el-icon-arrow-down el-icon--right"},null,-1),E=w("重置密码"),K=w("删除");i(),x.render=function(l,s,n,i,w,C){const x=e,R=r("el-button"),A=r("el-input"),B=r("el-form-item"),G=r("el-col"),F=r("el-row"),I=r("el-radio-button"),O=r("el-radio-group"),J=r("el-form"),N=a,T=t,q=r("el-table-column"),H=r("el-tag"),Q=r("el-switch"),W=r("el-dropdown-item"),X=r("el-dropdown-menu"),Y=r("el-dropdown"),Z=r("el-table"),ee=r("el-pagination"),ae=o,te=r("FormMode"),oe=d("loading");return c(),m("div",null,[u(x,{title:"管理员管理",content:"页面数据为 Mock 示例数据，非真实数据。"}),u(ae,null,{default:h((()=>[u(R,{type:"primary",icon:"el-icon-plus",onClick:C.onCreate},{default:h((()=>[y])),_:1},8,["onClick"]),u(N,{"show-more":"",onToggle:s[4]||(s[4]=e=>w.searchMore=e)},{default:h((()=>[u(J,{model:w.search,size:"small","label-width":"100px","label-suffix":"："},{default:h((()=>[u(F,null,{default:h((()=>[u(G,{md:8},{default:h((()=>[u(B,{label:"帐号"},{default:h((()=>[u(A,{modelValue:w.search.account,"onUpdate:modelValue":s[0]||(s[0]=e=>w.search.account=e),placeholder:"请输入帐号，支持模糊查询",clearable:"",onKeydown:p(C.getDataList,["enter"]),onClear:C.getDataList},null,8,["modelValue","onKeydown","onClear"])])),_:1})])),_:1}),u(G,{md:8},{default:h((()=>[u(B,{label:"姓名"},{default:h((()=>[u(A,{modelValue:w.search.name,"onUpdate:modelValue":s[1]||(s[1]=e=>w.search.name=e),placeholder:"请输入姓名，支持模糊查询",clearable:"",onKeydown:p(C.getDataList,["enter"]),onClear:C.getDataList},null,8,["modelValue","onKeydown","onClear"])])),_:1})])),_:1}),u(G,{md:8},{default:h((()=>[u(B,{label:"手机号"},{default:h((()=>[u(A,{modelValue:w.search.mobile,"onUpdate:modelValue":s[2]||(s[2]=e=>w.search.mobile=e),placeholder:"请输入手机号",clearable:"",onKeydown:p(C.getDataList,["enter"]),onClear:C.getDataList},null,8,["modelValue","onKeydown","onClear"])])),_:1})])),_:1})])),_:1}),g(u(F,null,{default:h((()=>[u(G,{md:8},{default:h((()=>[u(B,{label:"性别"},{default:h((()=>[u(O,{modelValue:w.search.sex,"onUpdate:modelValue":s[3]||(s[3]=e=>w.search.sex=e),onChange:C.getDataList},{default:h((()=>[u(I,{label:""},{default:h((()=>[M])),_:1}),u(I,{label:"1"},{default:h((()=>[L])),_:1}),u(I,{label:"0"},{default:h((()=>[k])),_:1}),u(I,{label:"2"},{default:h((()=>[$])),_:1})])),_:1},8,["modelValue","onChange"])])),_:1})])),_:1})])),_:1},512),[[f,w.searchMore]]),u(B,null,{default:h((()=>[u(R,{type:"primary",icon:"el-icon-search",onClick:C.getDataList},{default:h((()=>[D])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])])),_:1}),w.batch.enable?(c(),b(T,{key:0,data:w.dataList,"selection-data":w.batch.selectionDataList,onCheckAll:s[5]||(s[5]=e=>l.$refs.table.toggleAllSelection()),onCheckNull:s[6]||(s[6]=e=>l.$refs.table.clearSelection())},{default:h((()=>[u(R,{size:"small"},{default:h((()=>[V])),_:1})])),_:1},8,["data","selection-data"])):_("v-if",!0),g(u(Z,{ref:"table",class:"list-table",data:w.dataList,border:"",stripe:"","highlight-current-row":"",onSortChange:l.onSortChange,onSelectionChange:s[7]||(s[7]=e=>w.batch.selectionDataList=e)},{default:h((()=>[w.batch.enable?(c(),b(q,{key:0,type:"selection",align:"center",fixed:""})):_("v-if",!0),u(q,{prop:"account",sortable:"",label:"帐号"}),u(q,{prop:"name",label:"姓名",width:"100",align:"center"}),u(q,{prop:"sex",label:"性别",width:"100",align:"center"},{default:h((e=>[1==e.row.sex?(c(),b(H,{key:0,type:"success",size:"small"},{default:h((()=>[z])),_:1})):0==e.row.sex?(c(),b(H,{key:1,type:"warning",size:"small"},{default:h((()=>[v])),_:1})):(c(),b(H,{key:2,type:"info",size:"small"},{default:h((()=>[P])),_:1}))])),_:1}),u(q,{prop:"mobile",label:"手机号",width:"150",align:"center"}),u(q,{label:"状态",width:"100",align:"center"},{default:h((e=>[u(Q,{modelValue:e.row.status,"onUpdate:modelValue":a=>e.row.status=a,onChange:a=>C.onChangeStatus(a,e.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])])),_:1}),u(q,{label:"操作",width:"200",align:"center",fixed:"right"},{default:h((e=>[u(R,{type:"primary",size:"mini",plain:"",onClick:a=>C.onEdit(e.row)},{default:h((()=>[S])),_:2},1032,["onClick"]),u(Y,{onCommand:a=>C.handleMoreOperating(a,e.row)},{dropdown:h((()=>[u(X,null,{default:h((()=>[u(W,{command:"resetPassword"},{default:h((()=>[E])),_:1}),u(W,{command:"delete",divided:""},{default:h((()=>[K])),_:1})])),_:1})])),default:h((()=>[u(R,{size:"mini"},{default:h((()=>[U,j])),_:1})])),_:2},1032,["onCommand"])])),_:1})])),_:1},8,["data","onSortChange"]),[[oe,l.loading]]),u(ee,{"current-page":l.pagination.page,total:l.pagination.total,"page-size":l.pagination.size,"page-sizes":l.pagination.sizes,layout:l.pagination.layout,"hide-on-single-page":!1,class:"pagination",background:"",onCurrentChange:l.onCurrentChange,onSizeChange:l.onSizeChange},null,8,["current-page","total","page-size","page-sizes","layout","onCurrentChange","onSizeChange"])])),_:1}),["dialog","drawer"].includes(w.formMode)?(c(),b(te,{key:0,id:w.formModeProps.id,modelValue:w.formModeProps.visible,"onUpdate:modelValue":s[8]||(s[8]=e=>w.formModeProps.visible=e),mode:w.formMode,onSuccess:C.getDataList},null,8,["id","modelValue","mode","onSuccess"])):_("v-if",!0)])},x.__scopeId="data-v-a735b442";export{x as default};
