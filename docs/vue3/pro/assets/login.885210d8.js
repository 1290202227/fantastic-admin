
/**
 * 由 Fantastic-admin 提供技术支持
 * https://hooray.gitee.io/fantastic-admin/
 * Powered by Fantastic-admin
 * https://hooray.github.io/fantastic-admin/
 */
    
import{_ as e,a}from"./index.f57a1629.js";import{_ as o}from"./index.5a1a2157.js";import{r as t,l,H as s,s as r,n,I as i,J as d,K as p,m as c,L as m,M as u,O as g,P as h,Q as f,R as w,S as y}from"./vendor.e59ac5d6.js";import{s as _}from"./index.e7a764ff.js";import{_ as x}from"./plugin-vue_export-helper.5a098b48.js";const b={name:"Login",data:()=>({title:"Fantastic-admin 专业版",formType:"login",loginForm:{account:_.local.get("login_account"),password:"",remember:_.local.has("login_account")},loginRules:{account:[{required:!0,trigger:"blur",message:"请输入用户名"}],password:[{required:!0,trigger:"blur",message:"请输入密码"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}]},resetForm:{account:_.local.get("login_account"),captcha:"",newPassword:""},resetRules:{account:[{required:!0,trigger:"blur",message:"请输入用户名"}],captcha:[{required:!0,trigger:"blur",message:"请输入验证码"}],newPassword:[{required:!0,trigger:"blur",message:"请输入新密码"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}]},loading:!1,passwordType:"password",redirect:void 0}),watch:{$route:{handler:function(e){this.redirect=e.query&&e.query.redirect},immediate:!0}},methods:{showPassword(){this.passwordType="password"===this.passwordType?"":"password",this.$nextTick((()=>{this.$refs.password.focus()}))},handleLogin(){this.$refs.loginForm.validate((e=>{e&&(this.loading=!0,this.$store.dispatch("user/login",this.loginForm).then((()=>{this.loading=!1,this.loginForm.remember?_.local.set("login_account",this.loginForm.account):_.local.remove("login_account"),this.$router.push({path:this.redirect||"/"})})).catch((()=>{this.loading=!1})))}))},handleFind(){this.$message({message:"重置密码仅提供界面演示，无实际功能，需开发者自行扩展",type:"info"}),this.$refs.resetForm.validate((e=>{}))},testAccount(e){this.loginForm.account=e,this.loginForm.password="123456",this.handleLogin()}}},F=e=>(u("data-v-708565a9"),e=e(),g(),e),v=F((()=>i("div",{class:"bg-banner"},null,-1))),V=F((()=>i("i",{class:"ri-translate"},null,-1))),$={id:"login-box"},k=F((()=>i("div",{class:"login-banner"},null,-1))),C={class:"title-container"},T={class:"title"},P={class:"flex-bar"},q=y("记住我"),L=y("忘记密码"),U={style:{"margin-top":"20px","margin-bottom":"-10px",color:"#666","font-size":"14px","text-align":"center","font-weight":"bold"}},j=F((()=>i("span",{style:{"margin-right":"5px"}},"演示帐号一键登录：",-1))),R=y("admin"),z=y("test"),A=F((()=>i("div",{class:"title-container"},[i("h3",{class:"title"},"重置密码")],-1)));var K=x(b,[["render",function(u,g,_,x,b,F){const K=e,I=o,H=t("el-input"),J=t("el-form-item"),M=t("el-checkbox"),O=t("el-button"),Q=t("el-form"),S=t("el-col"),B=t("el-row"),D=a;return l(),s("div",null,[v,r(K,{class:"i18n-selector"},{default:n((()=>[V])),_:1}),i("div",$,[k,d(r(Q,{ref:"loginForm",model:b.loginForm,rules:b.loginRules,class:"login-form",autocomplete:"on","label-position":"left"},{default:n((()=>[i("div",C,[i("h3",T,h(b.title)+"管理后台",1)]),i("div",null,[r(J,{prop:"account"},{default:n((()=>[r(H,{ref:"name",modelValue:b.loginForm.account,"onUpdate:modelValue":g[0]||(g[0]=e=>b.loginForm.account=e),placeholder:u.$t("app.account"),type:"text",tabindex:"1",autocomplete:"on"},{prefix:n((()=>[r(I,{name:"user"})])),_:1},8,["modelValue","placeholder"])])),_:1}),r(J,{prop:"password"},{default:n((()=>[r(H,{ref:"password",modelValue:b.loginForm.password,"onUpdate:modelValue":g[1]||(g[1]=e=>b.loginForm.password=e),type:b.passwordType,placeholder:u.$t("app.password"),tabindex:"2",autocomplete:"on",onKeyup:f(F.handleLogin,["enter"])},{prefix:n((()=>[r(I,{name:"password"})])),suffix:n((()=>[r(I,{name:"password"===b.passwordType?"eye":"eye-open",onClick:F.showPassword},null,8,["name","onClick"])])),_:1},8,["modelValue","type","placeholder","onKeyup"])])),_:1})]),i("div",P,[r(M,{modelValue:b.loginForm.remember,"onUpdate:modelValue":g[2]||(g[2]=e=>b.loginForm.remember=e)},{default:n((()=>[q])),_:1},8,["modelValue"]),r(O,{type:"text",onClick:g[3]||(g[3]=e=>b.formType="reset")},{default:n((()=>[L])),_:1})]),r(O,{loading:b.loading,type:"primary",style:{width:"100%"},onClick:w(F.handleLogin,["prevent"])},{default:n((()=>[y(h(u.$t("app.login")),1)])),_:1},8,["loading","onClick"]),i("div",U,[j,r(O,{type:"danger",size:"mini",onClick:g[4]||(g[4]=e=>F.testAccount("admin"))},{default:n((()=>[R])),_:1}),r(O,{type:"danger",size:"mini",plain:"",onClick:g[5]||(g[5]=e=>F.testAccount("test"))},{default:n((()=>[z])),_:1})])])),_:1},8,["model","rules"]),[[p,"login"==b.formType]]),d(r(Q,{ref:"resetForm",model:b.resetForm,rules:b.resetRules,class:"login-form","auto-complete":"on","label-position":"left"},{default:n((()=>[A,i("div",null,[r(J,{prop:"account"},{default:n((()=>[r(H,{ref:"name",modelValue:b.resetForm.account,"onUpdate:modelValue":g[6]||(g[6]=e=>b.resetForm.account=e),placeholder:u.$t("app.account"),type:"text",tabindex:"1",autocomplete:"on"},{prefix:n((()=>[r(I,{name:"user"})])),_:1},8,["modelValue","placeholder"])])),_:1}),r(J,{prop:"captcha"},{default:n((()=>[r(H,{ref:"captcha",modelValue:b.resetForm.captcha,"onUpdate:modelValue":g[7]||(g[7]=e=>b.resetForm.captcha=e),placeholder:u.$t("app.captcha"),type:"text",tabindex:"2",autocomplete:"on"},{prefix:n((()=>[r(I,{name:"captcha"})])),append:n((()=>[r(O,null,{default:n((()=>[y(h(u.$t("app.sendCaptcha")),1)])),_:1})])),_:1},8,["modelValue","placeholder"])])),_:1}),r(J,{prop:"newPassword"},{default:n((()=>[r(H,{ref:"newPassword",modelValue:b.resetForm.newPassword,"onUpdate:modelValue":g[8]||(g[8]=e=>b.resetForm.newPassword=e),type:b.passwordType,placeholder:u.$t("app.newPassword"),tabindex:"3",autocomplete:"on"},{prefix:n((()=>[r(I,{name:"password"})])),suffix:n((()=>[r(I,{name:"password"===b.passwordType?"eye":"eye-open",onClick:F.showPassword},null,8,["name","onClick"])])),_:1},8,["modelValue","type","placeholder"])])),_:1})]),r(B,{gutter:15,style:{"padding-top":"20px"}},{default:n((()=>[r(S,{md:6},{default:n((()=>[r(O,{style:{width:"100%"},onClick:g[9]||(g[9]=e=>b.formType="login")},{default:n((()=>[y(h(u.$t("app.goLogin")),1)])),_:1})])),_:1}),r(S,{md:18},{default:n((()=>[r(O,{loading:b.loading,type:"primary",style:{width:"100%"},onClick:w(F.handleFind,["prevent"])},{default:n((()=>[y(h(u.$t("app.check")),1)])),_:1},8,["loading","onClick"])])),_:1})])),_:1})])),_:1},8,["model","rules"]),[[p,"reset"==b.formType]])]),u.$store.state.settings.showCopyright?(l(),c(D,{key:0})):m("v-if",!0)])}],["__scopeId","data-v-708565a9"]]);export{K as default};
