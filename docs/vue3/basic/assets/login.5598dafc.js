
/**
 * 由 Fantastic-admin 提供技术支持
 * https://hooray.gitee.io/fantastic-admin/
 * Powered by Fantastic-admin
 * https://hooray.github.io/fantastic-admin/
 */
    
import{_ as e}from"./index.3057af96.js";import{_ as o}from"./index.1605775f.js";import{r as a,a as t,n as l,q as r,s,v as n,t as i,x as d,c as m,y as p,A as c,B as u,C as g,D as f,F as h,G as w}from"./vendor.e08917c3.js";import{_ as y}from"./plugin-vue_export-helper.5a098b48.js";const _={name:"Login",data:()=>({title:"Fantastic-admin 基础版",formType:"login",loginForm:{account:localStorage.login_account||"",password:"",remember:!!localStorage.login_account},loginRules:{account:[{required:!0,trigger:"blur",message:"请输入用户名"}],password:[{required:!0,trigger:"blur",message:"请输入密码"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}]},resetForm:{account:localStorage.login_account||"",captcha:"",newPassword:""},resetRules:{account:[{required:!0,trigger:"blur",message:"请输入用户名"}],captcha:[{required:!0,trigger:"blur",message:"请输入验证码"}],newPassword:[{required:!0,trigger:"blur",message:"请输入新密码"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}]},loading:!1,passwordType:"password",redirect:void 0}),watch:{$route:{handler:function(e){this.redirect=e.query&&e.query.redirect},immediate:!0}},methods:{showPassword(){this.passwordType="password"===this.passwordType?"":"password",this.$nextTick((()=>{this.$refs.password.focus()}))},handleLogin(){this.$refs.loginForm.validate((e=>{e&&(this.loading=!0,this.$store.dispatch("user/login",this.loginForm).then((()=>{this.loading=!1,this.loginForm.remember?localStorage.setItem("login_account",this.loginForm.account):localStorage.removeItem("login_account"),this.$router.push({path:this.redirect||"/"})})).catch((()=>{this.loading=!1})))}))},handleFind(){this.$message({message:"重置密码仅提供界面演示，无实际功能，需开发者自行扩展",type:"info"}),this.$refs.resetForm.validate((e=>{}))},testAccount(e){this.loginForm.account=e,this.loginForm.password="123456",this.handleLogin()}}},x=e=>(c("data-v-7d76c0dc"),e=e(),u(),e),F=x((()=>r("div",{class:"bg-banner"},null,-1))),b={id:"login-box"},v=x((()=>r("div",{class:"login-banner"},null,-1))),V={class:"title-container"},k={class:"title"},C={class:"flex-bar"},T=w("记住我"),P=w("忘记密码"),$=w("登 录"),q={style:{"margin-top":"20px","margin-bottom":"-10px",color:"#666","font-size":"14px","text-align":"center","font-weight":"bold"}},U=x((()=>r("span",{style:{"margin-right":"5px"}},"演示帐号一键登录：",-1))),L=w("admin"),S=w("test"),j=x((()=>r("div",{class:"title-container"},[r("h3",{class:"title"},"重置密码")],-1))),A=w("发送验证码"),R=w("去登录"),z=w("确 认");var I=y(_,[["render",function(c,u,w,y,_,x){const I=e,K=a("el-input"),B=a("el-form-item"),D=a("el-checkbox"),G=a("el-button"),E=a("el-form"),H=a("el-col"),J=a("el-row"),M=o;return t(),l("div",null,[F,r("div",b,[v,s(i(E,{ref:"loginForm",model:_.loginForm,rules:_.loginRules,class:"login-form",autocomplete:"on","label-position":"left"},{default:d((()=>[r("div",V,[r("h3",k,g(_.title)+"管理后台",1)]),r("div",null,[i(B,{prop:"account"},{default:d((()=>[i(K,{ref:"name",modelValue:_.loginForm.account,"onUpdate:modelValue":u[0]||(u[0]=e=>_.loginForm.account=e),placeholder:"用户名",type:"text",tabindex:"1",autocomplete:"on"},{prefix:d((()=>[i(I,{name:"user"})])),_:1},8,["modelValue"])])),_:1}),i(B,{prop:"password"},{default:d((()=>[i(K,{ref:"password",modelValue:_.loginForm.password,"onUpdate:modelValue":u[1]||(u[1]=e=>_.loginForm.password=e),type:_.passwordType,placeholder:"密码",tabindex:"2",autocomplete:"on",onKeyup:f(x.handleLogin,["enter"])},{prefix:d((()=>[i(I,{name:"password"})])),suffix:d((()=>[i(I,{name:"password"===_.passwordType?"eye":"eye-open",onClick:x.showPassword},null,8,["name","onClick"])])),_:1},8,["modelValue","type","onKeyup"])])),_:1})]),r("div",C,[i(D,{modelValue:_.loginForm.remember,"onUpdate:modelValue":u[2]||(u[2]=e=>_.loginForm.remember=e)},{default:d((()=>[T])),_:1},8,["modelValue"]),i(G,{type:"text",onClick:u[3]||(u[3]=e=>_.formType="reset")},{default:d((()=>[P])),_:1})]),i(G,{loading:_.loading,type:"primary",style:{width:"100%"},onClick:h(x.handleLogin,["prevent"])},{default:d((()=>[$])),_:1},8,["loading","onClick"]),r("div",q,[U,i(G,{type:"danger",size:"mini",onClick:u[4]||(u[4]=e=>x.testAccount("admin"))},{default:d((()=>[L])),_:1}),i(G,{type:"danger",size:"mini",plain:"",onClick:u[5]||(u[5]=e=>x.testAccount("test"))},{default:d((()=>[S])),_:1})])])),_:1},8,["model","rules"]),[[n,"login"==_.formType]]),s(i(E,{ref:"resetForm",model:_.resetForm,rules:_.resetRules,class:"login-form","auto-complete":"on","label-position":"left"},{default:d((()=>[j,r("div",null,[i(B,{prop:"account"},{default:d((()=>[i(K,{ref:"name",modelValue:_.resetForm.account,"onUpdate:modelValue":u[6]||(u[6]=e=>_.resetForm.account=e),placeholder:"用户名",type:"text",tabindex:"1",autocomplete:"on"},{prefix:d((()=>[i(I,{name:"user"})])),_:1},8,["modelValue"])])),_:1}),i(B,{prop:"captcha"},{default:d((()=>[i(K,{ref:"captcha",modelValue:_.resetForm.captcha,"onUpdate:modelValue":u[7]||(u[7]=e=>_.resetForm.captcha=e),placeholder:"验证码",type:"text",tabindex:"2",autocomplete:"on"},{prefix:d((()=>[i(I,{name:"captcha"})])),append:d((()=>[i(G,null,{default:d((()=>[A])),_:1})])),_:1},8,["modelValue"])])),_:1}),i(B,{prop:"newPassword"},{default:d((()=>[i(K,{ref:"newPassword",modelValue:_.resetForm.newPassword,"onUpdate:modelValue":u[8]||(u[8]=e=>_.resetForm.newPassword=e),type:_.passwordType,placeholder:"新密码",tabindex:"3",autocomplete:"on"},{prefix:d((()=>[i(I,{name:"password"})])),suffix:d((()=>[i(I,{name:"password"===_.passwordType?"eye":"eye-open",onClick:x.showPassword},null,8,["name","onClick"])])),_:1},8,["modelValue","type"])])),_:1})]),i(J,{gutter:15,style:{"padding-top":"20px"}},{default:d((()=>[i(H,{md:6},{default:d((()=>[i(G,{style:{width:"100%"},onClick:u[9]||(u[9]=e=>_.formType="login")},{default:d((()=>[R])),_:1})])),_:1}),i(H,{md:18},{default:d((()=>[i(G,{loading:_.loading,type:"primary",style:{width:"100%"},onClick:h(x.handleFind,["prevent"])},{default:d((()=>[z])),_:1},8,["loading","onClick"])])),_:1})])),_:1})])),_:1},8,["model","rules"]),[[n,"reset"==_.formType]])]),c.$store.state.settings.showCopyright?(t(),m(M,{key:0})):p("v-if",!0)])}],["__scopeId","data-v-7d76c0dc"]]);export{I as default};
