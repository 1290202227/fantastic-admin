
/**
 * 由 Fantastic-admin 提供技术支持
 * https://hooray.gitee.io/fantastic-admin/
 * Powered by Fantastic-admin
 * https://hooray.github.io/fantastic-admin/
 */
    
import{_ as e}from"./index.afd122f8.js";import{_ as r}from"./index.2f66b5c7.js";import{_ as s}from"./index.319d6c02.js";import{_ as o}from"./plugin-vue_export-helper.5a098b48.js";import{r as l,a,n as d,t,x as u,F as p}from"./vendor.8d92a282.js";const m={data(){return{form:{password:"",newpassword:"",checkpassword:""},rules:{password:[{required:!0,message:"请输入原密码",trigger:"blur"}],newpassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}],checkpassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{validator:(e,r,s)=>{r!==this.form.newpassword?s(new Error("请确认新密码")):s()}}]}}},methods:{onSubmit(){this.$refs.form.validate((e=>{e&&this.$store.dispatch("user/editPassword",this.form).then((()=>{this.$message({type:"success",message:"修改成功，请重新登录"}),this.$store.dispatch("user/logout").then((()=>{this.$router.push("/login")}))})).catch((()=>{}))}))}}},n=p("提交");var i=o(m,[["render",function(o,p,m,i,f,w){const c=e,h=l("el-input"),g=l("el-form-item"),_=l("el-form"),b=l("el-col"),V=l("el-row"),x=r,k=l("el-button"),v=s;return a(),d("div",null,[t(c,{title:"修改密码",content:"定期修改密码可以提高帐号安全性噢~"}),t(x,null,{default:u((()=>[t(V,null,{default:u((()=>[t(b,{md:24,lg:12},{default:u((()=>[t(_,{ref:"form",model:f.form,rules:f.rules,"label-width":"120px"},{default:u((()=>[t(g,{label:"原密码",prop:"password"},{default:u((()=>[t(h,{modelValue:f.form.password,"onUpdate:modelValue":p[0]||(p[0]=e=>f.form.password=e),type:"password",placeholder:"请输入原密码"},null,8,["modelValue"])])),_:1}),t(g,{label:"新密码",prop:"newpassword"},{default:u((()=>[t(h,{modelValue:f.form.newpassword,"onUpdate:modelValue":p[1]||(p[1]=e=>f.form.newpassword=e),type:"password",placeholder:"请输入原密码"},null,8,["modelValue"])])),_:1}),t(g,{label:"确认新密码",prop:"checkpassword"},{default:u((()=>[t(h,{modelValue:f.form.checkpassword,"onUpdate:modelValue":p[2]||(p[2]=e=>f.form.checkpassword=e),type:"password",placeholder:"请输入原密码"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1})])),_:1})])),_:1}),t(v,null,{default:u((()=>[t(k,{type:"primary",onClick:w.onSubmit},{default:u((()=>[n])),_:1},8,["onClick"])])),_:1})])}]]);export{i as default};
