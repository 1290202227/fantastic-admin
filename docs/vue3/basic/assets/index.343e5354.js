
/**
 * 由 Fantastic-admin 提供技术支持
 * https://hooray.gitee.io/fantastic-admin/
 * Powered by Fantastic-admin
 * https://hooray.github.io/fantastic-admin/
 */
    
import{v as N,r as l,a as r,x as f,C as i,D as u,c as v,S as h,y as n,I as y,A as I,B as O,J as w,K as M,L as D,P as L}from"./vendor.62ab41f5.js";import{_ as U}from"./plugin-vue_export-helper.5a098b48.js";const A=e=>(M("data-v-1e5fe4b2"),e=e(),D(),e),E={class:"upload-container"},P=A(()=>n("div",{class:"image-slot"},[n("i",{class:"el-icon-plus"})],-1)),R={key:1,class:"image"},q={class:"mask"},J={class:"actions"},K=["onClick"],T=["onClick"],F={key:0,class:"el-upload__tip"},G={style:{display:"inline-block"}},H={props:{action:{type:String,required:!0},headers:{type:Object,default:()=>{}},data:{type:Object,default:()=>{}},name:{type:String,default:"file"},url:{type:String,default:""},size:{type:Number,default:2},width:{type:Number,default:150},height:{type:Number,default:150},placeholder:{type:String,default:""},notip:{type:Boolean,default:!1},ext:{type:Array,default:()=>["jpg","png","gif","bmp"]}},emits:["update:url","on-success"],setup(e,{emit:g}){const d=e,{proxy:m}=L(),t=N({imageViewerVisible:!1,progress:{preview:"",percent:0}});function _(){t.value.imageViewerVisible=!0}function x(){t.value.imageViewerVisible=!1}function b(){g("update:url","")}function $(s){const p=s.name.split("."),o=p[p.length-1],c=d.ext.indexOf(o)>=0,a=s.size/1024/1024<d.size;return c||m.$message.error(`\u4E0A\u4F20\u56FE\u7247\u53EA\u652F\u6301 ${d.ext.join(" / ")} \u683C\u5F0F\uFF01`),a||m.$message.error(`\u4E0A\u4F20\u56FE\u7247\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7 ${d.size}MB\uFF01`),c&&a&&(t.value.progress.preview=URL.createObjectURL(s)),c&&a}function k(s){t.value.progress.percent=~~s.percent}function S(s){t.value.progress.preview="",t.value.progress.percent=0,g("on-success",s)}return(s,p)=>{const o=l("el-image"),c=l("el-icon-zoom-in"),a=l("el-icon"),C=l("el-icon-delete"),V=l("el-progress"),z=l("el-upload"),j=l("el-alert"),B=l("el-image-viewer");return r(),f("div",E,[i(z,{"show-file-list":!1,headers:e.headers,action:e.action,data:e.data,name:e.name,"before-upload":$,"on-progress":k,"on-success":S,drag:""},{default:u(()=>[e.url===""?(r(),v(o,{key:0,src:e.url===""?e.placeholder:e.url,style:h(`width:${e.width}px;height:${e.height}px;`),fit:"fill"},{error:u(()=>[P]),_:1},8,["src","style"])):(r(),f("div",R,[i(o,{src:e.url,style:h(`width:${e.width}px;height:${e.height}px;`),fit:"fill"},null,8,["src","style"]),n("div",q,[n("div",J,[n("span",{title:"\u9884\u89C8",onClick:y(_,["stop"])},[i(a,null,{default:u(()=>[i(c)]),_:1})],8,K),n("span",{title:"\u79FB\u9664",onClick:y(b,["stop"])},[i(a,null,{default:u(()=>[i(C)]),_:1})],8,T)])])])),I(n("div",{class:"progress",style:h(`width:${e.width}px;height:${e.height}px;`)},[i(o,{src:t.value.progress.preview,style:h(`width:${e.width}px;height:${e.height}px;`),fit:"fill"},null,8,["src","style"]),i(V,{type:"circle",width:Math.min(e.width,e.height)*.8,percentage:t.value.progress.percent},null,8,["width","percentage"])],4),[[O,e.url===""&&t.value.progress.percent]])]),_:1},8,["headers","action","data","name"]),e.notip?w("v-if",!0):(r(),f("div",F,[n("div",G,[i(j,{title:`\u4E0A\u4F20\u56FE\u7247\u652F\u6301 ${e.ext.join(" / ")} \u683C\u5F0F\uFF0C\u4E14\u56FE\u7247\u5927\u5C0F\u4E0D\u8D85\u8FC7 ${e.size}MB\uFF0C\u5EFA\u8BAE\u56FE\u7247\u5C3A\u5BF8\u4E3A ${e.width}*${e.height}`,type:"info","show-icon":"",closable:!1},null,8,["title"])])])),t.value.imageViewerVisible?(r(),v(B,{key:1,"url-list":[e.url],onClose:x},null,8,["url-list"])):w("v-if",!0)])}}};var X=U(H,[["__scopeId","data-v-1e5fe4b2"]]);export{X as _};
