import{r as a,o as s,c as n,a as t,b as o,w as e,F as c,d as p,e as u}from"./app.56d16476.js";const l={},i={id:"私有-storage-数据",tabindex:"-1"},r=t("a",{class:"header-anchor",href:"#私有-storage-数据","aria-hidden":"true"},"#",-1),k=p(" 私有 Storage 数据 "),g=u('<p>由于 localStorage 和 sessionStorage 的同源策略，同一域名下的 storage 数据会共享。如果你恰好需要在同一域名下部署两套(及以上)系统，不可避免会出现 storage 数据冲突，框架提供了一个 storage 类来解决这个问题。</p><p>解决同源 storage 数据冲突的方式就是增加前缀区分，首先需要在框架配置里设置，这里需要你设置一个唯一且不重名的前缀。</p><div class="language-javascript ext-js"><pre class="language-javascript"><code>storagePrefix<span class="token operator">:</span> <span class="token string">&#39;fa_&#39;</span>\n</code></pre></div><p>然后在需要使用到 storage 的地方引入：</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">import</span> storage <span class="token keyword">from</span> <span class="token string">&#39;@/util/storage&#39;</span>\n</code></pre></div><p>这个类封装了 <code>setItem()</code> ，<code>getItem()</code> ，<code>removeItem()</code> ，<code>clear()</code> 方法，同时还增加了一个 <code>has()</code> 方法用来判断对象是否存在：</p>',6),d=t("div",{class:"language-javascript ext-js"},[t("pre",{class:"language-javascript"},[t("code",null,[p("storage"),t("span",{class:"token punctuation"},"."),p("local"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"has"),t("span",{class:"token punctuation"},"("),p("key"),t("span",{class:"token punctuation"},")"),p("\nstorage"),t("span",{class:"token punctuation"},"."),p("local"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"get"),t("span",{class:"token punctuation"},"("),p("key"),t("span",{class:"token punctuation"},")"),p("\nstorage"),t("span",{class:"token punctuation"},"."),p("local"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"set"),t("span",{class:"token punctuation"},"("),p("key"),t("span",{class:"token punctuation"},","),p(" value"),t("span",{class:"token punctuation"},")"),p("\nstorage"),t("span",{class:"token punctuation"},"."),p("local"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"remove"),t("span",{class:"token punctuation"},"("),p("key"),t("span",{class:"token punctuation"},")"),p("\nstorage"),t("span",{class:"token punctuation"},"."),p("local"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"clear"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),p("\n")])])],-1),v=t("div",{class:"language-javascript ext-js"},[t("pre",{class:"language-javascript"},[t("code",null,[p("storage"),t("span",{class:"token punctuation"},"."),p("session"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"has"),t("span",{class:"token punctuation"},"("),p("key"),t("span",{class:"token punctuation"},")"),p("\nstorage"),t("span",{class:"token punctuation"},"."),p("session"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"get"),t("span",{class:"token punctuation"},"("),p("key"),t("span",{class:"token punctuation"},")"),p("\nstorage"),t("span",{class:"token punctuation"},"."),p("session"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"set"),t("span",{class:"token punctuation"},"("),p("key"),t("span",{class:"token punctuation"},","),p(" value"),t("span",{class:"token punctuation"},")"),p("\nstorage"),t("span",{class:"token punctuation"},"."),p("session"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"remove"),t("span",{class:"token punctuation"},"("),p("key"),t("span",{class:"token punctuation"},")"),p("\nstorage"),t("span",{class:"token punctuation"},"."),p("session"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"clear"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),p("\n")])])],-1),f=t("div",{class:"custom-container warning"},[t("p",{class:"custom-container-title"},"注意"),t("p",null,"由于 localStorage 有容量上限，一般为 5M ，如果一同域名下部署两套系统，意味着两套系统共享 5M 容量，所以不建议在同一域名部署太多套系统，避免出现 localStorage 不够用的情况。")],-1);l.render=function(p,u){const l=a("Badge"),j=a("CodeGroupItem"),m=a("CodeGroup");return s(),n(c,null,[t("h1",i,[r,k,o(l,{type:"tip",text:"专业版",vertical:"top"})]),g,o(m,null,{default:e((()=>[o(j,{title:"localStorage"},{default:e((()=>[d])),_:1}),o(j,{title:"sessionStorage"},{default:e((()=>[v])),_:1})])),_:1}),f],64)};export{l as default};
