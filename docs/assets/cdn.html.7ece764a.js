import{r as s,o as n,c as a,a as e,b as p,F as o,d as l,e as c}from"./app.9c82124c.js";const t={},r=l('<h1 id="cdn-支持" tabindex="-1"><a class="header-anchor" href="#cdn-支持" aria-hidden="true">#</a> CDN 支持</h1><p>开启 CDN 的好处在于，项目中引用的一些第三方库不会打包进项目内，从而减小打包出的文件体积，同时借用 CDN 的优势，大大提高项目加载速度。</p><p>CDN 支持默认不开启，如果需要开启，则在 <code>.env.production</code> 生产环境配置文件中修改：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>VUE_APP_CDN = ON\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>CDN 配置文件存放在项目根目录下的 <code>dependencies.cdn.js</code> 文件里，可按照标准格式自行扩展配置。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">{</span>\n    name<span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>\n    library<span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>\n    js<span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>\n    css<span class="token operator">:</span> <span class="token string">&#39;&#39;</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>其中 <code>name</code> 和 <code>library</code> 最终会转成 webpack 中 externals 的配置项， <code>name</code> 是引入的包名， <code>library</code> 是全局变量。</p><p>设置好并开启后，原先文件中通过 <code>import</code> 进行引入的包，就不需要引入了，代码可以删掉，但是删掉会触发 ESLint 的错误提示，例如：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// import Vue from &#39;vue&#39;</span>\n\n<span class="token keyword">import</span> api <span class="token keyword">from</span> <span class="token string">&#39;./api&#39;</span>\n<span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$api <span class="token operator">=</span> api <span class="token comment">// 这行代码会提示 &#39;Vue&#39; is not defined.</span>\n</code></pre><div class="highlight-lines"><br><br><br><div class="highlight-line"> </div></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>解决这个问题就需要在 <code>.eslintrc.js</code> 文件中对 <code>globals</code> 对象增加 <code>Vue</code> 的属性。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>globals<span class="token operator">:</span> <span class="token punctuation">{</span>\n\tprocess<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n\trequire<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n\tmodule<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n\tVue<span class="token operator">:</span> <span class="token boolean">true</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="highlight-lines"><br><br><br><br><div class="highlight-line"> </div><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div>',11),i={class:"custom-container tip"},u=e("p",{class:"custom-container-title"},"注意",-1),d=e("li",null,"如果只在生产环境开启 CDN 支持，请确保第三方库的 CDN 版本与本地依赖包的版本一致，以免出现开发环境是正常的，但生产环境缺不行的情况，也就是因为版本不同造成的 bug",-1),b=c("开发环境开启 CDN 支持后会导致 "),m={href:"https://chrome.google.com/webstore/detail/vuejs-devtools/nhdogjmejiglipccpnnnanhbledajbpd",target:"_blank",rel:"noopener noreferrer"},k=c("Vue.js devtools"),g=c(" 无法使用，所以不建议开发环境开启");t.render=function(l,c){const t=s("OutboundLink");return n(),a(o,null,[r,e("div",i,[u,e("ol",null,[d,e("li",null,[b,e("a",m,[k,p(t)]),g])])])],64)};export{t as default};
